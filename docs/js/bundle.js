(()=>{"use strict";var t={67:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QueueUpdateOrder=e.untilRenderComplete=e.onRenderComplete=e.enqueueUpdatableInOrder=void 0;var n=i(6500);Object.defineProperty(e,"enqueueUpdatableInOrder",{enumerable:!0,get:function(){return n.enqueueUpdatableInOrder}}),Object.defineProperty(e,"onRenderComplete",{enumerable:!0,get:function(){return n.onRenderComplete}}),Object.defineProperty(e,"untilRenderComplete",{enumerable:!0,get:function(){return n.untilRenderComplete}});var o=i(8894);Object.defineProperty(e,"QueueUpdateOrder",{enumerable:!0,get:function(){return o.QueueUpdateOrder}})},135:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRenderedAsComponent=e.renderUpdatable=e.render=void 0;const n=i(4511),o=i(9856),r=i(2951),s=i(6171);e.render=function(t,e=null){return t instanceof r.DirectiveResult&&(t=n.html`${t}`),new n.Template(t,e)},e.renderUpdatable=function(t,e=null,i){let o,a=(e||s.GlobalWatcherGroup).watchImmediately(t,(t=>{t instanceof r.DirectiveResult&&(t=n.html`${t}`),o?(o.patch(t),i&&i()):o=new n.Template(t,e)}));return{template:o,unwatch:a}},e.getRenderedAsComponent=function(t){let e=t.getFirstElement();return e&&e.localName.includes("-")?(0,o.createComponent)(e):null}},236:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.icons=void 0;const n=i(8802),o=i(424),r=i(825),s=i(6228),a=i(3675),l=i(3719),h=i(6917),d=i(8129),c=i(8109),u=i(4181),p=i(3635),m=i(8663),g=i(1323),f=i(374),y=i(9213),x=i(5053),w=i(9857),v=i(7826),b=i(3343),k=i(2818),C=i(4676),S=i(3959),T=i(9306);e.icons=new class{constructor(){this.map=new Map}getAllIds(){return this.map.keys()}add(...t){for(let{id:e,code:i}of t)this.map.set(e,i)}get(t){return this.map.get(t)}delete(t){return this.map.delete(t)}},e.icons.add(n.default,o.default,r.default,s.default,a.default,l.default,h.default,d.default,c.default,u.default,p.default,m.default,g.default,f.default,y.default,x.default,w.default,v.default,b.default,k.default,C.default,S.default,T.default)},267:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.ClassNameBinding=void 0;const o=i(356),r=i(1106);let s=e.ClassNameBinding=class{constructor(t,e,i){if(this.lastClassNames=[],i){if(i.length>1)throw new Error(`Modifier "${i.join(".")}" is not allowed, at most one modifier as class name can be specified for ":class"!`);if(!/^\$?[\w-]+$/.test(i[0]))throw new Error(`Modifier "${i[0]}" is not a valid class name!`)}this.el=t,this.modifiers=i,this.scopeName=(null==e?void 0:e.el.localName)||"",this.scopedClassNames=this.scopeName?(0,r.getScopedClassNames)(this.scopeName):void 0}update(t){let e=[];t&&(e=this.parseClass(t));for(let t of this.lastClassNames)e.includes(t)||this.el.classList.remove(t);for(let t of e)this.lastClassNames.includes(t)||this.el.classList.add(t);this.lastClassNames=e}parseClass(t){let e={};if(this.modifiers)t&&(e[this.modifiers[0]]=!0);else if(Array.isArray(t))for(let i of t)e[i]=!0;else if(t&&"object"==typeof t)for(let i of Object.keys(t))e[i]=!!t[i];else if("string"==typeof t)for(let i of t.split(/\s+/))i&&(e[i]=!0);let i=[];for(let t in e)e[t]&&(this.scopedClassNames&&this.scopedClassNames.has(t)&&(t=t+"__"+this.scopeName),i.push(t));return i}remove(){this.lastClassNames&&this.el.classList.remove(...this.lastClassNames)}};e.ClassNameBinding=s=n([(0,o.defineBinding)("class")],s)},356:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refBinding=e.BindingReferences=e.BindingResult=e.defineBinding=void 0;const n=i(6219),o=new Map;e.defineBinding=function t(e,i){return o.has(e)&&console.warn(`You are trying to overwrite binding definition "${e}"`),i?(o.set(e,i),function(...t){return new r(e,...t)}):i=>t(e,i)};class r{constructor(t,...e){this.name=t,this.args=e}}e.BindingResult=r;class s extends n.ResultReferences{createFromResult(t,e,i,n){let r=o.get(i.name);if(!r)throw new Error(`":${i.name}" on "<${t.localName}>" is not a registered binding class!`);let s=new r(t,e,n);return this.createReference(i,s),s.update(...i.args),s}}e.BindingReferences=new s,e.refBinding=function(t,i,n){return e.BindingReferences.addReference(t,i),n&&e.BindingReferences.addUnReference(t,n),t}},374:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"radio-checked",code:'<svg viewBox="0 0 17 17"><circle style="fill:none;stroke:currentColor;" cx="8.5" cy="8.5" r="8"/><circle style="fill-rule:evenodd;clip-rule:evenodd;fill:currentColor; stroke:none;" cx="8.5" cy="8.5" r="3.5"/></svg>'}},424:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"checkbox-indeterminate",code:'<svg viewBox="0 0 17 17"><path style="fill:currentColor; stroke:none;" d="M3.6,0h9.8c2,0,3.6,1.6,3.6,3.6v9.8c0,2-1.6,3.6-3.6,3.6H3.6c-2,0-3.6-1.6-3.6-3.6V3.6C0,1.6,1.6,0,3.6,0z"/><path style="fill:none;stroke:#FFFFFF;stroke-linecap:square;" d="M4.4,8.5h8.1"/></svg>'}},453:function(t,e,i){var n,o=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;const r=i(1416),s=i(8240);let a=n=class extends r.Component{constructor(){super(...arguments),this.size="medium",this.asCover=!1,this.speed=.6}static style(){let{mainColor:t,backgroundColor:e}=s.theme;return r.css`
		:host{
			display: inline-block;
			vertical-align: top;
			color: ${t};
		}

		.as-cover{
			position: absolute;
			left: 0;
			top: 0;
			right: 0;
			bottom: 0;
			z-index: 10;
			background: ${e.alpha(.9)};
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			text-align: center;
		}

		svg{
			margin: auto;
		}

		path{
			stroke: currentColor;
			fill: none;
			stroke-linecap: square;
		}

		.bg{
			stroke-opacity: 0.3;
		}
		`}render(){let t=this.getStrokeWidth(),e=t/2,i=n.sizes[this.size],o=`M${e} ${e} H${i-e} V${i-e} H${e}Z`,s=`${i-t} ${3*(i-t)}`;return r.html`
			<template
				:class="size-${this.size}"
				:class.as-cover=${this.asCover}
				:style.width.px=${i}
				:style.height.px=${i}
				:style.animation="loader-snake-${this.size} 2s linear infinite"
			>
				<svg viewBox="0 0 ${i} ${i}" width=${i} height=${i}>
					<path class="bg" d=${o} style="stroke-width: ${t}" />
					<path :refElement="snake" d=${o} style="stroke-width: ${t}; stroke-dasharray: ${s};" />
				</svg>
			</template>
		`}getStrokeWidth(){return n.strokeWidths[this.size]}onReady(){let t=this.getStrokeWidth(),e=n.sizes[this.size];this.refElements.snake.animate([{strokeDashoffset:0},{strokeDashoffset:4*-(e-t)}],{duration:1e3/this.speed,iterations:1/0})}};a.sizes={small:18,medium:28,large:48},a.strokeWidths={small:3,medium:4,large:5},a=n=o([(0,r.define)("f-loader")],a),e.Loader=a},511:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Tooltip=void 0;const o=i(1416),r=i(8240),s=i(9782);let a=class extends s.Popup{constructor(){super(...arguments),this.type="default"}static style(){let{adjust:t,adjustFontSize:e,popupBackgroundColor:i,textColor:n,errorColor:s}=r.theme,a=[["default",i],["prompt",n.toMiddle(30)],["error",s.toMiddle(5)]];return o.css`
		:host{
			display: flex;
			font-size: ${e(13)}px;
			max-width: ${t(220)}px;
			padding: ${t(4)}px ${t(8)}px;
			line-height: ${t(20)}px;
		}

		.text{
			flex: 1;
			min-width: 0;
		}

		.close{
			display: flex;
			width: ${t(28)}px;
			height: ${t(28)}px;
			margin-top: ${t(-4)}px;
			margin-bottom: ${t(-4)}px;
			margin-right: ${t(-8)}px;
			cursor: pointer;

			&:active{
				transform: translateY(1px);
			}

			f-icon{
				margin: auto;
			}
		}

		${a.map((([t,e])=>{let i=e.getLightness()>.5?"#000":"#fff";return o.css`
			.type-${t}{
				background: ${e};
				color: ${i};

				.triangle{
					border-bottom-color: ${e};

					&-herizontal{
						border-right-color: ${e};
						border-bottom-color: transparent;
					}
				}
			}
			`}))}

		.type-prompt{
			pointer-events: auto;
		}

		`.extends(super.style())}render(){return o.html`
			<template class="type-${this.type}">
				<div class="text">
					<slot />
				</div>

				${"prompt"===this.type?o.html`
					<div class="close" @click=${this.close}>
						<f-icon .type="close" />
					</div>
				`:""}
			</template>
		`.extends(super.render())}};a=n([(0,o.define)("f-tooltip")],a),e.Tooltip=a},521:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RepetitiveTemplate=void 0;const n=i(4511),o=i(6171);e.RepetitiveTemplate=class{constructor(t,e,i){this.source=t,this.item=e,this.index=i;let r=t.getContext();this.watcher=new o.LazyWatcher(this.getTemplateResult.bind(this),this.onUpdateTemplateResult.bind(this),r),this.template=new n.Template(this.watcher.value,r),this.getWatcherGroup().add(this.watcher)}getWatcherGroup(){let t=this.source.getContext();return(null==t?void 0:t.__getWatcherGroup())||o.GlobalWatcherGroup}getTemplateResult(){return this.source.getTemplateFn()(this.item,this.index)}onUpdateTemplateResult(t){if(this.template.canPatchBy(t))this.template.patch(t);else{let e=this.source.getContext(),i=new n.Template(t,e);this.template.replaceWith(i),this.template=i}}update(t,e){this.item=t,this.index=e,this.watcher.update()}remove(){this.disconnect(),this.template.remove()}disconnect(){this.getWatcherGroup().delete(this.watcher)}connect(){this.getWatcherGroup().add(this.watcher)}}},557:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.DisabledBinding=e.EnableBinding=void 0;const o=i(356);let r=e.EnableBinding=class{constructor(t){this.el=t}update(t){t?this.el.removeAttribute("disabled"):this.el.setAttribute("disabled","")}remove(){this.el.removeAttribute("disabled")}};e.EnableBinding=r=n([(0,o.defineBinding)("enable")],r);let s=e.DisabledBinding=class{constructor(t){this.el=t}update(t){t?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}remove(){this.el.removeAttribute("disabled")}};e.DisabledBinding=s=n([(0,o.defineBinding)("disable")],s)},589:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createComponent=e.define=void 0;const n=i(1680),o=i(8231),r=i(967),s=i(3393),a=new Map;e.define=function t(e,i){if(!e.includes("-"))throw new Error(`"${e}" can't be defined as custom element, a custom element name must contain "-"!`);return i?(function(t,e){a.has(t)&&console.warn(`You are trying to overwrite component definition "${t}"!`),a.set(t,e)}(e,i),void(0,n.defineCustomElement)(e)):function(i){t(e,i)}},e.createComponent=function(t){let e=(i=t.localName,a.get(i));var i;(0,s.ensureComponentStyle)(e,t.localName);let n=new e(t);return(0,o.setElementComponentMap)(n.el,n),(0,r.emitComponentCreatedCallbacks)(n.el,n),n.__emitCreated(),n}},632:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OffsetChildren=void 0,e.OffsetChildren=class{constructor(t,e){this.parent=t,this.offset=e}getChildren(){return[...this.parent.children].slice(this.offset)}childAt(t){return this.parent.children[this.offset+t]}}},688:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodePart=void 0;const n=i(2855),o=i(5145),r=i(2951),s=i(4479);var a;!function(t){t[t.Template=0]="Template",t[t.TemplateArray=1]="TemplateArray",t[t.Directive=2]="Directive",t[t.Text=3]="Text"}(a||(a={})),e.NodePart=class{constructor(t,e){this.contentType=null,this.content=null,this.anchor=t,this.context=e}update(t){let e=this.recognizeContentType(t);switch(e!==this.contentType&&null!==this.contentType&&this.clearOldContent(),this.contentType=e,e){case a.Template:this.updateTemplate(t);break;case a.Directive:this.updateDirective(t);break;case a.TemplateArray:this.updateTemplateArray(t);break;case a.Text:this.updateText(t)}}recognizeContentType(t){return t instanceof n.TemplateResult?a.Template:t instanceof r.DirectiveResult?a.Directive:Array.isArray(t)?a.TemplateArray:a.Text}clearOldContent(){let t=this.contentType;if(t===a.Template)this.content.remove();else if(t===a.Directive)this.content.remove(),r.DirectiveReferences.removeReference(this.content);else if(t===a.TemplateArray)for(let t of this.content)t.remove();else t===a.Text&&this.content&&this.content.remove();this.content=null}updateTemplate(t){let e=this.content;if(e&&e.canPatchBy(t))e.patch(t);else{e&&e.remove();let i=new o.Template(t,this.context);this.anchor.insert(i.extractToFragment()),this.content=i}}updateDirective(t){let e=this.content;e&&e.canPatchBy(...t.args)?e.patch(...t.args):(e&&e.remove(),this.content=r.DirectiveReferences.createFromResult(this.anchor,this.context,t))}updateTemplateArray(t){let e=this.content;e||(e=this.content=[]),t=t.filter((t=>t instanceof n.TemplateResult));for(let i=0;i<t.length;i++){let n=i<e.length?e[i]:null,r=t[i];if(null==n?void 0:n.canPatchBy(r))n.patch(r);else{let t=new o.Template(r,this.context);n?n.replaceWith(t):this.anchor.insert(t.extractToFragment()),e[i]=t}}if(t.length<e.length)for(let i=e.length-1;i>=t.length;i--)e.pop().remove()}updateText(t){let e=this.content,i=null==t?"":(0,s.trim)(String(t));i?e?e.textContent=i:(e=document.createTextNode(i),this.anchor.insert(e),this.content=e):e&&(e.textContent="")}}},757:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),i(6725),o(i(8038),e),o(i(7388),e),o(i(5956),e),o(i(9184),e),o(i(5845),e),o(i(2151),e),o(i(3549),e),o(i(5429),e),o(i(7340),e),o(i(6218),e),o(i(8384),e),o(i(5969),e)},825:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"checkbox-unchecked",code:'<svg viewBox="0 0 17 17"><path style="fill:none;stroke:currentColor;" d="M4.1,0.5H13c2,0,3.6,1.6,3.6,3.6V13c0,2-1.6,3.6-3.6,3.6H4.1c-2,0-3.6-1.6-3.6-3.6V4.1C0.5,2.1,2.1,0.5,4.1,0.5z"/></svg>'}},845:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;const o=i(1416),r=i(8240),s=i(9782);let a=class extends s.Popup{constructor(){super(...arguments),this.title="",this.defaultPopupOptions={alignPosition:"bc",fixTriangle:!0}}static style(){let{adjust:t,adjustFontSize:e,textColor:i}=r.theme;return o.css`
		:host{
			min-width: ${t(180)}px;
			max-width: ${t(320)}px;

			f-list{
				padding: ${t(8)}px ${t(16)}px;
				border-bottom: none;
				max-height: 100%;
				overflow-y: auto;
			}
		}

		.triangle{
			left: ${t(15)}px;
		}

		.header{
			display: flex;
			line-height: ${t(22)}px;
			height: ${t(28)+1}px;
			font-size: ${e(13)}px;
			padding-bottom: ${t(6)}px;
			border-bottom: 1px solid ${i.alpha(.8)};
		}

		.title{
			flex: 1;
			min-width: 0;
			padding: 0 ${t(16)}px 0 0;
			font-weight: bold;
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}
		`.extends(super.style())}render(){return o.html`
			<f-popup>	
				${this.renderHead()}
				<slot />
			</f-popup>
		`.extends(super.render())}renderHead(){return this.title?o.html`
				<div class="header">
					<div class="title">${this.title}</div>
				</div>
			`:""}};a=n([(0,o.define)("f-menu")],a),e.Menu=a},877:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.ColLayout=e.RowLayout=void 0;const o=i(1416);let r=class extends o.Component{constructor(){super(...arguments),this.cols=[],this.columnCount=24,this.gutter=0,this.justify="start"}static style(){return o.css`
		:host{
			display: flex;
			flex-wrap: wrap;
		}
		`}onReady(){this.watchImmediately((()=>this.justify),(t=>{this.el.style.justifyContent="start"===t?"":"end"===t?"flex-end":t}))}register(t){this.cols.push(t)}isFirstCol(t){return t===this.cols[0]}getLeftColumnCount(t){let{columnCount:e}=this,i=0;for(let n of this.cols){if(n===t)break;i+=Math.min(n.span,e)+n.offset%e}return i}};r=n([(0,o.define)("f-row")],r),e.RowLayout=r;let s=class extends o.Component{constructor(){super(...arguments),this.span=1,this.offset=0}onCreated(){let t=(0,o.getComponent)(this.el.parentElement);if(!(t instanceof r))throw new Error('"<f-col>" must be included in a "<f-row>"');t.register(this),this.row=t}onUpdated(){this.el.style.marginLeft=this.getMarginLeft(),this.el.style.width=this.getWidth()}getMarginLeft(){let t=this.row.getLeftColumnCount(this),{columnCount:e,gutter:i}=this.row,n=this.offset%e;return n>0?n/i*100+"%":(t+n)%e==0?"0":i+"px"}getWidth(){let{gutter:t,columnCount:e}=this.row,i=Math.min(this.span,e),n=i/e;return`calc(${100*n}% - ${-t*(i-1-(e-1)*n)}px)`}};s=n([(0,o.define)("f-col")],s),e.ColLayout=s},898:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.dialog=e.QuickDialog=e.Dialog=void 0;const o=i(1416),r=i(8240),s=i(5499),a=i(6741);let l=class extends o.Component{constructor(){super(...arguments),this.currentOptions=null,this.resolve=null,this.stack=[],this.opened=!0,this.appendTo="body"}static style(){let{textColor:t,adjust:e,adjustFontSize:i,popupBorderRadius:n,popupShadowBlurRadius:s,popupShadowColor:a,popupBackgroundColor:l}=r.theme;return o.css`
		:host{
			z-index: 1000;
			width: ${e(360)}px;
			position: fixed;
			border-radius: ${n}px;
			box-shadow: 0 0 ${s}px ${a};
			background: ${l};
			max-width: 96%;
			max-height: 96%;
			padding: ${e(8)}px ${e(16)}px ${e(16)}px;
		}

		.mask{
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
		}

		.header{
			display: flex;
			line-height: ${e(22)}px;
			height: ${e(28)+1}px;
			font-size: ${i(13)}px;
			padding-bottom: ${e(6)}px;
			border-bottom: 1px solid ${t.alpha(.8)};
		}

		.title{
			flex: 1;
			min-width: 0;
			padding: 0 ${e(16)}px 0 0;
			font-weight: bold;
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}

		.content{
			display: flex;
			margin-top: ${e(8)}px;
		}

		.icon{
			padding-right: ${e(12)}px;
		}

		.message{
			flex: 1;
			min-width: 0;
			line-height: ${e(20)}px;
			padding: ${e(4)}px 0;
		}

		.list{
			margin: ${e(8)}px 0;
			line-height: ${e(20)}px;
			list-style-type: square;
			padding-left: ${e(28)}px;
		}

		.actions{
			display: flex;
			justify-content: flex-end;
			margin-top: ${e(16)}px;

			button{
				margin-left: ${e(8)}px;
			}

			.third{
				margin-left: 0;
				margin-right: auto;
			}
		}

		.input{
			margin-top: ${e(8)}px;
			margin-bottom: ${e(8)}px;
			width: 100%;
		}
		`}render(){let t=this.currentOptions;return t?o.html`
			<template
				tabindex="0"
				${(0,o.show)(this.opened,{name:"fade",enterAtStart:!0,onend:this.onTransitionEnd})}
			>
				<div class="mask"
					:refElement="mask"
					${(0,o.show)(this.opened,{name:"fade",enterAtStart:!0})}
				/>

				${t.title?o.html`
					<div class="header">
						<div class="title">
							${t.title}
						</div>
					</div>
				`:""}

				<div class="content">

					${t.icon?o.html`<div class="icon">
						<f-icon .type="${t.icon}" />
					</div>`:""}

					<div class="message">
						${t.message}
					</div>

					${t.list&&t.list.length>0?o.html`
						<ul class="list">
							${t.list.map((t=>o.html`<li>${t}</li>`))}
						</ul>
					`:""}
				</div>

				${this.renderActions(t.actions)}
			</template>
		`:""}renderActions(t){if(t&&t.length>0){let e=t.map((t=>o.html`
				<button class="action"
					?primary=${t.primary}
					:class.third=${t.third}
					@click=${()=>this.onClickActionButton(t)}>
					${t.text}
				</button>
			`));return o.html`<div class="actions">${e}</div>`}return""}onClickActionButton(t){var e,i,n;if(!(null===(i=null===(e=this.currentOptions)||void 0===e?void 0:e.interruptAction)||void 0===i?void 0:i.call(e,null!==(n=t.value)&&void 0!==n?n:"")))if(this.resolve&&(this.resolve(t.value),this.resolve=null),this.stack.length>0){let t=this.stack.shift();this.applyOptions(t.options,t.resolve)}else this.hide()}onTransitionEnd(t,e){if("leave"===t&&e)this.refElements.mask&&this.refElements.mask.remove(),this.el.remove();else if("enter"===t){let t=this.el.querySelector("input");t&&t.focus()}}async onConnected(){await(0,o.untilRenderComplete)(),this.refElements.mask&&this.el.previousElementSibling!==this.refElements.mask&&this.el.before(this.refElements.mask),this.toCenter(),0===this.el.tabIndex&&this.el.focus(),(0,o.on)(window,"resize",this.onWindowResize,this)}onDisconnected(){(0,o.off)(window,"resize",this.onWindowResize,this)}onWindowResize(){this.opened&&this.toCenter()}toCenter(){(0,s.align)(this.el,document.documentElement,"c")}applyOptions(t,e){this.currentOptions=t,this.resolve=e}async addOptions(t){let e,i=new Promise((t=>{e=t}));return this.resolve?this.stack.push({options:t,resolve:e}):(this.applyOptions(t,e),this.show()),i}show(){this.opened=!0,this.appendTo&&(0,a.appendTo)(this.el,this.appendTo)}hide(){this.opened=!1}triggerAction(t){if(!this.currentOptions||!this.currentOptions.actions)return;let e=this.currentOptions.actions.find((e=>e.value===t));e&&this.onClickActionButton(e)}};l=n([(0,o.define)("f-dialog")],l),e.Dialog=l;class h{constructor(){this.dialogComponent=null}addOptions(t){return this.dialogComponent||(this.dialogComponent=(0,o.getRenderedAsComponent)((0,o.render)(o.html`<f-dialog />`))),this.dialogComponent.addOptions(t)}show(t,e={}){return this.addOptions({message:t,actions:[{value:"ok",text:s.translations.get("ok")}],...e})}confirm(t,e={}){return this.addOptions({icon:"confirm",message:t,actions:[{value:"cancel",text:s.translations.get("cancel")},{value:"ok",text:s.translations.get("ok"),primary:!0}],...e})}async prompt(t,e={}){let i,n=e.defaultValue?String(e.defaultValue):"",r=e.interruptAction,a=o.html`
			${t}

			${"textarea"===e.inputType?o.html`
				<f-textarea class="input" 
					.placeholder=${e.placeholder}
					.validator=${e.validator}
					.type=${e.inputType||"text"}
					.value=${n}
					:refElement=${async t=>i=await(0,o.getComponentAsync)(t)}
					@@input=${t=>n=t}
				/>
			`:o.html`
				<f-input class="input" 
					.placeholder=${e.placeholder}
					.validator=${e.validator}
					.type=${e.inputType||"text"}
					.value=${n}
					:refElement=${async t=>i=await(0,o.getComponentAsync)(t)}
					@@input=${t=>n=t}
					@keydown.enter=${()=>this.dialogComponent.triggerAction("ok")}
				/>
			`}
			
		`;if("ok"===await this.addOptions({message:a,actions:[{value:"cancel",text:s.translations.get("cancel")},{value:"ok",text:s.translations.get("ok"),primary:!0}],...e,interruptAction:t=>(null==r?void 0:r(t))||"ok"===t&&!1===i.valid}))return n}}e.QuickDialog=h,e.dialog=new h,s.translations.addIf("enus",{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"})},937:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTemplate=e.SlotType=void 0;const n=i(1111),o=i(4479),r=i(6622),s=i(1106),a=i(3785);var l;!function(t){t[t.Node=0]="Node",t[t.SlotTag=1]="SlotTag",t[t.Attr=2]="Attr",t[t.MayAttr=3]="MayAttr",t[t.Property=4]="Property",t[t.Event=5]="Event",t[t.FixedBinging=6]="FixedBinging",t[t.DynamicBinding=7]="DynamicBinding"}(l||(e.SlotType=l={}));const h=new Map,d=new Map;e.parseTemplate=function(t,e,i){let o=(null==i?void 0:i.localName)||"global";if("html"===t||"svg"===t){let r=(0,n.joinWithOrderMarkers)(e),s=h.get(o),l=null==s?void 0:s.get(r);if(!l){s||(s=new Map,h.set(o,s));let e=d.get(o);e||(e=new c(o),d.set(o,e)),l=e.parse(t,r),s.set(r,l)}return function(t,e){let{template:i,slots:n,rootAttributes:o}=t,r=i.content.cloneNode(!0),s=[];if(o){if(!e)throw new Error("A context must be provided when rendering `<template>...`!");(0,a.extendsAttributes)(e,o)}if(n.length>0){let t,i=0,a=0,l=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null),h=!1;if(o){for(;a<n.length&&0===n[a].nodeIndex;)s.push(e),a++;i=1}if(a<n.length)for(;t=l.nextNode();){for(;n[a].nodeIndex===i;)if(s.push(t),a++,a===n.length){h=!0;break}if(h)break;i++}}return{fragment:r,slots:n,nodes:s}}(l,i)}if("css"===t)return{fragment:u(`<style>${e[0]}</style>`).content,nodes:[],slots:[]};{let t=e[0],i=document.createDocumentFragment();return i.append(document.createTextNode(t)),{fragment:i,nodes:[],slots:[]}}};class c{constructor(t){this.slots=[],this.currentNodeIndex=0,this.scopeName=t,this.scopedClassNameSet=(0,s.getScopedClassNames)(this.scopeName)}parse(t,e){let i=(0,r.parseToHTMLTokens)(e),n="";for(let t of i)switch(t.type){case r.HTMLTokenType.StartTag:let e=t.tagName,i=t.attributes;"slot"===e&&this.parseSlotTag(i),i.length>=9&&(i=this.parseAttribute(i)),n+="<"+e+i+">",this.currentNodeIndex++;break;case r.HTMLTokenType.EndTag:n+=`</${t.tagName}>`;break;case r.HTMLTokenType.Text:n+=this.parseText(t.text)}let o=i.find((t=>t.type===r.HTMLTokenType.StartTag)),s=!1;o&&"svg"===t&&"svg"!==o.tagName&&(n="<svg>"+n+"</svg>",s=!0);let a=u(n),l=null;if(s){let t=a.content.firstElementChild;a.content.append(...t.childNodes),t.remove()}o&&"template"===o.tagName&&(a=a.content.firstElementChild,l=[...a.attributes].map((({name:t,value:e})=>({name:t,value:e}))));let h={template:a,slots:this.slots,rootAttributes:l};return this.clean(),h}parseSlotTag(t){var e;let i=(null===(e=t.match(/name=['"](.+?)['"]/))||void 0===e?void 0:e[1])||null;this.slots.push({type:l.SlotTag,name:i,strings:null,valueIndices:null,nodeIndex:this.currentNodeIndex})}parseAttribute(t){return t.replace(/([.:?@\w-]+)\s*(?:=\s*(".*?"|'.*?'|\{flit:\d+\})\s*)?|\{flit:(\d+)\}\s*/g,((t,e,i="",o)=>{if(o)return this.slots.push({type:l.DynamicBinding,name:null,strings:null,valueIndices:[Number(o)],nodeIndex:this.currentNodeIndex}),"";let r,s=(0,n.containsOrderMarker)(i);switch(e[0]){case".":r=l.Property;break;case":":r=l.FixedBinging;break;case"?":r=l.MayAttr;break;case"@":r=l.Event}if(void 0!==r&&(e=e.slice(1)),void 0===r&&s&&(r="class"===e?l.FixedBinging:l.Attr),void 0!==r){if("'"!==i[0]&&'"'!==i[0]||(i=i.slice(1,-1)),s){let{strings:t,valueIndices:o}=(0,n.parseOrderMarkers)(i);this.slots.push({type:r,name:e,strings:t,valueIndices:o,nodeIndex:this.currentNodeIndex})}else this.slots.push({type:r,name:e,strings:[i],valueIndices:null,nodeIndex:this.currentNodeIndex});return r===l.Attr?e+'="" ':""}return"class"===e&&this.scopedClassNameSet?(i=i.replace(/[\w-]+/g,(t=>this.scopedClassNameSet.has(t)?t+"__"+this.scopeName:t)),e+"="+i):t}))}parseText(t){if((0,n.containsOrderMarker)(t)){let{strings:e,valueIndices:i}=(0,n.splitByOrderMarkers)(t);for(let t=1;t<e.length;t++)this.slots.push({type:l.Node,name:null,strings:null,valueIndices:i.slice(t-1,t),nodeIndex:this.currentNodeIndex}),this.currentNodeIndex+=1;t=e.map(o.trim).join("\x3c!---\x3e")}return t}clean(){this.slots=[],this.currentNodeIndex=0}}function u(t){let e=document.createElement("template");return e.innerHTML=t,e}},967:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateAllComponents=e.onComponentDisconnected=e.onComponentConnected=e.emitComponentCreatedCallbacks=e.onComponentCreatedAt=void 0;const i=new WeakMap,n=new Set;e.onComponentCreatedAt=function(t,e){let n=i.get(t);n||i.set(t,n=[]),n.push(e)},e.emitComponentCreatedCallbacks=function(t,e){let n=i.get(t);if(n){for(let t of n)t(e);i.delete(t)}},e.onComponentConnected=function(t){n.add(t)},e.onComponentDisconnected=function(t){n.delete(t)},e.updateAllComponents=function(){for(let t of n)t.update(),t.__updateWatcherGroup()}},972:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0;const o=i(1416);let r=class extends o.Component{constructor(){super(...arguments),this.inputs=[],this.valid=!0}static style(){return o.css`
		:host{
			display: block;
		}
		`}register(t){this.inputs.push(t),this.valid=this.valid&&!1!==t.valid,t.on("change",this.onInputChange,this)}onInputChange(t,e){e!==this.valid&&(this.valid=!!e&&this.inputs.every((t=>t.valid)))}validate(){for(let t of this.inputs)t.setTouched(!0)}reset(){for(let t of this.inputs)t.setTouched(!1)}};r=n([(0,o.define)("f-form")],r),e.Form=r},1106:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseStyleCodes=e.getScopedClassNames=void 0;const i=new Map;function n(t,e,i){let n,o=/((?:\[.*?\]|\(.*?\)|[\s\S])+?)(?:,|$)/g,s=[];for(;n=o.exec(t);){let t=n[1].trim();t&&(e||(t=r(t,i)),s.push(t))}return e&&(s=function(t,e){let i=/(^|[\s+>~])&/g,n=[];for(let o of t)if(i.test(o))for(let t of e)n.push(o.replace(i,"$1"+t));else for(let t of e)n.push(t+" "+o);return n}(s,e)),s}function o(t,e,i){return t.replace(/\.([\w-]+)/g,((t,n)=>t.includes("__")?t:(i.add(n),t+"__"+e)))}function r(t,e){return t.replace(/^(?=\w)/g,e+" ").replace(/:host/g,e)}e.getScopedClassNames=function(t){return i.get(t)},e.parseStyleCodes=function(t,e){let r,s,a=/(\s*)(?:\/\/.*|\/\*[\s\S]*?\*\/|((?:\(.*?\)|".*?"|'.*?'|[\s\S])*?)([;{}]))/g,l=[],h="",d=function(t){if(!t)return null;let e=i.get(t);return e||(e=new Set,i.set(t,e)),e}(e),c=0;for(;r=a.exec(t);){let t=r[1],i=r[2],a=r[3];if("{"===a&&i)if("@"===i[0]||c>0)h+=r[0],i.startsWith("@keyframes")?c=1:c>0&&c++;else{s&&(l.push(s),h+="}");let r=s=n(i,s,e);e&&(r=s.map((t=>o(t,e,d)))),h+=t+r.join(", ")+"{"}else"}"===a?(c>0&&c--,s=l.pop(),s||(h+=r[0])):"/"!==r[0][t.length]&&(h+=r[0])}return h}},1111:(t,e)=>{function i(t){return/^\{flit:\d+\}$/.test(t)}function n(t){let e,i=/\{flit:(\d+)\}/g,n=[],o=[],r=0;for(;e=i.exec(t);)n.push(t.slice(r,e.index)),o.push(Number(e[1])),r=i.lastIndex;return n.push(t.slice(r)),{strings:n,valueIndices:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.joinStringsAndValues=e.splitByOrderMarkers=e.parseOrderMarkers=e.beOrderMarker=e.containsOrderMarker=e.joinWithOrderMarkers=void 0,e.joinWithOrderMarkers=function(t,e=0){let i=t[0];for(let n=0;n<t.length-1;n++)i+=`{flit:${n+e}}`,i+=t[n+1];return i},e.containsOrderMarker=function(t){return/\{flit:\d+\}/.test(t)},e.beOrderMarker=i,e.parseOrderMarkers=function(t){return i(t)?{strings:null,valueIndices:[Number(t.match(/^\{flit:(\d+)\}$/)[1])]}:n(t)},e.splitByOrderMarkers=n,e.joinStringsAndValues=function(t,e){if(!t)return e[0];let i=t[0];for(let n=0;n<t.length-1;n++){let o=e[n];i+=null==o?"":String(o),i+=t[n+1]}return i}},1146:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LayoutWatcher=e.watchLayoutUntil=e.watchLayoutOnce=e.watchLayout=void 0;const n=i(757),o=i(5992),r={show:t=>t.offsetWidth>0||t.offsetHeight>0,hide:t=>0===t.offsetWidth&&0===t.offsetHeight,inview:t=>(0,o.isVisibleInViewport)(t),outview:t=>!(0,o.isVisibleInViewport)(t),size:t=>({width:t.clientWidth,height:t.clientHeight}),rect:t=>(0,o.getRect)(t)};e.watchLayout=function(t,e,i){let n=new s(t,e,i);return n.watch(),()=>n.unwatch()},e.watchLayoutOnce=function(t,e,i){let n=new s(t,e,i,{once:!0});return n.watch(),()=>n.unwatch()},e.watchLayoutUntil=function(t,e,i){let n=new s(t,e,i,{untilTrue:!0});return n.watch(),()=>n.unwatch()};class s{constructor(t,e,i,n={}){this.observer=null,this.frameId=null,this.interval=null,this.oldState=null,this.unwatchChange=null,this.el=t,this.type=e,this.callback=i,this.options=n,this.getState=r[e]}watch(){var t;this.resetState(),"size"!==this.type||"function"!=typeof window.ResizeObserver||this.options.intervalTime?"inview"!==this.type&&"outview"!==this.type||"function"!=typeof IntersectionObserver||this.options.intervalTime?this.options.intervalTime?this.interval=new n.Interval(this.checkStateInInterval.bind(this),this.options.intervalTime):this.options.checkInAnimationFrame?this.frameId=requestAnimationFrame(this.checkStateInAnimationFrame.bind(this)):this.unwatchChange=(t=this.checkStateInInterval.bind(this),a||(a=new MutationObserver(d),a.observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0})),0===l.length&&(window.addEventListener("resize",d),window.addEventListener("wheel",d),"ontouchmove"in window&&window.addEventListener("touchmove",d)),l.push(t),()=>{!function(t){l=l.filter((e=>e!==t)),0===l.length&&a&&(a.disconnect(),a=null),0===l.length&&(window.removeEventListener("resize",d),window.removeEventListener("wheel",d),"ontouchmove"in window&&window.removeEventListener("touchmove",d))}(t)}):(this.observer=new IntersectionObserver(this.onInviewChange.bind(this)),this.observer.observe(this.el)):(this.observer=new window.ResizeObserver(this.onResize.bind(this)),this.observer.observe(this.el))}unwatch(){var t,e;this.observer?this.observer.disconnect():this.options.intervalTime?null===(t=this.interval)||void 0===t||t.cancel():this.options.checkInAnimationFrame?this.frameId&&cancelAnimationFrame(this.frameId):null===(e=this.unwatchChange)||void 0===e||e.call(this)}onResize(t){for(let{contentRect:e}of t)this.onNewState({width:e.width,height:e.height})}onInviewChange(t){for(let{intersectionRatio:e}of t){let t="inview"===this.type?e>0:0===e;this.onNewState(t)}}checkStateInAnimationFrame(){let t=this.getState(this.el);this.onNewState(t),this.frameId=requestAnimationFrame(this.checkStateInAnimationFrame.bind(this))}checkStateInInterval(){let t=this.getState(this.el);this.onNewState(t)}onNewState(t){this.isValueOrObjectEqual(t,this.oldState)||(this.oldState=t,this.callback(t),(this.options.once||this.options.untilTrue&&t)&&this.unwatch())}isValueOrObjectEqual(t,e){if(t===e)return!0;if("object"!=typeof t||"object"!=typeof e||!t||!e)return!1;let i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(let n of i){if(!e.hasOwnProperty(n))return!1;if(t[n]!==e[n])return!1}return!0}checkState(){let t=this.getState(this.el);this.isValueOrObjectEqual(t,this.oldState)||(this.oldState=t,this.callback(t))}resetState(){this.oldState=this.getState(this.el)}}e.LayoutWatcher=s;let a=null,l=[],h=!1;function d(){h||(requestAnimationFrame(c),h=!0)}function c(){for(let t of l)t();h=!1}},1255:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.refBinding=e.BindingReferences=e.BindingResult=e.defineBinding=void 0;var r=i(356);Object.defineProperty(e,"defineBinding",{enumerable:!0,get:function(){return r.defineBinding}}),Object.defineProperty(e,"BindingResult",{enumerable:!0,get:function(){return r.BindingResult}}),Object.defineProperty(e,"BindingReferences",{enumerable:!0,get:function(){return r.BindingReferences}}),Object.defineProperty(e,"refBinding",{enumerable:!0,get:function(){return r.refBinding}}),o(i(8759),e),i(267),i(2378),i(9154),i(8347),i(6624),i(4554),i(557),i(5525),i(8759),i(7831)},1323:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"order-desc",code:'<svg viewBox="0 0 7 14"><polygon style="fill:currentColor;stroke:none;" points="5.7,8 3.5,11.8 1.3,8 0.2,8 0.1,8 3.5,13.8 6.9,8 6.8,8"/><polygon style="fill:currentColor;stroke:none;fill-opacity:0.4;" points="3.5,0.3 0.1,6 0.2,6 1.3,6 3.5,2.2 5.7,6 6.8,6 6.9,6"/></svg>'}},1338:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventPart=void 0;const n=i(9856),o=i(3728);e.EventPart=class{constructor(t,e,i){this.el=t,this.name="@"===e[0]?e.slice(1):e,this.context=i,this.isComEvent=t.localName.includes("-")&&"@"===e[0],this.bindListener()}bindListener(){this.isComEvent?(0,n.getComponentEarly)(this.el,(t=>{t.on(this.name,this.triggerHandler,this)})):(0,o.on)(this.el,this.name,this.triggerHandler,this)}update(t){if("function"!=typeof t)throw new Error(`Failed to register listener at "<${this.el.localName} @${this.name}='${t}'">, listener is not a function!`);this.handler=t}triggerHandler(...t){this.handler.call(this.context,...t)}}},1363:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PageDataGetter=void 0;const n=i(4479);e.PageDataGetter=class{constructor(t,e=null){this.cache=null,this.version=0,this.asyncDataGetter=t,this.immediateDataGetter=e}getImmediateData(t,e){let i;return i=this.immediateDataGetter?this.immediateDataGetter(t,e):this.getSharedData(t,e),i}getSharedData(t,e){let i=[],o=e-t;return this.cache?(t<this.cache.startIndex&&i.push(...(0,n.repeatForTimes)(null,Math.min(this.cache.startIndex-t,o))),i.push(...this.cache.items.slice(Math.max(this.cache.startIndex,t),Math.min(this.cache.endIndex,e))),e>this.cache.endIndex&&i.push(...(0,n.repeatForTimes)(null,Math.max(e-this.cache.endIndex,o)))):i.push(...(0,n.repeatForTimes)(null,o)),i}async getFreshData(t,e){let i=++this.version,n=await this.asyncDataGetter(t,e);return this.version===i&&(this.cache={startIndex:t,endIndex:e,items:n}),n}}},1404:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.useQuery=e.parseQuery=void 0,e.parseQuery=function(t){let e=t.match(/\?(.+)/),i=e?e[1].split("&"):[],n={};for(let t of i){let[e,i]=t.split("=");e&&(i=decodeURIComponent(i||""),n[e]=i)}return n},e.useQuery=function(t,e){let i=t.includes("?");if("string"==typeof e)return t+(i?"&":"?")+e;if(e&&"object"==typeof e)for(let n in e)t+=(i?"&":"?")+n+"="+encodeURIComponent(e[n]),i=!0;return t}},1416:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.enqueueUpdatableInOrder=e.untilRenderComplete=e.onRenderComplete=e.watchImmediately=e.watchUntil=e.watchOnce=e.watch=e.observeGetting=e.observe=e.UpdatableOptions=e.webAnimateTo=e.webAnimateFrom=e.webAnimate=e.clearTransition=e.isPlayingTransition=e.Transition=e.getCSSEasingValue=e.defineTransion=e.off=e.once=e.on=e.LiveAsyncRepeatDirective=e.liveAsyncRepeat=e.LiveRepeatDirective=e.liveRepeat=e.repeat=e.toggle=e.cache=e.DirectiveResult=e.CacheDirective=e.ToggleDirective=e.RepeatDirective=e.refDirective=e.defineDirective=e.hide=e.show=e.BindingResult=e.refBinding=e.defineBinding=e.getClosestComponentOfType=e.getComponentAsync=e.getComponent=e.addGlobalStyle=e.define=e.Component=e.Template=e.TemplateResult=e.svg=e.css=e.html=void 0,e.getRenderedAsComponent=e.renderUpdatable=e.render=e.updateAllStyles=e.updateAllComponents=e.updateAllGlobalWatchers=e.QueueUpdateOrder=void 0;var n=i(4511);Object.defineProperty(e,"html",{enumerable:!0,get:function(){return n.html}}),Object.defineProperty(e,"css",{enumerable:!0,get:function(){return n.css}}),Object.defineProperty(e,"svg",{enumerable:!0,get:function(){return n.svg}}),Object.defineProperty(e,"TemplateResult",{enumerable:!0,get:function(){return n.TemplateResult}}),Object.defineProperty(e,"Template",{enumerable:!0,get:function(){return n.Template}});var o=i(9856);Object.defineProperty(e,"Component",{enumerable:!0,get:function(){return o.Component}}),Object.defineProperty(e,"define",{enumerable:!0,get:function(){return o.define}}),Object.defineProperty(e,"addGlobalStyle",{enumerable:!0,get:function(){return o.addGlobalStyle}}),Object.defineProperty(e,"getComponent",{enumerable:!0,get:function(){return o.getComponent}}),Object.defineProperty(e,"getComponentAsync",{enumerable:!0,get:function(){return o.getComponentAsync}}),Object.defineProperty(e,"getClosestComponentOfType",{enumerable:!0,get:function(){return o.getClosestComponentOfType}});var r=i(1255);Object.defineProperty(e,"defineBinding",{enumerable:!0,get:function(){return r.defineBinding}}),Object.defineProperty(e,"refBinding",{enumerable:!0,get:function(){return r.refBinding}}),Object.defineProperty(e,"BindingResult",{enumerable:!0,get:function(){return r.BindingResult}}),Object.defineProperty(e,"show",{enumerable:!0,get:function(){return r.show}}),Object.defineProperty(e,"hide",{enumerable:!0,get:function(){return r.hide}});var s=i(2951);Object.defineProperty(e,"defineDirective",{enumerable:!0,get:function(){return s.defineDirective}}),Object.defineProperty(e,"refDirective",{enumerable:!0,get:function(){return s.refDirective}}),Object.defineProperty(e,"RepeatDirective",{enumerable:!0,get:function(){return s.RepeatDirective}}),Object.defineProperty(e,"ToggleDirective",{enumerable:!0,get:function(){return s.ToggleDirective}}),Object.defineProperty(e,"CacheDirective",{enumerable:!0,get:function(){return s.CacheDirective}}),Object.defineProperty(e,"DirectiveResult",{enumerable:!0,get:function(){return s.DirectiveResult}}),Object.defineProperty(e,"cache",{enumerable:!0,get:function(){return s.cache}}),Object.defineProperty(e,"toggle",{enumerable:!0,get:function(){return s.toggle}}),Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return s.repeat}}),Object.defineProperty(e,"liveRepeat",{enumerable:!0,get:function(){return s.liveRepeat}}),Object.defineProperty(e,"LiveRepeatDirective",{enumerable:!0,get:function(){return s.LiveRepeatDirective}}),Object.defineProperty(e,"liveAsyncRepeat",{enumerable:!0,get:function(){return s.liveAsyncRepeat}}),Object.defineProperty(e,"LiveAsyncRepeatDirective",{enumerable:!0,get:function(){return s.LiveAsyncRepeatDirective}});var a=i(3728);Object.defineProperty(e,"on",{enumerable:!0,get:function(){return a.on}}),Object.defineProperty(e,"once",{enumerable:!0,get:function(){return a.once}}),Object.defineProperty(e,"off",{enumerable:!0,get:function(){return a.off}});var l=i(7146);Object.defineProperty(e,"defineTransion",{enumerable:!0,get:function(){return l.defineTransion}}),Object.defineProperty(e,"getCSSEasingValue",{enumerable:!0,get:function(){return l.getCSSEasingValue}}),Object.defineProperty(e,"Transition",{enumerable:!0,get:function(){return l.Transition}}),Object.defineProperty(e,"isPlayingTransition",{enumerable:!0,get:function(){return l.isPlayingTransition}}),Object.defineProperty(e,"clearTransition",{enumerable:!0,get:function(){return l.clearTransition}}),Object.defineProperty(e,"webAnimate",{enumerable:!0,get:function(){return l.webAnimate}}),Object.defineProperty(e,"webAnimateFrom",{enumerable:!0,get:function(){return l.webAnimateFrom}}),Object.defineProperty(e,"webAnimateTo",{enumerable:!0,get:function(){return l.webAnimateTo}});var h=i(8396);Object.defineProperty(e,"UpdatableOptions",{enumerable:!0,get:function(){return h.UpdatableOptions}});var d=i(6171);Object.defineProperty(e,"observe",{enumerable:!0,get:function(){return d.observe}}),Object.defineProperty(e,"observeGetting",{enumerable:!0,get:function(){return d.observeGetting}}),Object.defineProperty(e,"watch",{enumerable:!0,get:function(){return d.watch}}),Object.defineProperty(e,"watchOnce",{enumerable:!0,get:function(){return d.watchOnce}}),Object.defineProperty(e,"watchUntil",{enumerable:!0,get:function(){return d.watchUntil}}),Object.defineProperty(e,"watchImmediately",{enumerable:!0,get:function(){return d.watchImmediately}}),Object.defineProperty(e,"onRenderComplete",{enumerable:!0,get:function(){return d.onRenderComplete}}),Object.defineProperty(e,"untilRenderComplete",{enumerable:!0,get:function(){return d.untilRenderComplete}}),Object.defineProperty(e,"enqueueUpdatableInOrder",{enumerable:!0,get:function(){return d.enqueueUpdatableInOrder}}),Object.defineProperty(e,"QueueUpdateOrder",{enumerable:!0,get:function(){return d.QueueUpdateOrder}}),Object.defineProperty(e,"updateAllGlobalWatchers",{enumerable:!0,get:function(){return d.updateAllGlobalWatchers}});var c=i(4194);Object.defineProperty(e,"updateAllComponents",{enumerable:!0,get:function(){return c.updateAllComponents}}),Object.defineProperty(e,"updateAllStyles",{enumerable:!0,get:function(){return c.updateAllStyles}});var u=i(135);Object.defineProperty(e,"render",{enumerable:!0,get:function(){return u.render}}),Object.defineProperty(e,"renderUpdatable",{enumerable:!0,get:function(){return u.renderUpdatable}}),Object.defineProperty(e,"getRenderedAsComponent",{enumerable:!0,get:function(){return u.getRenderedAsComponent}})},1429:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Popover=void 0;const o=i(1416),r=i(8240),s=i(9782);let a=class extends s.Popup{constructor(){super(...arguments),this.title="",this.closable=!1,this.defaultPopupOptions={alignPosition:"bc",fixTriangle:!0}}static style(){let{adjust:t,adjustFontSize:e,textColor:i}=r.theme;return o.css`
		:host{
			padding: ${t(8)}px ${t(16)}px;
			min-width: ${t(240)}px;
			max-width: ${t(400)}px;
		}

		.triangle{
			left: ${t(12)}px;
		}

		.header{
			display: flex;
			line-height: ${t(22)}px;
			height: ${t(28)+1}px;
			font-size: ${e(13)}px;
			padding-bottom: ${t(6)}px;
			border-bottom: 1px solid ${i.alpha(.8)};
			margin-bottom: ${t(8)}px;
		}

		.title{
			flex: 1;
			min-width: 0;
			font-weight: bold;
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}

		.close{
			display: flex;
			width: ${t(28)}px;
			height: ${t(28)}px;
			margin-top: ${t(-6)}px;
			margin-right: ${t(-9)}px;
			cursor: pointer;

			&:active{
				transform: translateY(1px);
			}

			f-icon{
				margin: auto;
			}
		}

		.actions{
			margin-left: ${t(15)}px;

			button{
				margin-left: ${t(6)}px;
				height: ${t(22)}px;
				line-height: ${20}px;
				padding: 0 ${t(8)}px;
			}
		}

		.content{
			line-height: ${t(20)}px;
			padding: ${t(4)}px 0;
		}
		`.extends(super.style())}render(){return o.html`
			<template>	
				${this.renderHead()}
				<div class="content"><slot /></div>
			</template>
		`.extends(super.render())}renderHead(){if(this.title){let t=this.closable&&!this.slots.action;return o.html`
			<div class="header">
				<div class="title">${this.title}</div>

				<div class="actions" :show=${this.slots.action}>
					<slot name="action" />
				</div>

				${t?o.html`
					<div class="close" @click=${this.close}>
						<f-icon .type="close" />
					</div>
				`:""}
			</div>
			`}return""}};a=n([(0,o.define)("f-popover")],a),e.Popover=a},1520:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeComponentTarget=void 0;const n=i(6205),o=i(2066),r=i(5376);e.observeComponentTarget=function(t){let e=new Proxy(t,s);return(0,r.addTargetAndProxy)(t,e),e};const s={get(t,e){let i=t[e];if((0,n.addComDependency)(t,e),i&&"object"==typeof i){let t=(0,r.getObservedOf)(i);if(t)return t;if((0,n.isUpdating)())return(0,o.observeTarget)(i)}return i},set:(t,e,i)=>(t[e]!==i&&(t[e]=i,(0,n.notifyComPropertySet)(t,e)),!0),has:(t,e)=>((0,n.addComDependency)(t,e),e in t),deleteProperty:(t,e)=>!t.hasOwnProperty(e)||((0,n.addComDependency)(t,e),delete t[e])}},1680:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defineCustomElement=void 0;const n=i(589),o=i(8231);let r=new Set,s=new Set,a=!1;function l(){Promise.resolve().then(h),a=!0}function h(){r.size>0&&function(){let t=[...r];t.sort(((t,e)=>t.compareDocumentPosition(e)&t.DOCUMENT_POSITION_FOLLOWING?-1:1)),r=new Set;for(let e of t)d(e)}(),s.size>0&&function(){let t=s;s=new Set;for(let e of t.keys())c(e)}(),a=!1}function d(t){let e=(0,o.getComponent)(t),i=!1;e||(e=(0,n.createComponent)(t),i=!0),e.__emitConnected(i)}function c(t){let e=(0,o.getComponent)(t);e&&e.__emitDisconnected()}e.defineCustomElement=function(t){customElements.define(t,class extends HTMLElement{connectedCallback(){var t;this.ownerDocument instanceof DocumentFragment||(t=this,s.has(t)?s.delete(t):(r.add(t),a||l()))}disconnectedCallback(){var t;t=this,r.has(t)?r.delete(t):(s.add(t),a||l())}})}},1780:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateAllGlobalWatchers=e.watchUntil=e.watchOnce=e.watchImmediately=e.watch=e.GlobalWatcherGroup=void 0;const n=i(6810);e.GlobalWatcherGroup=new n.WatcherGroup(null),e.watch=function(t,i){return e.GlobalWatcherGroup.watch(t,i)},e.watchImmediately=function(t,i){return e.GlobalWatcherGroup.watchImmediately(t,i)},e.watchOnce=function(t,i){return e.GlobalWatcherGroup.watchOnce(t,i)},e.watchUntil=function(t,i){return e.GlobalWatcherGroup.watchUntil(t,i)},e.updateAllGlobalWatchers=function(){e.GlobalWatcherGroup.update()}},1865:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Weak2WayPropMap=void 0,e.Weak2WayPropMap=class{constructor(){this.lm=new WeakMap,this.rm=new WeakMap}updateFromLeft(t,e){let i=this.lm.get(t);if(i){for(let[n,o]of e)i.has(n)?this.updateRightLeftMap(n,i.get(n),o,t):this.addRightLeftMap(n,o,t);for(let[n,o]of i)e.has(n)||this.deleteRightLeftMap(n,o,t)}else for(let[i,n]of e)this.addRightLeftMap(i,n,t);this.lm.set(t,e)}addRightLeftMap(t,e,i){let n=this.rm.get(t);n||(n=new Map,this.rm.set(t,n));for(let t of e){let e=n.get(t);e||(e=new Set,n.set(t,e)),e.add(i)}}updateRightLeftMap(t,e,i,n){let o=this.rm.get(t);if(o){for(let t of i)if(!e.has(t)){let e=o.get(t);e||(e=new Set,o.set(t,e)),e.add(n)}for(let t of e)if(!i.has(t)){let e=o.get(t);e&&e.delete(n)}}}deleteRightLeftMap(t,e,i){let n=this.rm.get(t);if(n)for(let t of e){let e=n.get(t);e&&e.delete(i)}}deleteLeftRightMap(t,e){let i=this.lm.get(t);i&&i.delete(e)}getFromRight(t,e){let i=this.rm.get(t);if(i)return i.get(e)}clearFromLeft(t){let e=this.lm.get(t);if(e)for(let[i,n]of e)this.deleteRightLeftMap(i,n,t),this.deleteLeftRightMap(t,i)}}},1919:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),o(i(236),e),i(2150),o(i(8240),e),o(i(8854),e),o(i(7916),e),o(i(9051),e),o(i(3583),e),o(i(2959),e),o(i(8259),e),o(i(4983),e),o(i(4074),e),o(i(9771),e),o(i(972),e),o(i(3792),e),o(i(8352),e),o(i(3946),e),o(i(6073),e),o(i(9782),e),o(i(511),e),o(i(1429),e),o(i(7975),e),o(i(2522),e),o(i(3656),e),o(i(3582),e),o(i(845),e),o(i(8248),e),o(i(5897),e),o(i(898),e),o(i(6833),e),o(i(6716),e),o(i(2954),e),o(i(877),e),o(i(453),e),o(i(9611),e),o(i(6585),e),o(i(6530),e),o(i(8708),e),o(i(4218),e),o(i(8699),e),o(i(4462),e)},2066:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeTarget=e.observe=void 0;const n=i(6152),o=i(2098),r=i(6474),s=i(5376),a=Object.prototype.toString;function l(t){let e=a.call(t);return"[object Array]"===e?(0,o.observeArrayTarget)(t):"[object Object]"===e?(0,n.observePlainObjectTarget)(t):"[object Set]"===e||"[object Map]"===e?(0,r.observeMapOrSetTarget)(t):t}e.observe=function(t){if(t&&"object"==typeof t){return(0,s.getObservedOf)(t)||l(t)}return t},e.observeTarget=l},2098:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeArrayTarget=void 0;const n=i(6205),o=i(2066),r=i(5376),s=["push","pop","unshift","splice","shift","sort"];e.observeArrayTarget=function(t){let e=new Proxy(t,a);return(0,r.addTargetAndProxy)(t,e),e};const a={get(t,e){let i=t[e],a=typeof i;if(t.hasOwnProperty(e)){if((0,n.addDependency)(t),i&&"object"===a){let t=(0,r.getObservedOf)(i);if(t)return t;if((0,n.isUpdating)())return(0,o.observeTarget)(i)}}else"function"===a&&((0,n.addDependency)(t),s.includes(e)&&(0,n.notifyObjectSet)(t));return i},set:(t,e,i)=>(t[e]!==i&&(t[e]=i,(0,n.notifyObjectSet)(t)),!0),has:(t,e)=>((0,n.addDependency)(t),e in t),deleteProperty:(t,e)=>!t.hasOwnProperty(e)||((0,n.addDependency)(t),delete t[e])}},2101:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MayAttrPart=void 0,e.MayAttrPart=class{constructor(t,e){this.el=t,this.name=e}update(t){this.setValue(t)}setValue(t){t?this.el.setAttribute(this.name,""):this.el.removeAttribute(this.name)}}},2150:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(1416),o=i(8240);(0,n.addGlobalStyle)((()=>{let{mainColor:t,textColor:e,borderColor:i,errorColor:r,fontSize:s,borderRadius:a,focusBlurRadius:l,adjust:h,adjustFontSize:d,backgroundColor:c}=o.theme;return n.css`
	html{
		color: ${e};
		font-size: ${s}px;
		line-height: ${h(28)}px;
		background-color: ${c};
	}

	h1{
		font-size: ${d(68)}px;
		line-height: 1.2;
		font-weight: 700;
	}

	h2{
		font-size: ${d(36)}px;
		line-height: 1.2;
		font-weight: 100;
	}

	h3{
		font-size: ${d(26)}px;
		line-height: 1.2;
		font-weight: 400;
	}

	h4{
		font-size: ${d(22)}px;
		line-height: 1.2;
		font-weight: 400;
	}

	h5{
		font-size: ${d(18)}px;
		line-height: 1.2;
	}

	h6{
		font-size: ${d(14)}px;
		line-height: 1.2;
	}

	button{
		display: inline-flex;
		justify-content: center;
		height: ${h(28)}px;
		line-height: ${h(28)-2}px;
		border: 1px solid ${i};
		color: ${e};
		border-radius: ${a}px;
		padding: 0 ${h(12)}px;
		background: ${c};
		text-align: center;
		cursor: pointer;
		vertical-align: top;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		
		&:hover, &:focus{
			border-color: #666;
			background-color: #666;
			color: #fff;
		}

		&:active{
			background: ${e};
			border-color: ${e};
			color: ${c};
		}

		&:focus{
			box-shadow: 0 0 ${l}px ${t};
		}

		f-icon, f-icon-loading{
			position: relative;
			top: -1px;

			&:first-child{
				margin-right: ${h(6)}px;
			}

			&:last-child{
				margin-left: ${h(6)}px;
			}

			&:only-child{
				margin-left: 0;
				margin-right: 0;
			}
		}

		&[primary]{
			background: ${t};
			border-color: ${t};
			color: #fff;

			&:hover, &:focus{
				background: ${t.darken(15)};
				border-color: ${t.darken(15)};
			}
		
			&:active{
				background: ${t.darken(30)};
				border-color: ${t.darken(30)};
			}
		}

		&[flat]{
			border: none;
			padding-left: 0;
			padding-right: 0;
			line-height: ${h(28)}px;

			&:hover, &:focus{
				background: none;
				color: ${e};
			}

			&:active{
				background: none;
			}

			&:focus{
				box-shadow: none;
			}
		}
	}

	a[primary]{
		color: ${t};
	}

	label{
		font-weight: bold;
		font-size: ${d(13)}px;

		&[required]{
			&::after{
				position: relative;
				content: '*';
				color: ${r};
				margin-left: 2px;
				top: ${h(-5)}px;
			}
		}

		f-icon{
			margin-left: 4px;
			color: ${e.toMiddle(20)};
		}
	}


	.fade-enter, .fade-leave{
		transition: opacity 0.2s ease-out;
	}
	
	.fade-enter-from, .fade-leave-to{
		opacity: 0;
	}
	
	.fade-enter-to, .fade-leave-from{
		opacity: 1;
	}


	::-webkit-scrollbar{
		height: 10px;
		width: 10px;
		background: ${c.toMiddle(10)};
	}

	::-webkit-scrollbar-thumb{
		background: ${c.toMiddle(30)};

		&:hover{
			background: ${c.toMiddle(40)};
		}

		&:active{
			background: ${c.toMiddle(50)};
		}
	}
`}))},2151:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayMap=e.DoubleKeysMap=e.GroupSetMap=e.GroupArrayMap=void 0;const n=i(7388);e.GroupArrayMap=class{constructor(){this.map=new Map}keys(){return this.map.keys()}values(){return this.map.values()}entites(){return this.map.entries()}add(t,e){let i=this.map.get(t);i?i.push(e):(i=[e],this.map.set(t,i))}addIf(t,e){let i=this.map.get(t);i?i.includes(e)||i.push(e):(i=[e],this.map.set(t,i))}has(t){return this.map.has(t)}hasPair(t,e){var i;return!!(null===(i=this.map.get(t))||void 0===i?void 0:i.includes(e))}get(t){return this.map.get(t)}countOf(t){var e;return(null===(e=this.map.get(t))||void 0===e?void 0:e.length)||0}delete(t,e){let i=this.map.get(t);i&&((0,n.remove)(i,e),0===i.length&&this.map.delete(t))}},e.GroupSetMap=class{constructor(){this.map=new Map}keys(){return this.map.keys()}values(){return this.map.values()}entites(){return this.map.entries()}add(t,e){let i=this.map.get(t);i||(i=new Set,this.map.set(t,i)),i.add(e)}has(t){return this.map.has(t)}hasPair(t,e){var i;return!!(null===(i=this.map.get(t))||void 0===i?void 0:i.has(e))}get(t){return this.map.get(t)}countOf(t){var e;return(null===(e=this.map.get(t))||void 0===e?void 0:e.size)||0}delete(t,e){let i=this.map.get(t);i&&(i.delete(e),0===i.size&&this.map.delete(t))}},e.DoubleKeysMap=class{constructor(){this.map=new Map}set(t,e,i){let n=this.map.get(t);n||(n=new Map,this.map.set(t,n)),n.set(e,i)}has(t,e){let i=this.map.get(t);return!!i&&i.has(e)}get(t,e){let i=this.map.get(t);if(i)return i.get(e)}secondMap(t){return this.map.get(t)}firstKeys(){return this.map.keys()}secondKeys(t){var e;return null===(e=this.map.get(t))||void 0===e?void 0:e.keys()}secondValues(t){var e;return null===(e=this.map.get(t))||void 0===e?void 0:e.values()}*values(){for(let t of this.map.values())yield*t.values()}countOf(t){var e;return(null===(e=this.map.get(t))||void 0===e?void 0:e.size)||0}delete(t,e){let i=this.map.get(t);i&&(i.delete(e),0===i.size&&this.map.delete(t))}},e.TwoWayMap=class{constructor(){this.lm=new Map,this.rm=new Map}leftSize(){return this.lm.size}rightSize(){return this.rm.size}add(t,e){this.lm.set(t,e),this.rm.set(e,t)}hasLeft(t){return this.lm.has(t)}hasRight(t){return this.rm.has(t)}getLeft(t){return this.lm.get(t)}getRight(t){return this.rm.get(t)}deleteLeft(t){return!!this.hasLeft(t)&&(this.rm.delete(this.lm.get(t)),this.lm.delete(t),!0)}deleteRight(t){return!!this.hasRight(t)&&(this.lm.delete(this.rm.get(t)),this.rm.delete(t),!0)}leftKeys(){return this.lm.keys()}rightKeys(){return this.rm.keys()}}},2255:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;const n=i(4511),o=i(6527),r=i(967),s=i(9104),a=i(1106),l=i(7097),h=i(6171);class d extends s.EventEmitter{__getAttactedDomElement(){return this.el}__comparePositionWith(t){return this.el.compareDocumentPosition(t.el)&t.el.DOCUMENT_POSITION_FOLLOWING?-1:1}constructor(t){return super(),this.refElements={},this.refComponents={},this.slots={},this.__connected=!1,this.__ready=!1,this.__rootPart=null,this.__watcherGroup=null,this.el=t,this.__restNodeRange=new l.ContainerRange(t),(0,h.observeComponentTarget)(this)}__emitCreated(){this.onCreated(),this.emit("created")}__emitConnected(t){t||this.__watcherGroup&&this.__watcherGroup.connect(),this.__connected=!0,this.update(),this.onConnected(),this.emit("connected"),(0,r.onComponentConnected)(this)}__emitDisconnected(){(0,h.clearDependenciesOf)(this),this.__watcherGroup&&this.__watcherGroup.disconnect(),this.__connected=!1,this.onDisconnected(),this.emit("disconnected"),(0,r.onComponentDisconnected)(this)}__updateImmediately(t=!1){if(this.__connected||t){(0,h.startUpdating)(this);try{let t=this.render();(0,h.endUpdating)(this),this.__rootPart?this.__rootPart.update(t):null!==t&&(this.__rootPart=new n.NodePart(new o.NodeAnchor(this.el,o.NodeAnchorType.Container),this),this.__rootPart.update(t))}catch(t){(0,h.endUpdating)(this),console.warn(t)}this.__ready||(this.__ready=!0,this.onReady(),this.emit("ready")),this.onUpdated(),this.emit("updated")}}render(){return null}update(){(0,h.enqueueUpdatableInOrder)(this,this,h.QueueUpdateOrder.Component)}onCreated(){}onReady(){}onUpdated(){}onConnected(){}onDisconnected(){}async untilReady(){return this.__ready?void 0:new Promise((t=>{this.once("ready",t)}))}watch(t,e){return this.__getWatcherGroup().watch(t,e.bind(this))}watchImmediately(t,e){return this.__getWatcherGroup().watchImmediately(t,e.bind(this))}watchOnce(t,e){return this.__getWatcherGroup().watchOnce(t,e.bind(this))}watchUntil(t,e){return this.__getWatcherGroup().watchUntil(t,e.bind(this))}__getWatcherGroup(){return this.__watcherGroup||(this.__watcherGroup=new h.WatcherGroup(this)),this.__watcherGroup}__updateWatcherGroup(){this.__watcherGroup&&this.__watcherGroup.update()}scopeClassName(t){let e="."===t[0]?t.slice(1):t,i=(0,a.getScopedClassNames)(this.el.localName);return i&&i.has(e)?t+"__"+this.el.localName:t}}e.Component=d,d.style=null},2378:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.StyleBinding=void 0;const o=i(356),r=["px","percent","url"];let s=e.StyleBinding=class{constructor(t,e,i){if(this.lastStyle={},i){if(i.length>2)throw new Error(`Modifier "${i.join(".")}" is not allowed, at most two modifiers (as style name property value modifier) can be specified for ":style"!`);if(2===i.length&&!r.includes(i[1]))throw new Error(`Modifier "${i[1]}" is not allowed, it must be one of ${r.join(", ")}!`);if(!/^[\w-]+$/.test(i[0])||r.includes(i[0]))throw new Error(`Modifier "${i[0]}" is not a valid style property!`)}this.el=t,this.modifiers=i}update(t){let e=Object.keys(this.lastStyle),i=this.parseStyle(t),n=Object.keys(i);for(let t of e)n.includes(t)||(this.el.style[t]="");for(let t of n)e.includes(t)&&this.lastStyle[t]===i[t]||this.setStyle(t,i[t]);this.lastStyle=i}setStyle(t,e){var i;let n=(null===(i=this.modifiers)||void 0===i?void 0:i[1])||"";null==e?e="":"px"===n?e+="px":"percent"===n?e+="%":e="url"===n?'url("'+e+'")':String(e),this.el.style[t]=e}parseStyle(t){let e={};if(this.modifiers)("string"==typeof t&&""!==t||"number"==typeof t)&&(e[this.modifiers[0]]=t);else if(Array.isArray(t))for(let i of t.join(";").split(/\s*;\s*/)){let[t,n]=i.split(/\s*:\s*/);t&&n&&(e[t]=n)}else if(t&&"object"==typeof t)e=t;else if(t&&"string"==typeof t)for(let i of t.split(/\s*;\s*/)){let[t,n]=i.split(/\s*:\s*/);t&&n&&(e[t]=n)}return e}remove(){if(this.lastStyle)for(let t of Object.keys(this.lastStyle))this.el.style[t]=""}};e.StyleBinding=s=n([(0,o.defineBinding)("style")],s)},2522:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.List=void 0;const o=i(1416),r=i(8240),s=i(5499),a=i(6585),l=i(9889);let h=class extends o.Component{constructor(){super(...arguments),this.treeNavigationIndices=[],this.watchingKeyBoardNavigation=!1,this.type="selection",this.selectable=!1,this.multipleSelect=!1,this.data=[],this.selected=[],this.active=null,this.navigateFrom=null}static style(){let{mainColor:t,adjust:e,borderColor:i,adjustFontSize:n}=r.theme;return o.css`
		:host{
			display: block;
			border-bottom: 1px solid ${i.alpha(.4)};
		}
		
		.option{
			position: relative;
			display: flex;
			padding-top: ${e(2)}px;
			padding-bottom: ${e(2)}px;
			cursor: pointer;
			border-top: 1px solid ${i.alpha(.4)};

			&:first-child{
				border-top: none;
			}

			&:hover{
				color: ${t};
			}

			&.selected{
				color: ${t};
			}

			&.active{
				color: ${t};

				&::after{
					content: '';
					position: absolute;
					top: ${e(3)}px;
					bottom: ${e(3)}px;
					right: 0;
					width: 2px;
					background: ${t.alpha(.8)};
				}
			}

			&.arrow-selected{
				background-color: ${t.alpha(.1)};
			}
		}

		.toggle{
			display: flex;
			width: ${e(22)}px;
			opacity: 0.7;
		}

		.icon{
			display: flex;
			width: ${e(22)}px;
		}

		.text{
			flex: 1;
			min-width: 0;
			padding-right: 4px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.selected-icon{
			margin: 0 ${e(6)}px;
		}

		.subsection{
			padding-left: ${e(22)}px;
			padding-bottom: ${e(4)}px;
			overflow: hidden;
			font-size: ${n(13)}px;

			.option{
				padding-top: 0;
				padding-bottom: 0;
				border-top: none;
				line-height: ${e(26)}px;
			}

			.subsection{
				padding-top: 0;
			}

			.subsection:not(:last-child){
				padding-bottom: ${e(3)}px;
				margin-bottom: ${e(3)}px;
				border-bottom: 1px solid ${i.alpha(.4)};
			}

			.subsection:last-child{
				padding-bottom: 0;
				margin-bottom: 0;
			}
		}
		`}render(){return o.html`${this.renderOptions(this.data,this.treeNavigationIndices)}`}renderOptions(t,e){let i=t.some((t=>t.icon)),n=t.some((t=>t.children));return(0,o.repeat)(t,((t,o)=>{let r=(null==e?void 0:e[0])===o?e.slice(1):null;return this.renderOption(t,i,n,r)}))}renderOption(t,e,i,n){let r=t.children&&t.opened?o.html`
			<div class="subsection">${this.renderOptions(t.children,n)}</div>
		`:null,s=t.tip?(0,a.tooltip)(t.tip):null;return o.html`
			<div
				class="option"
				:class=${this.renderClassName(t)}
				:class.arrow-selected=${0===(null==n?void 0:n.length)}
				@click.prevent=${()=>this.onClickOption(t)}
				${s}

			>
				${t.children?o.html`
					<div class='toggle' @click.stop=${()=>this.toggleOpened(t)}>
						<f-icon .type=${t.opened?"triangle-down":"triangle-right"} />
					</div>
				`:i?o.html`
					<div class='toggle' />
				`:""}

				${e?o.html`
					<div class='icon'>
						<f-icon .type=${t.icon} />
					</div>
				`:""}
		
				<div class="text">
					${t.text}
				</div>

				${this.isSelected(t)?o.html`<f-icon class="selected-icon" .type="checked" />`:""}
			</div>

			${(0,o.toggle)(r,{properties:["height","marginBottom","paddingBottom","opacity"]})}
		`}onCreated(){this.active&&this.ensureActiveItemVisible()}onReady(){if(this.navigateFrom){let t=null;this.watchImmediately((()=>"function"==typeof this.navigateFrom?this.navigateFrom():this.navigateFrom),(e=>{t&&((0,o.off)(t,"keydown",this.moveArrowSelectedByEvent,this),(0,o.off)(t,"blur",this.onNavigateFromElementBlur,this)),e&&((0,o.on)(e,"keydown",this.moveArrowSelectedByEvent,this),(0,o.on)(e,"blur",this.onNavigateFromElementBlur,this)),t=e}))}}moveArrowSelectedByEvent(t){if("ArrowUp"===t.key)this.watchingKeyBoardNavigation=!0,this.treeNavigationIndices=l.TreeDataNavigator.moveArrowUp(this.data,this.treeNavigationIndices);else if("ArrowDown"===t.key)this.watchingKeyBoardNavigation=!0,this.treeNavigationIndices=l.TreeDataNavigator.moveArrowDown(this.data,this.treeNavigationIndices);else if("ArrowLeft"===t.key)this.watchingKeyBoardNavigation&&(this.treeNavigationIndices=l.TreeDataNavigator.moveArrowLeft(this.data,this.treeNavigationIndices));else if("ArrowRight"===t.key){if(this.watchingKeyBoardNavigation&&this.treeNavigationIndices){let t=l.TreeDataNavigator.getItemByIndices(this.data,this.treeNavigationIndices);t&&!t.opened&&t.children&&(this.toggleOpened(t),this.treeNavigationIndices=l.TreeDataNavigator.moveArrowRight(this.data,this.treeNavigationIndices))}}else if("Enter"===t.key){if(this.watchingKeyBoardNavigation&&this.treeNavigationIndices){let t=this.el.querySelector(this.scopeClassName(".arrow-selected"));if(t){let e=t.getBoundingClientRect(),i=document.elementFromPoint(e.x+e.width/2,e.y+e.height/2);i instanceof HTMLElement&&i.click()}}}else this.watchingKeyBoardNavigation=!1,this.treeNavigationIndices=[]}onNavigateFromElementBlur(){this.watchingKeyBoardNavigation=!1,this.treeNavigationIndices=[]}renderClassName(t){if("navigation"===this.type){if(this.active===t.value)return"active"}else if(this.isSelected(t))return"selected";return""}isSelected(t){return this.selected.includes(t.value)}onClickOption(t){void 0===t.value?this.toggleOpened(t):"navigation"===this.type?(this.active=t.value,this.emit("navigate",t.value)):this.selectable?(this.multipleSelect?this.selected.includes(t.value)?(0,s.remove)(this.selected,t.value):(0,s.add)(this.selected,t.value):this.selected=[t.value],this.emit("select",this.multipleSelect?this.selected:this.selected[0])):this.emit("click",t.value)}toggleOpened(t){t.children&&(t.opened=!t.opened)}ensureActiveItemVisible(){this.active&&this.ensureActiveItemVisibleRecursively(this.data)}ensureActiveItemVisibleRecursively(t){return t.some((t=>t.value===this.active||(t.children&&this.ensureActiveItemVisibleRecursively(t.children)&&(t.opened=!0),t.opened)))}};h=n([(0,o.define)("f-list")],h),e.List=h},2711:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SlotTagPart=void 0,e.SlotTagPart=class{constructor(t,e,i){if(!i)throw new ReferenceError('A context must be provided when using "<slot>"!');this.el=t,this.name=e,this.context=i}update(){this.name?this.context.slots.hasOwnProperty(this.name)&&this.el.append(...this.context.slots[this.name]):this.el.append(this.context.__restNodeRange.extractToFragment())}}},2736:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=e.RepeatDirective=void 0;const n=i(5428),o=i(5400),r=i(521),s=i(6171),a=i(7800),l=i(4479);class h{constructor(t,e){this.rawData=null,this.data=[],this.repTems=[],this.lastWatcher=null,this.anchor=t,this.context=e,this.transition=new o.ContextualTransition(e)}canPatchBy(t,e){return e===this.templateFn||e.toString()===this.templateFn.toString()}patch(t,e,i){this.templateFn=e,this.transition.updateOptions(i),t!==this.rawData?(this.watchAndUpdateData(t),this.rawData=t):this.lastWatcher&&this.updateData(this.data)}watchAndUpdateData(t){this.tryDeleteLastWatcher(),t?(this.lastWatcher=new s.LazyWatcher((()=>[...t]),this.updateData.bind(this),this.context),this.getWatcherGroup().add(this.lastWatcher),this.updateData(this.lastWatcher.value)):this.updateData([])}getWatcherGroup(){var t;return(null===(t=this.context)||void 0===t?void 0:t.__getWatcherGroup())||s.GlobalWatcherGroup}tryDeleteLastWatcher(){this.lastWatcher&&(this.getWatcherGroup().delete(this.lastWatcher),this.lastWatcher=null)}updateData(t){let e=this.transition.canPlay(),i=!e,n=this.data,o=this.repTems,r=(0,a.getEditRecord)(n,t,i);this.data=t,this.repTems=[];for(let i of r){let{type:n,nextOldIndex:r,fromIndex:s,toIndex:l}=i,h=this.getRepItemInIndex(o,r),d=this.getRepItemInIndex(o,s),c=l>=0?t[l]:null;if(n===a.EditType.Leave)this.useMatchedRepTem(d,c,l);else if(n===a.EditType.Move)this.moveRepTemBefore(d,h),this.useMatchedRepTem(d,c,l);else if(n===a.EditType.Modify)this.reuseRepTem(d,c,l);else if(n===a.EditType.MoveModify)this.moveRepTemBefore(d,h),this.reuseRepTem(d,c,l);else if(n===a.EditType.Insert){let t=this.createRepTem(c,l);this.moveRepTemBefore(t,h),e&&this.mayPlayEnter(t)}else n===a.EditType.Delete&&this.removeRepTemAndMayPlayLeave(d,e)}}getRepItemInIndex(t,e){return e<t.length&&e>=0?t[e]:null}moveRepTemBefore(t,e){e?e.template.before(t.template):this.anchor.insert(t.template.extractToFragment())}useMatchedRepTem(t,e,i){t.update(e,i),this.repTems.push(t)}reuseRepTem(t,e,i){t.update(e,i),this.repTems.push(t)}createRepTem(t,e){let i=new r.RepetitiveTemplate(this,t,e);return this.repTems.push(i),i}mayPlayEnter(t){let e=t.template.getFirstElement();e&&this.transition.playEnter(e)}removeRepTemAndMayPlayLeave(t,e){let i=t.template;if(e){let e=i.getFirstElement();e?this.transition.playLeave(e).then((e=>{e&&this.removeRepTem(t)})):this.removeRepTem(t)}else this.removeRepTem(t)}removeRepTem(t){t.remove()}makeIndexVisible(t){var e;let i=null===(e=this.repTems[t])||void 0===e?void 0:e.template.getFirstElement();if(!i)return!1;let n=(0,l.getClosestScrollWrapper)(i);if(!n)return!1;let o=n.getBoundingClientRect(),r=i.getBoundingClientRect();return r.bottom>o.bottom?n.scrollTop=n.scrollTop+(r.bottom-o.bottom):r.top<o.top&&(n.scrollTop=n.scrollTop+(o.top-r.top)),!0}makeIndexVisibleAtTop(t){var e;let i=null===(e=this.repTems[t])||void 0===e?void 0:e.template.getFirstElement();if(!i)return!1;let n=(0,l.getClosestScrollWrapper)(i);if(!n)return!1;let o=n.getBoundingClientRect(),r=i.getBoundingClientRect();return n.scrollTop=n.scrollTop+(r.top-o.top),!0}async setFirstVisibleIndex(t){var e;await(0,s.untilRenderComplete)();let i=null===(e=this.repTems[t])||void 0===e?void 0:e.template.getFirstElement();if(!i)return!1;let n=(0,l.getClosestScrollWrapper)(i);if(!n)return!1;let o=n.getBoundingClientRect(),r=i.getBoundingClientRect();return n.scrollTop=n.scrollTop+(r.top-o.top),!0}getContext(){return this.context}getTemplateFn(){return this.templateFn}remove(){this.tryDeleteLastWatcher();for(let t of this.repTems)t.remove()}}e.RepeatDirective=h,e.repeat=(0,n.defineDirective)(h)},2818:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"triangle-down",code:'<svg viewBox="0 0 15 15"><polygon style="fill:currentColor; stroke:none;" points="7,11 11,3 3,3"/></svg>'}},2855:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateResult=e.css=e.svg=e.html=void 0;const n=i(9749);e.html=function(t,...e){return new o("html",t,e)},e.svg=function(t,...e){return new o("svg",t,e)},e.css=function(t,...e){return new o("css",t,e)};class o{static join(t,e){let i=[],n=[];for(let r=0;r<t.length;r++){let s=t[r];r>0?(i[i.length-1]+=s.strings[0],i.push(...s.strings.slice(1))):i.push(...s.strings),n.push(...s.values),e instanceof o?r<t.length-1&&e&&(i[i.length-1]+=e.strings[0],i.push(...e.strings.slice(1)),n.push(...e.values)):r<t.length-1&&e&&(i[i.length-1]+=e)}return new o(t[0].type,i,n)}constructor(t,e,i){this.type=t,this.strings=e,this.values=i}toString(){let t=this.strings[0];for(let e=0;e<this.strings.length-1;e++){let i=this.values[e];null!=i&&(Array.isArray(i)?t+=i.join(""):t+=String(i)),t+=this.strings[e+1]}return t}clone(){return new o(this.type,[...this.strings],[...this.values])}concat(t){let e=[...this.strings];e[e.length-1]+=t.strings[0],e.push(...t.strings.slice(1));let i=[...this.values];return new o(this.type,e,i)}extends(t){return"html"===this.type||"svg"===this.type?(0,n.extendsTemplateResult)(this,t):new o(this.type,[...t.strings,...this.strings],[...t.values,"",...this.values])}}e.TemplateResult=o},2878:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeGetting=e.clearDependenciesOf=e.endUpdating=e.startUpdating=e.observeComponentTarget=e.observe=void 0;var n=i(2066);Object.defineProperty(e,"observe",{enumerable:!0,get:function(){return n.observe}});var o=i(1520);Object.defineProperty(e,"observeComponentTarget",{enumerable:!0,get:function(){return o.observeComponentTarget}});var r=i(6205);Object.defineProperty(e,"startUpdating",{enumerable:!0,get:function(){return r.startUpdating}}),Object.defineProperty(e,"endUpdating",{enumerable:!0,get:function(){return r.endUpdating}}),Object.defineProperty(e,"clearDependenciesOf",{enumerable:!0,get:function(){return r.clearDependenciesOf}});var s=i(5664);Object.defineProperty(e,"observeGetting",{enumerable:!0,get:function(){return s.observeGetting}})},2951:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LiveAsyncRepeatDirective=e.liveAsyncRepeat=e.LiveRepeatDirective=e.liveRepeat=e.RepeatDirective=e.repeat=e.ToggleDirective=e.toggle=e.CacheDirective=e.cache=e.DirectiveReferences=e.DirectiveResult=e.refDirective=e.defineDirective=void 0;var n=i(5428);Object.defineProperty(e,"defineDirective",{enumerable:!0,get:function(){return n.defineDirective}}),Object.defineProperty(e,"refDirective",{enumerable:!0,get:function(){return n.refDirective}}),Object.defineProperty(e,"DirectiveResult",{enumerable:!0,get:function(){return n.DirectiveResult}}),Object.defineProperty(e,"DirectiveReferences",{enumerable:!0,get:function(){return n.DirectiveReferences}});var o=i(9649);Object.defineProperty(e,"cache",{enumerable:!0,get:function(){return o.cache}}),Object.defineProperty(e,"CacheDirective",{enumerable:!0,get:function(){return o.CacheDirective}});var r=i(3575);Object.defineProperty(e,"toggle",{enumerable:!0,get:function(){return r.toggle}}),Object.defineProperty(e,"ToggleDirective",{enumerable:!0,get:function(){return r.ToggleDirective}});var s=i(2736);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return s.repeat}}),Object.defineProperty(e,"RepeatDirective",{enumerable:!0,get:function(){return s.RepeatDirective}});var a=i(8457);Object.defineProperty(e,"liveRepeat",{enumerable:!0,get:function(){return a.liveRepeat}}),Object.defineProperty(e,"LiveRepeatDirective",{enumerable:!0,get:function(){return a.LiveRepeatDirective}});var l=i(8718);Object.defineProperty(e,"liveAsyncRepeat",{enumerable:!0,get:function(){return l.liveAsyncRepeat}}),Object.defineProperty(e,"LiveAsyncRepeatDirective",{enumerable:!0,get:function(){return l.LiveAsyncRepeatDirective}})},2954:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Resizer=void 0;const o=i(1416),r=i(5499);let s=class extends o.Component{constructor(){super(...arguments),this.position="right",this.rate=1,this.min=0,this.max=1/0,this.size=-1}static style(){return o.css`
		:host{
			position: absolute;
			z-index: 100;
		}

		.top{
			width: 100%;
			height: 10px;
			top: -5px;
			left: 0;
			cursor: ns-resize;
		}

		.bottom{
			width: 100%;
			height: 10px;
			bottom: -5px;
			left: 0;
			cursor: ns-resize;
		}

		.left{
			width: 10px;
			height: 100%;
			top: 0;
			left: -5px;
			cursor: ew-resize;
		}

		.right{
			width: 10px;
			height: 100%;
			top: 0;
			right: -5px;
			cursor: ew-resize;
		}

		.resizing-mask{
			position: fixed;
			z-index: 9999;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;

			&.herizontal{
				cursor: ew-resize;
			}

			&.vertical{
				cursor: ns-resize;
			}
		}
		`}render(){return o.html`
			<template
				:class=${this.position}
				@mousedown=${this.onStartResize}
			></template>
		`}onReady(){if("static"===(0,r.getStyleValue)(this.el.parentElement,"position"))throw new Error('Parent of "<f-resizer>" must can\'t have an "static" position')}onStartResize(t){let e=t.clientX,i=t.clientY,n=this.el.parentElement.offsetWidth,r=this.el.parentElement.offsetHeight,s=t=>{t.preventDefault(),this.resize(n,r,t.clientX-e,t.clientY-i)},a=(0,o.render)(o.html`
			<div class="resizing-mask" class="${"left"===this.position||"right"===this.position?"herizontal":"vertical"}" />
		`,this).getFirstElement();document.body.append(a),(0,o.on)(document,"mousemove",s),(0,o.once)(document,"mouseup",(()=>{(0,o.off)(document,"mousemove",s),a.remove(),this.emit("change",this.size)}))}resize(t,e,i,n){let o;"top"===this.position||"bottom"===this.position?(o=e+("bottom"===this.position?1:-1)*n*this.rate,o=(0,r.constrain)(o,this.min,this.max),this.el.parentElement.style.height=o+"px"):(o=t+("right"===this.position?1:-1)*i*this.rate,o=(0,r.constrain)(o,this.min,this.max),this.el.parentElement.style.width=o+"px"),this.size=o,this.emit("change",this.size)}};s=n([(0,o.define)("f-resizer")],s),e.Resizer=s},2959:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.IconLoading=e.Icon=void 0;const o=i(1416),r=i(236),s=i(5499),a=i(8240);let l=class extends o.Component{constructor(){super(...arguments),this.type=""}render(){let t=r.icons.get(this.type);if(!t)return"";let[e,i]=(0,s.subMatches)(t,/<svg viewBox="(.+?)">([\s\S]+?)<\/svg>/)[0],[,,n,l]=e.split(" "),h=a.theme.adjust(Number(n)),d=a.theme.adjust(Number(l));return o.html`
			<template>
				<svg
					viewBox=${e}
					width=${h}
					height=${d}
					:html=${i}
				></svg>
			</template>
		`}};l.style=o.css`
	:host{
		display: inline-flex;
		stroke: currentColor;
		fill: none;
		margin: auto 0;
		vertical-align: middle;

		svg{
			margin: auto;
		}
	}
	`,l=n([(0,o.define)("f-icon")],l),e.Icon=l;let h=class extends l{constructor(){super(...arguments),this.type="refresh",this.loading=!1,this.playing=!1}onCreated(){this.watchImmediately((()=>this.loading),(t=>{t&&!this.playing&&(this.play(),this.playing=!0)}))}play(){(0,s.animateInterpolatedValue)((t=>{this.el.style.transform=`rotate(${t}deg)`}),0,360,1e3,"linear").promise.then((()=>{this.loading?this.play():this.playing=!1}))}};h.style=o.css`
	:host{
		display: inline-flex;
		stroke: currentColor;
		fill: none;
		margin: auto 0;
		vertical-align: top;
		position: relative;
	}`,h=n([(0,o.define)("f-icon-loading")],h),e.IconLoading=h},3088:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnWidthResizer=void 0;const n=i(5499),o=i(1416);e.ColumnWidthResizer=class{constructor(t,e,i,n,o,r){this.columnWidths=null,this.resizingColumnWidths=null,this.columnResized=!1,this.cachedHeadClientWidth=0,this.head=t,this.columnContainer=e,this.colgroup=i,this.columns=n,this.minColumnWidth=o,this.resizingMaskClassName=r}setColumns(t){this.columns=t}setMinColumnWidth(t){this.minColumnWidth=t}updatColumnWidthsPrecisely(){let t=this.head.clientWidth-(0,n.getStyleValueAsNumber)(this.head,"paddingLeft")-(0,n.getStyleValueAsNumber)(this.head,"paddingRight");this.cachedHeadClientWidth=t,this.updatColumnWidthsByAvailableWidth(t)}updatColumnWidthsRoughly(){this.updatColumnWidthsByAvailableWidth(this.cachedHeadClientWidth)}updatColumnWidthsByAvailableWidth(t){let e=this.columns.map((({flex:t,width:e},i)=>{var n,o;let r=Math.max(e||0,this.minColumnWidth),s=this.columnResized?this.columnWidths[i]:r,a=0,l=0;return Array.isArray(t)?(a=null!==(n=t[0])&&void 0!==n?n:0,l=null!==(o=t[1])&&void 0!==o?o:a):a=l=null!=t?t:0,[s,a,l]})),i=this.calcColumnWidths(e,t,this.minColumnWidth);this.columnWidths=i,this.setColumnWidths(i)}calcColumnWidths(t,e,i){if(e<i*t.length)return(0,n.repeatForTimes)(e/t.length,t.length);let o=0,r=0,s=0,a=(0,n.repeatForTimes)(i,t.length),l=new Set;for(let[e,i,n]of t)o+=e,r+=i,s+=n;for(0===r&&(r=t.length,t.forEach((t=>t[1]=1))),0===s&&(s=t.length,t.forEach((t=>t[2]=1)));;){let n=(e-o)/(e>=o?r:s),h=!1;for(let s=0;s<t.length;s++){if(l.has(s))continue;let[d,c,u]=t[s],p=n>=0?c:u,m=p*n+d;m<i?(e-=i,o-=i,r-=p,l.add(s),h=!0):a[s]=m}if(!h)break}return a}setColumnWidths(t){let e=(0,n.sum)(t);for(let i=0;i<t.length;i++){let n=i===t.length-1,o=t[i]/e;this.colgroup.children[i].style.width=100*o+"%",n||(this.columnContainer.children[i].style.width=100*o+"%")}}onStartResize(t,e){let i=t.clientX,n=t=>{t.preventDefault(),this.resizeColumnByMovementX(t.clientX-i,e)},r=(0,o.render)(o.html`<div class="${this.resizingMaskClassName}" />`).getFirstElement();document.body.append(r),(0,o.on)(document,"mousemove",n),(0,o.once)(document,"mouseup",(()=>{this.resizingColumnWidths&&(this.columnWidths=this.resizingColumnWidths,this.resizingColumnWidths=null),(0,o.off)(document,"mousemove",n),r.remove(),this.columnResized=!0}))}resizeColumnByMovementX(t,e){let i=[...this.columnWidths],n=Math.abs(t),o=t<0,r=o?e+1:e;for(let t=o?e:e+1;(o?t>=0:t<this.columns.length)&&n>0;o?t--:t++){let e=i[t],o=n;e-o<this.minColumnWidth&&(o=e-this.minColumnWidth),i[t]-=o,i[r]+=o,n-=o}this.resizingColumnWidths=i,this.setColumnWidths(i)}}},3163:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.loader=e.ResourceLoader=void 0;const n=i(9104);class o extends n.EventEmitter{constructor(t={}){var e;super(),this.loaded=0,this.loadedCount=0,this.totalCount=0,this.base=null!==(e=t.base)&&void 0!==e?e:"",this.revisions=t.revisions||{},this.on("finish",(()=>{this.loaded=0,this.loadedCount=0,this.totalCount=0}))}untilFinish(){return new Promise(((t,e)=>{this.once("finish",t),this.once("error",e)}))}async load(t,e){this.totalCount++;let i=0;return new Promise((async(n,o)=>{try{let o=await this.loadResourceBlob(t,((t,e)=>{let n=t/e||0;this.loaded+=n-i,i=n,this.emit("progress",Math.min(this.loaded,this.totalCount),this.totalCount)})),r=o?await this.getFromBlob(o,e||"blob"):null;this.loadedCount++,this.loadedCount===this.totalCount&&(this.emit("progress",this.loadedCount,this.totalCount),this.emit("finish")),n(r)}catch(t){o(t),this.emit("error",t)}}))}async loadText(t){return await this.load(t,"text")}async loadJSON(t){return await this.load(t,"json")}async loadBlob(t){return await this.load(t,"blob")}async loadBuffer(t){return await this.load(t,"buffer")}async loadCSS(t){return await this.load(t,"css")}async loadJS(t){return await this.load(t,"js")}async loadImage(t){return await this.load(t,"image")}async loadAudio(t){return await this.load(t,"audio")}async loadVideo(t){return await this.load(t,"video")}getAbsoluteURL(t){let e=this.revisions[t];return e&&(t=t.replace(/\.\w+$/,`-${e}$&`)),/^(?:https?:|\/\/)/.test(t)||!this.base?t:this.base+t}async loadResourceBlob(t,e){let i=this.getAbsoluteURL(t);return new Promise(((t,n)=>{let o=new XMLHttpRequest;o.responseType="blob",o.open("GET",i),o.onprogress=t=>{t.lengthComputable&&e(t.loaded,t.total)},o.onloadend=()=>{o.status>=200&&o.status<400?t(o.response):n()},o.send()}))}async getFromBlob(t,e){let i;return"blob"===e?i=t:"css"===e?i=await this.loadStyle(t):"js"===e?i=await this.loadScript(t):"text"===e?i=this.getAsText(t):"json"===e?i=this.getAsJSON(t):"buffer"===e?i=this.getAsBuffer(t):"image"===e?i=this.getAsImage(t):"audio"===e?i=this.getAsAudio(t):"video"===e&&(i=this.getAsVideo(t)),i}loadStyle(t){return new Promise(((e,i)=>{let n=document.createElement("link");n.rel="stylesheet",n.href=URL.createObjectURL(t),document.head.append(n),n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(()=>i()))}))}loadScript(t){return new Promise(((e,i)=>{let n=document.createElement("script");n.async=!1,n.src=URL.createObjectURL(t),document.head.append(n),n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(()=>i()))}))}getAsText(t){return new Promise((e=>{let i=new FileReader;i.onload=()=>{e(i.result)},i.readAsText(t)}))}async getAsJSON(t){let e=await this.getAsText(t);return e?JSON.parse(e):null}async getAsBuffer(t){return new Promise(((e,i)=>{let n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=t=>{i(t)},n.readAsArrayBuffer(t)}))}async getAsImage(t){return new Promise(((e,i)=>{let n=URL.createObjectURL(t),o=new Image;o.src=n,o.onload=()=>e(o),o.onerror=t=>i(t)}))}async getAsAudio(t){return new Promise(((e,i)=>{let n=URL.createObjectURL(t),o=document.createElement("audio");o.preload="auto",o.oncanplaythrough=()=>{e(o)},o.onerror=t=>{i(t)},o.src=n}))}async getAsVideo(t){return new Promise(((e,i)=>{let n=URL.createObjectURL(t),o=document.createElement("video");o.preload="auto",o.oncanplaythrough=()=>{e(o)},o.onerror=t=>{i(t)},o.src=n}))}}e.ResourceLoader=o,e.loader=new o},3218:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PageDataCacher=void 0;const n=i(5499);e.PageDataCacher=class{constructor(t,e,i,n=0){this.cacheMap=new Map,this.requests=new Map,this.totalDataCount=null,this.pageSize=t,this.dataCount=e,this.dataGetter=i,this.preloadPageCount=n}getCache(){return this.cacheMap}setCache(t){this.cacheMap=t}async getDataCount(){if(null!==this.totalDataCount)return this.totalDataCount;let t,e=this.dataCount,i=0;return t="function"==typeof e?e():e,i=t instanceof Promise?await t:t,this.totalDataCount=i,i}getImmediateData(t,e){let i=Math.floor(t/this.pageSize),o=Math.floor((e-1)/this.pageSize),r=[];for(let s=i;s<=o;s++){let a=this.cacheMap.get(s);a||(a=(0,n.repeatForTimes)(null,this.pageSize)),s===i&&s===o?r.push(...a.slice(t-i*this.pageSize,e-o*this.pageSize)):s===i?r.push(...a.slice(t-i*this.pageSize)):s===o?r.push(...a.slice(0,e-o*this.pageSize)):r.push(...a)}return this.preloadDataIfNeeded(o+1),r}async getFreshData(t,e){let i=Math.floor(t/this.pageSize),n=Math.floor((e-1)/this.pageSize),o=[];for(let t=i;t<=n;t++)o.push(this.ensurePageData(t));return this.preloadDataIfNeeded(n+1),await Promise.all(o),this.getImmediateData(t,e)}async preloadDataIfNeeded(t){if(null!==this.totalDataCount&&this.preloadPageCount>0){let e=Math.floor((this.totalDataCount-1)/this.pageSize);for(let i=t;i<=e&&i<t+this.preloadPageCount;i++)await this.ensurePageData(i)}}async ensurePageData(t){this.cacheMap.has(t)||await this.loadPageData(t)}loadPageData(t){if(this.requests.has(t))return this.requests.get(t);let e=t*this.pageSize,i=(t+1)*this.pageSize;null!==this.totalDataCount&&(i=Math.min(i,this.totalDataCount));let n=this.dataGetter(e,i);if(n instanceof Promise){let e=n.then((e=>{this.requests.has(t)&&(this.cacheMap.set(t,[...e]),this.requests.delete(t))}));return this.requests.set(t,e),e}return this.cacheMap.set(t,[...n]),Promise.resolve()}moveData(t,e){if(0===e)return;let i=Math.floor(t/this.pageSize),n=Math.floor((t+e)/this.pageSize);i>n&&([i,n]=[n,i]);let o=Math.max(...this.cacheMap.keys()),r=this.cacheMap.get(o).length+o*this.pageSize+e,s=Math.ceil(r/this.pageSize);if(e>0)for(let t=s;t>n;t--){let i=t*this.pageSize,n=t*this.pageSize+this.pageSize;i-=e,n-=e,this.makeNewCacheItem(t,i,n)}else for(let t=n+1;t<=s;t++){let i=t*this.pageSize,n=t*this.pageSize+this.pageSize;i-=e,n-=e,this.makeNewCacheItem(t,i,n)}for(let t=i;t<=n;t++)this.cacheMap.delete(t);for(let t=s+1;t<=o;t++)this.cacheMap.delete(t);for(let t of[...this.requests.keys()])t>=i&&this.requests.delete(t);null!==this.totalDataCount&&(this.totalDataCount+=e)}makeNewCacheItem(t,e,i){let n=this.getImmediateData(e,i);return!!n.some((t=>null!==t))&&(this.cacheMap.set(t,n),!0)}clear(){this.cacheMap=new Map,this.requests=new Map,this.totalDataCount=null}}},3343:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"tips",code:'<svg viewBox="0 0 15 15"><path style="fill:currentColor; stroke:none;" d="M7,1c3.3,0,6,2.7,6,6s-2.7,6-6,6s-6-2.7-6-6S3.7,1,7,1 M7,0C3.1,0,0,3.1,0,7s3.1,7,7,7s7-3.1,7-7S10.9,0,7,0z"/><rect style="fill:currentColor; stroke:none;" x="6" y="3" width="2" height="2"/><polygon style="fill:currentColor; stroke:none;" points="8,10 8,7 8,6 6,6 5,6 5,7 6,7 6,10 5,10 5,11 6,11 8,11 9,11 9,10"/></svg>'}},3393:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateAllStyles=e.addGlobalStyle=e.ensureComponentStyle=void 0;const n=i(1106),o=new Map,r=[];function s(t,e){let i=document.createElement("style");i.setAttribute("name",e),i.textContent=a(t,e);let n=document.head.querySelector("script");return document.head.insertBefore(i,n),i}function a(t,e){return"function"==typeof t&&(t=t()),(0,n.parseStyleCodes)(String(t),"global"===e?"":e)}e.ensureComponentStyle=function(t,e){if(t.style&&!o.has(t)){let i=s(t.style,e);o.set(t,i)}},e.addGlobalStyle=function(t){let e=s(t,"global");return r.push({style:t,tag:e}),e},e.updateAllStyles=function(){for(let[t,e]of o.entries())if(t.style){let i=a(t.style,e.getAttribute("name"));i!==e.textContent&&(e.textContent=i)}for(let{style:t,tag:e}of r)if("function"==typeof t){let i=a(t,e.getAttribute("name"));i!==e.textContent&&(e.textContent=i)}}},3549:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatSecondsToTime=e.formatSecondsToDuration=e.parseSecondsToDateObject=e.parseDurationToSeconds=e.parseDurationToObject=void 0;const n=i(5956),o="yMdhms",r={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1};function s(t){let e={y:0,M:0,d:0,h:0,m:0,s:0};if(t.includes(":")){let[i,o,r]=(0,n.subMatches)(t,/(?:(\d\d):)?(\d\d):(\d\d(?:\.\d+)?)/)[0].map((t=>Number(t)||0));e.h=i,e.m=o,e.s=r}else{let i=(0,n.subMatches)(t,/(\d+(?:\.\d+)?) ?([yMwdhms])/g);for(let[t,n]of i)e[n]=Number(t)}return e}function a(t,e=o){let i={y:0,M:0,d:0,h:0,m:0,s:0};for(let n of e){let e=r[n],o=Math.floor(t/e);o>0&&(i[n]=o,t%=e)}return i}e.parseDurationToObject=s,e.parseDurationToSeconds=function(t){let e=s(t),i=0;for(let t of Object.keys(e))i+=e[t]*r[t];return i},e.parseSecondsToDateObject=a,e.formatSecondsToDuration=function(t,e=o,i=e.length){let n=a(t,e),r="",s=0;for(let t of Object.keys(n)){let e=n[t];if(e>0&&(r+=e+t,s++),s>=i)break}return r},e.formatSecondsToTime=function(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60)||0,n=Math.floor(t%60)||0;return(e?String(e).padStart(2,"0")+":":"")+String(i).padStart(2,"0")+":"+String(n).padStart(2,"0")}},3575:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toggle=e.ToggleDirective=void 0;const n=i(5428),o=i(4511),r=i(5400);class s{constructor(t,e){this.currentTemplate=null,this.anchor=t,this.context=e,this.transition=new r.ContextualTransition(e)}canPatchBy(){return!0}patch(t,e){this.transition.updateOptions(e),t?this.currentTemplate&&this.currentTemplate.canPatchBy(t)?this.currentTemplate.patch(t):(this.currentTemplate&&this.movesOutCurrentTemplate(),this.makeNewTemplate(t)):this.currentTemplate&&this.movesOutCurrentTemplate()}async playEnterTransition(t){let e=t.getFirstElement();e&&await this.transition.playEnter(e)}async movesOutCurrentTemplate(){let t=this.currentTemplate,e=!1;if(this.transition.shouldPlayLeave()){let i=t.getFirstElement();i&&await this.transition.playLeave(i)&&t.remove(),e=!0}e||t.movesOut(),this.currentTemplate=null}makeNewTemplate(t){let e=new o.Template(t,this.context);this.anchor.insert(e.extractToFragment()),this.tryPlayEnterTransition(e),this.currentTemplate=e}async tryPlayEnterTransition(t){if(this.transition.shouldPlayEnter()){let e=t.getFirstElement();e&&await this.transition.playEnter(e)}}remove(){this.currentTemplate&&this.currentTemplate.remove()}}e.ToggleDirective=s,e.toggle=(0,n.defineDirective)(s)},3582:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Select=void 0;const o=i(5499),r=i(1416),s=i(8240),a=i(7975);let l=class extends a.Dropdown{constructor(){super(...arguments),this.inputted="",this.editing=!1,this.trigger="click",this.triangle=!1,this.alignMargin=0,this.multipleSelect=!1,this.searchable=!1,this.placeholder="",this.data=[],this.value=null,this.hideAfterSelected=!0}static style(){let{mainColor:t,adjust:e,borderColor:i,popupShadowBlurRadius:n,fieldBackgroundColor:o,popupShadowColor:a}=s.theme;return r.css`
		:host{
			display: inline-flex;
			vertical-align: top;
			width: ${e(200)}px;
			height: ${e(28)}px;
			background: ${o};
			line-height: ${e(28)}px;
			justify-content: space-between;
			align-items: center;
			cursor: pointer;
			box-shadow: inset 0 -1px 0 0 ${i};

			&:hover, &.opened{
				box-shadow: inset 0 -1px 0 0 ${t};

				.icon{
					color: ${t};
				}
			}

			&.not-inputable input{
				cursor: pointer;
			}
		}

		.down-icon{
			margin-left: 3px;
			margin-right: 4px;
		}
	
		.display, .input{
			flex: 1;
			min-width: 0;
			padding: 0 0 0 ${e(8)}px;
			height: 100%;
			border: none;
			background: transparent;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			box-shadow: none;

			&:focus{
				box-shadow: none;
			}
		}

		.placeholder{
			opacity: 0.5;
		}
	
		.popup{
			padding: 0;
			border-radius: 0;
			filter: none;
			box-shadow: 0 1px ${n}px ${a};
		}

		.list{
			border-bottom: none;

			.option__f-list{
				padding-left: ${e(8)}px;
				border-top: none;
			}
		}

		.selected-icon{
			margin-right: -4px;
		}
		`.extends(super.style())}onCreated(){this.initializeStartValue()}initializeStartValue(){this.multipleSelect&&!Array.isArray(this.value)&&(this.value=[])}setOpened(t){super.setOpened(t),this.searchable&&!t&&this.editing&&this.endEditing()}render(){return r.html`
			<template :class.not-inputable=${!this.searchable}>
				${this.renderDisplayOrInput()}
			</template>
		`.extends(super.render())}renderDisplayOrInput(){if(this.editing)return r.html`
				<input type="text"
					class="input"
					:refElement="input"
					.value=${this.inputted}
					.placeholder=${this.placeholder}
					?readonly=${!this.editing}
					@click=${this.onClick}
					@input=${this.onInput}
				>
			`;{let t=this.renderCurrentDisplay();return r.html`
				<div
					class="input"
					:class.placeholder=${!t}
					@click=${this.onClick}
				>
					${t||this.placeholder}
				</div>
			`}}renderPopup(){let t=this.getDisplayData();return r.html`
			<f-popup
				class="popup"
				:refElement="popup"
				.triangle="false"
			>
				<f-list class="list"
					:refElement="list"
					.type="selection"
					.selectable
					.data=${t}
					.multipleSelect=${this.multipleSelect}
					.selected=${this.multipleSelect?this.value:[this.value]}
					.navigateFrom=${()=>this.refElements.input}
					@@select=${this.onSelected}
				/>
			</f-popup>
		`}renderCurrentDisplay(){if(this.multipleSelect){let t=[];for(let{value:e,text:i}of this.data)this.value.includes(e)&&t.push(i.toString());return t.join("; ")}for(let{value:t,text:e}of this.data)if(this.value===t)return e;return""}getDisplayData(){var t;if(this.searchable&&this.inputted){let e=this.inputted.toLowerCase(),i=[];for(let n of this.data)(null!==(t=n.searchText)&&void 0!==t?t:String(n.text).toLowerCase()).includes(e)&&i.push(n);return i}return this.data}onClick(){this.searchable&&!this.editing&&this.startEditing()}onSelected(t){this.multipleSelect?this.value=t:(this.value=t,this.hideAfterSelected&&this.hidePopup()),this.emit("change",this.value)}async startEditing(){this.editing=!0,await(0,r.untilRenderComplete)(),this.refElements.input.focus()}endEditing(){this.editing=!1,this.inputted=""}onPopupOpened(){(0,r.onRenderComplete)((()=>{this.mayFocusInput(),this.scrollToViewSelectedOption()}))}mayFocusInput(){this.editing&&this.refElements.input&&this.refElements.input.focus()}onWillAlign(){this.syncPopupWidth()}syncPopupWidth(){this.refElements.popup&&(this.refElements.popup.style.minWidth=String(this.el.offsetWidth)+"px")}scrollToViewSelectedOption(){if(this.refElements.list){let t=this.refElements.list.querySelector("[class*=selected]");t&&"y"===(0,o.getScrollDirection)(this.refElements.list)&&(0,o.scrollToTop)(t)}}onInput(){this.inputted=this.refElements.input.value,this.showPopup()}};l=n([(0,r.define)("f-select")],l),e.Select=l},3583:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonGroup=void 0;const o=i(1416);let r=class extends o.Component{static style(){return o.css`
		:host{
			display: inline-flex;
			vertical-align: top;
		}

		button{
			&:nth-child(n+2){
				margin-left: -1px;
				border-top-left-radius: 0;
				border-bottom-left-radius: 0;
			}
	
			&:nth-last-child(n+2){
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;
			}
	
			&[primary]{
				position: relative;
				z-index: 1;
			}

			&:hover{
				position: relative;
				z-index: 1;
			}
		}
		`}};r=n([(0,o.define)("f-buttongroup")],r),e.ButtonGroup=r},3635:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"order-asc",code:'<svg viewBox="0 0 7 14"><polygon style="fill:currentColor;stroke:none;fill-opacity:0.4;" points="5.7,8 3.5,11.8 1.3,8 0.2,8 0.1,8 3.5,13.8 6.9,8 6.8,8"/><polygon style="fill:currentColor;stroke:none;" points="3.5,0.3 0.1,6 0.2,6 1.3,6 3.5,2.2 5.7,6 6.8,6 6.9,6"/></svg>'}},3656:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Navigation=void 0;const o=i(1416),r=i(2522),s=i(8240);let a=class extends r.List{constructor(){super(...arguments),this.type="navigation",this.title=""}static style(){let{backgroundColor:t,adjust:e,adjustFontSize:i}=s.theme;return o.css`
		:host{
			padding: ${e(8)}px ${e(16)}px;
			border-bottom: none;
			background: ${t.toMiddle(9)};
			overflow-y: auto;
		}

		.title{
			font-size: ${i(18)}px;
			font-weight: 300;
			margin-top: ${e(4)}px;
			margin-bottom: ${e(8)}px;
		}

		`.extends(super.style())}render(){return o.html`
			${this.title?o.html`
			<div class="title">
				${this.title}
			</div>`:""}

			${this.renderOptions(this.data,this.treeNavigationIndices)}
		`}};a=n([(0,o.define)("f-navigation")],a),e.Navigation=a},3675:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"close",code:'<svg viewBox="0 0 15 15"><line style="fill:none;stroke:currentColor;stroke-width:1.0526;" x1="12.5" y1="2.5" x2="2.5" y2="12.5"/><line style="fill:none;stroke:currentColor;stroke-width:1.0526;" x1="12.5" y1="12.5" x2="2.5" y2="2.5"/></svg>'}},3719:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"confirm",code:'<svg viewBox="0 0 21 21"><rect style="fill:currentColor; stroke:none;" x="9.5" y="14.5" width="2" height="2"/><path style="fill:currentColor; stroke:none;" d="M13.6,6.4c-0.1-0.4-0.3-0.7-0.6-1c-0.3-0.3-0.6-0.5-1-0.7c-0.5-0.2-1-0.3-1.5-0.3c-0.5,0-0.9,0.1-1.3,0.3C8.8,4.9,8.5,5.2,8.2,5.5C7.9,5.8,7.6,6.2,7.5,6.7C7.3,7.2,7.2,7.7,7.2,8.3h1.7c0-0.3,0.1-0.7,0.2-1C9.1,7,9.3,6.8,9.4,6.5c0.1-0.2,0.3-0.4,0.5-0.5c0.2-0.1,0.4-0.2,0.6-0.2c0.2,0,0.4,0,0.6,0.1c0.2,0.1,0.3,0.2,0.5,0.3c0.1,0.1,0.2,0.3,0.3,0.5C12,7,12,7.3,12,7.5C12,7.7,12,8,11.9,8.2c-0.1,0.2-0.3,0.4-0.5,0.6c-0.2,0.2-0.4,0.4-0.6,0.6c-0.2,0.2-0.4,0.4-0.6,0.6c-0.2,0.2-0.3,0.5-0.5,0.7c-0.1,0.3-0.2,0.6-0.2,0.9V12l0,0v1h2v-0.6l0,0v-0.7c0-0.3,0.1-0.5,0.2-0.8c0.1-0.2,0.3-0.4,0.4-0.6c0.2-0.2,0.3-0.4,0.6-0.6c0.2-0.2,0.4-0.4,0.6-0.6c0.2-0.2,0.3-0.5,0.4-0.7c0.1-0.3,0.2-0.6,0.2-0.9C13.8,7.1,13.7,6.7,13.6,6.4z"/><circle style="fill:none;stroke:currentColor;" cx="10.5" cy="10.5" r="10"/></svg>'}},3728:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.off=e.once=e.on=void 0;const n=i(5296),o=["capture","self","once","prevent","stop","passive"],r=["ctrl","shift","alt"],s=["check","uncheck"],a=["up","down"],l={left:0,middle:1,right:2,main:0,auxiliary:1,secondary:2},h={keydown:c,keyup:c,keypress:c,mousedown:u,mousemove:u,mouseup:u,click:u,dblclick:u,change:function(t,[e]){let i=t.target.checked;return i&&"check"===e||i&&"uncheck"===e},wheel:function(t,[e]){return t.deltaY<0&&"up"===e||t.deltaY>0&&"down"===e}},d=new n.DoubleKeysWeakMap;function c(t,e){let i=[];for(let n of e)if(r.includes(n)){if(!p(t,n))return!1}else i.push(n);return 0===i.length||i.includes(t.code.toLowerCase())||i.includes(t.key.toLowerCase())}function u(t,e){let i=[];for(let n of e)if(r.includes(n)){if(!p(t,n))return!1}else i.push(n);return 0===i.length||!!i.find((e=>l[e]===t.button))}function p(t,e){return!("ctrl"===e&&!t.ctrlKey&&!t.metaKey||"shift"===e&&!t.shiftKey||"alt"===e&&!t.altKey)}function m(t,e,i,n,c){let u=i,p=null;i.includes(".")&&([u,...p]=i.split("."),function(t,e,i){if(0===(i=i.filter((t=>!o.includes(t)))).length)return!0;if("change"===e){if(i.length>1||!s.includes(i[0]))throw new Error(`"${t}" is valid, change event modifier must be only one of "${s.join(",")}"!`)}else if("wheel"===e){if(i.length>1||!a.includes(i[0]))throw new Error(`"${t}" is valid, wheel event modifier must be only one of "${a.join(",")}"!`)}else if(("mousedown"===e||"mousemove"===e||"mouseup"===e||"click"===e)&&(i=i.filter((t=>!r.includes(t))),!l.hasOwnProperty(i[0])))throw new Error(`"${t}" is valid, button filter for mouse event must be one of "${Object.keys(l).join(",")}"!`)}(i,u,p));let m=function(t,e,i,n,r,s){let a=null==e?void 0:e.filter((t=>!o.includes(t)));return function(o){a&&a.length>0&&!(0,h[n])(o,a)||e&&e.includes("self")&&o.target!==i||(e&&e.includes("prevent")&&o.preventDefault(),e&&e.includes("stop")&&o.stopPropagation(),(t||e&&e.includes("once"))&&g(i,n,r,s),s?r.call(s,o):r(o))}}(t,p,e,u,n,c),f=!!p&&p.includes("capture"),y=!!p&&p.includes("passive"),x=y||"wheel"===u?{capture:f,passive:y}:f,w=d.get(e,u);w||(w=[],d.set(e,u,w)),w.push({name:i,handler:n,wrappedHandler:m,scope:c,capture:f}),e.addEventListener(u,m,x)}function g(t,e,i,n){e=e.replace(/\..+/,"");let o=d.get(t,e);if(o)for(let r=o.length-1;r>=0;r--){let s=o[r];i&&s.handler!==i&&(!s.handler.hasOwnProperty("__original")||s.handler.__original!==i)||n&&s.scope!==n||(t.removeEventListener(e,s.wrappedHandler,s.capture),o.splice(r,1))}}e.on=function(t,e,i,n){m(!1,t,e,i,n)},e.once=function(t,e,i,n){m(!0,t,e,i,n)},e.off=g},3785:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extendsAttributes=void 0,e.extendsAttributes=function(t,e){for(let{name:i,value:n}of e)"class"!==i&&"style"!==i||!t.hasAttribute(i)||("style"===i?n=t.getAttribute(i)+"; "+n:"class"===i&&(n=t.getAttribute(i)+" "+n)),t.setAttribute(i,n)}},3792:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Textarea=e.Input=void 0;const o=i(1416),r=i(6585),s=i(8240),a=i(972);let l=class extends o.Component{constructor(){super(...arguments),this.type="text",this.touched=!1,this.valid=null,this.placeholder="",this.value="",this.validator=null,this.error="",this.errorInTooltip=!1}static style(){let{adjust:t,adjustFontSize:e,errorColor:i,borderColor:n,mainColor:r,successColor:a,focusBlurRadius:l,fieldBackgroundColor:h}=s.theme;return o.css`
		:host{
			display: inline-block;
			vertical-align: top;
			position: relative;
			width: ${t(200)}px;
			height: ${t(28)}px;
			background: ${h};
			box-shadow: inset 0 -1px 0 0 ${n};
		}

		input, textarea{
			width: 100%;
			height: 100%;
			border: none;
			background: none;
			
			&:focus{
				box-shadow: 0 0 ${l}px ${r.alpha(.5)};
			}
		}

		input{
			height: 100%;
			padding: 0 0 0 ${t(8)}px;
		}

		textarea{
			line-height: ${t(20)}px;
			padding: ${t(4)}px ${t(8)}px;
		}

		.valid{
			box-shadow: inset 0 -1px 0 0 ${a};

			input, textarea{
				padding-right: ${t(28)}px;

				&:focus{
					box-shadow: 0 0 ${l}px ${a.alpha(.5)};
				}
			}
		}

		.invalid{
			box-shadow: inset 0 -1px 0 0 ${i};

			input, textarea{
				padding-right: ${t(28)}px;

				&:focus{
					box-shadow: 0 0 ${l}px ${i.alpha(.5)};
				}
			}
		}

		.valid-icon{
			position: absolute;
			top: 0;
			bottom: 0;
			right: 6px;
			color: ${a};
		}

		.error{
			position: absolute;
			left: 0;
			top: 100%;
			font-size: ${e(13)}px;
			line-height: ${t(22)}px;
			color: ${i};
		}
		`}onCreated(){this.validate();let t=(0,o.getClosestComponentOfType)(this.el,a.Form);t&&t.register(this)}render(){let t=this.errorInTooltip&&this.error&&this.touched?(0,r.tooltip)(this.error,{type:"error"}):null;return o.html`
			<template
				:class.valid=${this.touched&&this.valid}
				:class.invalid=${this.touched&&!1===this.valid}
			>
				<input type=${this.type}
					.placeholder=${this.placeholder||""}
					.value=${this.value}
					:refElement="input"
					${t}
					@blur=${this.onBlur}
					@input=${this.onInput}
					@change=${this.onChange}
				/>
				${this.touched&&this.valid?o.html`<f-icon class="valid-icon" .type="checked" />`:""}
				${this.touched&&this.error&&!this.errorInTooltip?o.html`<div class="error">${this.error}</div>`:""}
			</template>
		`}onBlur(){this.touched=!0,this.validate()}onInput(t){if(t.isComposing)return;let e=this.refElements.input.value;this.validator&&(this.valid=null,this.error=""),this.emit("input",e)}onChange(){let t=this.refElements.input,e=this.value=t.value;this.validate(),this.emit("change",e,this.valid)}validate(){this.validator&&(this.error=this.validator(this.value),this.valid=!this.error)}setTouched(t){this.touched=t}};l=n([(0,o.define)("f-input")],l),e.Input=l;let h=class extends l{static style(){return o.css`
		:host{
			height: auto;
		}
		`.extends(super.style())}render(){return o.html`
			<textarea
				placeholder=${this.placeholder}
				.value=${this.value}
				:refElement="input"
				:class.valid=${this.touched&&!0===this.valid}
				:class.invalid=${this.touched&&!1===this.valid}
				@focus=${this.onBlur}
				@input=${this.onInput}
				@change=${this.onChange}
			/>
		`}};h=n([(0,o.define)("f-textarea")],h),e.Textarea=h},3946:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Search=void 0;const o=i(1416),r=i(8240);let s=class extends o.Component{constructor(){super(...arguments),this.focused=!1,this.inCompositionInputting=!1,this.lazy=!0,this.placeholder="",this.value=""}static style(){let{adjust:t,borderColor:e,borderRadius:i,mainColor:n,focusBlurRadius:s,lineHeight:a,fieldBackgroundColor:l}=r.theme;return o.css`
		:host{
			display: inline-block;
			vertical-align: top;
			position: relative;
		}

		input{
			width: 100%;
			border: none;
			background: ${l};
			height: ${t(28)}px;
			padding: 0 ${t(a-2)}px 0 ${t(a-2)}px;
			line-height: ${a-2}px;
			border: 1px solid ${e};
			border-radius: ${i}px;
			
			&:focus{
				border-color: ${n};
				box-shadow: 0 0 ${s}px ${n.alpha(.5)};
			}
		}

		.search-icon{
			position: absolute;
			top: 0;
			bottom: 0;
			left: ${t(8)}px;
			color: ${e.toMiddle(10)};
		}

		.clear{
			display: flex;
			position: absolute;
			width: ${t(28)}px;
			top: 0;
			bottom: 0;
			right: 0px;
			color: ${e.toMiddle(10)};
			cursor: pointer;

			&:hover{
				color: ${n};
			}

			&:active{
				transform: translateY(1px);
			}
		}

		.close-icon{
			margin: auto;
		}
		`}render(){return o.html`
			<f-icon class="search-icon" .type="search" />

			<input type="text"
				placeholder=${this.placeholder}
				.value=${this.value}
				:refElement="input"
				@focus=${this.onFocus}
			/>

			${this.value?o.html`
					<div class="clear" @click.stop=${this.clear}>
						<f-icon class="close-icon" .type="close" />
					</div>`:""}
		`}onReady(){this.lazy?(0,o.on)(this.refElements.input,"change",this.onChange,this):((0,o.on)(this.refElements.input,"compositionstart",this.onCompositionStart,this),(0,o.on)(this.refElements.input,"compositionend",this.onCompositionEnd,this),(0,o.on)(this.refElements.input,"input",this.onInput,this))}onFocus(){this.focused=!0,(0,o.once)(this.refElements.input,"blur",(()=>this.focused=!1))}onChange(){this.updateValue()}onCompositionStart(){this.inCompositionInputting=!0}onCompositionEnd(){this.inCompositionInputting=!1,this.onInput()}onInput(){this.updateValue()}updateValue(){this.inCompositionInputting||(this.value=this.refElements.input.value,this.emit("change",this.value))}clear(){this.value="",this.emit("change","")}};s=n([(0,o.define)("f-search")],s),e.Search=s},3959:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"warning",code:'<svg viewBox="0 0 21 21"><line style="fill:none;stroke:currentColor;stroke-width:2;" x1="10.5" y1="7.5" x2="10.5" y2="12.5"/><rect style="fill:currentColor; stroke:none;" x="9.5" y="14" width="2" height="2"/><path style="fill:currentColor; stroke:none;" d="M10.5,3l8.8,15H1.7L10.5,3 M10.5,1L0,19h21L10.5,1L10.5,1z"/></svg>'}},4071:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scrollToTop=e.getScrollOffset=e.getScrollDirection=e.scrollToView=e.getClosestScrollWrapper=e.getScrollbarWidth=e.isContentOverflow=void 0;const n=i(6099);e.isContentOverflow=function(t){return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth};let o=null;function r(t){for(;t&&t.scrollWidth<=t.clientWidth&&t.scrollHeight<=t.clientHeight;)t=t.parentElement;return t}function s(t){let e=null;return t.scrollHeight>t.clientHeight?e="y":t.scrollWidth>t.clientWidth&&(e="x"),e}function a(t,e,i){let n="x"===i?"offsetLeft":"offsetTop",o=t.offsetParent,r=t[n];if(o&&o!==e)if(o.contains(e))r-=e[n];else for(;o.offsetParent&&o.offsetParent!==e;)o=o.offsetParent,r+=o[n];return r}e.getScrollbarWidth=function(){if(null!==o)return o;let t=document.createElement("div");return t.style.cssText="width:100px; height:100px; overflow:scroll; position:absolute; left:-100px; top:-100px;",document.body.append(t),o=t.offsetWidth-t.clientWidth,t.remove(),o},e.getClosestScrollWrapper=r,e.scrollToView=function(t,e=0,i=0,o="ease-out"){let l=r(t);if(!l)return!1;let h=s(l);if(!h)return!1;if("y"===h){let r=l.scrollTop,s=null,d=a(t,l,h),c=d-e-r,u=d+t.offsetHeight+e-l.clientHeight-r;return c<0&&u<0?s=Math.max(c,u)+r:u>0&&c>0&&(s=Math.min(u,c)+r),null!==s&&s!==r&&(i?(0,n.animateStyleValueTo)(l,"scrollTop",s,i,o):l.scrollTop=s,!0)}if("x"===h){let r=a(t,l,h),s=l.scrollLeft,d=0,c=r-e-s,u=r+t.offsetWidth+e-s-l.clientWidth;if(c<0&&u<0||t.offsetWidth>l.clientWidth?d=Math.max(0,r-e):u>0&&c>0&&(d=Math.min(l.scrollWidth,r+t.offsetWidth+e)-l.clientWidth),d!==s)return i?(0,n.animateStyleValueTo)(l,"scrollLeft",d,i,o):l.scrollLeft=d,!0}return!1},e.getScrollDirection=s,e.getScrollOffset=a,e.scrollToTop=function(t,e=0,i=0,o="ease-out"){let s=r(t);if(!s)return!1;let l=a(t,s,"y"),h=s.scrollTop,d=Math.max(0,l-e);return d!==h&&(i?(0,n.animateStyleValueTo)(s,"scrollTop",d,i,o):s.scrollTop=d,!0)}},4074:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Switch=void 0;const o=i(1416),r=i(8240);let s=class extends o.Component{constructor(){super(...arguments),this.value=!1}static style(){let{mainColor:t,adjust:e,focusBlurRadius:i,backgroundColor:n}=r.theme,s=e(18),a=2*s-8;return o.css`
		:host{
			display: inline-block;
			vertical-align: top;
			width: ${a}px;
			height: ${s}px;
			background: ${n.toMiddle(23.3)};
			border-radius: ${s/2}px;
			padding: 1px;
			margin: ${(e(28)-s)/2}px 0;
			transition: background-color 0.2s ${(0,o.getCSSEasingValue)("ease-out-cubic")};
			cursor: pointer;

			&:hover{
				background: ${n.toMiddle(33)};
			}
			
			&:focus{
				box-shadow: 0 0 ${i}px ${t};
			}
		}
	
		.ball{
			width: ${s-2}px;
			height: ${s-2}px;
			background: ${n};
			border-radius: 50%;
			transition: margin 0.2s ${(0,o.getCSSEasingValue)("ease-out-cubic")};
		}
	
		.on{		
			background: ${t};

			.ball{
				border-color: ${n};
				margin-left: calc(100% - ${s-2}px);
			}

			&:hover{
				background: ${t.darken(10)};
			}
		}
		`}render(){return o.html`
			<template
				tabindex="0"
				:class.on=${this.value}
				@click=${this.onClick}
				@focus=${this.onFocus}
				@blur=${this.onBlur}
			>
				<div class="ball"></div>
			</template>
		`}onClick(){this.toggleState()}toggleState(){this.value=!this.value,this.emit("change",this.value)}onFocus(){(0,o.on)(document,"keydown",this.onKeyDown,this)}onKeyDown(t){"Enter"===t.key?(t.preventDefault(),this.toggleState()):"ArrowLeft"===t.key?this.value&&(t.preventDefault(),this.toggleState()):"ArrowRight"===t.key&&(this.value||(t.preventDefault(),this.toggleState()))}onBlur(){(0,o.off)(document,"keydown",this.onKeyDown,this)}};s=n([(0,o.define)("f-switch")],s),e.Switch=s},4075:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=void 0;const n=i(9104),o=i(8325);class r extends n.EventEmitter{constructor(t,e={}){if(super(),this.willSave=!1,!t)throw new Error('You must specify "storageKey" when using "Settings"!');this.storageKey=t,this.defaultData=e,this.storageData=this.getStorageData()}getStorageData(){return o.storage.get(this.storageKey,{})}removeKeysNotInDefaultData(){let t=Object.keys(this.defaultData);for(let e of Object.keys(this.storageData))t.includes(e)||delete this.storageData[e]}has(t){return this.storageData.hasOwnProperty(t)}get(t,e=null){var i,n;return this.has(t)?null!==(i=this.storageData[t])&&void 0!==i?i:e:null!==(n=this.defaultData[t])&&void 0!==n?n:e}set(t,e){e===this.storageData[t]&&"object"!=typeof e||(this.storageData[t]=e,this.saveStorageData(),this.emit("change",t))}delete(t){this.has(t)&&(delete this.storageData[t],this.saveStorageData())}saveStorageData(){this.willSave||(Promise.resolve().then((()=>{this.saveStorageDataImmediately(),this.willSave=!1})),this.willSave=!0)}saveStorageDataImmediately(){o.storage.set(this.storageKey,this.storageData)}}e.Settings=r},4181:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"love",code:'<svg viewBox="0 0 15 15"><path style="fill:none;stroke:currentColor;" d="M12.7,3.4c-1.1-1.1-2.8-1.1-3.8,0L7.5,4.7L6.1,3.4c-1.1-1.1-2.8-1.1-3.8,0c-1.1,1.1-1.1,2.8,0,3.8l1.4,1.4l3.8,3.8l3.8-3.8l1.4-1.4C13.8,6.2,13.8,4.4,12.7,3.4z"/></svg>'}},4194:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateAllStyles=e.updateAllComponents=void 0;var n=i(9856);Object.defineProperty(e,"updateAllComponents",{enumerable:!0,get:function(){return n.updateAllComponents}}),Object.defineProperty(e,"updateAllStyles",{enumerable:!0,get:function(){return n.updateAllStyles}})},4218:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.loading=e.LoadingBinging=void 0;const n=i(1416),o={size:"medium",transition:{name:"fade"}};class r{constructor(t){this.options=new n.UpdatableOptions(o),this.value=!1,this.cover=null,this.el=t}update(t,e){this.value=t,this.options.update(e);let i=this.options.get("transition");this.value?this.cover&&(i?new n.Transition(this.cover,i).leave().then((t=>{t&&(this.cover.remove(),this.cover=null)})):(this.cover.remove(),this.cover=null)):(this.cover||(this.cover=(0,n.render)(n.html`<f-loader .size=${this.options.get("size")} .asCover />`).getFirstElement(),this.el.append(this.cover)),i&&new n.Transition(this.cover,i).enter())}remove(){this.cover&&this.cover.remove()}}e.LoadingBinging=r,e.loading=(0,n.defineBinding)("loading",r)},4305:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TwoWayMap=void 0,e.TwoWayMap=class{constructor(){this.lm=new Map,this.rm=new Map}getSize(){return this.lm.size}add(t,e){this.lm.set(t,e),this.rm.set(e,t)}hasLeft(t){return this.lm.has(t)}hasRight(t){return this.rm.has(t)}getFromLeft(t){return this.lm.get(t)}getFromRight(t){return this.rm.get(t)}deleteFromLeft(t){return!!this.hasLeft(t)&&(this.rm.delete(this.lm.get(t)),this.lm.delete(t),!0)}deleteFromRight(t){return!!this.hasRight(t)&&(this.lm.delete(this.rm.get(t)),this.rm.delete(t),!0)}getAllLeft(){return this.lm.keys()}getAllRight(){return this.rm.keys()}}},4462:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.droppable=e.DroppableBinding=e.draggable=e.DraggableBinding=void 0;const n=i(1416),o=i(5499),r=i(8240);class s{constructor(t){this.name="",this.data=null,this.index=-1,this.el=t,this.el.setAttribute("draggable","false"),(0,n.on)(this.el,"mousedown",this.onMouseDown,this),(0,n.on)(this.el,"mouseenter",this.onMouseEnter,this)}update(t,e,i={}){this.data=t,this.index=e,this.name=i.name||""}onMouseDown(t){t.preventDefault();let e=!1,i=t.clientX,o=t.clientY,r=t=>{if(!e&&(Math.abs(t.clientX-i)>5||Math.abs(t.clientY-o)>5)&&(l.startDragging(this),e=!0),e){let e=t.clientX-i,n=t.clientY-o;l.translateDraggingElement(e,n)}};(0,n.on)(document,"mousemove",r),(0,n.once)(document,"mouseup",(async()=>{(0,n.off)(document,"mousemove",r),e&&l.endDragging()}))}onMouseEnter(){l.enterDraggable(this)}remove(){(0,n.off)(this.el,"mousedown",this.onMouseDown,this),(0,n.off)(this.el,"mouseenter",this.onMouseEnter,this)}}e.DraggableBinding=s,e.draggable=(0,n.defineBinding)("draggable",s);class a{constructor(t){this.name="",this.onenter=null,this.onleave=null,this.el=t,(0,n.on)(this.el,"mouseenter",this.onMouseEnter,this)}update(t,e={}){this.ondrop=t,this.name=e.name||"",this.onenter=e.onenter||null,this.onleave=e.onleave||null}onMouseEnter(){l.enterDroppable(this),(0,n.once)(this.el,"mouseleave",this.onMouseLeave,this)}emitEnter(t){this.onenter&&this.onenter(t.data,t.index)}onMouseLeave(){l.leaveDroppable(this)}emitLeave(t){this.onleave&&this.onleave(t.data,t.index)}emitDrop(t,e){this.ondrop&&this.ondrop(t.data,e,t.index)}remove(){(0,n.off)(this.el,"mouseenter",this.onMouseEnter,this)}}e.DroppableBinding=a,e.droppable=(0,n.defineBinding)("droppable",a);const l=new class{constructor(){this.dragging=null,this.mover=null,this.enterDrops=new Set,this.activeDropArea=null}startDragging(t){let e;this.dragging=t;for(let i of[...this.enterDrops])if(document.contains(i.el)){if(i.name===t.name){e=i;break}}else this.enterDrops.delete(i);if(!e)throw new Error("Element with ':draggable' must be contained in a ':droppable' elemenet");e.emitEnter(this.dragging),this.activeDropArea=e,this.mover=new h(this.dragging,e)}translateDraggingElement(t,e){this.mover&&this.mover.translateDraggingElement(t,e)}enterDraggable(t){this.canSwapWith(t)&&this.mover&&this.mover.onEnterDraggable(t)}canSwapWith(t){return this.dragging&&this.dragging.name===t.name&&this.dragging!==t}enterDroppable(t){this.enterDrops.add(t),this.canDropTo(t)&&(t.emitEnter(this.dragging),this.activeDropArea=t,this.mover.onEnterDroppable(t))}canDropTo(t){return this.dragging&&this.dragging.name===t.name}leaveDroppable(t){this.enterDrops.delete(t),this.activeDropArea===t&&(t.emitLeave(this.dragging),this.activeDropArea=null,this.mover.onLeaveDroppable(t))}endDragging(){let t=this.mover,e=this.dragging,i=this.activeDropArea;t.playEndDraggingAnimation().then((()=>{t.willSwapElements()&&i.emitDrop(e,t.getSwapIndex())})),this.dragging=null,this.mover=null,this.activeDropArea=null}};class h{constructor(t,e){this.translate=[0,0],this.startStyleText="",this.movedElements=new Set,this.translatedElements=new Set,this.direction="y",this.dragTo=null,this.dragToRect=null,this.dragToIndex=-1,this.activeDropArea=null,this.dragging=t,this.el=t.el,this.startDropArea=this.activeDropArea=e,this.rect=(0,o.getRect)(this.el),this.autoLayout="absolute"!==(0,o.getStyleValue)(this.el,"position"),this.outerWidth=(0,o.getOuterWidth)(this.el),this.outerHeight=(0,o.getOuterHeight)(this.el),this.initializeDirection(),this.initializePlaceholder(),this.insertPlaceholder(e,!1),this.startStyleText=this.el.style.cssText,this.setStartDraggingStyle()}initializeDirection(){if(this.el.nextElementSibling||this.el.previousElementSibling){let t=(0,o.getRect)(this.el.nextElementSibling||this.el.previousElementSibling);Math.abs(t.left-this.rect.left)>Math.abs(t.top-this.rect.top)?this.direction="x":this.direction="y"}}setStartDraggingStyle(){document.body.style.cursor="grabbing",document.body.style.userSelect="none","tr"!==this.el.localName&&(this.el.style.position="fixed"),this.el.style.zIndex="9999",this.el.style.width=this.rect.width+"px",this.el.style.height=this.rect.height+"px",this.el.style.left=this.rect.left+"px",this.el.style.top=this.rect.top+"px",this.el.style.boxShadow=`0 0 ${r.theme.popupShadowBlurRadius}px #888`,this.el.style.pointerEvents="none",this.el.style.opacity="1",this.el.style.willChange="transform"}initializePlaceholder(){this.placeholder=this.dragging.el.cloneNode(),this.placeholder.style.visibility="hidden","x"===this.direction?this.placeholder.style.width=this.rect.width+"px":this.placeholder.style.height=this.rect.height+"px"}insertPlaceholder(t,e){if(this.startDropArea===t)for(let t of this.getSiblingsAfter(this.el))this.moveElement(t,1,e);t.el.append(this.placeholder)}getSiblingsAfter(t){let e=[];for(let i=t.nextElementSibling;i;i=i.nextElementSibling)e.push(i);return e}moveElement(t,e,i){if(t===this.el)return;let n="x"===this.direction?this.outerWidth:this.outerHeight,r=e;this.autoLayout||this.el.compareDocumentPosition(t)!==t.DOCUMENT_POSITION_FOLLOWING||(r-=1);let s=0!==r?`translate${this.direction.toUpperCase()}(${r*n}px)`:"";i?(0,o.animateTo)(t,{transform:s}):t.style.transform=s,e?this.movedElements.add(t):this.movedElements.delete(t),r?this.translatedElements.add(t):this.translatedElements.delete(t)}onEnterDroppable(t){this.insertPlaceholder(t,!0),this.activeDropArea=t}onEnterDraggable(t){if(!this.activeDropArea)return;if((0,o.isPlayingAnimation)(t.el))return;let e=new Set([t.el,...this.getSiblingsAfter(t.el)]);e.delete(this.el),this.movedElements.has(t.el)&&e.delete(t.el);for(let t of this.movedElements)e.has(t)||this.moveElement(t,0,!0);for(let t of e)this.movedElements.has(t)||this.moveElement(t,1,!0);this.dragTo=t,this.dragToRect=(0,o.getRect)(t.el),this.dragToIndex=this.generateDraggedToIndex(t,e.has(t.el))}generateDraggedToIndex(t,e){let i=this.startDropArea===this.activeDropArea,n=t.index;return i&&n>this.dragging.index?e?n-1:n:e?n:n+1}translateDraggingElement(t,e){this.translate[0]=t,this.translate[1]=e,this.el.style.transform=`translate(${t}px, ${e}px)`}willSwapElements(){return!!(this.dragTo||this.activeDropArea&&this.startDropArea!==this.activeDropArea)}getSwapIndex(){return this.dragToIndex}onLeaveDroppable(t){if(t===this.activeDropArea){for(let t of this.movedElements)this.moveElement(t,0,!0);this.activeDropArea=null,this.dragTo=null,this.dragToRect=null,this.dragToIndex=-1}}async playEndDraggingAnimation(){this.willSwapElements()?(await this.animateDraggingElementToDropArea(),this.el.style.transform=""):(this.activeDropArea!==this.startDropArea&&this.moveSiblingsToGiveSpace(!0),await(0,o.animateTo)(this.el,{transform:""})),this.restoreMovedElements(!1),this.clearDraggingStyle()}async animateDraggingElementToDropArea(){let t=(0,o.getRect)(this.el),e=this.dragToRect||(0,o.getRect)(this.placeholder),i=e.left-t.left+this.translate[0],n=e.top-t.top+this.translate[1];"x"===this.direction?this.dragging.index<this.dragToIndex&&(i=e.right-t.right+this.translate[0]):this.dragging.index<this.dragToIndex&&(n=e.bottom-t.bottom+this.translate[1]);let r=`translate(${i}px, ${n}px)`;await(0,o.animateTo)(this.el,{transform:r})}moveSiblingsToGiveSpace(t){for(let e of this.getSiblingsAfter(this.el))this.moveElement(e,1,t)}restoreMovedElements(t){for(let e of this.translatedElements)t?(0,o.animateTo)(e,{transform:""}):((0,o.stopAnimation)(e),e.style.transform="");this.movedElements.clear(),this.translatedElements.clear(),this.placeholder.remove()}clearDraggingStyle(){document.body.style.cursor="",document.body.style.userSelect="",this.el.style.cssText=this.startStyleText}}},4479:(t,e)=>{function i(t,e){if(0===t.length)return 0;if(e(t[0])<=0)return 0;if(e(t[t.length-1])>0)return t.length;{let i=0,n=t.length-1;for(;i+1<n;){let o=Math.floor((n+i)/2),r=e(t[o]);if(0===r)return o;r<0?n=o:i=o}return n}}function n(t,e,n,o){let r=t.getBoundingClientRect(),s=i(e,(t=>{let e=t.getBoundingClientRect(),i=(Math.min(r.bottom,e.bottom)-Math.max(r.top,e.top))/Math.min(r.height,e.height);return e.bottom<r.top?1:e.top>r.bottom?-1:e.top<r.top&&i<n?1:e.bottom<r.bottom&&i<n?-1:o?1:-1}));return o&&s>0&&(s-=1),s}Object.defineProperty(e,"__esModule",{value:!0}),e.getClosestScrollWrapper=e.getRect=e.getElementCountBefore=e.locateLastVisibleIndex=e.locateFirstVisibleIndex=e.untilIdle=e.untilNextFrame=e.repeatForTimes=e.binaryFindIndexToInsert=e.trim=void 0,e.trim=function(t){return t.replace(/^[\r\n\t]+|[\r\n\t]+$/g,"")},e.binaryFindIndexToInsert=i,e.repeatForTimes=function(t,e){let i=[];for(let n=0;n<e;n++)i.push(t);return i},e.untilNextFrame=function(){return new Promise((t=>{requestAnimationFrame(t)}))},e.untilIdle=function(){return new Promise((t=>{window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,0)}))},e.locateFirstVisibleIndex=function(t,e,i=.5){return n(t,e,i,!1)},e.locateLastVisibleIndex=function(t,e,i=.5){return n(t,e,i,!0)},e.getElementCountBefore=function(t){let e=0;for(;t.previousElementSibling;)t=t.previousElementSibling,e+=1;return e},e.getRect=function(t){let e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.getClosestScrollWrapper=function(t){for(;t&&t.scrollWidth<=t.clientWidth&&t.scrollHeight<=t.clientHeight;)t=t.parentElement;return t}},4511:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.svg=e.css=e.html=e.TemplateResult=e.Template=e.NodePart=void 0;var n=i(688);Object.defineProperty(e,"NodePart",{enumerable:!0,get:function(){return n.NodePart}});var o=i(5145);Object.defineProperty(e,"Template",{enumerable:!0,get:function(){return o.Template}});var r=i(2855);Object.defineProperty(e,"TemplateResult",{enumerable:!0,get:function(){return r.TemplateResult}}),Object.defineProperty(e,"html",{enumerable:!0,get:function(){return r.html}}),Object.defineProperty(e,"css",{enumerable:!0,get:function(){return r.css}}),Object.defineProperty(e,"svg",{enumerable:!0,get:function(){return r.svg}})},4554:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLBinding=void 0;const o=i(356);let r=e.HTMLBinding=class{constructor(t){this.el=t}update(t){this.el.innerHTML=null==t?"":String(t)}remove(){this.el.innerHTML=""}};e.HTMLBinding=r=n([(0,o.defineBinding)("html")],r)},4588:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilesFromTransfer=e.selectMultipleFolders=e.selectFolder=e.selectMultipleFile=e.selectFile=e.downloadText=e.downloadURL=void 0;const n=i(757);function o(t,e,i){return new Promise((o=>{let r=document.createElement("input");r.type="file",r.hidden=!0,r.accept=t,r.multiple=i,e&&(r.setAttribute("directory",""),r.setAttribute("webkitdirectory","")),r.onchange=()=>{r.files?o(i?[...r.files]:r.files[0]||null):o(null)},document.addEventListener("focus",(async function t(){await(0,n.sleep)(1e3),document.removeEventListener("focus",t,!1),r.onchange=null,r.remove()}),!1),document.body.appendChild(r),r.click()}))}async function r(t){let e=[];return new Promise((async(i,n)=>{if(t){if(t.isFile)t.file((n=>{n.path=n.path||t.fullPath,e.push(n),i(e)}),n);else if(t.isDirectory){let o=t.createReader();try{for(;;){let t=await s(o);if(e.push(...t),!t.length)break}}catch(t){n(t)}i(e)}}else i([])}))}function s(t){return new Promise(((e,i)=>{let n=[];t.readEntries((async t=>{if(t&&t.length){try{for(let e of t)n.push(...await r(e))}catch(t){i(t)}e(n)}else e(n)}),i)}))}e.downloadURL=function(t,e){let i=document.createElement("a");i.hidden=!0,i.href=t,e&&(i.download=e),document.body.appendChild(i),i.click(),i.remove()},e.downloadText=function(t,e,i="text/plain"){let n=new Blob([e],{type:i}),o=new FileReader;o.onload=()=>{o.onload=null;let e=document.createElement("a");e.download=t,e.href=o.result,document.body.append(e),e.click(),e.remove()},o.readAsDataURL(n)},e.selectFile=function(t){return o(t,!1,!1)},e.selectMultipleFile=function(t){return o(t,!1,!0)},e.selectFolder=function(){return o("*",!0,!1)},e.selectMultipleFolders=function(){return o("*",!0,!0)},e.getFilesFromTransfer=async function(t){let e=[...t.files],i=[];if(t.items&&"function"==typeof DataTransferItem&&(DataTransferItem.prototype.hasOwnProperty("getAsEntry")||DataTransferItem.prototype.webkitGetAsEntry)){let n=[...t.items].filter((t=>"file"===t.kind));try{for(let t of n){let e=t.hasOwnProperty("getAsEntry")?t.getAsEntry():t.webkitGetAsEntry();i.push(...await r(e))}}catch(t){i=e}}else i=e;return i}},4676:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"triangle-right",code:'<svg viewBox="0 0 15 15"><polygon style="fill:currentColor; stroke:none;" points="11,7 3,3 3,11"/></svg>'}},4947:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyPart=void 0;const n=i(9856);e.PropertyPart=class{constructor(t,e,i){this.com=null,this.el=t,this.name="."===e[0]?e.slice(1):e,this.isComProperty=t.localName.includes("-")&&"."!==e[0],this.fixed=i}update(t){this.isComProperty?this.com?this.updateComProperty(t):(0,n.getComponentEarly)(this.el,(e=>{this.bindCom(e),this.updateComProperty(t)})):this.updateElementProperty(t)}bindCom(t){this.com=t}updateComProperty(t){this.fixed?this.updateFixedComProperty(t):this.com[this.name]=t}updateFixedComProperty(t){let e=this.com,i=typeof e[this.name];switch("object"!==i||/^\s*(?:\{.+?\}|\[.+?\])\s*$/.test(t)||(i="string"),i){case"boolean":e[this.name]="false"!==t;break;case"number":e[this.name]=Number(t);break;case"object":e[this.name]=JSON.parse(t);break;default:"undefined"!==i?e[this.name]=t:console.warn(`Please makesure value of property "${this.name}" exist on "<${e.el.localName}>" when assigning fixed property!`)}}updateElementProperty(t){this.el[this.name]!==t&&(this.el[this.name]=t)}}},4983:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Checkbox=e.CheckboxGroup=void 0;const o=i(1416),r=i(8240),s=i(5499);let a=class extends o.Component{constructor(){super(...arguments),this.checkboxs=[],this.value=[]}register(t){this.checkboxs.push(t),t.on("change",this.onCheckboxChange.bind(this,t))}onCheckboxChange(t){t.checked?(0,s.add)(this.value,t.value):(0,s.removeWhere)(this.value,(e=>e==t.value)),this.emit("change",this.value)}};a=n([(0,o.define)("f-checkboxgroup")],a),e.CheckboxGroup=a;let l=class extends o.Component{constructor(){super(...arguments),this.checkboxGroup=null,this.checked=!1,this.indeterminate=!1,this.value=null}static style(){let{mainColor:t,focusBlurRadius:e,adjust:i}=r.theme;return o.css`
		:host{
			display: inline-flex;
			vertical-align: top;
			align-items: center;
			cursor: pointer;

			&:hover{
				color: ${t};
			}

			&:focus{
				color: ${t};

				.icon{
					box-shadow: 0 0 ${e}px ${t};
				}
			}
		}

		.icon{
			position: relative;
			top: -2px;
			margin-right: ${i(7)}px;
			border-radius: 4px;
		}

		.indeterminate, .checked{
			color: ${t};
		}

		.label{
			flex: 1;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}
		`}onCreated(){let t=(0,o.getClosestComponentOfType)(this.el,a);t&&(this.checkboxGroup=t,this.checked=this.checkboxGroup.value.includes(this.value),this.checkboxGroup.register(this))}render(){let t=this.checked?"checkbox-checked":this.indeterminate?"checkbox-indeterminate":"checkbox-unchecked";return o.html`
			<template
				tabindex="0"
				:class.checked=${this.checked}
				:class.indeterminate=${this.indeterminate}
				@click=${this.onClick}
				@focus=${this.onFocus}
				@blur=${this.onBlur}
			>
				<f-icon class="icon" .type=${t} />
				<div class="label">
					<slot />
				</div>
			</template>
		`}onClick(){this.toggleChecked()}toggleChecked(){this.checked=!this.checked,this.indeterminate=!1,this.emit("change",this.checked)}onFocus(){(0,o.on)(document,"keydown.enter",this.onEnter,this)}onEnter(t){t.preventDefault(),this.toggleChecked()}onBlur(){(0,o.off)(document,"keydown",this.onEnter,this)}};l=n([(0,o.define)("f-checkbox")],l),e.Checkbox=l},5048:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ensureDocumentComplete=e.ensureWindowLoaded=void 0,e.ensureWindowLoaded=function(){return new Promise((t=>{let e=window.performance.getEntriesByType("navigation");e.length>0&&e[0].loadEventEnd>0?t():window.addEventListener("load",(()=>t()))}))},e.ensureDocumentComplete=function(){return new Promise((t=>{let e=window.performance.getEntriesByType("navigation");e.length>0&&e[0].domContentLoadedEventEnd>0?t():document.addEventListener("DOMContentLoaded",(()=>t()),!1)}))}},5053:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"right",code:'<svg viewBox="0 0 15 15"><polygon style="fill:currentColor; stroke:none;" points="4.4,11.5 4,10.8 9.4,7.5 4,4.2 4.4,3.5 11,7.5"/></svg>'}},5145:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0;const n=i(7097),o=i(6527),r=i(937),s=i(688),a=i(2101),l=i(1338),h=i(5385),d=i(9025),c=i(4947),u=i(9856),p=i(1111),m=i(2711);e.Template=class{constructor(t,e){var i;this.parts=[],this.currentResult=t,this.context=e;let{fragment:o,nodes:s,slots:a}=(0,r.parseTemplate)(t.type,t.strings,(null===(i=this.context)||void 0===i?void 0:i.el)||null);this.range=new n.NodeRange(o),this.parseParts(s,a)}parseParts(t,e){let i=this.currentResult.values;if(t&&e)for(let n=0;n<t.length;n++){let u,g=t[n],f=e[n];switch(f.type){case r.SlotType.SlotTag:u=new m.SlotTagPart(g,f.name,this.context);break;case r.SlotType.Node:u=new s.NodePart(new o.NodeAnchor(g,o.NodeAnchorType.Next),this.context);break;case r.SlotType.MayAttr:u=new a.MayAttrPart(g,f.name);break;case r.SlotType.Event:u=new l.EventPart(g,f.name,this.context);break;case r.SlotType.Attr:u=new h.AttrPart(g,f.name);break;case r.SlotType.Property:u=new c.PropertyPart(g,f.name,!f.valueIndices);break;case r.SlotType.FixedBinging:u=new d.FixedBindingPart(g,f.name,this.context);break;case r.SlotType.DynamicBinding:u=new d.DynamicBindingPart(g,this.context)}if(f.type===r.SlotType.SlotTag)u.update();else{let{strings:t,valueIndices:e}=f,n=(null==e?void 0:e.map((t=>i[t])))||null,o=(0,p.joinStringsAndValues)(t,n);u.update(o),e&&this.parts.push({part:u,strings:t,valueIndices:e})}}}canPatchBy(t){if(this.currentResult.type!==t.type)return!1;if(this.currentResult.strings.length!==t.strings.length)return!1;for(let e=0;e<this.currentResult.strings.length;e++)if(this.currentResult.strings[e]!==t.strings[e])return!1;return!0}canPatchByContextual(t,e){return this.context===e&&this.canPatchBy(t)}patch(t){for(let{part:e,strings:i,valueIndices:n}of this.parts)if(n.some((e=>this.currentResult.values[e]!==t.values[e]))){let o=n.map((e=>t.values[e])),r=(0,p.joinStringsAndValues)(i,o);e.update(r)}this.currentResult=t}preRender(){let t=this.range.getCurrentFragment();if(!(t&&t instanceof DocumentFragment))throw new Error("Can only prerender contents in a fragment!");let e,i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null);for(;e=i.nextNode();)e instanceof HTMLElement&&e.localName.includes("-")&&(0,u.createComponent)(e).__updateImmediately(!0)}appendTo(t){let e=this.extractToFragment();if("string"==typeof t){let i=document.querySelector(t);i&&i.append(e)}else t&&t.append(e)}extractToFragment(){return this.range.extractToFragment()}movesOut(){this.range.movesOut()}getNodes(){return this.range.getNodes()}getFirstElement(){return this.range.getFirstElement()}before(t){this.range.before(t.range)}replaceWith(t){this.range.replaceWith(t.range)}remove(){this.range.remove()}}},5224:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PopupTriggerBinder=void 0;const n=i(5499),o=i(1416);class r extends n.EventEmitter{constructor(t){super(),this.trigger="hover",this.popupEl=null,this.unwatchLeave=null,this.el=t}setTrigger(t){this.trigger=this.getMappedTrigger(t)}getMappedTrigger(t){return"hover"!==t||this.havePointer()||(t="click"),t}havePointer(){return matchMedia("(pointer:fine)").matches}bindEnter(){"click"===this.trigger?(0,o.on)(this.el,this.trigger,this.onClickEl,this):"contextmenu"===this.trigger?(0,o.on)(this.el,this.trigger,this.onContextMenu,this):"hover"===this.trigger?(0,o.on)(this.el,"mouseenter",this.onMouseEnterOrFocusEl,this):"focus"===this.trigger&&((0,o.on)(this.el,"focus",this.onMouseEnterOrFocusEl,this),this.el.contains(document.activeElement)&&this.emit("will-show"))}unbindEnter(){"click"===this.trigger?(0,o.off)(this.el,this.trigger,this.onClickEl,this):"contextmenu"===this.trigger?(0,o.off)(this.el,this.trigger,this.onContextMenu,this):"hover"===this.trigger?(0,o.off)(this.el,"mouseenter",this.onMouseEnterOrFocusEl,this):"focus"===this.trigger&&(0,o.off)(this.el,"focus",this.onMouseEnterOrFocusEl,this)}onClickEl(t){t.preventDefault(),t.stopPropagation(),this.togglePopupShowHide()}onContextMenu(t){t.preventDefault(),t.stopPropagation(),this.togglePopupShowHide()}togglePopupShowHide(){this.emit("toggle-show-hide")}onMouseEnterOrFocusEl(t){t.stopPropagation(),this.emit("will-show")}bindLeaveBeforeShow(){"hover"===this.trigger&&(0,o.once)(this.el,"mouseleave",this.cancelShowingPopup,this)}unbindLeaveBeforeShow(){"hover"===this.trigger&&(0,o.off)(this.el,"mouseleave",this.cancelShowingPopup,this)}cancelShowingPopup(){this.emit("cancel-show")}bindLeave(t,e){this.unbindLeaveBeforeShow(),this.popupEl=e,"hover"===this.trigger?this.havePointer()?this.bindMouseLeave(t,e):(0,o.on)(document,"touchstart",this.onDocMouseDownOrTouch,this):"click"===this.trigger||"contextmenu"===this.trigger?((0,o.on)(document,"mousedown",this.onDocMouseDownOrTouch,this),n.MouseLeave.lock(this.el,this.popupEl)):"focus"===this.trigger&&(0,o.on)(this.el,"blur",this.hidePopupLater,this)}bindMouseLeave(t,e){this.unwatchLeave=n.MouseLeave.on(this.el,e,(()=>{this.emit("hide")}),{delay:t,mouseIn:!0})}onDocMouseDownOrTouch(t){var e;let i=t.target;this.el.contains(i)||(null===(e=this.popupEl)||void 0===e?void 0:e.contains(i))||this.emit("will-hide")}hidePopupLater(){this.emit("will-hide")}unbindLeave(){"hover"===this.trigger?this.havePointer()?this.unwatchLeave&&(this.unwatchLeave(),this.unwatchLeave=null):(0,o.off)(document,"touchstart",this.onDocMouseDownOrTouch,this):"click"===this.trigger||"contextmenu"===this.trigger?((0,o.off)(document,"mousedown",this.onDocMouseDownOrTouch,this),n.MouseLeave.unlock(this.el,this.popupEl)):"focus"===this.trigger&&(0,o.off)(this.el,"blur",this.hidePopupLater,this)}}e.PopupTriggerBinder=r},5296:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DoubleKeysWeakMap=void 0,e.DoubleKeysWeakMap=class{constructor(){this.map=new WeakMap}set(t,e,i){let n=this.map.get(t);n||(n=new Map,this.map.set(t,n)),n.set(e,i)}has(t,e){let i=this.map.get(t);return!!i&&i.has(e)}get(t,e){let i=this.map.get(t);if(i)return i.get(e)}delete(t,e){let i=this.map.get(t);i&&(i.delete(e),0===i.size&&this.map.delete(t))}}},5376:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addTargetAndProxy=e.getObservedOf=e.ToProxyMap=void 0,e.ToProxyMap=new WeakMap,e.getObservedOf=function(t){return e.ToProxyMap.get(t)},e.addTargetAndProxy=function(t,i){e.ToProxyMap.set(t,i),e.ToProxyMap.set(i,i)}},5385:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AttrPart=void 0,e.AttrPart=class{constructor(t,e){this.el=t,this.name=e}update(t){this.setValue(t)}setValue(t){t=null==t?"":String(t),this.el.setAttribute(this.name,t)}}},5400:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ContextualTransition=void 0;const n=i(7146),o=i(8396);e.ContextualTransition=class{constructor(t){this.options=new o.UpdatableOptions({}),this.firstTimeUpdated=null,this.context=t}canPlay(){return this.options.has("name")||this.options.has("properties")}updateOptions(t){this.options.update(t),this.firstTimeUpdated=null===this.firstTimeUpdated}shouldPlayEnter(){return!(!this.canPlay()||this.firstTimeUpdated&&!this.options.get("enterAtStart"))}shouldPlayLeave(){return!(!this.canPlay()||this.firstTimeUpdated&&!this.options.get("leaveAtStart"))}async playEnter(t){let e=this.options.get("onend"),i=await new n.Transition(t,this.options.getOptions()).enter();return e&&e.call(this.context,"enter",i),i}async playLeave(t){let e=this.options.get("onend"),i=await new n.Transition(t,this.options.getOptions()).leave();return e&&e.call(this.context,"leave",i),i}}},5428:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refDirective=e.DirectiveReferences=e.DirectiveResult=e.defineDirective=void 0;const n=i(6219);e.defineDirective=function(t){return function(...e){return new o(t,...e)}};class o{constructor(t,...e){this.ref=null,this.directiveConstructor=t,this.args=e}}e.DirectiveResult=o;class r extends n.ResultReferences{createFromResult(t,e,i){let n=new(0,i.directiveConstructor)(t,e);return this.createReference(i,n),n.patch(...i.args),n}}e.DirectiveReferences=new r,e.refDirective=function(t,i,n){return e.DirectiveReferences.addReference(t,i),n&&e.DirectiveReferences.addUnReference(t,n),t}},5429:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatToShortDate=e.formatDate=e.addDurationToDate=e.cloneDate=e.getDaysOfMonth=e.getDaysOfYear=e.isLeapYear=e.isValidDate=e.setDateByUnit=e.getDateByUnit=void 0;const n=i(3549),o="yMdhms";function r(t,e){switch(e){case"y":return t.getFullYear();case"M":return t.getMonth();case"d":return t.getDate();case"h":return t.getHours();case"m":return t.getMinutes();case"s":return t.getSeconds();default:throw new Error(`"${e}" is not a valid date unit`)}}function s(t,e,i){switch(i){case"y":return t.setFullYear(e);case"M":return t.setMonth(e);case"d":return t.setDate(e);case"h":return t.setHours(e);case"m":return t.setMinutes(e);case"s":return t.setSeconds(e);default:throw new Error(`"${i}" is not a valid date unit`)}}function a(t){let e=t.getFullYear();return e%4==0&&(e%100!=0||e%400==0)}function l(t,e="yyyy-MM-dd hh:mm:ss"){return e.replace(/y+|M+|d+|h+|m+|s+/g,(e=>{let i=e[0],n=r(t,i[0]);return"M"===i&&(n+=1),String(n).padStart(e.length,"0")}))}e.getDateByUnit=r,e.setDateByUnit=s,e.isValidDate=function(t,e,i=1,n=0,o=0,r=0){let s=new Date(t,e,i,n,o,r);return t===s.getFullYear()&&e===s.getMonth()&&i===s.getDate()&&n===s.getHours()&&o===s.getMinutes()&&r===s.getSeconds()},e.isLeapYear=a,e.getDaysOfYear=function(t){return a(t)?366:365},e.getDaysOfMonth=function(t){let e=new Date(t.getTime());return e.setDate(32),32-e.getDate()},e.cloneDate=function(t=new Date,e=o){let i=[...o].map((i=>e.includes(i)?r(t,i):"d"===i?1:0));return new Date(i[0],i[1],i[2],i[3],i[4],i[5])},e.addDurationToDate=function(t,e){let i="-"===e[0];i&&(e=e.slice(1));let o=i?-1:1,a=(0,n.parseDurationToObject)(e),l=new Date(t);for(let t of Object.keys(a))s(l,r(l,t)+a[t]*o,t);return l},e.formatDate=l,e.formatToShortDate=function(t,e={y:"yyyy-MM-dd",M:"MM-dd",h:"hh:mm"}){let i=new Date,n=!1,s=Object.values(e)[0];for(let a of o)if(n=n||r(t,a)!==r(i,a),s=e[a]||s,n)break;return l(t,s)}},5499:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),o(i(757),e),o(i(9028),e),o(i(9104),e)},5503:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InfiniteUpdatingValidator=void 0;const n=i(8116);e.InfiniteUpdatingValidator=class{constructor(){this.map=new Map}validate(t){let e=this.map.get(t)||0;return this.map.set(t,e+1),!(e>3&&(t instanceof n.Watcher?console.warn(t,"may change values in the watcher callback and cause infinite updating!"):t?console.warn(t,"may change values in the render function and cause infinite updating!"):console.warn(t,"may change values in callback and cause infinite updating!"),1))}clear(){this.map=new Map}}},5525:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.SrcBinding=void 0;const o=i(356),r=new Set;let s=e.SrcBinding=class{constructor(t){if(this.src="",t instanceof HTMLMediaElement)throw new Error('":src" binding can only binded with HTMLMediaElement!');this.el=t}update(t){if(this.src=t,r.has(t))this.el.src=t;else if(t){this.el.src="";let e=new Image;e.onload=()=>{r.add(t),t===this.src&&(this.el.src=t)},e.src=t}else this.el.src=""}remove(){this.el.src=""}};e.SrcBinding=s=n([(0,o.defineBinding)("src")],s)},5664:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeGetting=void 0,e.observeGetting=function(t,e){let i=function(t,e){let i=t;do{let t=Object.getOwnPropertyDescriptor(i,e);if(t)return t;i=Object.getPrototypeOf(i)}while(i);return null}(t,e);return i&&i.get?i.get.call(t):t[e]}},5822:(t,e)=>{async function i(t){let e=await navigator.permissions.query({name:"clipboard-"+t});if("granted"!=e.state&&"prompt"!=e.state)throw new Error(e.state)}Object.defineProperty(e,"__esModule",{value:!0}),e.writeClipboardData=e.readClipboardData=e.writeClipboardEventData=e.readClipboardEventData=void 0,e.readClipboardEventData=async function(t){let e=null;if(t.clipboardData){e={};for(let i of t.clipboardData.items)"string"===i.kind&&(e[i.type]=await new Promise((t=>i.getAsString(t))))}return e},e.writeClipboardEventData=function(t,e){var i;for(let[n,o]of Object.entries(e))null===(i=t.clipboardData)||void 0===i||i.setData(n,o)},e.readClipboardData=async function(){try{await i("read");let t=await navigator.clipboard.read(),e={};if(t)for(let i of t.items)"string"===i.kind&&(e[i.type]=await new Promise((t=>i.getAsString(t))));return e}catch(t){return null}},e.writeClipboardData=async function(t){try{await i("write");let e=new DataTransfer;for(let[i,n]of Object.entries(t))e.setData(i,n);return await navigator.clipboard.write(e),!0}catch(t){return!1}}},5845:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=e.Debounce=e.smoothThrottle=e.SmoothThrottle=e.throttle=e.Throttle=e.interval=e.Interval=e.timeout=e.Timeout=void 0;class i{constructor(t,e){this.id=null,this.canceled=!1,this.fn=t,this.ms=e}}class n extends i{constructor(t,e){super(t,e),this.wrapped=this.wrap(),this.wrapped.__original=t}}class o extends i{constructor(t,e){super(t,e),this.reset()}reset(){return this.id&&clearTimeout(this.id),this.id=setTimeout(this.onTimeout.bind(this),this.ms),!0}onTimeout(){this.id=null,this.fn()}flush(){return!!this.id&&(clearTimeout(this.id),this.id=null,this.fn(),!0)}cancel(){return!!this.id&&(clearTimeout(this.id),this.id=null,!0)}}e.Timeout=o,e.timeout=function(t,e=0){let i=new o(t,e);return i.cancel.bind(i)};class r extends i{constructor(t,e){super(t,e),this.reset()}reset(){return this.id&&clearInterval(this.id),this.id=setInterval(this.onInterval.bind(this),this.ms),!0}onInterval(){this.fn()}flush(){return!!this.id&&(this.fn(),this.reset(),!0)}cancel(){return!!this.id&&(clearInterval(this.id),this.id=null,!0)}}e.Interval=r,e.interval=function(t,e){let i=new r(t,e);return i.cancel.bind(i)};class s extends n{wrap(){let t=this;return function(...e){t.canceled?t.fn.apply(this,e):t.id||(t.setThrottle(),t.fn.apply(this,e))}}setThrottle(){this.id=setTimeout(this.onTimeout.bind(this),this.ms)}onTimeout(){this.id=null}reset(){return this.id&&this.clearThrottle(),this.canceled=!1,!0}clearThrottle(){clearTimeout(this.id),this.id=null}flush(){return this.reset(),this.fn(),!0}cancel(){return!this.canceled&&(this.canceled=!0,!0)}}e.Throttle=s,e.throttle=function(t,e=0){return new s(t,e).wrapped};class a extends n{constructor(){super(...arguments),this.lastArgs=null,this.lastThis=null}wrap(){let t=this;return function(...e){t.canceled?t.fn.apply(this,e):(t.lastArgs=e,t.lastThis=this,t.id||t.setThrottle())}}setThrottle(){this.id=setTimeout(this.onTimeout.bind(this),this.ms)}onTimeout(){this.lastArgs?(this.fn.apply(this.lastThis,this.lastArgs),this.lastArgs=null,this.lastThis=null,this.setThrottle()):this.id=null}reset(){return this.id&&this.clearThrottle(),this.lastArgs=null,this.lastThis=null,this.canceled=!1,!0}flush(){return!!this.lastArgs&&(this.setThrottle(),this.fn.apply(this.lastThis,this.lastArgs),this.lastArgs=null,this.lastThis=null,!0)}clearThrottle(){clearTimeout(this.id),this.id=null}cancel(){return!this.canceled&&(this.canceled=!0,!0)}}e.SmoothThrottle=a,e.smoothThrottle=function(t,e){return new a(t,e).wrapped};class l extends n{constructor(){super(...arguments),this.lastArgs=null,this.lastThis=null}wrap(){let t=this;return function(...e){t.canceled?t.fn.apply(this,e):(t.id&&clearTimeout(t.id),t.id=setTimeout(t.onTimeout.bind(t),t.ms),t.lastArgs=e,t.lastThis=this)}}onTimeout(){this.id=null,this.lastArgs&&(this.fn.apply(this.lastThis,this.lastArgs),this.lastArgs=null,this.lastThis=null)}reset(){return this.id&&(clearTimeout(this.id),this.id=null),this.lastArgs=null,this.lastThis=null,!0}flush(){return this.id&&(clearTimeout(this.id),this.id=0),!!this.lastArgs&&(this.fn.apply(this.lastThis,this.lastArgs),this.lastArgs=null,this.lastThis=null,!0)}cancel(){return!this.canceled&&(this.canceled=!0,!0)}}e.Debounce=l,e.debounce=function(t,e){return new l(t,e).wrapped}},5897:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.notification=e.UniqueNotification=e.QuickNotification=e.Notification=void 0;const o=i(1416),r=i(8240),s=i(5499),a=i(6741);let l=class extends o.Component{constructor(){super(...arguments),this.seed=1,this.items=[],this.appendTo="body"}static style(){let{infoColor:t,adjust:e,successColor:i,errorColor:n,warningColor:s,popupBorderRadius:a,popupShadowBlurRadius:l,adjustFontSize:h,backgroundColor:d,textColor:c,popupShadowColor:u}=r.theme,p=[["info",t],["warning",s],["error",n],["success",i]];return o.css`
		:host{
			position: fixed;
			right: ${e(12)}px;
			bottom: ${e(12)}px;
			min-width: ${e(280)}px;
			max-width: ${e(480)}px;
			z-index: 1100;	// Higher than tooltip, dialog, ...
			font-size: ${h(13)}px;
		}

		.item{
			position: relative;
			display: flex;
			margin-top: ${e(12)}px;
			background: ${d};
			box-shadow: 0 0 ${l}px ${u};
			cursor: pointer;
			overflow: hidden;
			border-radius: ${a}px;
		}

		.stripe{
			width: 4px;
		}

		.left{
			padding: ${e(16)}px ${e(14)}px ${e(16)}px ${e(16)}px;
		}

		.type-icon{
			display: block;
			width: ${e(20)}px;
			height: ${e(20)}px;

			svg{
				width: ${e(20)}px;
				height: ${e(20)}px;
			}
		}

		.content{
			flex: 1;
			min-width: 0;
			padding: ${e(16)}px ${e(16)}px ${e(8)}px 0;
		}

		.close{
			display: flex;
			width: ${e(28)}px;
			height: ${e(28)}px;
			color: ${c};

			f-icon{
				margin: auto;
			}

			&:hover{
				color: ${c.toMiddle(10)};
			}

			&:active{
				transform: translateY(1px);
			}
		}

		.title{
			font-weight: bold;
			line-height: ${e(20)}px;
			margin-bottom: ${e(4)}px;
		}

		.message{
			flex: 1;
			min-width: 0;
			line-height: ${e(20)}px;
			margin-bottom: ${e(4)}px;
			text-align: left;
			word-wrap: break-word;

			a{
				font-weight: bold;
			}
		}

		.list{
			margin: ${e(8)}px 0;
			line-height: ${e(20)}px;
			list-style-type: square;
			padding-left: ${e(28)}px;
		}

		.actions{
			margin-top: ${e(8)}px;
		}

		.action{
			margin-right: ${e(6)}px;
			height: ${e(22)}px;
			line-height: ${20}px;
			padding: 0 ${e(8)}px;
		}

		${p.map((([t,e])=>o.css`
			.type-${t}{
				&:hover{
					background: ${e.mix(d,95)};
				}

				.stripe{
					background: ${e};
				}
			}
		`))}
		`}render(){return(0,o.repeat)(this.items,(t=>o.html`<div class="item"
				:class="type-${t.type}"
				@mouseenter=${()=>this.onMouseEnter(t)}
				@mouseleave=${()=>this.onMouseLeave(t)}
			>
				<div class="stripe" />

				<div class="left">
					<f-icon class="type-icon" .type=${t.type} />
				</div>

				<div class="content">
					${t.title?o.html`<div class="title">${t.title}</div>`:""}

					<div class="message">${t.message}</div>
					
					${t.list&&t.list.length>0?o.html`
						<ul class="list">
							${t.list.map((t=>o.html`<li>${t}</li>`))}
						</ul>
					`:""}

					${this.renderActions(t)}
				</div>

				<div class="close" @click=${()=>this.onClickClose(t)}>
					<f-icon .type="close" />
				</div>
			</div>`),{name:"fade",enterAtStart:!0,onend:this.onTransitionEnd})}renderActions(t){let e=t.actions;if(e&&e.length>0){let i=e.map((e=>o.html`
				<button class="action"
					?primary=${e.primary}
					@click=${()=>this.onClickActionButton(e,t)}>
					${e.text}
				</button>
			`));return o.html`<div class="actions">${i}</div>`}return""}onClickActionButton(t,e){t.handler&&t.handler(),this.hide(e.id)}onMouseEnter(t){t.hover=!0}onMouseLeave(t){t.hover=!1,t.timeout||this.hideLater(t)}onClickClose(t){this.hide(t.id)}onTransitionEnd(t){"leave"===t&&0===this.items.length&&this.el.remove()}show(t){if(t.id){let e=this.items.find((e=>e.id===t.id));if(e)return Object.assign(e,t),this.hideLater(e),t.id}let e={id:this.seed++,...t,hover:!1,timeout:null};return this.items.unshift(e),this.hideLater(e),1===this.items.length&&this.appendTo&&(0,a.appendTo)(this.el,this.appendTo),e.id}hideLater(t){t.timeout&&t.timeout.cancel(),t.timeout=new s.Timeout((()=>{t.timeout=null,t.hover||this.hide(t.id)}),t.hideDelay||5e3)}hide(t){let e=this.items.find((e=>e.id===t));return!!e&&((0,s.remove)(this.items,e),!0)}hideAll(){this.items=[],0===this.items.length&&this.el.remove()}};l=n([(0,o.define)("f-notification")],l),e.Notification=l;class h{constructor(){this.noti=null}unique(){return new d(this)}showNotification(t){return this.noti||(this.noti=(0,o.getRenderedAsComponent)((0,o.render)(o.html`<f-notification />`))),this.noti.show(t)}info(t,e={}){return e.type="info",e.message=t,this.showNotification(e)}warn(t,e={}){return e.type="warning",e.message=t,this.showNotification(e)}error(t,e={}){return e.type="error",e.message=t,this.showNotification(e)}success(t,e={}){return e.type="success",e.message=t,this.showNotification(e)}hide(t){return this.noti.hide(t)}hideAll(){this.noti.hideAll()}}e.QuickNotification=h;class d{constructor(t){this.id=null,this.raw=t}overwriteNotificationId(t){this.id&&(t.id=this.id)}info(t,e={}){return this.overwriteNotificationId(e),this.id=this.raw.info(t,e)}warn(t,e={}){return this.overwriteNotificationId(e),this.id=this.raw.warn(t,e)}error(t,e={}){return this.overwriteNotificationId(e),this.id=this.raw.error(t,e)}success(t,e={}){return this.overwriteNotificationId(e),this.id=this.raw.success(t,e)}hide(){return!!this.id&&this.raw.hide(this.id)}}e.UniqueNotification=d,e.notification=new h},5903:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SharedPopups=void 0;const n=i(5499),o=i(1416);!function(t){const e=new Map,i=new Map;function r(t){let i=e.get(t);if(i)for(let t=i.length-1;t>=0;t--){let e=i[t],o=e.popup;if(!n.MouseLeave.checkLocked(o.el))return e}return null}function s(t,n){let o=e.get(t);o&&(o=o.filter((t=>t.popup!==n)),e.set(t,o)),i.delete(n)}t.findCache=function(t,e){let n=r(t);if(!n)return null;let{popup:o}=n;if(o.el.contains(e))return null;let s=i.get(o);return s&&!s.__canLoseControl()?null:n},t.addCache=function(t,i){let n=e.get(t);n||(n=[],e.set(t,n)),n.find((t=>t.popup===i.popup))||n.push(i)},t.deleteCache=s,t.cleanPopupControls=function(t,e,n,r){let a=e.popup,l=i.get(a);l&&l!==r&&l.__losePopupControl(),a===n?(0,o.clearTransition)(n.el):(a.el.remove(),s(t,a))},t.isKeyInUse=function(t){let e=r(t),n=null==e?void 0:e.popup;return!!n&&i.has(n)},t.setPopupUser=function(t,e){return i.set(t,e)}}(e.SharedPopups||(e.SharedPopups={}))},5956:(t,e)=>{function i(t,e){return t.replace(/\$(?:([$&\d])|<(\w+)>)/g,((t,i,n)=>n?e.groups&&e.groups[n]||"":"$"===i?"$":"&"===i?e[0]:"string"==typeof e[i]?e[i]:""))}function n(t,e,i){var n;return(null===(n=e.exec(t))||void 0===n?void 0:n[i])||""}function o(t,e,i){if(e.global){let n,o=[];for(;n=e.exec(t);)o.push(n[i]||"");return o}{let n=t.match(e);return n?[n[i]||""]:[]}}function r(t){return t.replace(/(^|.)([A-Z]+)/g,((t,e,i)=>e&&/[a-z ]/i.test(e)?e+"-"+i.toLowerCase():t.toLowerCase())).replace(/_/g,"-")}Object.defineProperty(e,"__esModule",{value:!0}),e.toUnderscoreCase=e.toDashCase=e.toCamerCase=e.capitalize=e.afterLast=e.beforeLast=e.after=e.before=e.format=e.subMatches=e.subMatchesAt=e.firstMatches=e.firstMatch=e.subMatchAt=e.selectAll=e.select=void 0,e.select=function(t,e,n){let o=e.exec(t);return o?i(n,o):""},e.selectAll=function(t,e,n){if(e.global){let o,r=[];for(;o=e.exec(t);)r.push(i(n,o));return r}{let o=t.match(e);return o?[i(n,o)]:[]}},e.subMatchAt=n,e.firstMatch=function(t,e){return n(t,e,1)},e.firstMatches=function(t,e){return o(t,e,1)},e.subMatchesAt=o,e.subMatches=function(t,e,i=1){if(e.global){let n,o=[];for(;n=e.exec(t);)o.push([...n].slice(i));return o}{let n=t.match(e);return n?[[...n].slice(i)]:[]}},e.format=function(t,e){return t.replace(/\{(\w+)\}/g,((t,i)=>{let n=e[i];return void 0===n&&(n=t),n}))},e.before=function(t,e,i=!1){let n=t.indexOf(e);return n<0?i?t:"":t.slice(0,n)},e.after=function(t,e,i=!1){let n=t.indexOf(e);return n<0?i?t:"":t.slice(n+e.length)},e.beforeLast=function(t,e,i=!1){let n=t.lastIndexOf(e);return n<0?i?t:"":t.slice(0,n)},e.afterLast=function(t,e,i=!1){let n=t.lastIndexOf(e);return n<0?i?t:"":t.slice(n+1)},e.capitalize=function(t){return t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase()},e.toCamerCase=function(t){return t.replace(/[-_ ][a-z]/gi,(t=>t[1].toUpperCase()))},e.toDashCase=r,e.toUnderscoreCase=function(t){return r(t).replace(/-/g,"_")}},5969:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.translations=e.Translations=void 0;const n=i(5956),o=i(8384),r=i(8038);class s{constructor(){this.language="enus",this.data=new Map([["enus",{}]])}getLanguage(){return this.language}setLanguage(t){this.language=t}add(t,e){let i=this.data.get(t);i||this.data.set(t,i={}),Object.assign(i,e)}addIf(t,e){let i=this.data.get(t);i||this.data.set(t,i={}),(0,r.assignIf)(i,e)}get(t,...e){let i=this.data.get(this.language);i||(i=this.data.get("enus"));let o=i[t];return e.length&&(o=(0,n.format)(o,e)),o}translate(t,...e){var i;let[o,r]=t.split("@@"),s=this.data.get(this.language),a=o;return s||(s=this.data.get("enus")),r&&(a=null!==(i=s[r])&&void 0!==i?i:o),e.length&&(a=(0,n.format)(a,e)),a}translateQuoteToBold(t,...e){return this.translate(t,...e.map((t=>(0,o.encodeHTML)(String(t))))).replace(/"(.+?)"/g,"<b>$1</b>")}}e.Translations=s,e.translations=new s},5992:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.locateLastVisibleIndex=e.locateFirstVisibleIndex=e.isVisibleInViewport=e.isRectCloseTo=e.getRect=e.getOuterHeight=e.getOuterWidth=e.getInnerHeight=e.getInnerWidth=e.getElementIndex=e.getNodeIndex=void 0;const n=i(7388),o=i(6949);function r(t){if(t===document.documentElement){let t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;return{top:0,right:t,bottom:e,left:0,width:t,height:e}}{let e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}}function s(t,e,i,o){let r=t.getBoundingClientRect(),s=(0,n.binaryFindIndexToInsert)(e,(t=>{let e=t.getBoundingClientRect(),n=(Math.min(r.bottom,e.bottom)-Math.max(r.top,e.top))/Math.min(r.height,e.height);return e.bottom<r.top?1:e.top>r.bottom?-1:e.top<r.top&&n<i?1:e.bottom<r.bottom&&n<i?-1:o?1:-1}));return o&&s>0&&(s-=1),s}e.getNodeIndex=function(t){if(t.parentNode){let e=0;for(let i of t.parentNode.childNodes){if(i===t)return e;e++}}return-1},e.getElementIndex=function(t){if(t.parentNode){let e=0;for(let i of t.parentNode.children){if(i===t)return e;e++}}return-1},e.getInnerWidth=function(t){return t.clientWidth?t.clientWidth-(0,o.getStyleValueAsNumber)(t,"paddingLeft")-(0,o.getStyleValueAsNumber)(t,"paddingRight"):0},e.getInnerHeight=function(t){let e=t.clientHeight;return e?e-(0,o.getStyleValueAsNumber)(t,"paddingTop")-(0,o.getStyleValueAsNumber)(t,"paddingBottom"):0},e.getOuterWidth=function(t){let e=t.offsetWidth;return e?e+(0,o.getStyleValueAsNumber)(t,"marginLeft")+(0,o.getStyleValueAsNumber)(t,"marginRight"):0},e.getOuterHeight=function(t){let e=t.offsetHeight;return e?e+(0,o.getStyleValueAsNumber)(t,"marginTop")+(0,o.getStyleValueAsNumber)(t,"marginBottom"):0},e.getRect=r,e.isRectCloseTo=function(t,e){for(let i of["top","left","width","height"])if(Math.abs(t[i]-e[i])>=1)return!1;return!0},e.isVisibleInViewport=function(t,e=.5,i){let n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,s=r(t),a=Math.min(n,s.right)-Math.max(0,s.left),l=Math.min(o,s.bottom)-Math.max(0,s.top);if(a/Math.min(s.width,n)>e&&l/Math.min(s.height,o)>e){if(t.disabled)return!0;let e=document.elementFromPoint(s.left+s.width/2,s.top+s.height/2);if(t.contains(e)||(null==i?void 0:i.contains(e)))return!0}return!1},e.locateFirstVisibleIndex=function(t,e,i=.5){return s(t,e,i,!1)},e.locateLastVisibleIndex=function(t,e,i=.5){return s(t,e,i,!0)}},6029:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.MouseLeave=void 0,function(t){const e=new Set;function i(t){for(let i of[...e].reverse())if(i.popup.contains(t))return i;return null}t.addController=function(t){e.add(t)},t.deleteController=function(t){e.delete(t)},t.lock=function(t,e=null){let n=i(t);n&&n.requestLock(t,e)},t.unlock=function(t,e=null){let n=i(t);n&&n.releaseLock(t,e)},t.checkLocked=function(t){for(let i of[...e].reverse())if(i.popup.contains(t))return i.beLocked();return!1},t.on=function(t,e,i,o){let r=new n(t,e,!1,i,o);return()=>r.cancel()},t.once=function(t,e,i,o){let r=new n(t,e,!0,i,o);return()=>r.cancel()}}(i=e.MouseLeave||(e.MouseLeave={}));class n{constructor(t,e,n,o,r={}){var s;this.mouseIn=!1,this.locks=new Map,this.ended=!1,this.timeout=null,this.trigger=t,this.popup=e,this.isOnce=n,this.callback=o,this.delay=null!==(s=r.delay)&&void 0!==s?s:200,r.mouseIn&&this.onMouseEnter(),this.bindedOnMouseEnter=this.onMouseEnter.bind(this),this.bindedOnMouseLeave=this.onMouseLeave.bind(this);for(let i of[t,e])i.addEventListener("mouseenter",this.bindedOnMouseEnter,!1),i.addEventListener("mouseleave",this.bindedOnMouseLeave,!1);i.addController(this)}onMouseEnter(){this.mouseIn=!0,i.lock(this.trigger,this.popup),this.clearTimeout()}onMouseLeave(){this.mouseIn=!1,i.unlock(this.trigger,this.popup),this.beLocked()||this.startTimeout()}startTimeout(){this.clearTimeout(),this.timeout=setTimeout((()=>this.onTimeout()),this.delay)}startTimeoutIfNot(){this.timeout||this.startTimeout()}onTimeout(){this.timeout=null,this.mouseIn||this.flush()}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}flush(){this.ended||(this.isOnce?this.cancel():this.releaseAllLocks(),this.callback())}cancel(){if(!this.ended){this.clearTimeout();for(let t of[this.trigger,this.popup])t.removeEventListener("mouseenter",this.bindedOnMouseEnter,!1),t.removeEventListener("mouseleave",this.bindedOnMouseLeave,!1);i.unlock(this.trigger,this.popup),this.releaseAllLocks(),this.ended=!0,i.deleteController(this)}}beLocked(){return this.locks.size>0}requestLock(t,e){this.clearTimeout();let n=this.locks.get(t);n||(n=new Set,this.locks.set(t,n)),n.add(e),i.lock(this.trigger,e)}releaseLock(t,e){let n=this.locks.get(t);n&&(n.delete(e),0===n.size&&this.locks.delete(t)),i.unlock(this.trigger,e),this.beLocked()||this.mouseIn||(i.unlock(this.trigger,this.popup),this.startTimeoutIfNot())}releaseAllLocks(){for(let[t,e]of this.locks)for(let n of e)i.unlock(t,n);this.locks=new Map}}},6073:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Progress=void 0;const o=i(1416),r=i(8240),s=i(6585);let a=class extends o.Component{constructor(){super(...arguments),this.value=0,this.decimalCount=null}static style(){let{mainColor:t,adjust:e,adjustFontSize:i}=r.theme;return o.css`
		:host{
			display: inline-block;
			vertical-align: top;
			position: relative;
			width: ${e(200)}px;
			height: ${e(28)}px;
		}

		.groove{
			position: absolute;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			height: 1px;
			margin: auto 0;
			background: ${t.alpha(.2)};
		}

		.progress{
			height: 100%;
			background: ${t};
		}

		.tooltip{
			font-family: consolas;
			font-size: ${i(14)}px;
		}
		`}render(){let t=(0,s.tooltip)(this.renderTooltipValue(),{alignTo:()=>this.refElements.progress,alignPosition:"bc-tr",alignMargin:[8,0]});return o.html`
			<template ${t}>
				<div class="groove">
					<div class="progress" :refElement="progress" :style.width.percent=${100*Math.min(this.value,1)}></div>
				</div>
			</template>
		`}renderTooltipValue(){let t=100*Math.min(this.value,1),e=t.toString();return null!==this.decimalCount&&(e=t.toFixed(this.decimalCount)),e+="%",o.html`<span class="${this.scopeClassName("tooltip")}">${e}</span>`}};a=n([(0,o.define)("f-progress")],a),e.Progress=a},6099:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPlayingAnimation=e.stopAnimation=e.animateTo=e.animateFrom=e.animate=e.animateStyleValueTo=e.animateStyleValueFrom=e.animateStyleValue=e.animateInterpolatedValue=e.getCSSEasingValue=e.getEasingFunction=void 0;const n=i(6949),o=i(9549),r="ease-out-quad",s=new WeakMap,a=new WeakMap,l={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-quad":[.55,.085,.68,.53],"ease-in-cubic":[.55,.055,.675,.19],"ease-in-quart":[.895,.03,.685,.22],"ease-in-quint":[.755,.05,.855,.06],"ease-in-sine":[.47,0,.745,.715],"ease-in-expo":[.95,.05,.795,.035],"ease-in-circ":[.6,.04,.98,.335],"ease-in-back":[.6,-.28,.735,.045],"ease-out-quad":[.25,.46,.45,.94],"ease-out-cubic":[.215,.61,.355,1],"ease-out-quart":[.165,.84,.44,1],"ease-out-quint":[.23,1,.32,1],"ease-out-sine":[.39,.575,.565,1],"ease-out-expo":[.19,1,.22,1],"ease-out-circ":[.075,.82,.165,1],"ease-out-back":[.175,.885,.32,1.275],"ease-in-out-quad":[.455,.03,.515,.955],"ease-in-out-cubic":[.645,.045,.355,1],"ease-in-out-quart":[.77,0,.175,1],"ease-in-out-quint":[.86,0,.07,1],"ease-in-out-sine":[.445,.05,.55,.95],"ease-in-out-expo":[1,0,0,1],"ease-in-out-circ":[.785,.135,.15,.86],"ease-in-out-back":[.68,-.55,.265,1.55]},h={transform:"none"},d={linear:function(t){return t}};function c(t){return d[t]?d[t]:d[t]=function(t){let[e,i,n,o]=l[t],r=3*e-3*n+1,s=-6*e+3*n,a=3*e,h=3*i-3*o+1,d=-6*i+3*o,c=3*i;return function(t){if(0===t)return 0;if(1===t)return 1;let e=-t,i=0,n=1,o=(i+n)/2;for(;n-i>1e-4;)((r*o+s)*o+a)*o+e<0?i=o:n=o,o=(i+n)/2;return((h*o+d)*o+c)*o}}(t)}function u(t){return l.hasOwnProperty(t)?"cubic-bezier("+l[t].join(", ")+")":t}function p(t,e,i,n){let o=performance.now(),r=c(e),s=0,a=()=>{s=requestAnimationFrame((e=>{let l=(e-o)/t;if(l>=1)s=0,i(1),n&&n(!0);else{let t=r(l);i(t),a()}}))};return a(),()=>{s&&(cancelAnimationFrame(s),n&&n(!1))}}function m(t,e,i,o,s=200,l=r){return new Promise((r=>{let h=p(s,l,(r=>{let s=i+(o-i)*r;"scrollTop"===e||"scrollLeft"===e?t[e]=s:(0,n.setStyleValue)(t,e,s)}),r);a.set(t,(()=>{h(),a.delete(t)}))}))}function g(t,e,i,n=200,a=r){if(!t.animate)return Promise.resolve(!1);f(t),e=(0,o.normativeStyleObject)(e),i=(0,o.normativeStyleObject)(i);let l=u(a),h=t.animate([e,i],{easing:l,duration:n});return s.set(t,h),new Promise((e=>{h.addEventListener("finish",(()=>{s.delete(t),e(!0)}),!1),h.addEventListener("cancel",(()=>{s.delete(t),e(!1)}),!1)}))}function f(t){let e=s.get(t);if(e)return e.cancel(),s.delete(t),!0;let i=a.get(t);return!!i&&(i(),!0)}e.getEasingFunction=c,e.getCSSEasingValue=u,e.animateInterpolatedValue=function(t,e,i,n=200,o=r){let s;return{promise:new Promise((r=>{s=p(n,o,(n=>{t(e+(i-e)*n)}),r)})),stop:s}},e.animateStyleValue=m,e.animateStyleValueFrom=function(t,e,i,o=200,s=r){let a;return a="scrollTop"===e||"scrollLeft"===e?t[e]:(0,n.getStyleValueAsNumber)(t,e),m(t,e,i,a,o,s)},e.animateStyleValueTo=function(t,e,i,o=200,s=r){let a;return a="scrollTop"===e||"scrollLeft"===e?t[e]:(0,n.getStyleValueAsNumber)(t,e),m(t,e,a,i,o,s)},e.animate=g,e.animateFrom=function(t,e,i=200,n=r){let o={},s=getComputedStyle(t);for(let t in e)o[t]=s[t]||h[t]||"0";return g(t,e,o,i,n)},e.animateTo=async function(t,e,i=200,o=r){let s={},a=getComputedStyle(t),l=Object.assign({},e);for(let t in l)""===l[t]&&(l[t]=h[t]||"0");for(let t in e)s[t]=a[t]||h[t]||"0";let d=await g(t,s,l,i,o);return d&&(0,n.setStyleValues)(t,e),d},e.stopAnimation=f,e.isPlayingAnimation=function(t){return!!s.get(t)||!!a.get(t)}},6152:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observePlainObjectTarget=void 0;const n=i(6205),o=i(2066),r=i(5376);e.observePlainObjectTarget=function(t){let e=new Proxy(t,s);return(0,r.addTargetAndProxy)(t,e),e};const s={get(t,e){let i=t[e];if((0,n.addDependency)(t),i&&"object"==typeof i){let t=(0,r.getObservedOf)(i);if(t)return t;if((0,n.isUpdating)())return(0,o.observeTarget)(i)}return i},set:(t,e,i)=>(t[e]!==i&&(t[e]=i,(0,n.notifyObjectSet)(t)),!0),has:(t,e)=>((0,n.addDependency)(t),e in t),deleteProperty:(t,e)=>!t.hasOwnProperty(e)||((0,n.addDependency)(t),delete t[e])}},6171:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QueueUpdateOrder=e.enqueueUpdatableInOrder=e.untilRenderComplete=e.onRenderComplete=e.updateAllGlobalWatchers=e.GlobalWatcherGroup=e.watchImmediately=e.watchUntil=e.watchOnce=e.watch=e.LazyWatcher=e.Watcher=e.WatcherGroup=e.observeGetting=e.clearDependenciesOf=e.endUpdating=e.startUpdating=e.observeComponentTarget=e.observe=void 0;var n=i(2878);Object.defineProperty(e,"observe",{enumerable:!0,get:function(){return n.observe}}),Object.defineProperty(e,"observeComponentTarget",{enumerable:!0,get:function(){return n.observeComponentTarget}}),Object.defineProperty(e,"startUpdating",{enumerable:!0,get:function(){return n.startUpdating}}),Object.defineProperty(e,"endUpdating",{enumerable:!0,get:function(){return n.endUpdating}}),Object.defineProperty(e,"clearDependenciesOf",{enumerable:!0,get:function(){return n.clearDependenciesOf}}),Object.defineProperty(e,"observeGetting",{enumerable:!0,get:function(){return n.observeGetting}});var o=i(9128);Object.defineProperty(e,"WatcherGroup",{enumerable:!0,get:function(){return o.WatcherGroup}}),Object.defineProperty(e,"Watcher",{enumerable:!0,get:function(){return o.Watcher}}),Object.defineProperty(e,"LazyWatcher",{enumerable:!0,get:function(){return o.LazyWatcher}}),Object.defineProperty(e,"watch",{enumerable:!0,get:function(){return o.watch}}),Object.defineProperty(e,"watchOnce",{enumerable:!0,get:function(){return o.watchOnce}}),Object.defineProperty(e,"watchUntil",{enumerable:!0,get:function(){return o.watchUntil}}),Object.defineProperty(e,"watchImmediately",{enumerable:!0,get:function(){return o.watchImmediately}}),Object.defineProperty(e,"GlobalWatcherGroup",{enumerable:!0,get:function(){return o.GlobalWatcherGroup}}),Object.defineProperty(e,"updateAllGlobalWatchers",{enumerable:!0,get:function(){return o.updateAllGlobalWatchers}});var r=i(67);Object.defineProperty(e,"onRenderComplete",{enumerable:!0,get:function(){return r.onRenderComplete}}),Object.defineProperty(e,"untilRenderComplete",{enumerable:!0,get:function(){return r.untilRenderComplete}}),Object.defineProperty(e,"enqueueUpdatableInOrder",{enumerable:!0,get:function(){return r.enqueueUpdatableInOrder}}),Object.defineProperty(e,"QueueUpdateOrder",{enumerable:!0,get:function(){return r.QueueUpdateOrder}})},6205:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notifyComPropertySet=e.addComDependency=e.notifyObjectSet=e.addDependency=e.isUpdating=e.endUpdating=e.startUpdating=e.clearDependenciesOf=void 0;const n=i(9181),o=i(1865),r=new n.Weak2WayMap,s=new o.Weak2WayPropMap;let a=null;const l=[];e.clearDependenciesOf=function(t){r.clearFromLeft(t),s.clearFromLeft(t)},e.startUpdating=function(t){a&&l.push(a),a={source:t,deps:new Set,depProps:new Map}},e.endUpdating=function(t){a&&(r.updateFromLeft(a.source,a.deps),s.updateFromLeft(a.source,a.depProps),a=l.pop()||null)},e.isUpdating=function(){return!!a},e.addDependency=function(t){a&&a.deps.add(t)},e.notifyObjectSet=function(t){let e=r.getFromRight(t);if(e)for(let t of e)t.update()},e.addComDependency=function(t,e){if(!a)return;let i=a.depProps.get(t);i||(i=new Set,a.depProps.set(t,i)),i.add(e)},e.notifyComPropertySet=function(t,e){let i=s.getFromRight(t,e);if(i)for(let t of i)t.update()}},6218:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queueEvery=e.queueSome=e.queueMap=e.queueEach=e.Queue=e.QueueState=void 0;const n=i(8038),o=i(9104),r=i(7340);var s;!function(t){t[t.Pending=0]="Pending",t[t.Running=1]="Running",t[t.Paused=2]="Paused",t[t.Finish=3]="Finish",t[t.Aborted=4]="Aborted"}(s=e.QueueState||(e.QueueState={}));class a extends o.EventEmitter{constructor(t){super(),this.key=null,this.concurrency=5,this.continueOnError=!1,this.maxRetryTimes=0,this.delayMs=0,this.tasks=[],this.state=s.Pending,this.keysFound=null,this.seed=1,this.processedCount=0,this.runningItems=[],this.failedItems=[],this.resumePromise=null,this.resumeResolve=null,(0,n.assign)(this,t,Object.keys(t).filter((t=>"tasks"!==t))),this.key&&(this.keysFound=new Set),t.tasks&&this.push(...t.tasks)}getTotalCount(){return this.getProcessedCount()+this.getUnprocessedCount()+this.getFailedCount()}getProcessedCount(){return this.processedCount}getUnprocessedCount(){return this.tasks.length+this.getRunningCount()}getRunningCount(){return this.runningItems.length}getFailedCount(){return this.failedItems.length}getUnprocessedTasks(){return[...this.getRunningTasks(),...this.tasks]}getRunningTasks(){return this.runningItems.map((t=>t.task))}getFailedTasks(){return this.failedItems.map((t=>t.task))}start(){return this.state===s.Paused?this.resume():this.tasks.length>0?(this.state=s.Running,this.tryHandleNextTask()):Promise.resolve().then((()=>this.onFinish())),this.state===s.Running}untilFinish(){return this.getUnprocessedCount()>0?new Promise((t=>{this.once("finish",(()=>t()))})):Promise.resolve()}untilEnd(){return this.getUnprocessedCount()>0?new Promise(((t,e)=>{this.once("end",(i=>i?e(i):t()))})):Promise.resolve()}pause(){return this.state===s.Running&&(this.state=s.Paused,this.resumePromise=new Promise((t=>{this.resumeResolve=()=>{this.resumeResolve=null,this.resumePromise=null,t()}})),this.emit("pause"),!0)}resume(){return this.state===s.Paused&&(this.state=s.Running,this.resumeResolve&&this.resumeResolve(),this.emit("resume"),this.tryHandleNextTask(),!0)}tryHandleNextTask(){if(this.state===s.Running){for(;this.getRunningCount()<this.concurrency&&this.tasks.length>0;){let t=this.tasks.shift();this.handleEachItem({id:this.seed++,task:t,retriedTimes:0,abort:null})}if(this.maxRetryTimes>0&&this.getRunningCount()<this.concurrency&&this.failedItems.length)for(let t=0;t<this.failedItems.length;t++){let e=this.failedItems[t];if(e.retriedTimes<this.maxRetryTimes&&(e.retriedTimes++,this.failedItems.splice(t--,1),this.handleEachItem(e),this.getRunningCount()>=this.concurrency))break}0===this.getRunningCount()&&this.onFinish()}}handleEachItem(t){let{task:e}=t,i=this.onItemFinish.bind(this,t),n=this.onItemError.bind(this,t),o=this.handler(e);this.runningItems.push(t),this.isPromiseAbortObject(o)?(o.promise.then(i,n),t.abort=o.abort):o instanceof Promise?o.then(i,n):Promise.resolve().then((()=>i(o)))}isPromiseAbortObject(t){return t&&"object"==typeof t&&t.promise instanceof Promise&&"function"==typeof t.abort}async onItemFinish(t,e){await this.prepareItem(t),this.removeFromRunningItems(t)&&(this.processedCount++,this.state===s.Running&&(this.emit("taskfinish",t.task,e),this.delayMs>0&&await(0,r.sleep)(this.delayMs),this.tryHandleNextTask()))}async onItemError(t,e){await this.prepareItem(t),this.removeFromRunningItems(t)&&(this.failedItems.push(t),this.emit("error",t.task,e),this.continueOnError||0!==this.maxRetryTimes?this.tryHandleNextTask():this.onFatalError(e))}async prepareItem(t){t.abort=null,this.resumePromise&&await this.resumePromise}removeFromRunningItems(t){let e=this.runningItems.findIndex((e=>e.id===t.id));return e>-1&&(this.runningItems.splice(e,1),!0)}onFinish(){this.state!==s.Pending&&this.state!==s.Running||(this.state=s.Finish,this.emit("finish"),this.emit("end",null))}onFatalError(t){this.abort(t)}retry(){let t=this.getFailedCount()>0;return t&&(this.tasks.push(...this.getFailedTasks()),this.failedItems=[]),this.start()&&t}abort(t="Manually"){return(this.state===s.Running||this.state===s.Paused)&&(this.state=s.Aborted,this.failedItems.push(...this.runningItems),this.abortRunningItems(),this.emit("abort",t),this.emit("end",t),!0)}abortRunningItems(){this.runningItems.map((t=>this.abortItem(t))),this.runningItems=[]}abortItem(t){let{task:e,abort:i}=t;i&&i(),this.emit("taskabort",e)}clear(){return this.state!==s.Aborted&&(this.state=s.Finish,this.tasks=[],this.failedItems=[],this.processedCount=0,this.abortRunningItems(),this.emit("finish"),this.emit("end",null),this.resumeResolve&&this.resumeResolve(),!0)}clearNotRunning(){this.tasks=[],this.failedItems=[],this.processedCount=0}push(...t){if(this.keysFound)for(let e of t)this.keysFound.add(e[this.key]);this.tasks.push(...t),this.tryHandleNextTask()}unshift(...t){if(this.keysFound)for(let e of t)this.keysFound.add(e[this.key]);this.tasks.unshift(...t),this.tryHandleNextTask()}has(t){return!!this.keysFound&&this.keysFound.has(t[this.key])}add(...t){(t=t.filter((t=>!this.has(t)))).length>0&&this.push(...t)}addToStart(...t){(t=t.filter((t=>!this.has(t)))).length>0&&this.unshift(...t)}find(t){let e=this.runningItems.find((e=>t(e.task)));return e?e.task:(e=this.failedItems.find((e=>t(e.task))),e?e.task:this.tasks.find((e=>t(e)))||void 0)}remove(...t){let e=new Set(t);return this.removeWhere((t=>e.has(t)))}removeWhere(t){let e=[];return this.runningItems=this.runningItems.filter((i=>!t(i.task)||(e.push(i.task),!1))),this.failedItems=this.failedItems.filter((i=>!t(i.task)||(e.push(i.task),!1))),this.tasks=this.tasks.filter((i=>!t(i)||(e.push(i),!1))),this.tryHandleNextTask(),e}}function l(t,e,i){return new Promise(((n,o)=>{let r=new a({concurrency:i,tasks:t,handler:e});r.on("taskfinish",((t,e)=>{e&&(n(!0),r.clear())})),r.on("finish",(()=>n(!1))),r.on("error",o),r.start()}))}e.Queue=a,e.queueEach=function(t,e,i){return new Promise(((n,o)=>{let r=new a({concurrency:i,tasks:t,handler:e});r.on("finish",n),r.on("error",o),r.start()}))},e.queueMap=function(t,e,i){return new Promise(((n,o)=>{let r=[],s=t.map(((t,e)=>({task:t,index:e}))),l=new a({concurrency:i,tasks:s,handler:async({task:t,index:i})=>{r[i]=await e(t)}});l.on("finish",(()=>n(r))),l.on("error",o),l.start()}))},e.queueSome=l,e.queueEvery=function(t,e,i){return l(t,(async t=>!await e(t)),i).then((t=>!t))}},6219:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReferences=void 0,e.ResultReferences=class{constructor(){this.referenceMap=new WeakMap,this.unReferenceMap=new WeakMap,this.bindingUnReferenceMap=new WeakMap}addReference(t,e){this.referenceMap.set(t,e)}addUnReference(t,e){this.unReferenceMap.set(t,e)}createReference(t,e){if(this.referenceMap.has(t)&&this.referenceMap.get(t)(e),this.unReferenceMap.has(t)){let i=this.unReferenceMap.get(t);this.bindingUnReferenceMap.set(e,i)}}removeReference(t){this.bindingUnReferenceMap.has(t)&&this.bindingUnReferenceMap.get(t)(t)}}},6228:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"checked",code:'<svg viewBox="0 0 15 15"><polyline style="fill:none;stroke:currentColor;" points="12.5,3.4 5.7,11.6 2.5,7.8"/></svg>'}},6269:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.alignToEvent=e.getMainAlignDirection=e.Aligner=e.align=void 0;const n=i(6949),o=i(5992),r=i(5992);e.align=function(t,e,i,n={}){new s(t,e,i,n).align()};class s{constructor(t,e,i,n={}){var o,r,s,l;this.cachedRect=null,this.cachedTargetRect=null,this.el=t,this.target=e,this.triangle=n.triangle||null,this.stickToEdges=null===(o=n.stickToEdges)||void 0===o||o,this.canSwapPosition=null===(r=n.canSwapPosition)||void 0===r||r,this.canShrinkInY=null!==(s=n.canShrinkInY)&&void 0!==s&&s,this.fixTriangle=null!==(l=n.fixTriangle)&&void 0!==l&&l,this.alignPosition=a(i),this.alignDirections=this.parseAlignDirections(),this.margins=this.parseMargins(n.margin||0),function(t){for(;t&&t!==document.documentElement&&"fixed"!==getComputedStyle(t).position;)t=t.parentElement;return t===document.documentElement?null:t}(this.target)?(this.el.style.position="fixed",this.isElInFixedPosition=!0):this.isElInFixedPosition="fixed"===getComputedStyle(this.el).position}parseAlignDirections(){let t=this.alignPosition;return{top:t[0].includes("b")&&t[1].includes("t"),right:t[0].includes("l")&&t[1].includes("r"),bottom:t[0].includes("t")&&t[1].includes("b"),left:t[0].includes("r")&&t[1].includes("l")}}parseMargins(t){var e,i,n;let o={top:0,right:0,bottom:0,left:0};return"number"==typeof t?(o.top=t,o.right=t,o.bottom=t,o.left=t):(o.top=t[0],o.right=null!==(e=t[1])&&void 0!==e?e:o.top,o.bottom=null!==(i=t[2])&&void 0!==i?i:o.top,o.left=null!==(n=t[3])&&void 0!==n?n:o.right),this.triangle&&((this.alignDirections.top||this.alignDirections.bottom)&&(o.top+=this.triangle.offsetHeight,o.bottom+=this.triangle.offsetHeight),(this.alignDirections.left||this.alignDirections.right)&&(o.right+=this.triangle.offsetWidth,o.left+=this.triangle.offsetWidth)),o}align(){this.resetStylesBeforeGettingRect();let t={...this.alignDirections},e=(0,o.getRect)(this.el),i=(0,o.getRect)(this.target);if(this.cachedRect&&(0,r.isRectCloseTo)(e,this.cachedRect)&&this.cachedTargetRect&&(0,r.isRectCloseTo)(i,this.cachedTargetRect))return!0;if(!function(t){return t.width>0||t.height>0}(i))return!1;let n=function(t){let e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;return t.left<e&&t.right>0&&t.top<i&&t.bottom>0}(i);if(!n&&this.stickToEdges)return!1;this.shouldClearElPosition(e)&&(this.clearElPosition(),e=(0,o.getRect)(this.el));let s=this.getTriangleRelativeRect(e);if(this.canShrinkInY){let t=h(this.el);t&&(e.height+=t.scrollHeight-t.clientHeight)}return this.doAlignment(t,e,i,s),this.triangle&&this.alignTriangle(t,e,i,s),this.cachedRect=e,this.cachedTargetRect=i,!0}resetStylesBeforeGettingRect(){this.canShrinkInY&&this.el.offsetHeight>document.documentElement.clientHeight?this.el.style.height="100vh":this.canShrinkInY&&this.el.style.height&&(this.el.style.height="")}shouldClearElPosition(t){return t.left<=0||t.right>=document.documentElement.clientWidth}clearElPosition(){this.el.style.left="0",this.el.style.right="",this.el.style.top="0"}getTriangleRelativeRect(t){this.fixTriangle&&this.triangle&&(this.triangle.style.transform="");let e=this.triangle?(0,o.getRect)(this.triangle):null;return e&&(e.left-=t.left,e.top-=t.top),e}doAlignment(t,e,i,n){let o=this.getElRelativeAnchor(t,e,n),r=this.getTargetAbsoluteAnchor(i),s={x:r[0]-o[0],y:r[1]-o[1]};this.alignVertical(s.y,t,e,i,n)&&(o=this.getElRelativeAnchor(t,e,n),s.x=r[0]-o[0],s.y=r[1]-o[1]),this.alignHerizontal(s.x,t,e,i,n);let a=e.left,l=e.top;if(!this.isElInFixedPosition&&this.target!==document.body&&this.target!==document.documentElement){var h=this.el.offsetParent;if(h){var d=h.getBoundingClientRect();a-=d.left,l-=d.top}}t.left?(this.el.style.left="auto",this.el.style.right=document.documentElement.clientWidth-e.right+"px"):(this.el.style.left=a+"px",this.el.style.right="auto"),this.el.style.top=l+"px"}getElRelativeAnchor(t,e,i){let n=this.alignPosition[0],o=n.includes("l")?0:n.includes("r")?e.width:e.width/2,r=n.includes("t")?0:n.includes("b")?e.height:e.height/2;return this.fixTriangle&&i&&((t.top||t.bottom)&&"c"===this.alignPosition[1][1]?o=i.left+i.width/2:(t.left||t.right)&&"c"===this.alignPosition[1][0]&&(r=i.top+i.height/2)),[o,r]}getTargetAbsoluteAnchor(t){let e=this.alignPosition[1];return[e.includes("l")?t.left-this.margins.left:e.includes("r")?t.right+this.margins.right:t.left+t.width/2,e.includes("t")?t.top-this.margins.top:e.includes("b")?t.bottom+this.margins.bottom:t.top+t.height/2]}alignVertical(t,e,i,n,o){let r=document.documentElement.clientHeight,s=n.top-this.margins.top,a=r-(n.bottom+this.margins.bottom),l=!1,h=i.height;if(e.top||e.bottom)e.top&&t<0&&s<a&&this.canSwapPosition?(t=n.bottom+this.margins.bottom,e.top=!1,e.bottom=!0):t+h>r&&s>a&&this.canSwapPosition&&(t=n.top-this.margins.top-h,e.top=!0,e.bottom=!1);else{if(t+h>r&&this.stickToEdges){let e=n.top+(o?o.height:0)-h;t=Math.max(r-h,e)}if(t<0&&this.stickToEdges){let e=n.bottom-(o?o.height:0);t=Math.min(0,e)}}return this.canShrinkInY?e.top&&t<0&&this.stickToEdges?(t=0,h=s,l=!0):e.bottom&&t+h>r&&this.stickToEdges?(h=a,l=!0):!e.top&&!e.bottom&&i.height>r&&(t=0,h=r,l=!0):this.stickToEdges&&(e.top||e.bottom)&&(t=Math.min(t,r-i.height),t=Math.max(0,t)),i.top=t,l&&(this.el.style.height=h+"px",i.height=h),i.bottom=i.top+i.height,l}alignHerizontal(t,e,i,n,o){let r=document.documentElement.clientWidth,s=n.left-this.margins.left,a=r-(n.right+this.margins.right),l=i.width;if(e.left||e.right)e.left&&t<0&&s<a&&this.canSwapPosition?(t=n.right+this.margins.right,e.left=!1,e.right=!0):e.right&&t>r-l&&s>a&&this.canSwapPosition&&(t=n.left-this.margins.left-l,e.left=!0,e.right=!1);else{if(t+l>r&&this.stickToEdges){let e=n.left+(o?o.width:0)-l;t=Math.max(r-l,e)}if(t<0&&this.stickToEdges){let e=n.right-(o?o.width:0);t=Math.min(0,e)}}this.stickToEdges&&(e.left||e.right)&&(t=Math.min(t,r-i.width),t=Math.max(0,t)),i.left=t,i.right=i.left+i.width}alignTriangle(t,e,i,o){let r=this.triangle,s=[],a=e.width,l=e.height;if(t.top?(r.style.top="auto",r.style.bottom=-o.height+"px",s.push("rotateX(180deg)")):t.bottom?(r.style.top=-o.height+"px",r.style.bottom=""):t.left?(r.style.left="auto",r.style.right=-o.width+"px",s.push("rotateY(180deg)")):t.right&&(r.style.left=-o.width+"px",r.style.right=""),t.top||t.bottom){let t=o.width/2,l=0;l=(a>=i.width||this.fixTriangle)&&"c"===this.alignPosition[1][1]?i.left+i.width/2-e.left-t:this.fixTriangle?o.left:a/2-t;let h=Math.max(e.left,i.left),d=Math.min(e.left+e.width,i.right);if(h-=e.left,d-=e.left,h-=t,d-=t,l=Math.max(l,h),l=Math.min(l,d),this.fixTriangle){let t=l-o.left;s.push(`translateX(${t}px)`)}else l-=(0,n.getStyleValueAsNumber)(this.el,"borderLeftWidth"),r.style.left=l+"px";r.style.right=""}if(t.left||t.right){let t,a=o.height/2;t=(l>=i.height||this.fixTriangle)&&"c"===this.alignPosition[1][0]?i.top+i.height/2-e.top-a:this.fixTriangle?o.top:l/2-a;let h=Math.max(e.top,i.top),d=Math.min(e.top+e.height,i.bottom);if(h-=e.top,d-=e.top,h-=a,d-=a,t=Math.max(t,h),t=Math.min(t,d),this.fixTriangle){let e=t-o.top;s.push(`translateY(${e}px)`)}else this.fixTriangle||(t-=(0,n.getStyleValueAsNumber)(this.el,"borderTopWidth"),r.style.top=t+"px");r.style.bottom=""}r.style.transform=s.join(" ")}}function a(t){const e={t:"b",b:"t",c:"c",l:"r",r:"l"};if(!/^(?:[tbc][lrc]-[tbc][lrc]|[tbclr]-[tbclr]|[tbc][lrc]|[tbclr])/.test(t))throw`"${t}" is not a valid position`;1===t.length?t="tb".includes(t)?e[t]+"c-"+t+"c":"c"+e[t]+"-c"+t:2===t.length&&(t="tb".includes(t[0])?e[t[0]]+t[1]+"-"+t:t[1]+e[t[0]]+"-"+t[1]+t[0]);let i=t.split("-");return[l(i[0]),l(i[1])]}function l(t){return 1===t.length&&(t="tb".includes(t)?t+"c":"c"+t),t}function h(t,e=2){if(e<=0)return null;for(let i of t.children){if(i.scrollHeight>i.clientHeight)return i;let t=h(i,e-1);if(t)return t}return null}e.Aligner=s,e.getMainAlignDirection=function(t){let e=t.length<5?a(t):t;return e[0].includes("b")&&e[1].includes("t")?"t":e[0].includes("l")&&e[1].includes("r")?"r":e[0].includes("t")&&e[1].includes("b")?"b":e[0].includes("r")&&e[1].includes("l")?"l":"cc"===e[0]&&"cc"===e[1]?"c":""},e.alignToEvent=function(t,e,i=[0,0]){if("fixed"!==(0,n.getStyleValue)(t,"position"))throw new Error('Element to call "alignToEvent" must in fixed layout');let o=document.documentElement.clientWidth,r=document.documentElement.clientHeight,s=t.offsetWidth,a=t.offsetHeight,l=e.clientX,h=e.clientY,d=l+i[0],c=h+i[1];d+s>o&&(d=o-s),c+a>r&&(c=r-a),t.style.left=Math.round(d)+"px",t.style.top=Math.round(c)+"px"}},6474:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeMapOrSetTarget=void 0;const n=i(6205),o=i(5376),r=["add","set","delete","clear"];e.observeMapOrSetTarget=function(t){let e=new Proxy(t,s);return(0,o.addTargetAndProxy)(t,e),e};const s={get(t,e){let i=t[e],o=typeof i;return t.hasOwnProperty(e)||"function"!==o||(i=i.bind(t),(0,n.addDependency)(t),r.includes(e)&&(0,n.notifyObjectSet)(t)),i}}},6500:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.untilRenderComplete=e.onRenderComplete=e.enqueueUpdatableInOrder=void 0;const n=i(8894),o=i(5503);var r;!function(t){t[t.NotStarted=0]="NotStarted",t[t.Prepended=1]="Prepended",t[t.Updating=2]="Updating"}(r||(r={}));const s=new n.OrderedQueue,a=new o.InfiniteUpdatingValidator;let l=[],h=r.NotStarted;function d(t){l.push(t),c()}function c(){h===r.NotStarted&&(requestAnimationFrame(u),h=r.Prepended)}async function u(){for(h=r.Updating;!s.isEmpty()||l.length>0;){for(;!s.isEmpty();)do{let t=s.shift();try{t.__updateImmediately()}catch(t){console.error(t)}await Promise.resolve()}while(!s.isEmpty());let t=l;l=[];for(let e of t)try{e()}catch(t){console.error(t)}await Promise.resolve()}a.clear(),h=r.NotStarted}e.enqueueUpdatableInOrder=function(t,e,i){s.has(t)||a.validate(t)&&(s.add(t,e,i),c())},e.onRenderComplete=d,e.untilRenderComplete=function(){return new Promise((t=>{d(t)}))}},6527:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.NodeAnchor=e.NodeAnchorType=void 0,function(t){t[t.Next=0]="Next",t[t.Container=1]="Container"}(i||(e.NodeAnchorType=i={})),e.NodeAnchor=class{constructor(t,e){this.el=t,this.type=e}insert(t){this.type===i.Next?this.el.before(t):this.el.append(t)}}},6530:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contextmenu=e.ContextMenuBinding=void 0;const n=i(1416),o=i(5499);class r{constructor(t,e){this.popup=null,this.unwatchRect=null,this.unlockEl=null,this.el=t,this.context=e,(0,n.on)(this.el,"contextmenu.prevent",this.showContextMenu,this)}update(t){this.renderFn=t}async showContextMenu(t){this.renderPopup();let e=this.popup;await(0,n.untilRenderComplete)(),(0,o.alignToEvent)(e.el,t),e.el.focus(),o.MouseLeave.lock(this.el,e.el),new n.Transition(e.el,{name:"fade"}).enter(),(0,n.on)(document,"mousedown",this.onDocMouseDown,this),(0,n.once)(e.el,"click",this.hideContextMenu,this),this.unwatchRect=(0,o.watchLayout)(this.el,"rect",this.onElRectChanged.bind(this))}renderPopup(){this.popup||(this.popup=(0,n.getRenderedAsComponent)((0,n.renderUpdatable)(this.renderFn,this.context).template)),this.popup.applyAppendTo()}onDocMouseDown(t){let e=t.target;this.popup&&!this.popup.el.contains(e)&&this.hideContextMenu()}hideContextMenu(){this.popup&&(o.MouseLeave.unlock(this.el,this.popup.el),(0,n.off)(document,"mousedown",this.onDocMouseDown,this),(0,n.off)(this.popup.el,"click",this.hideContextMenu,this),new n.Transition(this.popup.el,{name:"fade"}).leave().then((t=>{t&&this.onLeaveTransitionEnd()}))),this.unlockEl&&(this.unlockEl(),this.unlockEl=null),this.unwatchRect&&(this.unwatchRect(),this.unwatchRect=null)}onLeaveTransitionEnd(){this.popup&&(this.popup.el.remove(),this.popup=null)}onElRectChanged(){this.hideContextMenu()}remove(){(0,n.off)(this.el,"contextmenu",this.showContextMenu,this)}}e.ContextMenuBinding=r,e.contextmenu=(0,n.defineBinding)("contextmenu",r)},6585:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tooltip=e.TooltipBinding=void 0;const n=i(5499),o=i(1416),r=i(8708),s={alignPosition:"r",alignMargin:3,showDelay:0,hideDelay:200,triangle:!0,fixTriangle:!1,type:"default",pointerable:!1};class a extends r.PopupBinding{constructor(){super(...arguments),this.title=""}update(t,e={}){this.title=t,super.update(this.getRenderFn.bind(this),this.getPopupOptions(e))}getRenderFn(){return o.html`
			<f-tooltip
				.herizontal=${this.isHerizontal()}
				.type=${this.getOption("type")}
			>
				${this.title}
			</f-tooltip>
		`}getPopupOptions(t={}){return{...s,key:"tooltip",...t}}isHerizontal(){let t=(0,n.getMainAlignDirection)(this.options.get("alignPosition"));return"l"===t||"r"===t}showPopupLater(){this.title&&super.showPopupLater()}bindEnterEvents(){this.shouldKeepVisible()?(0,n.ensureWindowLoaded)().then((()=>{this.showPopupLater()})):super.bindEnterEvents()}shouldKeepVisible(){return super.shouldKeepVisible()||["prompt","error"].includes(this.getOption("type"))}onTriggerRectChanged(){this.shouldKeepVisible()||(0,n.isVisibleInViewport)(this.el,.1,this.popup.el)?this.popup&&this.alignPopup():this.hidePopupLater()}getAlignOptions(){let t=this.popup.refElements.triangle;return{margin:this.getOption("alignMargin"),stickToEdges:!1,canShrinkInY:!0,triangle:t,fixTriangle:this.getOption("fixTriangle")}}}e.TooltipBinding=a,e.tooltip=(0,o.defineBinding)("tooltip",a)},6622:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinHTMLTokens=e.parseToHTMLTokens=e.HTMLTokenType=void 0;const n=i(4479);var o;!function(t){t[t.StartTag=0]="StartTag",t[t.EndTag=1]="EndTag",t[t.Text=2]="Text"}(o||(e.HTMLTokenType=o={}));const r=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];e.parseToHTMLTokens=function(t){const e=/<!--[\s\S]*?-->|<([\w-]+)([\s\S]*?)\/?>|<\/[\w-]+>/g;let i,s=0,a=[];for(;i=e.exec(t);){let l=i[0];if(i.index>s){let e=(0,n.trim)(t.slice(s,i.index));e&&a.push({type:o.Text,text:e})}if(s=e.lastIndex,"!"!==l[1])if("/"===l[1]){let t=l.slice(2,-1);r.includes(t)||a.push({type:o.EndTag,tagName:t})}else{let t=i[1],e=i[2],n=r.includes(t);a.push({type:o.StartTag,tagName:t,attributes:e,selfClose:n}),"/"!==l[l.length-2]||n||a.push({type:o.EndTag,tagName:t})}}return s<t.length&&(0,n.trim)(t.slice(s))&&a.push({type:o.Text,text:t.slice(s)}),a},e.joinHTMLTokens=function(t){let e="";for(let i of t)switch(i.type){case o.StartTag:e+="<"+i.tagName+i.attributes+">";break;case o.EndTag:e+=`</${i.tagName}>`;break;case o.Text:e+=i.text}return e}},6624:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.RefComponentBinding=void 0;const o=i(9856),r=i(356);let s=e.RefComponentBinding=class{constructor(t,e){if(!e)throw new ReferenceError('A context must be provided when using ":ref" binding!');this.el=t,this.context=e}update(t){(0,o.getComponentEarly)(this.el,(e=>{e&&("string"==typeof t?this.context.refComponents[t]=e:"function"==typeof t&&t.call(this.context,e))}))}remove(){}};e.RefComponentBinding=s=n([(0,r.defineBinding)("refComponent")],s)},6716:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Table=void 0;const o=i(1416),r=i(8240),s=i(5499),a=i(3088),l=i(9051),h=i(7234);let d=class extends o.Component{constructor(t){super(t),this.live=!1,this.renderCount=50,this.preRendering=!1,this.resizable=!1,this.minColumnWidth=64,this.transition=void 0,this.orderName=null,this.orderDirection="",this.resizer=null,this.firstVisibleIndexSpecified=!1,this.stateCacher=new h.TableStateCacher(this)}static style(){let{adjustFontSize:t,adjust:e,mainColor:i,textColor:n,backgroundColor:a}=r.theme,l=(0,s.getScrollbarWidth)();return o.css`
		:host{
			display: flex;
			flex-direction: column;
			height: 200px;
		}

		.head{
			padding-right: ${l}px;	// Same with defined scrollbar width.
			color: ${n.toMiddle(20)};
			font-size: ${t(13)}px;
			font-weight: bold;
			user-select: none;
		}

		.columns{
			display: flex;
			height: 100%;
		}

		.column{
			position: relative;
			display: flex;
			align-items: stretch;
			padding: 0 ${e(8)}px;
			border-bottom: 1px solid ${a.toMiddle(20)};

			&:last-child{
				flex: 1;
				min-width: 0;
				padding-right: ${l}px;
				margin-right: -${l}px;
			}
		}

		.column-left{
			display: flex;
			flex: 1;
			max-width: 100%;

			&:hover .order{
				display: flex;
			}
		}

		.column-title{
			flex: 0 1 auto;
			min-width: 0;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.column-ordered{
			border-bottom-color: #888;
		}

		.resizable .column-title{
			flex: 1;
		}

		.order{
			width: ${e(16)}px;
			flex: none;
			margin-right: ${e(-8)}px;	// Gives 16 - 8 = 8px as cell padding-right.
			display: none;

			f-icon{
				margin: auto;
			}

			&.current{
				display: flex;
			}
		}

		.resizer{
			position: relative;
			z-index: 1;
			width: 17px;
			margin-left: auto;
			margin-right: ${e(-17)}px;
			cursor: e-resize;

			&::before{
				content: '';
				position: absolute;
				left: 8px;
				top: 6px;
				bottom: 6px;
				width: 1px;
				background: ${a.toMiddle(20)};
			}
		}

		.scroller{
			flex: 1;
			overflow-y: scroll;
			overflow-x: hidden;
		}

		.body{
			flex: 1;
			overflow-y: scroll;
			overflow-x: hidden;
			position: relative;
			border-bottom: 1px solid ${a.toMiddle(13)};
		}

		.table{
			table-layout: fixed;
			position: absolute;
			width: 100%;
		}

		tr{
			&:hover{
				background: ${i.alpha(.05)};
			}

			&.selected{
				background: ${i.alpha(.1)};
			}

			&:last-child td{
				border-bottom-color: transparent;
			}
		}

		td{
			vertical-align: middle;
			padding: ${e(3)}px ${e(8)}px;
			border-bottom: 1px solid ${a.toMiddle(13)};
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			cursor: default;
		}

		f-checkbox{
			max-width: 100%;
			height: 100%;

			f-icon{
				margin-right: ${e(10)}px;
			}
		}

		.resizing-mask{
			position: fixed;
			z-index: 9999;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			cursor: ew-resize;
		}
		`}getColumns(){return null}onCreated(){this.store.on("dataChange",this.onStoreDataChange,this),this.watchImmediately((()=>this.getColumns()),(t=>{t&&(this.columns=t)}))}onStoreDataChange(){this.repeatDir instanceof o.LiveAsyncRepeatDirective&&this.repeatDir.reload()}render(){return o.html`
			<div class="head" :refElement="head">
				<div class="columns" :refElement="columnContainer">
					${this.renderColumns()}
				</div>
			</div>

			<div class="body">
				<table class="table" :refElement="table">
					<colgroup :refElement="colgroup">
						${this.columns.map((t=>o.html`
							<col :style.text-align=${t.align||""} />
						`))}
					</colgroup>
					${this.renderRows()}
				</table>
			</div>
		`}renderColumns(){return this.columns.map(((t,e)=>{let i=t.name,n=this.orderName===i,r="right"===t.align?"flex-end":"center"===t.align?"center":"";return o.html`
			<div class="column"
				:class.column-ordered=${n}
				@click=${t=>this.doOrdering(t,e)}
			>
				<div class="column-left" :style.justify-content=${r}>
					<div class="column-title">${t.title}</div>
					${t.orderBy?o.html`
						<div class="order" :class.current=${n&&""!==this.orderDirection}>
							<f-icon .type=${this.getOrderDirectionIcon(i)} />
						</div>`:""}
				</div>

				${this.resizable&&e<this.columns.length-1?o.html`
					<div class="resizer" @mousedown=${t=>{var i;return null===(i=this.resizer)||void 0===i?void 0:i.onStartResize(t,e)}} />`:""}
			</div>`}))}renderRows(){return this.store instanceof l.RemoteStore?(0,o.refDirective)((0,o.liveAsyncRepeat)(this.store.getLiveAsyncRepeatDirectiveOptions(),this.renderRow.bind(this),{renderCount:this.renderCount,preRendering:this.preRendering},this.transition),this.refDirective.bind(this)):this.live?(0,o.refDirective)((0,o.liveRepeat)(this.store.getCurrentData(),this.renderRow.bind(this),{renderCount:this.renderCount,preRendering:this.preRendering},this.transition),this.refDirective.bind(this)):(0,o.refDirective)((0,o.repeat)(this.store.getCurrentData(),this.renderRow.bind(this),this.transition),this.refDirective.bind(this))}renderRow(t,e){let i=this.columns.map((i=>{let n=t&&i.render?i.render.call(this,t,e):"";return o.html`<td :style.text-align=${i.align||""}>${n}</td>`}));return o.html`<tr>${i}</tr>`}refDirective(t){this.repeatDir=t,(this.repeatDir instanceof o.LiveRepeatDirective||this.repeatDir instanceof o.LiveAsyncRepeatDirective)&&(this.repeatDir.on("liveDataUpdated",this.onLiveDataUpdated,this),this.repeatDir.on("liveDataRendered",this.onLiveDataRendered,this))}onLiveDataUpdated(t,e,i){this.emit("liveDataUpdated",t,e,i)}onLiveDataRendered(t,e,i){this.emit("liveDataRendered",t,e,i)}getOrderDirectionIcon(t){if(t===this.orderName){if("asc"===this.orderDirection)return"order-asc";if("desc"===this.orderDirection)return"order-desc"}return"order-default"}doOrdering(t,e){if(t.target.closest(this.scopeClassName(".resizer")))return;let i=this.columns[e];if(!i.orderBy)return;let n="",o=i.descFirst,r=i.name;n=r===this.orderName?o?""===this.orderDirection?"desc":"desc"===this.orderDirection?"asc":"":""===this.orderDirection?"asc":"asc"===this.orderDirection?"desc":"":o?"desc":"asc",this.setOrder(r,n)}onReady(){this.resizer=new a.ColumnWidthResizer(this.refElements.head,this.refElements.columnContainer,this.refElements.colgroup,this.columns,this.minColumnWidth,this.scopeClassName("resizing-mask")),this.watch((()=>(0,o.observeGetting)(this,"columns")),(async t=>{var e,i;null===(e=this.resizer)||void 0===e||e.setColumns(t),await(0,o.untilRenderComplete)(),null===(i=this.resizer)||void 0===i||i.updatColumnWidthsPrecisely()})),(0,o.onRenderComplete)((()=>{var t;null===(t=this.resizer)||void 0===t||t.updatColumnWidthsPrecisely()}))}onConnected(){(0,o.onRenderComplete)((()=>{let t=(0,s.watchLayout)(this.el,"size",(()=>{var t;return null===(t=this.resizer)||void 0===t?void 0:t.updatColumnWidthsPrecisely()}));this.once("disconnected",t)}))}setOrder(t,e=""){var i;this.orderName=t,this.orderDirection=e;let n=null===(i=this.columns)||void 0===i?void 0:i.find((e=>e.name===t));n?this.applyOrder(n,e):this.watchOnce((()=>this.columns),(i=>{let n=i.find((e=>e.name===t));n&&this.applyOrder(n,e)}))}clearOrder(){this.orderName=null,this.orderDirection="",this.store.setOrder(null),this.store.sync()}applyOrder(t,e=""){t.orderBy&&""!==e?this.store.setOrder(t.orderBy,e):this.store.setOrder(null),this.store.sync(),this.emit("orderChange",this.orderName,e)}getOrderName(){return this.orderName}getOrderDirection(){return this.orderDirection}getStartIndex(){var t,e;return this.repeatDir instanceof o.RepeatDirective?0:null!==(e=null===(t=this.repeatDir)||void 0===t?void 0:t.getStartIndex())&&void 0!==e?e:0}getEndIndex(){var t;return this.repeatDir instanceof o.RepeatDirective?this.store.getCurrentData().length:null!==(t=this.repeatDir.getEndIndex())&&void 0!==t?t:this.store.getFullData().length}async setStartIndex(t){await this.untilReady(),this.repeatDir instanceof o.LiveRepeatDirective||this.repeatDir instanceof o.LiveAsyncRepeatDirective?this.repeatDir.setStartIndex(t):this.repeatDir.setFirstVisibleIndex(t)}isStartIndexSpecified(){return(this.repeatDir instanceof o.LiveRepeatDirective||this.repeatDir instanceof o.LiveAsyncRepeatDirective)&&this.repeatDir.isStartIndexSpecified()}async makeIndexVisible(t){return await this.untilReady(),this.repeatDir.makeIndexVisible(t)}async setFirstVisibleIndex(t){this.firstVisibleIndexSpecified=!0,await this.untilReady();let e=await this.repeatDir.setFirstVisibleIndex(t);return this.firstVisibleIndexSpecified=!1,e}isFirstVisibleIndexSpecified(){return this.firstVisibleIndexSpecified}getFirstVisibleIndex(){return this.repeatDir instanceof o.LiveRepeatDirective||this.repeatDir instanceof o.LiveAsyncRepeatDirective?this.repeatDir.getFirstVisibleIndex():(0,s.locateFirstVisibleIndex)(this.refElements.table,this.refElements.table.rows)}getRenderedItem(t){return t>=this.getStartIndex()&&t<this.getEndIndex()?this.store instanceof l.RemoteStore?this.store.getImmediateData(t,t+1)[0]:this.store.getCurrentData()[t]:null}getRenderedRow(t){return this.refElements.table.rows[t-this.getStartIndex()]||null}hasState(t){return this.stateCacher.has(t)}cacheState(t,e={}){this.stateCacher.cache(t,e)}restoreState(t){return this.stateCacher.restore(t)}clearState(t){this.stateCacher.clear(t)}};d=n([(0,o.define)("f-table")],d),e.Table=d},6725:()=>{RegExp.escape||Object.defineProperty(RegExp,"escape",{value:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}})},6741:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.appendTo=void 0,e.appendTo=function(t,e){let i=t.firstElementChild;if("string"==typeof e){let i=document.querySelector(e);i&&i.lastElementChild!==t&&i.append(t)}else e&&e.lastElementChild!==t&&e.append(t);return i}},6810:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WatcherGroup=void 0;const n=i(8116);e.WatcherGroup=class{constructor(t){this.watchers=new Set,this.connected=!0,this.type=t}add(t){this.connected?t.connect():t.disconnect(),this.watchers.add(t)}delete(t){this.connected&&t.disconnect(),this.watchers.delete(t)}connect(){if(!this.connected){for(let t of this.watchers)t.connect();this.connected=!0}}disconnect(){if(this.connected){for(let t of this.watchers)t.disconnect();this.connected=!1}}update(){if(this.watchers)for(let t of this.watchers)t.update()}watch(t,e){let i=new n.Watcher(t,e,this.type);return this.add(i),()=>{this.delete(i)}}watchImmediately(t,e){let i=new n.Watcher(t,e,this.type);return e.call(this,i.value,void 0),this.add(i),()=>{this.delete(i)}}watchOnce(t,e){let i=new n.Watcher(t,((t,i)=>{e(t,i),o()}),this.type);this.add(i);let o=()=>{this.delete(i)};return o}watchUntil(t,e){let i,o=new n.Watcher(t,(t=>{t&&(e(t),i())}),this.type);return o.value?(o.disconnect(),e.call(this,o.value),i=()=>{}):(this.add(o),i=()=>{this.delete(o)}),i}}},6833:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;const o=i(1416),r=i(8240),s=i(5499),a=i(6741);let l=class extends o.Component{constructor(){super(...arguments),this.title="",this.opened=!0,this.appendTo="body"}static style(){let{adjustFontSize:t,textColor:e,popupBorderRadius:i,popupShadowBlurRadius:n,popupBackgroundColor:s,popupShadowColor:a,adjust:l}=r.theme;return o.css`
		:host{
			position: fixed;
			display: flex;
			flex-direction: column;
			z-index: 1000;	// Same with popup
			border-radius: ${i}px;
			box-shadow: 0 0 ${n}px ${a};
			background: ${s};
			max-width: 100%;
			max-height: 100%;
			padding: ${l(8)}px ${l(16)}px;
			overflow: hidden;
		}

		.mask{
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
		}

		.header{
			display: flex;
			flex: none;
			height: ${l(34)+1}px;
			font-size: ${t(13)}px;
			padding-bottom: ${l(6)}px;
			border-bottom: 1px solid ${e.alpha(.8)};
			margin-bottom: ${l(8)}px;
		}

		.title{
			flex: 1;
			min-width: 0;
			font-weight: bold;
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}

		.close{
			display: flex;
			width: ${l(28)}px;
			height: ${l(28)}px;
			margin-top: 0;
			margin-right: ${l(-7)}px;
			cursor: pointer;

			&:active{
				transform: translateY(1px);
			}

			f-icon{
				margin: auto;
			}

			svg{
				width: ${l(24)}px;
				height: ${l(24)}px;

				line{
					stroke-width: 0.625 !important;
				}
			}
		}

		@media (max-width: 768px) {
			.close{
				svg{
					width: ${l(28)}px;
					height: ${l(28)}px;

					line{
						stroke-width: 0.54 !important;
					}
				}
			}
		}

		.actions{
			margin-left: ${l(16)}px;

			button{
				margin-left: ${l(8)}px;
			}
		}

		.content{
			flex: 1;
			min-height: 0;
			display: flex;
			flex-direction: column;
			overflow-y: auto;
			margin-right: ${l(-16)}px;
			padding-right: ${l(16)}px;
		}
	`}render(){let t=!this.slots.action;return o.html`
			<template
				tabindex="0"
				${(0,o.show)(this.opened,{...this.getTransition(),onend:this.onTransitionEnd})}
			>
				<div class="mask"
					:refElement="mask"
					${(0,o.show)(this.opened,this.getTransition())}
				/>

				<div class="header">
					<div class="title">${this.title}</div>

					<div class="actions" :show=${this.slots.action}>
						<slot name="action" />
					</div>

					${t?o.html`
						<div class="close" @click=${this.hide}>
							<f-icon .type="close" />
						</div>
					`:""}
				</div>

				<div class="content">
					<slot />
				</div>
			</template>
		`}getTransition(){return{name:"fade",enterAtStart:!0}}onTransitionEnd(t,e){"leave"===t&&e&&(this.el.remove(),this.onTransitionLeaveEnd())}onTransitionLeaveEnd(){}onConnected(){(0,o.untilRenderComplete)().then((()=>{this.refElements.mask&&this.el.previousElementSibling!==this.refElements.mask&&this.el.before(this.refElements.mask),this.align(),(0,o.on)(window,"resize",this.onWindowResize,this);let t=(0,s.watchLayout)(this.el,"size",(()=>this.align()));this.once("disconnected",t)}))}onDisconnected(){this.refElements.mask&&this.refElements.mask.remove(),(0,o.off)(window,"resize",this.onWindowResize,this)}onWindowResize(){this.opened&&this.align()}align(){(0,s.align)(this.el,document.documentElement,"c")}show(){this.opened=!0,this.appendTo&&(0,a.appendTo)(this.el,this.appendTo)}hide(){this.opened=!1}};l=n([(0,o.define)("f-modal")],l),e.Modal=l},6883:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyMap=void 0,e.KeyMap=class{constructor(t){if(!t)throw new Error('"key" parameter must be provided when initializing "KeyMap"!');this.key=t,this.map=new Map}has(t){return this.map.has(t[this.key])}get(t){return this.map.get(t[this.key])}add(t){this.map.set(t[this.key],t)}delete(t){this.map.delete(t[this.key])}clear(){this.map=new Map}}},6917:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"down",code:'<svg viewBox="0 0 15 15"><polygon style="fill:currentColor; stroke:none;" points="7.5,11 3.5,4.4 4.2,4 7.5,9.4 10.8,4 11.5,4.4"/></svg>'}},6949:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setStyleValues=e.setStyleValue=e.getStyleValue=e.getStyleValueAsNumber=void 0;const n=i(9549);function o(t,e){return getComputedStyle(t)[e]}function r(t,e,i){t.style.setProperty(e,(0,n.normativeStyleValue)(e,i))}e.getStyleValueAsNumber=function(t,e){let i=o(t,e);return i&&parseFloat(i)||0},e.getStyleValue=o,e.setStyleValue=r,e.setStyleValues=function(t,e){for(let i of Object.keys(e))r(t,i,e[i])}},7097:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerRange=e.NodeRange=void 0,e.NodeRange=class{constructor(t){this.fragment=null,this.fragment=t;let e=t.firstChild;e&&8!==e.nodeType||(e=document.createComment(""),t.prepend(e)),this.startNode=e,this.endNode=t.lastChild}getCurrentFragment(){return this.fragment}extractToFragment(){let t;return this.fragment instanceof DocumentFragment?t=this.fragment:(t=document.createDocumentFragment(),t.append(...this.getNodes())),this.fragment=null,t}movesOut(){this.fragment=this.extractToFragment()}*getNodes(){let t=this.startNode;for(;t&&(yield t,t!==this.endNode);)t=t.nextSibling}getFirstElement(){let t=this.startNode;for(;t;){if(1===t.nodeType)return t;if(t===this.endNode)break;t=t.nextSibling}return null}before(t){this.startNode.before(t.extractToFragment())}replaceWith(t){this.startNode.before(t.extractToFragment()),this.remove()}remove(){[...this.getNodes()].forEach((t=>{t.remove()}))}},e.ContainerRange=class{constructor(t){this.container=t,this.endNode=t.lastChild}extractToFragment(){let t=document.createDocumentFragment();return t.append(...this.getNodes()),t}getNodes(){let t=[],e=this.container.firstChild;for(;e&&(t.push(e),e!==this.endNode);)e=e.nextSibling;return t}remove(){[...this.getNodes()].forEach((t=>{t.remove()}))}}},7146:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.webAnimateTo=e.webAnimateFrom=e.webAnimate=e.clearTransition=e.isPlayingTransition=e.Transition=e.defineTransion=e.getCSSEasingValue=void 0;const n=i(3728),o=i(6171),r="ease-out-quad",s=new WeakMap,a=new Map,l={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-quad":[.55,.085,.68,.53],"ease-in-cubic":[.55,.055,.675,.19],"ease-in-quart":[.895,.03,.685,.22],"ease-in-quint":[.755,.05,.855,.06],"ease-in-sine":[.47,0,.745,.715],"ease-in-expo":[.95,.05,.795,.035],"ease-in-circ":[.6,.04,.98,.335],"ease-in-back":[.6,-.28,.735,.045],"ease-out-quad":[.25,.46,.45,.94],"ease-out-cubic":[.215,.61,.355,1],"ease-out-quart":[.165,.84,.44,1],"ease-out-quint":[.23,1,.32,1],"ease-out-sine":[.39,.575,.565,1],"ease-out-expo":[.19,1,.22,1],"ease-out-circ":[.075,.82,.165,1],"ease-out-back":[.175,.885,.32,1.275],"ease-in-out-quad":[.455,.03,.515,.955],"ease-in-out-cubic":[.645,.045,.355,1],"ease-in-out-quart":[.77,0,.175,1],"ease-in-out-quint":[.86,0,.07,1],"ease-in-out-sine":[.445,.05,.55,.95],"ease-in-out-expo":[1,0,0,1],"ease-in-out-circ":[.785,.135,.15,.86],"ease-in-out-back":[.68,-.55,.265,1.55]},h={width:!0,height:!0,opacity:!0,margin:!0,marginLeft:!0,marginRght:!0,marginTop:!0,marginBottom:!0,padding:!0,paddingLeft:!0,paddingRght:!0,paddingTop:!0,paddingBottom:!0,borderWidth:!0,borderLeftWidth:!0,borderRightWidth:!0,borderTopWidth:!0,borderBottomWidth:!0,transform:!0};function d(t){return l.hasOwnProperty(t)?"cubic-bezier("+l[t].join(", ")+")":"linear"}function c(t){s.has(t)&&s.get(t).clean()}e.getCSSEasingValue=d,e.defineTransion=function(t,e){a.has(t)&&console.warn(`You are trying to overwrite transition definition "${t}"`),h.hasOwnProperty(t)&&console.warn(`"${t}" is an available CSS property, you may confuse them when using short transition`),a.set(t,e)},e.Transition=class{constructor(t,e){this.cleaner=null,this.el=t,this.options=e,c(this.el),s.set(this.el,this)}enter(){return new Promise((t=>{this.clean();let e=this.options.direction;if("enter"!==e&&"both"!==e&&void 0!==e)return void t(!0);let i=e=>{s.delete(this.el),t(e)};this.options.properties?this.cssEnter(i):this.options.name&&a.has(this.options.name)?this.jsEnter(i):this.classEnterOrLeave("enter",i)}))}leave(){return new Promise((t=>{this.clean();let e=this.el,i=this.options.direction;if("leave"!==i&&"both"!==i&&void 0!==i)return void t(!0);e.style.pointerEvents="none";let n=i=>{s.delete(this.el),e.style.pointerEvents="",t(i)};this.options.properties?this.cssLeave(n):this.options.name&&a.has(this.options.name)?this.jsLeave(n):this.classEnterOrLeave("leave",n)}))}cssEnter(t){let e={};for(let t of this.options.properties)e[t]="transform"===t?"none":"0";let{promise:i,cancel:n}=m(this.el,e,this.options.duration||200,this.options.easing||r);i.then(t),this.cleaner=n}cssLeave(t){let e={};for(let t of this.options.properties)e[t]="transform"===t?"none":"0";let{promise:i,cancel:n}=g(this.el,e,this.options.duration||200,this.options.easing||r);i.then(t),this.cleaner=n}jsEnter(t){let e=this.getJSTransitionInstance();e.enter?(e.enter.then(t),this.cleaner=e.clean.bind(e)):t(!0)}jsLeave(t){let e=this.getJSTransitionInstance();e.leave?(e.leave.then(t),this.cleaner=e.clean.bind(e)):t(!0)}getJSTransitionInstance(){return new(a.get(this.options.name))(this.el,{duration:this.options.duration||200,easing:this.options.easing||r})}async classEnterOrLeave(t,e){let i=this.options.name+"-"+t,n=this.options.duration,r=this.options.easing,s=!1,a=this.el;n&&(a.style.transitionDuration=String(n/1e3)+"s"),r&&(a.style.transitionTimingFunction=d(r)),a.style.transition="none",a.classList.add(i,i+"-from"),this.cleaner=()=>{s=!0},(0,o.onRenderComplete)((()=>{requestAnimationFrame((()=>{s?a.classList.remove(i,i+"-from"):(n&&(a.style.transitionDuration=""),r&&(a.style.transitionTimingFunction=""),a.style.transition="",a.classList.remove(i+"-from"),a.classList.add(i+"-to"),this.onceTransitionEnd((t=>{a.classList.remove(i,i+"-to"),e(t)})))}))}))}onceTransitionEnd(t){let e=this.el,i=getComputedStyle(e),o=parseFloat(i.transitionDuration)||0,r=parseFloat(i.animationDuration)||0,s=o>0?"transitionend":"animationend",a=()=>{clearTimeout(l),t(!0)},l=setTimeout((()=>{(0,n.off)(e,s,a),t(!0)}),1e3*(o||r)+50);(0,n.once)(e,s,a),this.cleaner=()=>{clearTimeout(l),(0,n.off)(e,s,a),t(!1)}}clean(){this.cleaner&&(this.cleaner(),this.cleaner=null)}},e.isPlayingTransition=function(t){return s.has(t)},e.clearTransition=c;const u={transform:"none"};function p(t,e,i,n,o){if(!t.animate)return{promise:Promise.resolve(!1),cancel:()=>{}};let r=d(o),s=t.animate([e,i],{easing:r,duration:n});return{promise:new Promise((t=>{s.addEventListener("finish",(()=>{t(!0)}),!1),s.addEventListener("cancel",(()=>{t(!1)}),!1)})),cancel:function(){s.cancel()}}}function m(t,e,i,n){let o={},r=getComputedStyle(t);for(let t in e)o[t]=r[t]||u[t]||"0";return p(t,e,o,i,n)}function g(t,e,i,n){let o={},r=getComputedStyle(t);for(let t in e)o[t]=r[t]||u[t]||"0";return p(t,o,e,i,n)}e.webAnimate=p,e.webAnimateFrom=m,e.webAnimateTo=g},7234:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TableStateCacher=void 0;const n=i(5499),o=i(9051),r={filter:!1,order:!1,visibleIndex:!1,data:!1,store:!1,customized:{}};e.TableStateCacher=class{constructor(t){this.storagePrefix="table_state_",this.cacheMap=new Map,this.table=t}has(t){return this.cacheMap.has(t)||n.storage.get(this.storagePrefix+t)}cache(t,e){let i=this.getState(e);if(e.toStorage)try{n.storage.set(this.storagePrefix+t,i)}catch(t){console.error("Can't serialize table cache data!",i,t)}this.cacheMap.set(t,i)}getState(t){let e=this.table,i=this.table.store,n={};return(t={...r,...t}).filter&&(n.storeFilter=i.getFilter()),t.order&&(n.orderName=e.getOrderName(),n.orderDirection=e.getOrderDirection()),t.visibleIndex&&(n.visibleIndex=e.getFirstVisibleIndex()),t.data&&(n.data=i instanceof o.RemoteStore?i.getCache():i.getFullData()),t.store&&(n.store=i),n.customized=t.customized,n}restore(t){let e=this.table,i=this.table.store,r=this.cacheMap.get(t);if(r||(r=n.storage.get(this.storagePrefix+t),r))return void 0!==r.storeFilter&&i.setFilter(r.storeFilter),void 0!==r.orderName&&void 0!==r.orderDirection&&e.setOrder(r.orderName,r.orderDirection),void 0!==r.visibleIndex&&e.setFirstVisibleIndex(r.visibleIndex),void 0!==r.data&&(i instanceof o.RemoteStore?i.setCache(r.data):i.setFullData(r.data)),r.store&&(e.store=i),i.sync(),this.clear(t),r.customized}clear(t){this.cacheMap.delete(t),n.storage.delete(this.storagePrefix+t)}}},7340:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sleep=void 0,e.sleep=function(t=0){return new Promise((e=>setTimeout(e,t)))}},7388:(t,e)=>{function i(t,e){let i=n(t,e);return-1===i?void 0:t[i]}function n(t,e){if(0===t.length)return-1;let i=e(t[0]);if(0===i)return 0;if(i<0)return-1;if(1===t.length)return-1;if(i=e(t[t.length-1]),0===i)return t.length-1;if(i>0)return-1;let n=0,o=t.length-1;for(;o-n>1;){let i=Math.floor((o+n)/2),r=e(t[i]);if(0===r)return i;r<0?o=i:n=i}return-1}function o(t,e){if(0===t.length)return 0;if(e(t[0])<=0)return 0;if(e(t[t.length-1])>0)return t.length;{let i=0,n=t.length-1;for(;i+1<n;){let o=Math.floor((n+i)/2),r=e(t[o]);if(0===r)return o;r<0?n=o:i=o}return n}}Object.defineProperty(e,"__esModule",{value:!0}),e.maxOf=e.minOf=e.maxIndex=e.minIndex=e.max=e.min=e.avg=e.sum=e.count=e.mapToObject=e.aggregate=e.groupBy=e.indexBy=e.orderBy=e.Order=e.binaryFindIndexToInsert=e.binaryFindIndex=e.binaryFind=e.difference=e.intersect=e.union=e.unique=e.removeWhere=e.removeFirst=e.remove=e.add=e.repeatForTimes=void 0,e.repeatForTimes=function(t,e){let i=[];for(let n=0;n<e;n++)i.push(t);return i},e.add=function(t,...e){for(let i of e)t.includes(i)||t.push(i);return t},e.remove=function(t,...e){let i=[];for(let n of e){let e=t.indexOf(n);e>-1&&i.push(...t.splice(e,1))}return i},e.removeFirst=function(t,e){for(let i=t.length-1;i>=0;i--)if(e(t[i],i))return t.splice(i,1)[0]},e.removeWhere=function(t,e){let i=[];for(let n=0;n<t.length;n++)e(t[n],n)&&i.push(t.splice(n--,1)[0]);return i},e.unique=function(t){return[...new Set(t)]},e.union=function(...t){let e=new Set;for(let i of t)for(let t of i)e.add(t);return[...e]},e.intersect=function(...t){let e=[];if(!t.length)return e;let i=new Map;for(let e of t[0])i.set(e,1);for(let e of t.slice(1))for(let t of e)i.has(t)&&i.set(t,i.get(t)+1);for(let[n,o]of i.entries())o===t.length&&e.push(n);return e},e.difference=function(t,...e){let i=new Set(t);for(let t of e)for(let e of t)i.delete(e);return[...i]},e.binaryFind=i,e.binaryFindIndex=n,e.binaryFindIndexToInsert=o;class r{constructor(...t){this.orders=[];for(let e of t)if(["string","number","function"].includes(typeof e))this.orders.push([e,1]);else{if(!Array.isArray(e)||!["string","number","function"].includes(typeof e[0]))throw new TypeError(JSON.stringify(t)+" doesn't specify any valid key or order.");this.orders.push([e[0],"asc"===e[1]?1:"desc"===e[1]?-1:e[1]])}}sortArray(t,e=1){let i="asc"===e?1:"desc"===e?-1:e;t.sort(((t,e)=>this.compare(t,e)*i))}compare(t,e){for(let[i,n]of this.orders){let o,r;if("function"==typeof i?(o=i(t),r=i(e)):(o=t[i],r=e[i]),o<r)return-n;if(o>r)return n;if(o!==r){let t=null==o,e=null==r;if(t&&!e)return-n;if(!t&&e)return n}}return 0}binaryFind(t,e){return i(t,(t=>this.compare(e,t)))}binaryFindIndex(t,e){return n(t,(t=>this.compare(e,t)))}binaryInsert(t,e){let i=o(t,(t=>this.compare(e,t)));return t.splice(i,0,e),t}}function s(t,e){let i=new Map,n=0;for(let o of t){let t,r;"function"==typeof e?[t,r]=e(o,n++):(t=o[e],r=o);let s=i.get(t);s||(s=[],i.set(t,s)),s.push(r)}return i}function a(t){return t.reduce(((t,e)=>t+e),0)}function l(t,e){let i;i=e?t.map(e):t;let n=-1,o=1/0;for(let t=0;t<i.length;t++)i[t]<o&&(n=t,o=i[t]);return n}function h(t,e){let i;i=e?t.map(e):t;let n=-1,o=-1/0;for(let t=0;t<i.length;t++)i[t]>o&&(n=t,o=i[t]);return n}e.Order=r,e.orderBy=function(t,e,...i){return(e=e instanceof r?e:new r(e,...i)).sortArray(t),t},e.indexBy=function(t,e){let i=new Map;if("function"==typeof e){let n=0;for(let o of t){let[t,r]=e(o,n++);i.set(t,r)}}else for(let n of t){let t=n[e];i.set(t,n)}return i},e.groupBy=s,e.aggregate=function(t,e,i){let n,o=new Map;n=s(t,"function"==typeof e?(t,i)=>[e(t,i),t]:e);for(let[t,e]of n.entries())o.set(t,i(e,t));return o},e.mapToObject=function(t){let e={};for(let[i,n]of t.entries())e[i]=n;return e},e.count=function(t){return t.length},e.sum=a,e.avg=function(t){return 0===t.length?0:a(t)/t.length},e.min=function(t){return Math.min(...t)},e.max=function(t){return Math.max(...t)},e.minIndex=l,e.maxIndex=h,e.minOf=function(t,e){return t[l(t,e)]||null},e.maxOf=function(t,e){return t[h(t,e)]||null}},7800:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getEditRecord=e.EditType=void 0;const n=i(4305);var o;!function(t){t[t.Skip=0]="Skip",t[t.Leave=1]="Leave",t[t.Move=2]="Move",t[t.Modify=3]="Modify",t[t.MoveModify=4]="MoveModify",t[t.Insert=5]="Insert",t[t.Delete=6]="Delete"}(o||(e.EditType=o={})),e.getEditRecord=function(t,e,i){return 0===e.length?t.map(((t,e)=>({type:o.Delete,nextOldIndex:e,fromIndex:e,toIndex:-1}))):0===t.length?e.map(((t,e)=>({type:o.Insert,nextOldIndex:0,fromIndex:-1,toIndex:e}))):function(t,e,i){var s;let{indexMap:a,restOldIndices:l}=function(t,e){let i=new Map(e.map(((t,e)=>[t,e]))),o=new n.TwoWayMap,r=[];for(let e=0;e<t.length;e++){let n=t[e];i.has(n)?(o.add(e,i.get(n)),i.delete(n)):r.push(e)}return{indexMap:o,restOldIndices:r}}(t,e),h=[];for(let t of a.getAllLeft()){let e=a.getFromLeft(t);h.push(e)}let d=new r(function(t){let e=0,i=[];for(let n=1;n<t.length;n++)t[n]<t[n-1]&&(i.push([e,n]),e=n);e<t.length&&i.push([e,t.length]);let n=[],o=-1;for(let e=0;e<i.length;e++){let[r,s]=i[e];t[r]>o?(n=[...n,...t.slice(r,s)],o=n[n.length-1]):s-r>n.length&&(n=t.slice(r,s),o=n[n.length-1])}return n}(h)),c=new r(l),u=[],p=0,m=0,g=d.getNext(),f=null!==(s=a.getFromRight(g))&&void 0!==s?s:-1,y=-1;for(;p<t.length||m<e.length;){let n,r=p,s=-1,l=m;m===e.length?(n=o.Skip,p++):i&&m!==g&&!c.isEnded()&&c.peekNext()>y&&(c.peekNext()<f||-1===f)?(n=o.Modify,s=c.getNext(),p++,m++):p!==f&&p<t.length?(n=o.Skip,p++):m===g?(n=o.Leave,s=p,p++,m++,g=d.isEnded()?-1:d.getNext(),y=f,f=-1===g?-1:a.getFromRight(g)):a.hasRight(m)?(n=o.Move,s=a.getFromRight(m),m++):i&&!c.isEnded()?(n=o.MoveModify,s=c.getNext(),m++):(n=o.Insert,m++),n!==o.Skip&&u.push({type:n,nextOldIndex:r,fromIndex:s,toIndex:l})}for(;!c.isEnded();){let t=c.getNext();u.push({type:o.Delete,nextOldIndex:t,fromIndex:t,toIndex:-1})}return u}(t,e,i)};class r{constructor(t){this.offset=0,this.items=t}isEnded(){return this.offset>=this.items.length}getNext(){var t;return null!==(t=this.items[this.offset++])&&void 0!==t?t:-1}peekNext(){var t;return null!==(t=this.items[this.offset])&&void 0!==t?t:-1}}},7826:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"success",code:'<svg viewBox="0 0 21 21"><circle style="fill:none;stroke:currentColor;" cx="10.5" cy="10.5" r="10"/><polyline style="fill:none;stroke:currentColor;" points="16.2,6.4 9.3,14.6 6.1,10.8"/></svg>'}},7831:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.SlotBinding=void 0;const o=i(9856),r=i(356);let s=e.SlotBinding=class{constructor(t,e){this.el=t,this.context=e}update(t){(0,o.getClosestComponentEarly)(this.el,(e=>{(e=e||this.context)&&this.updateComSlot(t,e)}))}updateComSlot(t,e){e.slots[t]||(e.slots[t]=[]),e.slots[t].push(this.el)}remove(){}};e.SlotBinding=s=n([(0,r.defineBinding)("slot")],s)},7886:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PopupState=void 0;const n=i(5499);class o extends n.EventEmitter{constructor(){super(...arguments),this.opened=!1,this.willShowSoon=!1,this.willHideSoon=!1,this.showTimeout=null,this.hideTimeout=null}willShow(t){return!this.opened&&!this.willShowSoon&&(t>0?(this.showTimeout=new n.Timeout((()=>{this.showTimeout=null,this.show()}),t),this.willShowSoon=!0):this.show(),!0)}willNotShow(){var t;null===(t=this.showTimeout)||void 0===t||t.cancel(),this.willShowSoon=!1}willHide(t){return!(!this.opened||this.willHideSoon||(t>0?(this.hideTimeout=new n.Timeout((()=>{this.hide()}),t),this.willHideSoon=!0):this.hide(),0))}willNotHide(){var t;null===(t=this.hideTimeout)||void 0===t||t.cancel(),this.hideTimeout=null,this.willHideSoon=!1}show(){this.willNotShow(),this.willNotHide(),this.opened||(this.opened=!0,this.emit("do-show"))}hide(){this.willNotShow(),this.willNotHide(),this.opened&&(this.opened=!1,this.emit("do-hide"))}clean(){this.willNotShow(),this.willNotHide(),this.opened=!1}}e.PopupState=o},7916:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;const n=i(5499),o=i(6883);class r extends n.EventEmitter{constructor(t={}){super(),this.key=null,this.dataMap=null,this.selectedMap=null,this.lastTouchedItem=null,this.filter=null,this.order=null,this.orderDirection="",this.fullData=[],this.currentData=[],this.selected=[],this.willUpdateCurrentData=!1,t.key&&(this.key=t.key,this.dataMap=new o.KeyMap(t.key),this.selectedMap=new o.KeyMap(t.key)),this.filter=t.filter||null,this.order=t.order||null,t.data&&this.addItems(t.data)}addItems(t,e=!1){if(t.length>0){if(this.dataMap)for(let e of t)this.dataMap.add(e);e?this.fullData.unshift(...t):this.fullData.push(...t);let i=this.filter?t.filter(this.filter):t;this.addItemsToCurrentData(i,e)}}addItemsToCurrentData(t,e=!1){if(this.order)if(t.length>1){let e=[...this.currentData,...t];this.order.sortArray(e),this.currentData=e}else for(let e of t)this.order.binaryInsert(this.currentData,e);else e?this.currentData.unshift(...t):this.currentData.push(...t)}getFullData(){return this.fullData}getFullDataCount(){return this.fullData.length}setFullData(t){if(this.fullData=t,this.dataMap){this.dataMap.clear();for(let e of t)this.dataMap.add(e)}this.updateCurrentDataLater()}getCurrentData(){return this.currentData}getCurrentDataCount(){return this.currentData.length}setOrder(t,e=""){this.order=t instanceof n.Order?t:null===t?null:new n.Order(t),this.orderDirection=e,this.updateCurrentDataLater()}getOrder(){return{order:this.order,orderDirection:this.orderDirection}}setFilter(t){this.filter=t,this.deselectAll(),this.updateCurrentDataLater()}getFilter(){return this.filter}updateCurrentDataLater(){this.willUpdateCurrentData||(this.willUpdateCurrentData=!0,Promise.resolve().then((()=>{this.sync()})))}updateCurrentDataImmediately(){let t=this.filter?this.fullData.filter(this.filter):[...this.fullData];this.order&&this.orderDirection&&this.order.sortArray(t,this.orderDirection),this.currentData=t}sync(){this.willUpdateCurrentData&&(this.updateCurrentDataImmediately(),this.emit("dataChange"),this.willUpdateCurrentData=!1)}add(...t){this.remove(...t),this.addItems(t),this.emit("dataChange")}addToStart(...t){this.remove(...t),this.addItems(t,!0),this.emit("dataChange")}push(...t){this.addItems(t),this.emit("dataChange")}unshift(...t){this.addItems(t,!0),this.emit("dataChange")}insert(t,...e){if(e.length>0){if(this.fullData.splice(t,0,...e),this.dataMap)for(let t of e)this.dataMap.add(t);this.order?this.addItemsToCurrentData(this.filter?e.filter(this.filter):e):this.updateCurrentDataImmediately()}this.emit("dataChange")}has(t){return this.dataMap?this.dataMap.has(t):this.fullData.includes(t)}hasCurrent(t){return!(!this.has(t)||this.filter&&!this.filter(t))}get(t){return this.dataMap?this.dataMap.get(t):t}remove(...t){let e=new Set;if(this.dataMap)for(let i of t)this.dataMap.has(i)&&(e.add(this.dataMap.get(i)),this.dataMap.delete(i));else for(let i of t)this.fullData.includes(i)&&e.add(i);return e.size>0&&(this.fullData=this.fullData.filter((t=>!e.has(t))),this.dataMap?this.currentData=this.currentData.filter((t=>this.dataMap.has(t))):this.currentData=this.currentData.filter((t=>!e.has(t))),this.deselect(...e),this.emit("dataChange")),[...e]}getSelected(){return this.selected}setSelected(t){this.selected=t}isSelected(t){return this.selectedMap?this.selectedMap.has(t):this.selected.includes(t)}isPartlySelected(){let t=this.selected.length;return t>0&&t<this.currentData.length}isSelectedAll(){let t=this.selected.length;return t>0&&t===this.currentData.length}getSelectedCount(){return this.selected.length}select(...t){if(this.selectedMap)for(let e of t)this.selectedMap.has(e)||(this.selected.push(e),this.selectedMap.add(e));else for(let e of t)this.selected.includes(e)||this.selected.push(e);this.lastTouchedItem=t[0]}deselect(...t){if(t===this.selected)this.deselectAll();else{let e=new Set;if(this.selectedMap)for(let i of t)this.selectedMap.has(i)&&(e.add(this.selectedMap.get(i)),this.selectedMap.delete(i));else for(let i of t)this.selected.includes(i)&&e.add(i);e.size>0&&(this.selected=this.selected.filter((t=>!e.has(t))))}this.lastTouchedItem=t[0]}toggleSelect(t){this.isSelected(t)?this.deselect(t):this.select(t),this.lastTouchedItem=t}selectByKeyEvent(t,e){e.shiftKey?this.shiftSelect(t):this.toggleSelect(t)}shiftSelect(t){let e=Math.max(this.lastTouchedItem?this.getFullIndexOf(this.lastTouchedItem):0,0),i=this.getFullIndexOf(t);i>=0&&(e>i&&([e,i]=[i,e]),i+=1,this.isSelected(t)?this.deselect(...this.currentData.slice(e,i)):this.select(...this.currentData.slice(e,i)))}getFullIndexOf(t){if(this.dataMap&&!this.dataMap.has(t))return-1;if(this.key){let e=t[this.key];return this.fullData.findIndex((t=>t[this.key]===e))}return this.fullData.indexOf(this.get(t))}getCurrentIndexOf(t){if(this.dataMap&&!this.dataMap.has(t))return-1;if(this.key){let e=t[this.key];return this.currentData.findIndex((t=>t[this.key]===e))}return this.currentData.indexOf(this.get(t))}selectAll(){this.select(...this.currentData)}deselectAll(){this.selected=[],this.selectedMap&&this.selectedMap.clear()}toggleSelectAll(){this.isSelectedAll()?this.deselectAll():this.selectAll()}clear(){this.fullData=[],this.currentData=[],this.deselectAll(),this.dataMap&&this.dataMap.clear(),this.emit("dataChange")}}e.Store=r},7975:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dropdown=void 0;const n=i(1416),o=i(8240),r=i(8708);class s extends n.Component{constructor(){super(...arguments),this.popupBinding=null,this.opened=!1,this.trigger="click",this.triangle=!0,this.alignPosition="b",this.alignMargin=3,this.transition={name:"fade"},this.showDelay=100,this.hideDelay=100}static style(){let{mainColor:t}=o.theme;return n.css`
		:host{
			display: inline-flex;
		}

		.opened{
			color: ${t};
		}

		.down-icon{
			margin-right: 6px;
		}

		.popup{
			padding: 5px 0;
		}

		.list{
			overflow-y: auto;
			max-height: 100%;
		}
		`}render(){let{trigger:t,triangle:e,alignPosition:i,alignMargin:o,transition:s,showDelay:a,hideDelay:l}=this,h=(0,n.refBinding)((0,r.popup)(this.renderPopup.bind(this),{trigger:t,triangle:e,alignPosition:i,alignMargin:o,transition:s,showDelay:a,hideDelay:l}),this.refBinding.bind(this));return n.html`
			<template :class.opened=${this.opened} ${h}>
				<slot />
				<f-icon class="down-icon" .type="down" />
			</template>
		`}renderPopup(){return n.html`
			<f-popup
				class="popup"
				.triangle=${this.triangle}
			/>
		`}refBinding(t){this.popupBinding=t,this.popupBinding.on("openedStateChange",this.setOpened,this),this.popupBinding.on("willAlign",this.onWillAlign,this)}setOpened(t){this.opened=t,t&&this.onPopupOpened()}onPopupOpened(){}onWillAlign(){}showPopup(){this.popupBinding&&this.popupBinding.showPopupLater()}hidePopup(){this.popupBinding&&this.popupBinding.hidePopupLater()}}e.Dropdown=s},8038:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.deepEqual=e.deepClone=e.assignIf=e.assign=void 0,e.assign=function(t,e,i=Object.keys(e)){for(let n of i){let i=e[n];void 0!==i&&(t[n]=i)}return t},e.assignIf=function(t,e,i=Object.keys(e)){for(let n of i){let i=e[n];void 0!==i&&void 0===t[n]&&(t[n]=i)}return t},e.deepClone=function t(e,i=10){if("object"!=typeof e||!e||0===i)return e;if(Array.isArray(e))return e.map((e=>"object"==typeof e&&e?t(e,i-1):e));{let n={};for(let o of Object.keys(e)){let r=e[o];n[o]=t(r,i-1)}return n}},e.deepEqual=function t(e,i,n=10){if(e===i)return!0;if(0===n)return!1;if("object"!=typeof e||"object"!=typeof i||!e||!i)return!1;if(Array.isArray(e)&&Array.isArray(i))return e.length===i.length&&e.every(((e,o)=>t(e,i[o],n-1)));{let o=Object.keys(e),r=Object.keys(i);if(o.length!==r.length)return!1;for(let r of o){if(!i.hasOwnProperty(r))return!1;if(!t(e[r],i[r],n-1))return!1}return!0}}},8109:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"info",code:'<svg viewBox="0 0 21 21"><rect style="fill:currentColor; stroke:none;" x="9.5" y="4" width="2" height="2"/><polygon style="fill:currentColor; stroke:none;" points="11.5,9 11.5,8 9.5,8 8.5,8 8.5,9 9.5,9 9.5,16 8.5,16 8.5,17 9.5,17 11.5,17 12.5,17 12.5,16 11.5,16"/><circle style="fill:none;stroke:currentColor;" cx="10.5" cy="10.5" r="10"/></svg>'}},8116:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyWatcher=e.Watcher=void 0;const n=i(2878),o=i(67),r=i(8894);class s{constructor(t,e,i){this.connected=!0,this.fn=t,this.callback=e,this.type=i,this.value=this.getNewValue()}getNewValue(){(0,n.startUpdating)(this);let t=this.fn.call(null);return(0,n.endUpdating)(this),t}update(){this.connected&&(0,o.enqueueUpdatableInOrder)(this,this.type,r.QueueUpdateOrder.Watcher)}__updateImmediately(){if(!this.connected)return;let t=this.getNewValue();if(t!==this.value||"object"==typeof t){let e=this.value;this.callback.call(null,this.value=t,e)}}toString(){return this.fn.toString()}connect(){this.connected||(this.connected=!0,this.update())}disconnect(){this.connected&&(this.connected=!1,(0,n.clearDependenciesOf)(this))}}e.Watcher=s,e.LazyWatcher=class extends s{update(){this.connected&&(0,o.enqueueUpdatableInOrder)(this,this.type,r.QueueUpdateOrder.Otherwise)}}},8129:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"error",code:'<svg viewBox="0 0 21 21"><circle style="fill:none;stroke:currentColor;" cx="10.5" cy="10.5" r="10"/><line style="fill:none;stroke:currentColor;" x1="14.4" y1="6.6" x2="6.6" y2="14.4"/><line style="fill:none;stroke:currentColor;" x1="14.4" y1="14.4" x2="6.6" y2="6.6"/></svg>'}},8231:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getClosestComponentInCallback=e.getClosestComponentOfType=e.getComponentAsync=e.getComponentInCallback=e.getComponent=e.setElementComponentMap=void 0;const n=i(967),o=new WeakMap;function r(t){return o.get(t)||null}function s(t,e){if(t.localName.includes("-")){let i=o.get(t);i?e(i):(0,n.onComponentCreatedAt)(t,e)}else e(null)}e.setElementComponentMap=function(t,e){o.set(t,e)},e.getComponent=r,e.getComponentInCallback=s,e.getComponentAsync=function(t){if(t.localName.includes("-")){let e=o.get(t);return e?Promise.resolve(e):new Promise((e=>{(0,n.onComponentCreatedAt)(t,e)}))}return Promise.resolve(null)},e.getClosestComponentOfType=function(t,e){let i=t;for(;i&&i instanceof HTMLElement;){if(i.localName.includes("-")){let t=r(i);if(t instanceof e)return t}i=i.parentElement}return null},e.getClosestComponentInCallback=function(t,e){let i=t;for(;i&&i instanceof HTMLElement;){if(i.localName.includes("-"))return void s(i,e);i=i.parentElement}e(null)}},8240:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.theme=e.Theme=void 0;const n=i(1416),o=i(5499),r=i(8854);class s{constructor(){this.themeMap=new Map,this.willUpdate=!1,this.mode="light",this.options={...a,...l}}defineTheme(t,e){this.themeMap.set(t,e)}getThemeDrakOrLightMode(t){if(t.backgroundColor){let[e,i,n]=new r.Color(t.backgroundColor).getRGBA();if((0,o.avg)([e,i,n])<.5)return"dark"}else if(t.textColor){let[e,i,n]=new r.Color(t.textColor).getRGBA();if((0,o.avg)([e,i,n])>.5)return"dark"}return"light"}assignTheme(...t){for(let e of t){if(!this.themeMap.has(e))throw new Error(`"${e}" is not a defined theme`);Object.assign(this.options,this.themeMap.get(e))}this.mode=this.getThemeDrakOrLightMode(this.options),this.update()}set(t,e){this.options[t]=e,this.update()}async update(){this.willUpdate||(this.willUpdate=!0,await Promise.resolve(),(0,n.updateAllComponents)(),(0,n.updateAllStyles)(),this.willUpdate=!1)}getOption(t){return this.options[t]}get adjustFontSize(){return t=>Math.max(Math.round(t*this.fontSize/l.fontSize),11)}get adjust(){return t=>Math.round(t*this.lineHeight/l.lineHeight)}get mainColor(){return new r.Color(this.getOption("mainColor"))}get backgroundColor(){return new r.Color(this.getOption("backgroundColor"))}get fieldBackgroundColor(){return new r.Color(this.getOption("fieldBackgroundColor"))}get textColor(){return new r.Color(this.getOption("textColor"))}get successColor(){return new r.Color(this.getOption("successColor"))}get errorColor(){return new r.Color(this.getOption("errorColor"))}get warningColor(){return new r.Color(this.getOption("warningColor"))}get infoColor(){return new r.Color(this.getOption("infoColor"))}get borderColor(){return new r.Color(this.getOption("borderColor"))}get borderRadius(){return this.getOption("borderRadius")}get popupBackgroundColor(){return new r.Color(this.getOption("popupBackgroundColor"))}get popupBorderRadius(){return this.getOption("popupBorderRadius")}get popupShadowBlurRadius(){return this.getOption("popupShadowBlurRadius")}get popupShadowColor(){return new r.Color(this.getOption("popupShadowColor"))}get focusBlurRadius(){return this.getOption("focusBlurRadius")}get fontSize(){return this.getOption("fontSize")}get lineHeight(){return this.getOption("lineHeight")}}e.Theme=s;const a={mainColor:"#3a6cf6",backgroundColor:"#fff",fieldBackgroundColor:"#e2e2e2",textColor:"#000",infoColor:"#3369fa",successColor:"#29bc04",errorColor:"#e10000",warningColor:"#f3b907",borderColor:"#9b9b9b",popupBackgroundColor:"#fff",popupShadowColor:"rgba(0, 0, 0, 0.4)"},l={borderRadius:4,popupBorderRadius:4,popupShadowBlurRadius:6,focusBlurRadius:6,fontSize:14,lineHeight:28};e.theme=new s,e.theme.defineTheme("light",a),e.theme.defineTheme("dark",{mainColor:"#3a6cf6",backgroundColor:"#333",fieldBackgroundColor:"#414141",textColor:"#eee",borderColor:"#888",popupBackgroundColor:"#333",popupShadowColor:"rgba(0, 0, 0, 0.6)"}),e.theme.defineTheme("small",{fontSize:13,lineHeight:24}),e.theme.defineTheme("medium",l),e.theme.defineTheme("large",{fontSize:16,lineHeight:32}),e.theme.defineTheme("touch",{fontSize:18,lineHeight:46})},8248:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenu=void 0;const o=i(1416),r=i(8240),s=i(9782);let a=class extends s.Popup{constructor(){super(...arguments),this.triangle=!1}static style(){let{adjust:t}=r.theme;return o.css`
		${super.style()}
		:host{
			position: fixed;
			border-radius: 0;
			
			.option__f-list{
				padding: ${t(2)}px ${t(8)}px;
			}

			f-list{
				border-bottom: none;
			}
		}
		`.extends(super.style())}onReady(){super.onReady(),(0,o.on)(this.el,"mousedown.stop",(()=>{}),this)}};a=n([(0,o.define)("f-contextmenu")],a),e.ContextMenu=a},8259:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Radio=e.RadioGroup=void 0;const o=i(1416),r=i(8240);let s=class extends o.Component{constructor(){super(...arguments),this.radios=[],this.value=null}register(t){this.radios.push(t),t.on("change",this.onRadioChange.bind(this,t))}onRadioChange(t){for(let e of this.radios)e!==t&&(e.checked=!1);this.value=t.value,this.emit("change",this.value)}};s=n([(0,o.define)("f-radiogroup")],s),e.RadioGroup=s;let a=class extends o.Component{constructor(){super(...arguments),this.radioGroup=null,this.checked=!1,this.value=null}static style(){let{mainColor:t,adjust:e,focusBlurRadius:i}=r.theme;return o.css`
		:host{
			display: inline-flex;
			vertical-align: top;
			align-items: center;
			cursor: pointer;

			&:hover{
				color: ${t};
			}

			&:focus{
				color: ${t};

				.icon{
					box-shadow: 0 0 ${i}px ${t};
				}
			}
		}

		.icon{
			position: relative;
			top: -2px;
			border-radius: 50%;
			margin-right: ${e(6)}px;
		}

		.checked{
			color: ${t};
		}
	
		.label{
			flex: 1;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}
		`}onCreated(){let t=(0,o.getClosestComponentOfType)(this.el,s);t&&(this.radioGroup=t,this.checked=this.radioGroup.value==this.value,this.radioGroup.register(this))}render(){return o.html`
			<template
				tabindex="0"
				:class.checked=${this.checked}
				@click=${this.onClick}
				@focus=${this.onFocus}
			>
				<f-icon class="icon" .type=${this.checked?"radio-checked":"radio-unchecked"} />
				<div class="label">
					<slot />
				</div>
			</template>
		`}onClick(){this.checked||(this.checked=!0,this.emit("change",!0))}onFocus(){this.checked||((0,o.once)(this.el,"blur",this.onBlur,this),(0,o.once)(document,"keydown.enter",this.onEnter,this))}onBlur(){(0,o.off)(document,"keydown",this.onEnter,this)}onEnter(){this.onClick()}};a=n([(0,o.define)("f-radio")],a),e.Radio=a},8325:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.storage=void 0;class i{constructor(t){this.prefix="",this.expireSuffix="_expires_",this.supported=null,this.prefix=t}isSupported(){if(null!==this.supported)return this.supported;try{let t=this.prefix+"test_supported";return localStorage[t]=1,delete localStorage[t],!0}catch(t){return!1}}has(t){return this.isSupported()?(t=this.prefix+t)in localStorage:null}get(t,e=null){if(!this.isSupported())return null;t=this.prefix+t;let i=localStorage[t];if(void 0===i)return e;if(!i||"string"!=typeof i)return e;try{i=JSON.parse(i);let n=localStorage[t+this.expireSuffix];return n&&n<Date.now()?(delete localStorage[t],delete localStorage[t+this.expireSuffix],e):i}catch(t){return e}}set(t,e,i){return this.isSupported()?(t=this.prefix+t,localStorage[t]=JSON.stringify(e),i&&i>0&&(localStorage[t+this.expireSuffix]=Date.now()+1e3*i),!0):null}delete(t){return this.isSupported()?(t=this.prefix+t,delete localStorage[t+this.expireSuffix],delete localStorage[t]):null}group(t){return new i(this.prefix+"_"+t)}}e.storage=new i("_ff_")},8347:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.RefElementBinding=void 0;const o=i(356);let r=e.RefElementBinding=class{constructor(t,e){if(!e)throw new ReferenceError('A context must be provided when using ":ref" binding!');this.el=t,this.context=e}update(t){"string"==typeof t?this.context.refElements[t]=this.el:"function"==typeof t&&t.call(this.context,this.el)}remove(){}};e.RefElementBinding=r=n([(0,o.defineBinding)("refElement")],r)},8352:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;const o=i(1416),r=i(8240);let s=class extends o.Component{constructor(){super(...arguments),this.value=null,this.closable=!1}static style(){let{borderColor:t,borderRadius:e,adjust:i,adjustFontSize:n}=r.theme;return o.css`
		:host{
			display: inline-flex;
			border: 1px solid ${t};
			border-radius: ${e}px;
			font-size: ${n(13)}px;
			line-height: ${i(18)}px;
			height: ${i(20)}px;
			padding: 0 ${i(6)}px 0 ${i(6)}px;
			cursor: pointer;

			&:hover{
				opacity: 0.9;
			}

			&:active{
				opacity: 0.8;
			}
		}
	
		.icon{
			position: relative;
			top: -1px;
			margin-left: ${i(4)}px;
			margin-right: ${i(-4)}px;
			display: inline-flex;

			f-icon{
				margin: auto;
			}
		}
		`}render(){return o.html`
			<slot />
			${this.closable?o.html`<div class="icon" @click=${this.close}><f-icon .type="close" /></div>`:""}
		`}close(){this.emit("close",this.value)}};s=n([(0,o.define)("f-tag")],s),e.Tag=s},8384:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHTML=e.encodeHTML=void 0,e.encodeHTML=function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.decodeHTML=function(t){return(new DOMParser).parseFromString(`<!DOCTYPE html><body>${t}</body></html>`,"text/html").body.textContent}},8396:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UpdatableOptions=void 0,e.UpdatableOptions=class{constructor(t){this.updated=!1,this.options=null,this.defaultOptions=t}isNotUpdated(){return!this.updated}update(t){this.options=t||null,this.updated=!0}get(t){if(this.options){let e=this.options[t];return void 0===e?this.defaultOptions[t]:e}return this.defaultOptions[t]}has(t){return!!this.options&&void 0!==this.options[t]}getOptions(){return this.options||this.defaultOptions}}},8457:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.liveRepeat=e.LiveRepeatDirective=void 0;const n=i(5428),o=i(5400),r=i(521),s=i(3728),a=i(8396),l=i(8864),h=i(9104),d=i(7800),c=i(4479),u=i(632),p=i(6171),m={renderCount:50,preRendering:!1};class g extends h.EventEmitter{constructor(t,e){super(),this.options=new a.UpdatableOptions(m),this.rawData=null,this.fullData=[],this.liveData=[],this.repTems=[],this.lastWatcher=null,this.startIndex=0,this.endIndex=0,this.preRendered=null,this.updateVersion=0,this.anchor=t,this.context=e;let i=this.anchor.el.parentElement,n=i.parentElement;if(!i||!n||1!==n.children.length)throw new Error('"liveRepeat" must be contained in the HTML struct like `\n\t\t\t\t<div title="as a scroll parent" style="overflow: auto | scroll; position: relative;">\n\t\t\t\t\t<div title="as a scroll slider" style="position: absolute;">\n\t\t\t\t\t\t${liveRepeat(...)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`!');this.transition=new o.ContextualTransition(e),this.sliderChildren=new u.OffsetChildren(i,(0,c.getElementCountBefore)(t.el)),this.processor=new l.PartialRenderingProcessor(n,i,this.sliderChildren),this.scroller=n,this.slider=i,(0,s.on)(n,"scroll.passive",this.checkCoverage,this);let r=window.ResizeObserver;r?(this.observer=new r(this.checkCoverage.bind(this)),this.observer.observe(this.scroller)):(0,s.on)(window,"resize",this.checkCoverage,this)}canPatchBy(t,e){return e===this.templateFn||e.toString()===this.templateFn.toString()}patch(t,e,i,n){this.templateFn=e,this.options.update(i),this.transition.updateOptions(n),this.updatePreRendered(),(null==i?void 0:i.renderCount)&&this.processor.updateRenderCount(i.renderCount),t!==this.rawData?(this.watchAndUpdateData(t),this.rawData=t):this.lastWatcher&&this.update()}updatePreRendered(){this.options.get("preRendering")&&!this.preRendered?this.preRendered=new Map:!this.options.get("preRendering")&&this.preRendered&&(this.preRendered=null)}watchAndUpdateData(t){if(this.tryDeleteLastWatcher(),!t)return void(this.fullData=[]);let e=t=>{this.fullData=t,this.update()};this.lastWatcher=new p.LazyWatcher((()=>[...t]),e,this.context),this.getWatcherGroup().add(this.lastWatcher),e(this.lastWatcher.value)}getWatcherGroup(){var t;return(null===(t=this.context)||void 0===t?void 0:t.__getWatcherGroup())||p.GlobalWatcherGroup}tryDeleteLastWatcher(){this.lastWatcher&&(this.getWatcherGroup().delete(this.lastWatcher),this.lastWatcher=null)}update(){(0,p.enqueueUpdatableInOrder)(this,this.context,p.QueueUpdateOrder.Directive)}__updateImmediately(){this.processor.updateDataCount(this.fullData.length),this.processor.updateRendering(this.updateFromIndices.bind(this))}untilDataUpdatedAndRendered(){return new Promise((t=>{this.once("liveDataRendered",t)}))}checkCoverage(){this.processor.updateRenderingSmoothlyIfNeeded(this.updateFromIndices.bind(this))}updateFromIndices(t,e,i){this.startIndex=t,this.endIndex=e,this.updateLiveData(this.fullData.slice(t,e),i),this.triggerLiveDataEvents(i)}updateLiveData(t,e){this.updateVersion++;let i=this.transition.canPlay(),n=!i&&!this.options.get("preRendering"),o=this.liveData,r=this.repTems,s=(0,d.getEditRecord)(o,t,n);this.liveData=t,this.repTems=[];for(let e of s){let{type:n,nextOldIndex:o,toIndex:s,fromIndex:a}=e,l=this.getRepItemInIndex(r,o),h=this.getRepItemInIndex(r,a),c=s>=0?t[s]:null;if(n===d.EditType.Leave)this.useMatchedRepTem(h,c,s);else if(n===d.EditType.Move)this.moveRepTemBefore(h,l),this.useMatchedRepTem(h,c,s);else if(n===d.EditType.Modify)this.reuseRepTem(h,c,s);else if(n===d.EditType.MoveModify)this.moveRepTemBefore(h,l),this.reuseRepTem(h,c,s);else if(n===d.EditType.Insert){let t=this.createRepTem(c,s);this.moveRepTemBefore(t,l),i&&this.mayPlayEnter(t)}else n===d.EditType.Delete&&this.removeRepTemAndMayPlayLeave(h,i)}this.options.get("preRendering")&&(0,c.untilIdle)().then((()=>{this.doPreRendering(e)}))}getRepItemInIndex(t,e){return e<t.length&&e>=0?t[e]:null}triggerLiveDataEvents(t){this.emit("liveDataUpdated",this.liveData,this.startIndex,t),(0,p.untilRenderComplete)().then((async()=>{await Promise.resolve(),this.emit("liveDataRendered",this.liveData,this.startIndex,t)}))}moveRepTemBefore(t,e){e?e.template.before(t.template):this.anchor.insert(t.template.extractToFragment())}useMatchedRepTem(t,e,i){t.update(e,this.startIndex+i),this.repTems.push(t)}reuseRepTem(t,e,i){var n,o;null===(n=this.preRendered)||void 0===n||n.delete(t.item),null===(o=this.preRendered)||void 0===o||o.set(e,t),t.update(e,this.startIndex+i),this.repTems.push(t)}createRepTem(t,e){var i,n;if(null===(i=this.preRendered)||void 0===i?void 0:i.has(t)){let i=this.preRendered.get(t);return i.connect(),i.update(t,e),this.repTems.push(i),i}{let i=new r.RepetitiveTemplate(this,t,this.startIndex+e);return this.repTems.push(i),null===(n=this.preRendered)||void 0===n||n.set(t,i),i}}mayPlayEnter(t){let e=t.template.getFirstElement();e&&this.transition.playEnter(e)}removeRepTemAndMayPlayLeave(t,e){let i=t.template;if(e){let e=i.getFirstElement();e?this.transition.playLeave(e).then((e=>{e&&this.removeRepTem(t)})):this.removeRepTem(t)}else this.removeRepTem(t)}removeRepTem(t){t.remove()}getStartIndex(){return this.startIndex}setStartIndex(t){this.processor.setStartIndex(t),this.update()}isStartIndexSpecified(){return this.processor.isStartIndexSpecified()}getEndIndex(){return this.startIndex}getFirstVisibleIndex(){return Math.max(0,(0,c.locateFirstVisibleIndex)(this.scroller,this.sliderChildren.getChildren()))+this.startIndex}getLastVisibleIndex(){return Math.max(0,(0,c.locateLastVisibleIndex)(this.scroller,this.sliderChildren.getChildren()))}async makeIndexVisible(t){return this.isIndexRendered(t)||(this.setStartIndex(t),await this.untilDataUpdatedAndRendered()),this.scrollToViewRenderedIndex(t)}isIndexRendered(t){return t>=this.startIndex&&t<this.startIndex+this.liveData.length}scrollToViewRenderedIndex(t){let e=this.sliderChildren.childAt(t-this.startIndex);if(!e)return!1;let i=this.scroller.getBoundingClientRect(),n=e.getBoundingClientRect();return n.bottom>i.bottom?this.scroller.scrollTop=this.scroller.scrollTop+(n.bottom-i.bottom):n.top<i.top&&(this.scroller.scrollTop=this.scroller.scrollTop+(i.top-n.top)),!0}async makeIndexVisibleAtTop(t){return this.isIndexRendered(t)||(this.setStartIndex(t),await this.untilDataUpdatedAndRendered()),this.scrollToMakeRenderedIndexAtTop(t)}async setFirstVisibleIndex(t){return this.setStartIndex(t),await this.untilDataUpdatedAndRendered(),this.scrollToMakeRenderedIndexAtTop(t)}scrollToMakeRenderedIndexAtTop(t){let e=this.sliderChildren.childAt(t-this.startIndex);if(!e)return!1;let i=this.scroller.getBoundingClientRect(),n=e.getBoundingClientRect();return this.scroller.scrollTop=this.scroller.scrollTop+(n.top-i.top),!0}async doPreRendering(t){let e=this.updateVersion,i=this.preRendered,n=this.options.get("renderCount")*this.processor.getRenderGroupCount(),o=Math.max(0,this.startIndex-n),s=Math.min(this.fullData.length,this.endIndex+n),a=this.fullData.slice(o,s),l=new Set(a),h=[],d=[];for(let t of i.keys())if(!l.has(t)){let e=i.get(t);e.disconnect(),d.push(e),i.delete(t)}if("down"===t||null===t)for(let t=this.endIndex;t<s;t++)h.push(t);else for(let t=o;t<this.startIndex;t++)h.push(t);let u=0;for(let t of h){let n=this.fullData[t];if(!i.has(n)){if(d.length>0){let e=d.pop();e.update(n,t),i.set(n,e)}else{let e=new r.RepetitiveTemplate(this,n,t);e.disconnect(),e.template.preRender(),i.set(n,e),u++}if(u%10==0&&(await(0,c.untilIdle)(),this.updateVersion!==e))break}}}getContext(){return this.context}getTemplateFn(){return this.templateFn}remove(){this.tryDeleteLastWatcher(),(0,s.off)(this.scroller,"scroll.passive",this.checkCoverage,this),this.observer?this.observer.disconnect():(0,s.off)(window,"resize",this.checkCoverage,this);for(let t of this.repTems)t.remove()}}e.LiveRepeatDirective=g,e.liveRepeat=(0,n.defineDirective)(g)},8663:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"order-default",code:'<svg viewBox="0 0 7 14"><polygon style="fill:currentColor;stroke:none;fill-opacity:0.4;" points="5.7,8 3.5,11.8 1.3,8 0.2,8 0.1,8 3.5,13.8 6.9,8 6.8,8"/><polygon style="fill:currentColor;stroke:none;fill-opacity:0.4;" points="3.5,0.3 0.1,6 0.2,6 1.3,6 3.5,2.2 5.7,6 6.8,6 6.9,6"/></svg>'}},8699:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getClosestRouter=e.recirectTo=e.RedirectToBinding=e.goTo=e.GotoBinding=void 0;const n=i(1416),o=i(9782),r=i(9611);class s{constructor(t){this.router=null,this.value="",this.asPopupPath=!1,this.el=t,(0,n.on)(this.el,"click",this.onClick,this)}update(t,e={}){var i,n;this.value=t,this.asPopupPath=null!==(i=e.asPopupPath)&&void 0!==i&&i,this.router=null!==(n=e.router)&&void 0!==n?n:null}onClick(){this.ensureRouter(),this.router.goto(this.value,this.asPopupPath)}ensureRouter(){if(!this.router&&(this.router=a(this.el.parentElement),!this.router))throw new Error('":goto" must be contained in a extended component of "Router"')}remove(){}}function a(t){let e=t;for(;e&&e instanceof HTMLElement;)if(e.localName.includes("-")){let t=(0,n.getComponent)(e);if(t instanceof r.Router)return t;e=t instanceof o.Popup?t.getTriggerElement():e.parentElement}else e=e.parentElement;return null}e.GotoBinding=s,e.goTo=(0,n.defineBinding)("goto",s),e.RedirectToBinding=class extends s{onClick(){this.ensureRouter(),this.router.redirectTo(this.value,this.asPopupPath)}},e.recirectTo=(0,n.defineBinding)("redirectTo",s),e.getClosestRouter=a},8708:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popup=e.PopupBinding=e.DefaultPopupOptions=void 0;const n=i(1416),o=i(5499),r=i(5903),s=i(7886),a=i(5224);e.DefaultPopupOptions={trigger:"hover",alignPosition:"b",alignMargin:4,canShrinkInY:!0,stickToEdges:!0,triangle:!0,fixTriangle:!1,showDelay:100,hideDelay:200,transition:{name:"fade"},showImmediately:!1,autoFocus:!1,pointerable:!0,cacheable:!1};class l extends o.EventEmitter{constructor(t,e){super(),this.unwatchRect=null,this.popup=null,this.popupTemplate=null,this.aligner=null,this.cachedPopup=null,this.cachedPopupTemplate=null,this.keepToBeVisible=!1,this.el=t,this.context=e,this.binder=new a.PopupTriggerBinder(this.el),this.state=new s.PopupState,this.options=new n.UpdatableOptions({}),this.initPopupEvents()}initPopupEvents(){this.binder.on("will-show",this.showPopupLater,this),this.binder.on("will-hide",this.onHideFomBinder,this),this.binder.on("cancel-show",this.cancelShowingFromBinder,this),this.binder.on("hide",this.onHideFomBinder,this),this.binder.on("toggle-show-hide",this.togglePopupShowHide,this),this.state.on("do-show",this.doShowingPopup,this),this.state.on("do-hide",this.doHidingPopup,this)}onWillHideFomBinder(){this.shouldKeepVisible()?this.keepToBeVisible=!0:this.hidePopupLater()}onHideFomBinder(){this.shouldKeepVisible()?this.keepToBeVisible=!0:this.hidePopup()}cancelShowingFromBinder(){this.state.opened?this.hidePopup():this.state.willNotShow()}shouldKeepVisible(){return this.options.get("keepVisible")}getOption(t){let i=this.options.get(t);return void 0===i&&this.popup&&this.popup.defaultPopupOptions&&(i=this.popup.defaultPopupOptions[t]),void 0===i&&(i=e.DefaultPopupOptions[t]),i}getTriggerElement(){return this.el}update(t,e){let i=this.options.isNotUpdated();this.renderFn=t,this.options.update(e),i?(this.binder.setTrigger(this.getOption("trigger")),this.bindEnterEvents()):this.state.opened&&(0,n.enqueueUpdatableInOrder)(this,this.context,n.QueueUpdateOrder.Directive),this.keepToBeVisible&&!this.options.get("keepVisible")&&this.hidePopupLater()}bindEnterEvents(){this.binder.bindEnter(),this.getOption("showImmediately")&&this.showPopupLater()}unbindEnterEvents(){this.binder.unbindEnter()}togglePopupShowHide(){this.state.opened?this.state.hide():this.state.show()}showPopupLater(){let t=this.getOption("showDelay"),e=this.getOption("key");r.SharedPopups.isKeyInUse(e)&&(t=0),"click"!==this.binder.trigger&&"focus"!==this.binder.trigger||(t=0),this.state.willShow(t)&&this.binder.bindLeaveBeforeShow()}showPopup(){this.state.show()}doShowingPopup(){(0,n.enqueueUpdatableInOrder)(this,this.context,n.QueueUpdateOrder.Directive),this.emit("openedStateChange",!0)}__updateImmediately(){this.state.opened&&(this.popup?this.updatePopup():this.renderPopup())}updatePopup(){let t=this.renderFn(),e=this.getOption("key"),i=this.popup,o=this.popupTemplate;if(t instanceof n.TemplateResult||(t=n.html`${t}`),o.canPatchBy(t))o.patch(t);else{i.el.remove();let o=this.popupTemplate=(0,n.render)(t,this.context);i=(0,n.getRenderedAsComponent)(o),e&&r.SharedPopups.addCache(e,{popup:i,template:o})}(0,n.onRenderComplete)((()=>{this.popup&&this.alignPopup()}))}renderPopup(){let t=this.ensurePopup(),e=this.popup.el;e.style.pointerEvents=this.getOption("pointerable")?"":"none",e.style.visibility="hidden",this.binder.bindLeave(this.getOption("hideDelay"),this.popup.el),(0,n.onRenderComplete)((()=>{this.afterPopupRendered(t)}))}afterPopupRendered(t){this.state.opened&&this.popup&&this.alignPopup()&&(this.popup.el.style.visibility="",this.mayGetFocus(),t||new n.Transition(this.popup.el,this.getOption("transition")).enter(),this.unwatchRect=(0,o.watchLayout)(this.el,"rect",this.onTriggerRectChanged.bind(this)))}onTriggerRectChanged(){(0,o.isVisibleInViewport)(this.el,.1,this.popup.el)?this.popup&&this.alignPopup():this.hidePopupLater()}ensurePopup(){let t=this.renderFn(),e=this.getOption("key"),i=null,o=null,s=e?r.SharedPopups.findCache(e,this.el):null;return t instanceof n.TemplateResult||(t=n.html`${t}`),this.cachedPopup&&this.cachedPopupTemplate&&(i=this.cachedPopup,this.cachedPopupTemplate.canPatchByContextual(t,this.context)&&(this.cachedPopupTemplate.patch(t),i=this.cachedPopup,o=this.cachedPopupTemplate,this.cachedPopup=null,this.cachedPopupTemplate=null)),!i&&s&&s.template.canPatchByContextual(t,this.context)&&(i=s.popup,o=s.template,o.patch(t)),i&&o||(o=(0,n.render)(t,this.context),i=(0,n.getRenderedAsComponent)(o)),e&&s&&r.SharedPopups.cleanPopupControls(e,s,i,this),e&&(r.SharedPopups.addCache(e,{popup:i,template:o}),r.SharedPopups.setPopupUser(i,this)),this.popup=i,this.popupTemplate=o,i.setBinding(this),i.applyAppendTo(),!!(null==s?void 0:s.popup)}alignPopup(){let t=this.popup,e=this.getOption("alignTo"),i=e?e(this.el):this.el;return this.emit("willAlign"),this.aligner||(this.aligner=new o.Aligner(t.el,i,this.getOption("alignPosition"),this.getAlignOptions())),!!this.aligner.align()||(this.hidePopup(),!1)}getAlignOptions(){let t=this.popup.refElements.triangle;return{margin:this.getOption("alignMargin"),canShrinkInY:this.getOption("canShrinkInY"),triangle:t,fixTriangle:this.getOption("fixTriangle"),stickToEdges:this.getOption("stickToEdges")}}mayGetFocus(){let t=this.binder.trigger;this.getOption("autoFocus")&&"hover"!==t&&"focus"!==t&&this.popup&&this.popup.el.tabIndex>=0&&this.popup.el.focus()}hidePopupLater(){let t=this.getOption("hideDelay");this.state.willHide(t)}hidePopup(){this.state.hide()}doHidingPopup(){if(!this.popup)return;let t=this.popup.el;this.clean(),new n.Transition(t,this.getOption("transition")).leave().then((e=>{e&&t.remove()})),this.emit("openedStateChange",!1)}__canLoseControl(){return!this.keepToBeVisible}__losePopupControl(){this.clean()}clean(){let t=this.getOption("key"),e=this.popup,i=this.popupTemplate;t&&e&&r.SharedPopups.deleteCache(t,e),e&&i&&this.options.get("cacheable")&&(this.cachedPopup=e,this.cachedPopupTemplate=i),this.binder.unbindLeave(),this.unwatchRect&&(this.unwatchRect(),this.unwatchRect=null),this.state.clean(),this.popup=null,this.popupTemplate=null,this.aligner=null}remove(){(0,n.off)(this.el,"mouseenter",this.showPopupLater,this),this.state.opened?this.hidePopup():this.clean(),this.unbindEnterEvents()}}e.PopupBinding=l,e.popup=(0,n.defineBinding)("popup",l)},8718:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.liveAsyncRepeat=e.LiveAsyncRepeatDirective=void 0;const n=i(5428),o=i(8457),r=i(6171),s=i(1363);class a extends o.LiveRepeatDirective{constructor(){super(...arguments),this.key=null,this.needToUpdateSliderPositionAfterDataCountKnown=!1,this.willUpdateLater=!1,this.willUpdateDataCountLater=!1,this.version=0}patch(t,e,i,n){this.dataCount=t.dataCount,this.templateFn=e,this.options.update(i),this.transition.updateOptions(n),this.updatePreRendered(),(null==i?void 0:i.renderCount)&&this.processor.updateRenderCount(i.renderCount),this.dataGetter?this.willUpdateLater||this.update():(this.dataGetter=new s.PageDataGetter(t.asyncDataGetter,t.immediateDataGetter),this.getDataCountThenUpdate())}__updateImmediately(){this.willUpdateLater||this.processor.updateRendering(this.updateFromIndices.bind(this))}checkCoverage(){this.willUpdateLater||super.checkCoverage()}async getDataCountThenUpdate(){let t=this.dataCount;if(!t)return;if(this.willUpdateDataCountLater)return;this.willUpdateDataCountLater=!0,this.willUpdateLater=!0,await Promise.resolve(),this.willUpdateDataCountLater=!1;let e,i=++this.version,n=0;e="function"==typeof t?t():t,n=e instanceof Promise?await e:e,i===this.version&&(this.processor.updateDataCount(n),this.update(),this.willUpdateLater=!1)}updateFromIndices(t,e,i){this.startIndex=t,this.endIndex=e;let n=this.dataGetter.getImmediateData(t,e),o=!n.some((t=>null==t));if(this.updateLiveData(n,i),this.triggerLiveAsyncDataEvents(i,o),!o){let n=++this.updateVersion;this.dataGetter.getFreshData(t,e).then((t=>{n===this.updateVersion&&(this.updateLiveData(t,i),this.triggerLiveAsyncDataEvents(i,!0))}))}}updateLiveData(t,e){this.key&&(t=this.uniqueDataByKey(t)),t=t.map(r.observe),super.updateLiveData(t,e)}uniqueDataByKey(t){let e=new Set;return t.filter((t=>{if(t){let i=t[this.key];if(e.has(i))return!1;e.add(i)}return!0}))}triggerLiveAsyncDataEvents(t,e){this.emit("liveDataUpdated",this.liveData,this.startIndex,t,e),(0,r.onRenderComplete)((()=>{this.emit("liveDataRendered",this.liveData,this.startIndex,t,e)}))}reload(){this.getDataCountThenUpdate()}untilUpdated(){return new Promise((t=>{this.once("liveDataUpdated",(()=>t()))}))}untilFreshUpdated(){return new Promise((t=>{let e=(i,n,o,r)=>{r&&(this.off("liveDataUpdated",e),t())};this.once("liveDataUpdated",e)}))}untilRendered(){return new Promise((t=>{this.once("liveDataRendered",(()=>t()))}))}untilFreshRendered(){return new Promise((t=>{let e=(i,n,o,r)=>{r&&(this.off("liveDataRendered",e),t())};this.once("liveDataRendered",e)}))}}e.LiveAsyncRepeatDirective=a,e.liveAsyncRepeat=(0,n.defineDirective)(a)},8759:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hide=e.HideBinding=e.show=e.ShowBinding=void 0;const n=i(356),o=i(5400);class r{constructor(t,e){this.value=void 0,this.el=t,this.transition=new o.ContextualTransition(e)}update(t,e){t=!!t,this.transition.updateOptions(e),t!==this.value&&(t?(this.el.hidden=!1,this.transition.shouldPlayEnter()&&this.transition.playEnter(this.el)):this.transition.shouldPlayLeave()?this.transition.playLeave(this.el).then((t=>{t&&(this.el.hidden=!0)})):this.el.hidden=!0,this.value=t)}remove(){this.el.hidden=!1}}e.ShowBinding=r,e.show=(0,n.defineBinding)("show",r);class s extends r{update(t,e){super.update(!t,e)}}e.HideBinding=s,e.hide=(0,n.defineBinding)("hide",s)},8802:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"checkbox-checked",code:'<svg viewBox="0 0 17 17"><path style="fill:currentColor; stroke:none;" d="M3.6,0h9.8c2,0,3.6,1.6,3.6,3.6v9.8c0,2-1.6,3.6-3.6,3.6H3.6c-2,0-3.6-1.6-3.6-3.6V3.6C0,1.6,1.6,0,3.6,0z"/><polyline style="fill:none;stroke:#FFFFFF;" points="13.3,4.8 6.8,12.2 3.7,8.7"/></svg>'}},8830:(t,e)=>{function i(t){const e=/([.:?@\w-]+)\s*=(\s*(?:".*?"|'.*?'|\S+)?)|\S+/g;let i,n=[];for(;i=e.exec(t);){let t=/[\w-]/.test(i[1])?i[1]:null,e=t&&i[2]?i[2]:null;n.push({text:i[0],name:t,value:e})}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.joinHTMLAttributes=void 0,e.joinHTMLAttributes=function(t,e){return function(t,e){for(let o of e)if("class"===o.name||"style"===o.name){let e=t.find((t=>t.name===o.name));e?e.value=(i=e.value,(n=o.value)?(i||(i=""),/['"]$/.test(i)||(i='"'+i+'"'),n=n.replace(/^['"]|['"]$/g,""),i.slice(0,-1)+" "+n+i.slice(-1)):""):t.push(o)}else if(o.name){let e=t.find((t=>t.name===o.name));e?e.value=o.value:t.push(o)}else t.push(o);var i,n;return t}(i(t),i(e)).map((t=>function(t){return t.name?t.value?" "+t.name+"="+t.value:" "+t.name:" "+t.text}(t))).join("")}},8854:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;const n=i(5499);class o{constructor(t){this.value=t.trim()}static fromRGBA(t,e,i,r){return t=Math.max(Math.min(t,1),0),e=Math.max(Math.min(e,1),0),i=Math.max(Math.min(i,1),0),r=Math.max(Math.min(r,1),0),new o(1===r?"#"+Math.round(255*t).toString(16).padStart(2,"0")+Math.round(255*e).toString(16).padStart(2,"0")+Math.round(255*i).toString(16).padStart(2,"0"):"rgba("+Math.round(255*t).toString()+", "+Math.round(255*e).toString()+", "+Math.round(255*i).toString()+", "+(0,n.toPower)(r,-2)+")")}static fromRGB(t,e,i){return o.fromRGBA(t,e,i,1)}toString(){return this.value}getRGBA(){if(/^#[0-9a-fA-F]{3,8}$/.test(this.value))return[...this.parseNormalColor(this.value),1];let t=this.value.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(t)return[Number(t[1])/255,Number(t[2])/255,Number(t[3])/255,1];if(t=this.value.match(/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)$/i),t)return[Number(t[1])/255,Number(t[2])/255,Number(t[3])/255,Number(t[4])];if(t=this.value.match(/^rgba\(\s*(#[0-9a-fA-F]{3,6})\s*,\s*([\d.]+)\s*\)$/i),t)return[...this.parseNormalColor(t[1]),Number(t[2])];throw new Error(`"${this.value}" is not a valid RGB color`)}getRGB(){return this.getRGBA().slice(0,3)}parseNormalColor(t){return 4===t.length?[17*parseInt(t[1],16)/255,17*parseInt(t[2],16)/255,17*parseInt(t[3],16)/255]:[parseInt(t.slice(1,3),16)/255,parseInt(t.slice(3,5),16)/255,parseInt(t.slice(5,7),16)/255]}darken(t){return this.lighten(-t)}lighten(t){let[e,i,n,r]=this.getRGBA(),s=t/100;return e+=s,i+=s,n+=s,o.fromRGBA(e,i,n,r)}toMiddle(t){return this.getLightness()<.5?this.lighten(t):this.darken(t)}getLightness(){let[t,e,i]=this.getRGBA();return.299*t+.587*e+.114*i}getAverage(){let[t,e,i]=this.getRGBA();return(t+e+i)/3}alpha(t){let[e,i,n]=this.getRGBA();return o.fromRGBA(e,i,n,t)}mix(t,e){let[i,n,r,s]=this.getRGBA();"string"==typeof t&&(t=new o(t));let[a,l,h,d]=t.getRGBA(),c=e/100;return i=i*(1-c)+a*c,n=n*(1-c)+l*c,r=r*(1-c)+h*c,s=s*(1-c)+d*c,o.fromRGBA(i,n,r,s)}}e.Color=o},8864:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PartialRenderingProcessor=void 0;const n=i(4479),o=i(6171);e.PartialRenderingProcessor=class{constructor(t,e,i){this.renderCount=50,this.renderGroupCount=1,this.scrollerBorderTopWidth=0,this.scrollerBorderBottomWidth=0,this.startIndex=0,this.endIndex=0,this.startIndexToApply=0,this.totalDataCount=0,this.needToApplyDataCountChange=!1,this.averageItemHeight=0,this.itemCountWhenUpdatePlaceholderHeight=0,this.untilUpdatingCompletePromise=null,this.scroller=t,this.slider=e,this.sliderChildren=i,this.palceholder=document.createElement("div"),this.palceholder.style.cssText="position: absolute; left: 0; top: 0; width: 1px; visibility: hidden;",this.scroller.prepend(this.palceholder),(0,o.onRenderComplete)((()=>{this.onFirstTimeRenderCompleted()}))}updateRenderCount(t){this.renderCount=t}getRenderGroupCount(){return this.renderGroupCount}onFirstTimeRenderCompleted(){let t=getComputedStyle(this.scroller);if(!["scroll","auto"].includes(t.overflowY))throw'The  style value "overflow-y" of scroller element out of "liveRepeat" directive must be "scroll" or "auto"!';if("static"===t.position)throw'The style value "position" of scroller element out of "liveRepeat" directive must not be "static"!';if("absolute"!==getComputedStyle(this.slider).position)throw'The style value "position" of slider element out of "liveRepeat" directive must not be "absolute"!';this.scrollerBorderTopWidth=Number(getComputedStyle(this.scroller).borderTopWidth.replace("px",""))||0,this.scrollerBorderBottomWidth=Number(getComputedStyle(this.scroller).borderBottomWidth.replace("px",""))||0}setStartIndex(t){this.startIndexToApply=t}isStartIndexSpecified(){return null!==this.startIndexToApply}updateDataCount(t){t!==this.totalDataCount&&(this.totalDataCount=t,this.needToApplyDataCountChange=!0,this.itemCountWhenUpdatePlaceholderHeight=0)}updateRendering(t){let e=null!==this.startIndexToApply;e?(this.updateWhenStartIndexWillApply(t),this.needToApplyDataCountChange=!1):this.needToApplyDataCountChange?(this.updateFromCurrentScrollOffset(t),this.needToApplyDataCountChange=!1):t(this.startIndex,this.endIndex,null),this.lockUpdatingByPromise((0,o.untilRenderComplete)().then((()=>{this.updatePlaceholderHeightProgressive(),e&&(this.resetSliderPosition(),this.updateScrollOffset())})))}updateRenderingSmoothlyIfNeeded(t){if(this.untilUpdatingCompletePromise)return!1;if(0===this.startIndex&&this.endIndex===this.totalDataCount)return!1;let e=this.updateFromCoverage(t);return!!e&&(this.lockUpdatingByPromise(e.then((()=>{this.updatePlaceholderHeightProgressive()}))),!0)}async lockUpdatingByPromise(t){this.untilUpdatingCompletePromise=t,await t,this.untilUpdatingCompletePromise=null}updateWhenStartIndexWillApply(t){this.updateIndices(this.startIndexToApply),this.startIndexToApply=null,this.resetSliderPosition(),t(this.startIndex,this.endIndex,null)}updateIndices(t){let e=this.renderCount*this.renderGroupCount;t=Math.min(t,this.totalDataCount-e);let i=(t=Math.max(0,t))+e;i=Math.min(i,this.totalDataCount),this.startIndex=t,this.endIndex=i}updatePlaceholderHeightProgressive(){if(this.endIndex>0&&this.endIndex>=this.itemCountWhenUpdatePlaceholderHeight||this.endIndex===this.totalDataCount){let t=this.getScrollerClientRect(),e=this.slider.getBoundingClientRect(),i=this.scroller.scrollTop+e.bottom-t.top;this.averageItemHeight=this.averageItemHeight>0?i/this.endIndex:i/(this.endIndex-this.startIndex),this.palceholder.style.height=this.averageItemHeight*this.totalDataCount+"px",this.itemCountWhenUpdatePlaceholderHeight=this.endIndex}}getScrollerClientRect(){let t=(0,n.getRect)(this.scroller);return t.top+=this.scrollerBorderTopWidth,t.bottom-=this.scrollerBorderBottomWidth,t.height-=this.scrollerBorderTopWidth+this.scrollerBorderBottomWidth,t}updateSliderPosition(t,e){"top"===t?(this.slider.style.top=e+"px",this.slider.style.bottom="auto"):(this.slider.style.bottom=e+"px",this.slider.style.top="auto")}resetSliderPosition(){let t=this.startIndex,e=this.averageItemHeight*t;this.updateSliderPosition("top",e)}updateScrollOffset(){let t=this.startIndex;this.scroller.scrollTop=this.averageItemHeight*t}updateFromCoverage(t){let e,i=this.getScrollerClientRect(),r=this.slider.getBoundingClientRect(),s=this.renderCount*this.renderGroupCount,a=this.scroller.scrollTop+this.scroller.clientHeight===this.scroller.scrollHeight&&this.endIndex<this.totalDataCount,l=0===this.scroller.scrollTop&&this.startIndex>0;if(r.bottom<i.top||r.top>i.bottom)this.updateFromCurrentScrollOffset(t),e=(0,o.untilRenderComplete)();else if(r.bottom<i.bottom||a){let o=(0,n.locateFirstVisibleIndex)(this.scroller,this.sliderChildren.getChildren(),0),r=this.startIndex,s=this.startIndex+o;this.updateIndices(s),e=this.updateWithSliderPositionStable("down",r,i,t)}else if(r.top>i.top||l){let o=(0,n.locateLastVisibleIndex)(this.scroller,this.sliderChildren.getChildren(),0),r=this.startIndex,a=this.startIndex+o+1-s;this.updateIndices(a),e=this.updateWithSliderPositionStable("up",r,i,t)}else e=Promise.resolve();return e.catch((()=>{this.updateFromCurrentScrollOffset(t),e=(0,o.untilRenderComplete)()})),e}updateFromCurrentScrollOffset(t){this.resetIndices(),this.resetSliderPosition(),t(this.startIndex,this.endIndex,null)}resetIndices(){let t=this.averageItemHeight>0?Math.floor(this.scroller.scrollTop/this.averageItemHeight):0;this.updateIndices(t)}async updateWithSliderPositionStable(t,e,i,n){let o="down"===t?this.startIndex-e:this.endIndex-1-e,r=this.sliderChildren.childAt(o),s=()=>{n(this.startIndex,this.endIndex,t)};if(!r)throw new Error("Wrongly rendered: can't found expected element in specified index!");0===this.startIndex?await this.updateWhenReachStartIndex(r,s):this.endIndex===this.totalDataCount?await this.updateWhenReachEndIndex(r,s):this.startIndex>0&&0===this.scroller.scrollTop?await this.updateWhenReachScrollStart(r,i,s):this.endIndex<this.totalDataCount&&this.scroller.scrollTop+this.scroller.clientHeight===this.scroller.scrollHeight?await this.updateWhenReachScrollEnd(r,i,s):"down"===t?await this.updateNormallyWhenScrollingDown(r,i,s):await this.updateNormallyWhenScrollingUp(r,i,s)}async updateWhenReachStartIndex(t,e){let i=this.endIndex-1-this.startIndex,n=t.getBoundingClientRect().top;this.updateSliderPosition("top",0),e(),await(0,o.untilRenderComplete)();let r=this.sliderChildren.childAt(i).getBoundingClientRect().top-n;this.scroller.scrollTop=this.scroller.scrollTop+r}async updateWhenReachEndIndex(t,e){let i=t.getBoundingClientRect().bottom;e(),await(0,o.untilRenderComplete)();let n=this.sliderChildren.childAt(0).getBoundingClientRect().bottom-i,r=this.getScrollerClientRect(),s=this.slider.getBoundingClientRect(),a=r.bottom-s.bottom+n;a-=this.scroller.scrollTop,this.updateSliderPosition("bottom",a)}async updateWhenReachScrollStart(t,e,i){let n=this.averageItemHeight*this.startIndex,r=e.bottom-t.getBoundingClientRect().bottom;r-=n,this.updateSliderPosition("bottom",r),i(),this.scroller.scrollTop=n,await(0,o.untilRenderComplete)()}async updateWhenReachScrollEnd(t,e,i){let n=t.getBoundingClientRect().top-e.top;n+=this.scroller.scrollTop,this.updateSliderPosition("top",n),i(),await(0,o.untilRenderComplete)()}async updateNormallyWhenScrollingDown(t,e,i){let n=t.getBoundingClientRect().top-e.top;n+=this.scroller.scrollTop,this.updateSliderPosition("top",n),i(),await(0,o.untilRenderComplete)()}async updateNormallyWhenScrollingUp(t,e,i){let n=e.bottom-t.getBoundingClientRect().bottom;n-=this.scroller.scrollTop,this.updateSliderPosition("bottom",n),i(),await(0,o.untilRenderComplete)()}}},8873:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MiniHeap=void 0,e.MiniHeap=class{constructor(t){this.array=[],this.comparer=t}isEmpty(){return 0===this.array.length}add(t){this.array.push(t),this.shiftUp(this.array.length-1)}removeHead(){if(0===this.array.length)return;if(1===this.array.length)return this.array.pop();let t=this.array[0];return this.array[0]=this.array.pop(),this.shiftDown(0),t}shiftUp(t){if(0===t)return;let e=(t+1>>1)-1;this.comparer(this.array[t],this.array[e])<0&&(this.swap(t,e),this.shiftUp(e))}shiftDown(t){let e=t+1<<1,i=e-1,n=i;e<this.array.length&&this.comparer(this.array[i],this.array[e])>0&&(n=e),n>=this.array.length||this.comparer(this.array[n],this.array[t])<0&&(this.swap(n,t),this.shiftDown(n))}swap(t,e){let i=this.array[t];this.array[t]=this.array[e],this.array[e]=i}clear(){this.array=[]}}},8894:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OrderedQueue=e.QueueUpdateOrder=void 0;const n=i(8873);var o;(o=e.QueueUpdateOrder||(e.QueueUpdateOrder={}))[o.Watcher=0]="Watcher",o[o.Component=1]="Component",o[o.Directive=2]="Directive",o[o.Otherwise=3]="Otherwise",e.OrderedQueue=class{constructor(){this.set=new Set,this.heap=new n.MiniHeap(((t,e)=>{if(!t.context)return-1;if(!e.context)return 1;let i=t.context.__getAttactedDomElement(),n=e.context.__getAttactedDomElement();return i!==n?i.compareDocumentPosition(n)&i.DOCUMENT_POSITION_FOLLOWING?-1:1:t.context!==e.context?t.context.__comparePositionWith(e.updatable):t.order-e.order}))}isEmpty(){return this.heap.isEmpty()}has(t){return this.set.has(t)}add(t,e,i){this.heap.add({updatable:t,context:e,order:i}),this.set.add(t)}shift(){let t=this.heap.removeHead(),e=t.updatable;return this.set.delete(e),null==t?void 0:t.updatable}clear(){this.set=new Set,this.heap.clear()}}},9025:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicBindingPart=e.FixedBindingPart=void 0;const n=i(1255);e.FixedBindingPart=class{constructor(t,e,i){this.binding=null,this.el=t,this.context=i;let n=e.indexOf(".");this.bindingName=n>-1?e.slice(0,n):e,this.bindingModifiers=n>-1?e.slice(n+1).split("."):void 0}update(t){if(this.binding)this.binding.update(t);else{let e=new n.BindingResult(this.bindingName,t);this.binding=n.BindingReferences.createFromResult(this.el,this.context,e,this.bindingModifiers)}}remove(){}},e.DynamicBindingPart=class{constructor(t,e){this.name=null,this.binding=null,this.el=t,this.context=e}update(t){t instanceof n.BindingResult?t.name===this.name?this.binding.update(...t.args):(this.binding&&this.removeCurrentBinding(),this.name=t.name,this.binding=n.BindingReferences.createFromResult(this.el,this.context,t)):this.removeCurrentBinding()}removeCurrentBinding(){this.binding&&(this.name=null,this.binding.remove(),n.BindingReferences.removeReference(this.binding),this.binding=null)}}},9028:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),o(i(6949),e),o(i(5992),e),o(i(6269),e),o(i(4071),e),o(i(6099),e),o(i(6029),e),o(i(4588),e),o(i(1404),e),o(i(8325),e),o(i(4075),e),o(i(1146),e),o(i(3163),e),o(i(5048),e),o(i(5822),e)},9051:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteStore=void 0;const n=i(5499),o=i(3218);class r extends n.EventEmitter{constructor(t={}){var e,i;super(),this.key=null,this.orderKey=null,this.orderDirection="",this.filterWord=null,this.willReload=!1;let n=null!==(e=t.pageSize)&&void 0!==e?e:50,r=null!==(i=t.preloadPageCount)&&void 0!==i?i:0;this.cacher=new o.PageDataCacher(n,this.dataCount.bind(this),this.dataGetter.bind(this),r)}setOrder(t,e=""){this.orderKey=t,this.orderDirection=e,this.reloadLater()}getOrder(){return{order:this.orderKey,orderDirection:this.orderDirection}}setFilter(t){this.filterWord=t,this.reloadLater()}getFilter(){return this.filterWord}getCache(){return this.cacher.getCache()}setCache(t){this.cacher.setCache(t)}reloadLater(){this.willReload||(Promise.resolve().then((()=>{this.sync()})),this.willReload=!0)}reloadImmediately(){this.cacher.clear()}sync(){this.willReload&&(this.reloadImmediately(),this.emit("dataChange"),this.willReload=!1)}reload(){this.reloadLater()}async getDataCount(){return await this.cacher.getDataCount()}getImmediateData(t,e){return this.cacher.getImmediateData(t,e)}async getFreshData(t,e){return this.cacher.getFreshData(t,e)}getLiveAsyncRepeatDirectiveOptions(){return{key:this.key||void 0,dataCount:this.getDataCount.bind(this),immediateDataGetter:this.getImmediateData.bind(this),asyncDataGetter:this.getFreshData.bind(this)}}}e.RemoteStore=r},9104:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this.__listeners=null,this.__willBroadcastTo=null}__ensureListenerList(t){this.__listeners||(this.__listeners=new Map);let e=this.__listeners.get(t);return e||this.__listeners.set(t,e=[]),e}on(t,e,i){this.__ensureListenerList(t).push({listener:e,scope:i,once:!1})}once(t,e,i){this.__ensureListenerList(t).push({listener:e,scope:i,once:!0})}off(t,e,i){var n;let o=null===(n=this.__listeners)||void 0===n?void 0:n.get(t);if(o){for(let t=o.length-1;t>=0;t--){let n=o[t];n.listener!==e||i&&n.scope!==i||o.splice(t,1)}0===o.length&&this.__listeners.delete(t)}}hasListener(t,e,i){var n;let o=null===(n=this.__listeners)||void 0===n?void 0:n.get(t);if(o)for(let t=0,n=o.length;t<n;t++){let n=o[t];if(n.listener===e&&(!i||n.scope===i))return!0}return!1}hasListenerType(t){var e;let i=null===(e=this.__listeners)||void 0===e?void 0:e.get(t);return!!i&&i.length>0}emit(t,...e){var i;let n=null===(i=this.__listeners)||void 0===i?void 0:i.get(t);if(n)for(let t=0;t<n.length;t++){let i=n[t];!0===i.once&&n.splice(t--,1),i.listener.apply(i.scope,e)}}removeAllListeners(){this.__listeners=new Map}broadcastTo(t){this.__willBroadcastTo||(this.__willBroadcastTo=new Set),this.__willBroadcastTo.add(t)}unBroadcastTo(t){this.__willBroadcastTo||(this.__willBroadcastTo=new Set),this.__willBroadcastTo.delete(t)}}},9128:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.WatcherGroup=e.LazyWatcher=e.Watcher=void 0;var r=i(8116);Object.defineProperty(e,"Watcher",{enumerable:!0,get:function(){return r.Watcher}}),Object.defineProperty(e,"LazyWatcher",{enumerable:!0,get:function(){return r.LazyWatcher}});var s=i(6810);Object.defineProperty(e,"WatcherGroup",{enumerable:!0,get:function(){return s.WatcherGroup}}),o(i(1780),e)},9154:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.ModelBinding=void 0;const o=i(356),r=i(9856),s=i(3728),a=["lazy","number"];let l=e.ModelBinding=class{constructor(t,e,i){if(this.isBooleanValue=!1,this.isMultiSelect=!1,this.com=null,this.unwatch=null,!e)throw new ReferenceError('A context must be provided when using ":model=property"!');if(i){if(i.length>2)throw new Error(`Modifier "${i.join(".")}" is not allowed, at most two modifiers can be specified for ":model"!`);for(let t of i)if(!a.includes(t))throw new Error(`Modifier "${i}" is not allowed, it must be one of ${a.map((t=>`"${t}"`)).join(", ")}!`)}if(this.el=t,this.modifiers=i,this.context=e,this.isComModel=t.localName.includes("-"),this.isComModel)this.property="value",this.eventName="change";else{let e=["input","select","textarea"].includes(t.localName),n=i&&"lazy"===i[0];this.isBooleanValue="input"===t.localName&&("checkbox"===t.type||"radio"===t.type),this.isMultiSelect="select"===t.localName&&t.multiple,this.isBooleanValue?(this.property="checked",this.eventName="change"):e?(this.property="value",this.eventName=n?"change":"input"):(this.property="innerHTML",this.eventName=n?"blur":"input")}}update(t){if(!t||"string"!=typeof t)throw new Error(`"${t}" is not a valid model name!`);this.modelName=t,this.isComModel?this.com?this.updateComModel():(0,r.getComponentEarly)(this.el,(t=>{this.bindComModel(t),this.updateComModel()})):(this.updateElementModel(),this.watchContextModelValue())}bindComModel(t){this.com=t}updateComModel(){let t=this.com;t.hasOwnProperty("checked")&&"boolean"==typeof t.checked&&(this.property="checked"),t.on(this.eventName,this.assignModelValueToContext,this),this.watchContextModelValue()}watchContextModelValue(){this.unwatch&&this.unwatch(),this.unwatch=this.context.watchImmediately(this.getModelValueFromContext.bind(this),this.setModelValueToTarget.bind(this))}getModelValueFromContext(){let t=this.modelName.split("."),e=this.context;for(let i of t){if(!e||"object"!=typeof e){e=void 0;break}e=e[i]}return e}assignModelValueToContext(t){let e=this.modelName.split("."),i=this.context;for(let n=0;n<e.length;n++){let o=e[n];if(!i||"object"!=typeof i)break;n<e.length-1?i=i[o]:i[o]=t}}updateElementModel(){(0,s.on)(this.el,this.eventName,this.onEventInputOrChange.bind(this))}onEventInputOrChange(t){let e,i=this.modifiers&&this.modifiers.includes("number");this.isMultiSelect?(e=Array.from(this.el.options).filter((t=>t.selected)).map((t=>t.value)),i&&(e=e.map(Number))):(e=this.el[this.property],i&&(e=Number(e))),this.assignModelValueToContext(e)}setModelValueToTarget(t){if(this.isComModel){let e=this.com;e[this.property]!==t&&(e[this.property]=t)}else this.setInputValue(t)}setInputValue(t){if(this.isMultiSelect&&!Array.isArray(t))throw new Error(`:model="${this.modelName}" of select[multiple] requires an array as value!`);if(this.isMultiSelect)for(let e of this.el.options)e.selected=t.includes(e.value);else{let e=this.el;t=null==t?"":t,e[this.property]!==t&&(e[this.property]=t)}}remove(){this.setInputValue("")}};e.ModelBinding=l=n([(0,o.defineBinding)("model")],l)},9181:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Weak2WayMap=void 0,e.Weak2WayMap=class{constructor(){this.lm=new WeakMap,this.rm=new WeakMap}updateFromLeft(t,e){let i=this.lm.get(t);if(i){for(let n of e)i.has(n)||this.addRightLeftMap(n,t);for(let n of i)e.has(n)||this.deleteRightLeftMap(n,t)}else for(let i of e)this.addRightLeftMap(i,t);this.lm.set(t,e)}addRightLeftMap(t,e){let i=this.rm.get(t);i||(i=new Set,this.rm.set(t,i)),i.add(e)}deleteRightLeftMap(t,e){let i=this.rm.get(t);i&&i.delete(e)}deleteLeftRightMap(t,e){let i=this.lm.get(t);i&&i.delete(e)}getFromRight(t){return this.rm.get(t)}clearFromLeft(t){let e=this.lm.get(t);if(e)for(let i of e)this.deleteRightLeftMap(i,t),this.deleteLeftRightMap(t,i)}}},9184:(t,e)=>{function i(t,e=0){if(t<0)return-i(-t,e);if(0===t)return 0;if(e>0){let i=Math.pow(10,e);return Math.round(t/i)*i}{let i=Math.pow(10,-e);return Math.round(t*i)/i}}Object.defineProperty(e,"__esModule",{value:!0}),e.constrain=e.mod=e.toPrecision=e.toPower=e.toDecimal=void 0,e.toDecimal=function(t,e=0){return i(t,-e)},e.toPower=i,e.toPrecision=function(t,e=1){return Number(t.toPrecision(e))},e.mod=function(t,e){return(t%e+Math.abs(e))%e},e.constrain=function(t,e,i){return e>i&&([e,i]=[i,e]),t<e?t=e:t>i&&(t=i),t}},9213:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"radio-unchecked",code:'<svg viewBox="0 0 17 17"><circle style="fill:none;stroke:currentColor;" cx="8.5" cy="8.5" r="8"/></svg>'}},9306:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"refresh",code:'<svg viewBox="0 0 20 20"><path style="fill:none;stroke:#333333;stroke-linejoin:round;" d="M13.8,15.7c-3.2,2.7-7.9,2.3-10.6-0.9S1,6.9,4.2,4.3S12.1,2,14.7,5.2c1.1,1.3,1.8,3.1,1.8,4.8"/><path style="fill:none;stroke:#333333;" d="M18.5,6.5l-2,3.5l-3-2.5"/></svg>'}},9549:(t,e)=>{function i(t,e){return"number"==typeof e&&/(?:width|height|left|right|top|bottom|size)$/i.test(t)?e+="px":e=e.toString(),e}Object.defineProperty(e,"__esModule",{value:!0}),e.normativeStyleObject=e.normativeStyleValue=void 0,e.normativeStyleValue=i,e.normativeStyleObject=function(t){for(let e of Object.keys(t))t[e]=i(e,t[e]);return t}},9611:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;const o=i(1416);let r=class extends o.Component{constructor(){super(...arguments),this.prefix="",this.path="",this.state=null,this.normalPath="",this.popupPath=null,this.stackedPopupCount=0,this.histiryIdSeed=0}onCreated(){(0,o.on)(window,"popstate",this.onWindowStateChange,this)}getPathFromUri(t){let e=new URL(t).pathname;return this.getUnPrefixedPath(e)}getUnPrefixedPath(t){return this.prefix&&t.startsWith(this.prefix)&&(t=t.slice(this.prefix.length)),t||(t="/"),t}onDisconnected(){(0,o.off)(window,"popstate",this.onWindowStateChange,this)}onWindowStateChange(t){t.state&&(this.state&&(this.state.id>t.state.id&&this.state.asPopupPath&&this.stackedPopupCount--,this.state.id<t.state.id&&t.state.asPopupPath&&this.stackedPopupCount++),this.handleRedirectToState(t.state))}route(t,e,i={}){let n;if(this.isMatch(t)){i.title&&(document.title=i.title);let o=this.matchPath(t);n=t instanceof RegExp?e(null==o?void 0:o.captures):e(null==o?void 0:o.params)}else n="";return i.cache?(0,o.cache)(n):n}isMatch(t){return s.isMatch(this.normalPath,t)||!(!this.popupPath||!s.isMatch(this.popupPath,t))}isPathMatch(t,e){return s.isMatch(t,e)}matchPath(t){return s.isMatch(this.normalPath,t)?s.matchPath(this.normalPath,t):this.popupPath&&s.isMatch(this.popupPath,t)?s.matchPath(this.popupPath,t):null}goto(t,e=!1){if(t===this.path)return;let i={id:this.histiryIdSeed++,path:t,asPopupPath:e};this.handleGotoState(i)}handleGotoState(t){t.asPopupPath?(this.popupPath=t.path,this.stackedPopupCount++):(this.normalPath=t.path,this.popupPath=null,this.stackedPopupCount=0);let e=this.state;this.path=t.path,this.state=t,this.pushHistoryState(t),this.emit("goto",this.state,e),this.emit("goOrRedirectTo",this.state,e)}pushHistoryState(t){let e=this.getURIFromPath(t.path);history.pushState(t,"",e)}pushHistory(t,e=!1){let i={id:this.histiryIdSeed++,path:t,asPopupPath:e};this.pushHistoryState(i)}redirectTo(t,e=!1){if(t===this.path)return;let i={id:this.histiryIdSeed++,path:t,asPopupPath:e};this.handleRedirectToState(i)}handleRedirectToState(t){t.asPopupPath?this.popupPath=t.path:(this.normalPath=t.path,this.popupPath=null,this.stackedPopupCount=0);let e=this.state;this.path=t.path,this.state=t,this.replaceHistoryState(t),this.emit("redirectTo",t,e),this.emit("goOrRedirectTo",t,e)}replaceHistoryState(t){let e=this.getURIFromPath(t.path);history.replaceState(t,"",e)}replaceHistory(t,e=!1){let i={id:this.histiryIdSeed++,path:t,asPopupPath:e};this.replaceHistoryState(i)}clearPopupStack(){this.stackedPopupCount>0&&history.go(-this.stackedPopupCount),this.stackedPopupCount=0,this.popupPath=null}getURIFromPath(t){return t||(t="/"),this.prefix&&(t=this.prefix+t),t}};var s;r=n([(0,o.define)("f-router")],r),e.Router=r,function(t){const e=new Map;function i(t){return e.has(t)?e.get(t):function(t){let i=[],n={re:new RegExp(t.replace(/\./g,"\\.").replace(/\*/g,".*?").replace(/(\/):(\w+)/g,(function(t,e,n){return n&&i.push(n),e+"([\\w-]+)"})).replace(/^/,"^").replace(/$/,"$"),"i"),keys:i};return e.set(t,n),n}(t)}t.isMatch=function(t,e){let n;return n="string"==typeof e?i(e).re:e,n.test(t)},t.matchPath=function(t,e){let n={},o=[];if("string"==typeof e){let{re:o,keys:r}=i(e),s=t.match(o);if(!s)return null;if(r)for(let t=0;t<r.length;t++)n[r[t]]=s[t+1]}else{let i=t.match(e);if(!i)return null;o=[...i]}return{params:n,captures:o}}}(s||(s={}))},9649:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cache=e.CacheDirective=void 0;const n=i(5428),o=i(4511),r=i(5400);class s{constructor(t,e){this.templates=[],this.currentTemplate=null,this.anchor=t,this.context=e,this.transition=new r.ContextualTransition(e)}canPatchBy(){return!0}patch(t,e){if(this.transition.updateOptions(e),t)if(this.currentTemplate&&this.currentTemplate.canPatchBy(t))this.currentTemplate.patch(t);else{this.currentTemplate&&this.movesOutCurrentTemplate();let e=this.templates.find((e=>e.canPatchBy(t)));e?(e.patch(t),this.anchor.insert(e.extractToFragment()),this.tryPlayEnterTransition(e),this.currentTemplate=e):this.makeNewTemplate(t)}else this.currentTemplate&&this.movesOutCurrentTemplate()}async movesOutCurrentTemplate(){let t=this.currentTemplate,e=!1;if(this.transition.shouldPlayLeave()){let i=t.getFirstElement();i&&(this.transition.playLeave(i).then((e=>{e&&t.movesOut()})),e=!0)}e||t.movesOut(),this.currentTemplate=null}makeNewTemplate(t){let e=new o.Template(t,this.context);this.anchor.insert(e.extractToFragment()),this.tryPlayEnterTransition(e),this.currentTemplate=e,this.templates.push(e)}async tryPlayEnterTransition(t){if(this.transition.shouldPlayEnter()){let e=t.getFirstElement();e&&await this.transition.playEnter(e)}}remove(){this.currentTemplate&&this.currentTemplate.remove()}}e.CacheDirective=s,e.cache=(0,n.defineDirective)(s)},9749:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extendsTemplateResult=void 0;const n=i(8830),o=i(6622),r=i(2855),s=i(1111),a=new Map;function l(t,e){return t.splice(e,d(t,e)+1-e)}function h(t,e){return t.splice(e+1,d(t,e)-1-e)}function d(t,e){let i=1;for(let n=e+1;n<t.length;n++){let e=t[n];switch(e.type){case o.HTMLTokenType.StartTag:e.selfClose||i++;break;case o.HTMLTokenType.EndTag:if(i--,0===i)return n}}return t.length-1}e.extendsTemplateResult=function(t,e){let i,d=[...t.values,...e.values],c=(0,s.joinWithOrderMarkers)(t.strings),u=(0,s.joinWithOrderMarkers)(e.strings,t.values.length),p=a.get(c);p&&(i=p.get(u)),i||(i=function(t,e){let i=(0,o.parseToHTMLTokens)(t),{attributes:r,slots:d,restTokens:c}=function(t){let e=t.findIndex((t=>t.type===o.HTMLTokenType.StartTag)),i=t.length-1,n=0,r=t[e].attributes,s={},a=[];for(let e=0;e<t.length;e++){let r=t[e];switch(r.type){case o.HTMLTokenType.StartTag:if(/slot\s*=\s*['"](\w+)/.test(r.attributes)){let i=r.attributes.match(/slot\s*=\s*['"](\w+)/)[1],n=l(t,e);s[i]=s[i]||[],s[i].push(...n),e--}else r.selfClose||n++;break;case o.HTMLTokenType.EndTag:n--,0===n&&(i=e+1)}}return i-e>2&&(a=t.slice(e+1,i-1)),{attributes:r,slots:s,restTokens:a}}(i),u=function(t){let e=(0,o.parseToHTMLTokens)(t),i=e[0];return i&&i.type===o.HTMLTokenType.StartTag&&"template"===i.tagName||(e.unshift({type:o.HTMLTokenType.StartTag,tagName:"template",attributes:""}),e.push({type:o.HTMLTokenType.EndTag,tagName:"template"})),e}(e);(function(t,e){t[0].attributes=(0,n.joinHTMLAttributes)(t[0].attributes,e)})(u,r),function(t,e,i){if(Object.keys(e).length>0||i.length>0)for(let n=0;n<t.length;n++){let r=t[n];if(r.type===o.HTMLTokenType.StartTag&&"slot"===r.tagName){let o=r.attributes.match(/name\s*=\s*['"](\w+)/),s=o?o[1]:null;if(s){if(e[s]){let i=e[s];h(t,n),t.splice(n+1,0,...i),n+=i.length}}else i.length&&(l(t,n),t.splice(n,0,...i),n+=i.length)}}}(u,d,c);let p=(0,s.splitByOrderMarkers)((0,o.joinHTMLTokens)(u)),m=a.get(t);return m||(m=new Map,a.set(t,m)),m.set(e,p),p}(c,u));let{strings:m,valueIndices:g}=i,f=g.map((t=>d[t]));return new r.TemplateResult(t.type,m,f)}},9771:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;const o=i(1416),r=i(8240),s=i(5499),a=i(6585);let l=class extends o.Component{constructor(){super(...arguments),this.vertical=!1,this.min=0,this.max=100,this.step=1,this.value=0,this.decimalCount=null,this.draging=!1}static style(){let{mainColor:t,borderColor:e,adjust:i,adjustFontSize:n,focusBlurRadius:s,backgroundColor:a}=r.theme,l=2*Math.ceil(i(7))+1;return o.css`
		:host{
			display: inline-flex;
			vertical-align: top;
			flex-direction: column;
			justify-content: center;
			position: relative;
			width: ${i(150)}px;
			height: ${i(28)}px;
			font-size: ${n(13)}px;
			cursor: pointer;

			&:focus .ball{
				box-shadow: 0 0 ${s}px ${t};
				border-color: ${t};
			}
		}

		.groove{
			position: relative;
			height: ${1}px;
		}

		.groove-bg{
			position: absolute;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background: ${e};
		}
	
		.progress{
			position: relative;
			background: ${t};
			height: 100%;
		}
	
		.ball{
			position: absolute;
			top: -${(l-1)/2}px;
			margin-left: -${Math.round(l/2)}px;
			will-change: top, left;
			border-radius: 50%;
			border: 1px solid ${e};
			background: ${a};
			float: right;
			width: ${l}px;
			height: ${l}px;

			&:hover{
				border-color: ${t};
			}
		}

		.dragging{
			.ball{
				border-color: ${t.darken(10)};
				background: ${t.darken(10)};
			}
		}

		.vertical{
			width: ${i(30)}px;
			height: ${i(150)}px;
			flex-direction: row;

			.groove{
				width: ${1}px;
				height: 100%;
			}

			.progress{
				position: absolute;
				bottom: 0;
				width: 100%;
				height: 0;
			}

			.ball{
				margin: -${Math.round(l/2)}px -${(l-1)/2}px;
			}
		}

		.tooltip{
			font-family: consolas;
			font-size: ${n(14)}px;
		}
		`}render(){let t=(0,a.tooltip)(this.renderTooltipContent(),{alignTo:()=>this.refElements.ball,alignPosition:this.vertical?"r":"t",keepVisible:this.draging}),e={};this.vertical?e.height=this.getPercent()+"%":e.width=this.getPercent()+"%";let i={};return this.vertical?i.top=100-this.getPercent()+"%":i.left=this.getPercent()+"%",o.html`
			<template
				tabindex="0"
				:class.vertical=${this.vertical}
				:class.dragging=${this.draging}
				${t}
				@mousedown=${this.onMouseDown}
				@focus=${this.onFocus}
				@blur=${this.onBlur}
			>
				<div class="groove" :refElement="groove">
					<div class="groove-bg" />
					<div class="progress" :style=${e} />
					<div class="ball" :refElement="ball" :style=${i} />
				</div>
				
			</template>
		`}renderTooltipContent(){let t=this.decimalCount;null===t&&(t=String(this.step).replace(/^\d+\.?/,"").length);let e=this.value.toFixed(t);return o.html`<span class="${this.scopeClassName("tooltip")}">${e}</span>`}getPercent(){if(this.value===this.min)return 0;let t=(this.value-this.min)/(this.max-this.min)*100;return(0,s.constrain)(t,0,100)}onMouseDown(t){let e=(0,s.getRect)(this.refElements.groove);s.MouseLeave.lock(this.el),this.draging=!0,t.target.matches(this.scopeClassName(".ball"))||this.changeValueByEvent(t,e);let i=t=>{t.preventDefault(),this.changeValueByEvent(t,e)};(0,o.on)(document,"mousemove",i),(0,o.once)(document,"mouseup",(()=>{s.MouseLeave.unlock(this.el),(0,o.off)(document,"mousemove",i),this.draging=!1,this.emit("dragend")})),this.emit("dragstart")}changeValueByEvent(t,e){let i;i=this.vertical?(0,s.constrain)(1-(t.clientY-e.top)/e.height,0,1):(0,s.constrain)((t.clientX-e.left)/e.width,0,1);let n=(this.max-this.min)*i;this.step&&(n=Math.round(n/this.step)*this.step);let o=this.value,r=(0,s.toDecimal)(this.min+n,4);r!==o&&this.emit("change",this.value=r)}onWheel(t){if(!this.step||document.activeElement!==this.el)return;let e;e=t.deltaY<0&&this.vertical||t.deltaY>0&&!this.vertical?(0,s.toDecimal)(Math.min(this.value+this.step,this.max),4):(0,s.toDecimal)(Math.max(this.value-this.step,this.min),4),e!==this.value&&this.emit("change",this.value=e)}onFocus(){this.onBlur(),(0,o.on)(document,"keydown",this.onKeyDown,this),(0,o.on)(document,"wheel.prevent",this.onWheel,this)}onKeyDown(t){let e;this.vertical?"ArrowUp"===t.key?(t.preventDefault(),e=Math.min(this.value+this.step,this.max)):"ArrowDown"===t.key&&(t.preventDefault(),e=Math.max(this.value-this.step,this.min)):"ArrowLeft"===t.key?(t.preventDefault(),e=Math.max(this.value-this.step,this.min)):"ArrowRight"===t.key&&(t.preventDefault(),e=Math.min(this.value+this.step,this.max)),"Escape"===t.key&&(t.preventDefault(),this.el.blur()),void 0!==e&&e!==this.value&&this.emit("change",this.value=e)}onBlur(){(0,o.off)(document,"keydown",this.onKeyDown,this),(0,o.off)(document,"wheel",this.onWheel,this)}};l=n([(0,o.define)("f-slider")],l),e.Slider=l},9782:function(t,e,i){var n=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.Popup=void 0;const o=i(1416),r=i(8240),s=i(6741);let a=class extends o.Component{constructor(){super(...arguments),this.defaultPopupOptions=null,this.binding=null,this.herizontal=!1,this.triangle=!0,this.appendTo="body"}static style(){let{popupBorderRadius:t,popupBackgroundColor:e,popupShadowBlurRadius:i,popupShadowColor:n,adjust:s}=r.theme,a=s(14),l=s(9),h=s(11);return o.css`
		:host{
			position: absolute;
			left: 0;
			top: 0;

			// Same with window, so if in window, we must move it behind the window
			z-index: 1000;

			background: ${e};
			border-radius: ${t}px;

			// 3px drop shadow nearly equals 6px in box-shadow.
			filter: drop-shadow(0 0 ${i/2}px ${n});
		}

		.triangle{
			// Triangle should set "top" position, not others.
			position: absolute;
			border-left: ${a/2}px solid transparent;
			border-right: ${a/2}px solid transparent;
			border-bottom: ${l}px solid ${e};
			top: -${l}px;
			left: ${h}px;	// 11 + 5 = 16

			&-herizontal{
				border-top: ${a/2}px solid transparent;
				border-bottom: ${a/2}px solid transparent;
				border-right: ${l}px solid ${e};
				border-left: 0;
				top: ${h}px;
				left: -${l}px;
			}
		}
		`}render(){return o.html`
			<template tabindex="0">
				${this.triangle?o.html`
					<div class="triangle" :refElement="triangle" :class.triangle-herizontal=${this.herizontal} />
				`:""}
				<slot />
			</template>
		`}onConnected(){this.applyAppendTo()}setBinding(t){this.binding=t}applyAppendTo(){this.appendTo&&(0,s.appendTo)(this.el,this.appendTo)}close(){this.binding?this.binding.hidePopupLater():this.el.remove()}getTriggerElement(){var t;return(null===(t=this.binding)||void 0===t?void 0:t.getTriggerElement())||null}};a=n([(0,o.define)("f-popup")],a),e.Popup=a},9856:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createComponent=e.define=e.updateAllStyles=e.addGlobalStyle=e.updateAllComponents=e.getClosestComponentEarly=e.getComponentEarly=e.getClosestComponentOfType=e.getComponentAsync=e.getComponent=e.Component=void 0;var n=i(2255);Object.defineProperty(e,"Component",{enumerable:!0,get:function(){return n.Component}});var o=i(8231);Object.defineProperty(e,"getComponent",{enumerable:!0,get:function(){return o.getComponent}}),Object.defineProperty(e,"getComponentAsync",{enumerable:!0,get:function(){return o.getComponentAsync}}),Object.defineProperty(e,"getClosestComponentOfType",{enumerable:!0,get:function(){return o.getClosestComponentOfType}}),Object.defineProperty(e,"getComponentEarly",{enumerable:!0,get:function(){return o.getComponentInCallback}}),Object.defineProperty(e,"getClosestComponentEarly",{enumerable:!0,get:function(){return o.getClosestComponentInCallback}});var r=i(967);Object.defineProperty(e,"updateAllComponents",{enumerable:!0,get:function(){return r.updateAllComponents}});var s=i(3393);Object.defineProperty(e,"addGlobalStyle",{enumerable:!0,get:function(){return s.addGlobalStyle}}),Object.defineProperty(e,"updateAllStyles",{enumerable:!0,get:function(){return s.updateAllStyles}});var a=i(589);Object.defineProperty(e,"define",{enumerable:!0,get:function(){return a.define}}),Object.defineProperty(e,"createComponent",{enumerable:!0,get:function(){return a.createComponent}})},9857:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const n={id:"search",code:'<svg viewBox="0 0 15 15"><line style="fill:none;stroke:currentColor;stroke-linecap:round;" x1="10" y1="10" x2="14.3" y2="14.3"/><ellipse style="fill:none;stroke:currentColor;stroke-width:1;stroke-miterlimit:9.9999;" cx="6.5" cy="6.5" rx="5" ry="5"/></svg>'}},9889:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TreeDataNavigator=void 0,function(t){function e(t,e){let i=!1;for(;e.length>0;){let o=n(t,e);if(o){e[e.length-1]>=o.length&&(e[e.length-1]=o.length-1,i=!0);break}e.pop(),i=!0}return i}function i(t,e){if(!e)return;let i,n=t;for(let t of e){if(!n){i=void 0;break}t>=0&&t<n.length&&(i=n[t],n=i.opened&&i.children||null)}return i}function n(t,e){if(1===e.length)return t;let n=i(t,e.slice(0,-1));return(null==n?void 0:n.opened)&&(null==n?void 0:n.children)?null==n?void 0:n.children:null}function o(t,e){if(0===e.length)return t;let n=i(t,e);return(null==n?void 0:n.opened)?null==n?void 0:n.children:null}t.moveArrowUp=function(t,i){if(0===t.length)return[];if(0===i.length&&(i=[0]),e(t,i))return i;if(i[i.length-1]<=0){if(i.pop(),0===i.length)for(;;){let e=o(t,i);if(!(e&&e.length>0))break;i.push(e.length-1)}}else for(i[i.length-1]--;;){let e=o(t,i);if(!(e&&e.length>0))break;i.push(e.length-1)}return i},t.moveArrowDown=function(t,i){var r;if(0===t.length)return[];if(0===i.length)return[0];if(e(t,i))return i;if(((null===(r=o(t,i))||void 0===r?void 0:r.length)||0)>0)i.push(0);else{for(;i.length>0;){if(i[i.length-1]<n(t,i).length-1){i[i.length-1]++;break}i.pop()}0===i.length&&(i=[0])}return i},t.moveArrowLeft=function(t,i){return 0===t.length||0===i.length?[]:(i.length>0&&i.pop(),e(t,i),i)},t.moveArrowRight=function(t,i){return 0===t.length||0===i.length?[]:(i.push(0),e(t,i),i)},t.correctIndices=e,t.getItemByIndices=i}(e.TreeDataNavigator||(e.TreeDataNavigator={}))}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};i.r(n),i.d(n,{Color:()=>f,EventFirer:()=>k,cleanHTMLWhiteSpaces:()=>tn,decodeHtml:()=>Xi,encodeHtml:()=>Ji,formatKatexString:()=>Wn,formatKatexStringAsync:()=>Fn,getCommonTextSelectionStyle:()=>Bn,htmlToText:()=>Zi,textToHTML:()=>qi,throttleByFrame:()=>cn});var o=i(1416),r=i(1919);let s=navigator.userAgent,a=/iPad|PlayBook/i.test(s)||/Android/i.test(s)&&!/Mobile/i.test(s)||/Firefox/i.test(s)&&/Tablet/i.test(s)||/iPad/i.test(s),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s)||a;const h=/Windows/i.test(s)?"win":/Mac OS/i.test(s)?"mac":/Linux/i.test(s)?"linux":"unknown",d=(/MSIE|Trident/i.test(s),/Firefox/i.test(s)),c=(/Edge/i.test(s),/Chrome/i.test(s),/Safari/i.test(s)&&!/Chrome/i.test(s)),u=/iPad/i.test(s),p=/iPhone|iPad|iPod/i.test(s),m=(/Android/i.test(s),l),g=matchMedia("(pointer:fine)").matches;/Electron/i.test(s);class f{static fromString(t){let e=null;if("transparent"===t&&(e={r:0,g:0,b:0,a:0}),/^#[0-9a-f]{3,8}$/i.test(t))e=y.parseHex(t);else if(/^(rgba?)/i.test(t))e=y.parseRGBA(t);else if(/^(hsla?)/i.test(t)){let i=y.parseHSLA(t);i&&(e=y.HSLA2RGBA(i))}if(e){let{r:t,g:i,b:n,a:o}=e;return new f(t,i,n,o)}return null}static fromHSL(t,e,i){let n=y.HSLA2RGBA({h:t,s:e,l:i,a:1}),{r:o,g:r,b:s,a}=n;return new f(o,r,s,a)}static fromHSLA(t,e,i,n){let o=y.HSLA2RGBA({h:t,s:e,l:i,a:n}),{r,g:s,b:a}=o;return new f(r,s,a,n)}static fromRGB(t,e,i){return new f(t,e,i)}static fromRGBA(t,e,i,n){return new f(t,e,i,n)}static improveContrast(t,e,i=20,n=.5){if("transparent"===t||"none"===t)return t;let o=f.fromString(t),r=f.fromString(e);if(!o||!r)return t;let s=y.RGBA2HSLA(o),a=y.RGBA2HSLA(r),l=i-Math.abs(s.l-a.l);return l<=0?t:(s.l>a.l?(s.l+=l,s.l>100&&(s.l=l>i*n?a.l-i:100)):(s.l-=l,s.l<0&&(s.l=l>i*n?a.l+i:0)),f.fromHSLA(s.h,s.s,s.l,o.a).toString())}static stringEquals(t,e){return String(f.fromString(t))===String(f.fromString(e))}constructor(t,e,i,n=1){t=Math.min(Math.max(0,t),255),e=Math.min(Math.max(0,e),255),i=Math.min(Math.max(0,i),255),this.r=t,this.g=e,this.b=i,this.a=n}clone(){let{r:t,g:e,b:i,a:n}=this;return new f(t,e,i,n)}toRGB(){let{r:t,g:e,b:i}=this;return`rgb(${Math.round(t)}, ${Math.round(e)}, ${Math.round(i)})`}toRGBA(){let{r:t,g:e,b:i,a:n}=this;return`rgba(${Math.round(t)}, ${Math.round(e)}, ${Math.round(i)}, ${n})`}toHEX(){let{r:t,g:e,b:i,a:n}=this;return 1===this.a?"#"+[t,e,i,n].map((t=>t.toString(16).padStart(2,"0"))).join(""):"#"+[t,e,i].map((t=>t.toString(16).padStart(2,"0"))).join("")}toHSL(){let{r:t,g:e,b:i,a:n}=this,o=y.RGBA2HSLA({r:t,g:e,b:i,a:n}),{h:r,s,l:a}=o;return`hsl(${r}, ${s}%, ${a}%)`}toHSLA(){let{r:t,g:e,b:i,a:n}=this,o=y.RGBA2HSLA({r:t,g:e,b:i,a:n}),{h:r,s,l:a}=o;return`hsl(${r}, ${s}%, ${a}%, ${n})`}getAverageGray(){return(this.r+this.g+this.b)/3}darken(t){return this.lighten(-t)}lighten(t){let{r:e,g:i,b:n,a:o}=this,r=t/100*255;return e+=r,i+=r,n+=r,new f(e,i,n,o)}mix(t,e){return new f(this.r*(1-e)+t.r*e,this.g*(1-e)+t.g*e,this.b*(1-e)+t.b*e,this.a*(1-e)+t.a*e)}toString(){return 1===this.a?this.toRGB():this.toRGBA()}}var y;!function(t){function e(t,e,i){return i<1?(e-t)*i+t:i<3?e:i<4?(e-t)*(4-i)+t:t}t.parseHex=function(t){return/^#([0-9a-f]{3}|[0-9a-f]{6}||[0-9a-f]{8})$/i.test(t)?4===t.length?{r:17*parseInt(t[1],16),g:17*parseInt(t[2],16),b:17*parseInt(t[3],16),a:1}:7===t.length?{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}:{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}:null},t.parseRGBA=function(e){let i=e.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return i?{r:Number(i[1]),g:Number(i[2]),b:Number(i[3]),a:1}:(i=e.match(/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)$/i),i?{r:Number(i[1]),g:Number(i[2]),b:Number(i[3]),a:Number(i[4])}:(i=e.match(/^rgba\(\s*(#[0-9a-fA-F]{3,6})\s*,\s*([\d.]+)\s*\)$/i),i?{...t.parseHex(i[1]),a:Number(i[2])}:null))},t.parseHSLA=function(t){let e=t.match(/^hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)$/i);return e?{h:Number(e[1]),s:Number(e[2]),l:Number(e[3]),a:1}:(e=t.match(/^hsla\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*([\d.]+)\s*\)$/i),e?{h:Number(e[1]),s:Number(e[2]),l:Number(e[3]),a:Number(e[4])}:null)},t.HSLA2RGBA=function(t){let i=t.h/60,n=t.s/100,o=t.l/100,r=t.a,s=o<=.5?o*(n+1):o+n-o*n,a=2*o-s;return{r:255*e(a,s,(i+2)%6),g:255*e(a,s,i),b:255*e(a,s,(i-2+6)%6),a:r}},t.RGBA2HSLA=function(t){let e=t.r/255,i=t.g/255,n=t.b/255,o=t.a,r=Math.min(Math.min(e,i),n),s=Math.max(Math.max(e,i),n),a=(r+s)/2,l=r==s?0:(s-r)/(a<=.5?r+s:2-r-s),h=0;return 0==l||(e==s?h=((i-n)/(s-r)+6)%6:i==s?h=(n-e)/(s-r)+2:n==s&&(h=(e-i)/(s-r)+4)),{h:60*h,s:100*l,l:100*a,a:o}}}(y||(y={}));class x{constructor(t,e){this.options=t,this.defaultOptions=e}getOptions(){return this.options}has(t){return this.options.hasOwnProperty(t)}get(t){var e;return null!==(e=this.options[t])&&void 0!==e?e:this.defaultOptions[t]}set(t,e){return this.options[t]=e}}const w=new WeakMap;function v(t){return w.get(t)||null}class b{constructor(t,e,i={},n=null){this.propagationStopped=!1,this.defaultPrevented=!1,this.type=t,this.target=e,this.data=i,this.originalEvent=n}stopPropagation(){var t;null===(t=this.originalEvent)||void 0===t||t.stopPropagation(),this.propagationStopped=!0}preventDefault(){var t;null===(t=this.originalEvent)||void 0===t||t.preventDefault(),this.defaultPrevented=!0}}class k{constructor(){this.eventListeners=null,this.willBroadcastTo=null}__ensurelisteners(t){this.eventListeners||(this.eventListeners=new Map);let e=this.eventListeners.get(t);return e||this.eventListeners.set(t,e=[]),e}hasListeners(){return!!this.eventListeners&&this.eventListeners.size>0}hasListenerType(t){var e;return(null===(e=this.eventListeners)||void 0===e?void 0:e.has(t))||!1}on(t,e,i=null){for(let n of Array.isArray(t)?t:[t])this.__ensurelisteners(n).push({listener:e,scope:i,once:!1})}once(t,e,i=null){for(let n of Array.isArray(t)?t:[t])this.__ensurelisteners(n).push({listener:e,scope:i,once:!0})}off(t,e,i=null){if(this.eventListeners)for(let n of Array.isArray(t)?t:[t]){let t=this.eventListeners.get(n);if(t){for(let n=t.length-1;n>=0;n--){let o=t[n];o.listener!==e||i&&o.scope!==i||t.splice(n,1)}0===t.length&&this.eventListeners.delete(n)}}}fire(t,...e){var i;let n=null===(i=this.eventListeners)||void 0===i?void 0:i.get(t);if(n){n=[...n];for(let t=0;t<n.length;t++){let i=n[t];!0===i.once&&n.splice(t--,1),i.listener.apply(i.scope,e)}}let o=e.length>0&&e[0]instanceof b?e[0]:null,r=o&&o.propagationStopped;if(this.willBroadcastTo&&!r)for(let[i,n]of this.willBroadcastTo.entries()){let o=this.getMappedBroadcastType(t,n);o&&i.fire(o,...e)}}getMappedBroadcastType(t,e){var i;return e?Array.isArray(e)?e.includes(t)?t:null:null!==(i=e[t])&&void 0!==i?i:null:t}broadcastTo(t,e=null){this.willBroadcastTo||(this.willBroadcastTo=new Map),this.willBroadcastTo.set(t,e)}unBroadcastTo(t){this.willBroadcastTo&&this.willBroadcastTo.delete(t)}}function C(t,e=0){if(0===t)return 0;if(e>0){let i=Math.pow(10,e);return Math.round(t*i)/i}{let i=Math.pow(10,-e);return Math.round(t/i)*i}}function S(t){return t*Math.PI/180}function T(t){return 180*t/Math.PI}class M{static I(){return new M}static zero(){return new M(0,0,0,0)}static fromCoord(t,e){return new M(t.x,e.x,t.y,e.y)}constructor(t=1,e=0,i=0,n=1){this.set(t,e,i,n)}set(t,e,i,n){this.data=[t,i,e,n]}multiple(t){let[e,i,n,o]=this.data,[r,s,a,l]=t.data;return new M(e*r+i*a,e*s+i*l,n*r+o*a,n*s+o*l)}transfer2(t){let[e,i,n,o]=this.data,{x:r,y:s}=t;return new P(e*r+n*s,i*r+o*s)}getDetermint(){let[t,e,i,n]=this.data;return t*n-i*e}inverse(){let[t,e,i,n]=this.data,o=t*n-i*e;if(0===o)return M.zero();{let r=1/o;return new M(n*r,-i*r,-e*r,t*r)}}}class A{static fromCoord(t){return new A(t.x,t.y)}static fromAngle(t){return A.fromRadians(S(t))}static fromRadians(t){return new A(Math.cos(t),Math.sin(t))}constructor(t,e){this.x=t,this.y=e}add(t){let e=this.x+t.x,i=this.y+t.y;return new A(e,i)}minus(t){let e=this.x-t.x,i=this.y-t.y;return new A(e,i)}translate(t,e){return t+=this.x,e+=this.y,new A(t,e)}diff(t){let e=this.x-t.x,i=this.y-t.y;return new P(e,i)}mix(t,e){let i=this.x*(1-e)+t.x*e,n=this.y*(1-e)+t.y*e;return new A(i,n)}distanceTo(t){let e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}clone(){return new A(this.x,this.y)}equals(t){return this.x===t.x&&this.y===t.y}round(){return new A(Math.round(this.x),Math.round(this.y))}roundToHalf(){let{x:t,y:e}=this;return t=Math.round(t+.5)-.5,e=Math.round(e+.5)-.5,new A(t,e)}asVector(){return new P(this.x,this.y)}}class P{static fromDegree(t){return P.fromRadians(S(t))}static fromRadians(t){return new P(Math.cos(t),Math.sin(t))}static fromPoint(t){return new P(t.x,t.y)}static fromCoord(t){return new P(t.x,t.y)}constructor(t,e){this.x=t,this.y=e}getLengthSquare(){return this.x*this.x+this.y*this.y}getLength(){return Math.sqrt(this.getLengthSquare())}add(t){let e=this.x+t.x,i=this.y+t.y;return new P(e,i)}minus(t){let e=this.x-t.x,i=this.y-t.y;return new P(e,i)}dot(t){return this.x*t.x+this.y*t.y}projectTo(t){return t.multiplyScalar(this.dot(t)/t.getLengthSquare())}restAfterProjectTo(t){return this.minus(this.projectTo(t))}unProjectTo(t){let e=t.normalize(),i=this.normalize(),n=e.dot(i),o=this.getLength(),r=0===n?0:o/n;return e.multiplyScalar(r)}normalize(){let t=this.getLength(),e=0===t?0:1/t;return this.multiplyScalar(e)}multiplyScalar(t){let e=this.x*t,i=this.y*t;return new P(e,i)}negative(){return this.multiplyScalar(-1)}angleInDegree(){return T(this.angleInRadians())}angleInRadians(){return Math.atan2(this.y,this.x)}mix(t,e){let i=this.x*(1-e)+t.x*e,n=this.y*(1-e)+t.y*e;return new P(i,n)}divide(t){let e=t.x*t.x+t.y*t.y,i=new P(t.x,-t.y);return this.complexMultiply(i).multiplyScalar(1/e)}complexMultiply(t){return new P(this.x*t.x-this.y*t.y,this.x*t.y+this.y*t.x)}multiply(t){return new P(this.x*t.x,this.y*t.y)}rotateFromInRadians(t){return this.divide(t).angleInRadians()}rotateFromInDegree(t){return T(this.rotateFromInRadians(t))}rotateInDegree(t){return this.complexMultiply(P.fromDegree(t))}decompressToFactors(t,e){return M.fromCoord(t,e).inverse().transfer2(this)}decompress(t,e){let i=this.decompressToFactors(t,e);return[t.multiplyScalar(i.x),e.multiplyScalar(i.y)]}equals(t){return this.x===t.x&&this.y===t.y}round(){return new P(Math.round(this.x),Math.round(this.y))}roundToHalf(){let{x:t,y:e}=this;return t=Math.round(t+.5)-.5,e=Math.round(e+.5)-.5,new P(t,e)}clone(){return new P(this.x,this.y)}asPoint(){return new A(this.x,this.y)}}const D=["top","right","bottom","left"];function I(t,e){var i,n,o,r;return"top"===e?t[0]:"right"===e?null!==(i=t[1])&&void 0!==i?i:t[0]:"bottom"===e?null!==(n=t[2])&&void 0!==n?n:t[0]:"left"===e?null!==(r=null!==(o=t[3])&&void 0!==o?o:t[1])&&void 0!==r?r:t[0]:0}function E(...t){if(1===t.length)return t[0];{let e={top:0,right:0,bottom:0,left:0};for(let i of D)for(let n of t)e[i]=Mi(e[i],n[i]);return e}}function L(t,e,i){let n={top:0,right:0,bottom:0,left:0},o=N.toDirection4Keys(i),r=N.toDirection4Keys(N.getOpposite(i));for(let i of D)o.includes(i)||(n[i]=Mi(n[i],t[i])),r.includes(i)||(n[i]=Mi(n[i],e[i]));return n}function O(t){return{top:I(t,"top"),right:I(t,"right"),bottom:I(t,"bottom"),left:I(t,"left")}}function B(t){let{top:e,right:i,bottom:n,left:o}=t;return[e,i,n,o]}var R,N;!function(t){t[t.None=0]="None",t[t.Center=1]="Center",t[t.Left=2]="Left",t[t.Right=3]="Right",t[t.Top=4]="Top",t[t.Bottom=5]="Bottom",t[t.TopLeft=6]="TopLeft",t[t.BottomRight=7]="BottomRight",t[t.TopRight=8]="TopRight",t[t.BottomLeft=9]="BottomLeft"}(R||(R={})),function(t){function e(t){return t===R.Left?new P(-1,0):t===R.Right?new P(1,0):t===R.Top?new P(0,-1):t===R.Bottom?new P(0,1):t===R.TopLeft?new P(-1,-1):t===R.BottomRight?new P(1,1):t===R.TopRight?new P(1,-1):t===R.BottomLeft?new P(-1,1):t===R.Center?new P(0,0):new P(NaN,NaN)}function i(t){let e=C(t.x,2),i=C(t.y,2);return e<0&&i<0?R.TopLeft:e<0&&i>0?R.BottomLeft:e<0&&i<0?R.TopLeft:e>0&&i>0?R.BottomRight:e>0&&i<0?R.TopRight:e<0?R.Left:e>0?R.Right:i<0?R.Top:i>0?R.Bottom:0===e&&0===i?R.Center:R.None}function n(t){return t===R.Top||t===R.Bottom||t===R.Left||t===R.Right}function o(t){return t===R.Left?3:t===R.Right?1:t===R.Top?0:t===R.Bottom?2:null}function r(t){return t===R.Left?[3]:t===R.Right?[1]:t===R.Top?[0]:t===R.Bottom?[2]:t===R.TopLeft?[0,3]:t===R.BottomRight?[1,2]:t===R.TopRight?[0,1]:t===R.BottomLeft?[2,3]:[]}t.StraightDirections=[R.Left,R.Right,R.Top,R.Bottom],t.toVector=e,t.fromVector=i,t.straightFromVector=function(t){let e=Math.abs(t.x),i=Math.abs(t.y);return t.x<0&&e>=i?R.Left:t.x>0&&e>=i?R.Right:t.y<0&&e<=i?R.Top:t.y>0&&e<=i?R.Bottom:R.None},t.getHorizontalPart=function(t){let n=e(t);return n.y=0,i(n)},t.getVerticalPart=function(t){let n=e(t);return n.x=0,i(n)},t.getStraightPreferVertical=function(e){return t.isOblique(e)&&(e=t.getVerticalPart(e)),e},t.getStraightPreferHorizontal=function(e){return t.isOblique(e)&&(e=t.getHorizontalPart(e)),e},t.getHorizontalMirror=function(t){let n=e(t);return n.x=-n.x,i(n)},t.getVerticalMirror=function(t){let n=e(t);return n.y=-n.y,i(n)},t.getAnchorVector=function(t){let i=e(t),n=i.x/2+.5,o=i.y/2+.5;return new P(n,o)},t.isHorizontal=function(t){return t===R.Left||t===R.Right},t.isVertical=function(t){return t===R.Top||t===R.Bottom},t.isOblique=function(t){return t===R.TopLeft||t===R.TopRight||t===R.BottomLeft||t===R.BottomRight},t.isStraight=n,t.getOpposite=function(t){return t===R.Center||t===R.None?t:t%2==1?t-1:t+1},t.getPerpendicularPositive=function(t){if(!n(t))return R.None;let o=e(t);return i(new P(Math.abs(o.y),Math.abs(o.x)))},t.isPerpendicular=function(t,i){let n=e(t),o=e(i);return 0===n.dot(o)},t.splitToOrthogonalDirections=function(t){let n=e(t),o=n.rotateInDegree(45),r=n.rotateInDegree(-45);return[i(o),i(r)]},t.splitToBackDirections=function(t){let n=e(t),o=n.rotateInDegree(90),r=n.rotateInDegree(-90);return[i(o),i(r)]},t.joinDirections=function(t,n){let o=e(t),r=e(n);return i(o.add(r))},t.isOpposite=function(t,e){return t===R.Center&&e===R.Center||1===Math.abs(t-e)&&Math.min(t,e)%2==0},t.isCompatible=function(t,i){let n=e(t),o=e(i);return n.dot(o)>=0},t.isFaced=function(t,i){let n=e(t),o=e(i);return n.dot(o)<=0},t.isCloseWith=function(t,i){let n=e(t),o=e(i);return n.dot(o)>0},t.toStraightDirection4Key=function(t){let e=o(t);return null===e?null:D[e]},t.toDirection4Keys=function(t){return r(t).map((t=>D[t]))},t.toStraightDirection4Index=o,t.toDirection4Indices=r,t.toCursorStyle=function(e){return t.isHorizontal(e)?"ew-resize":t.isVertical(e)?"ns-resize":e===R.BottomLeft||e===R.TopRight?"nesw-resize":"nwse-resize"}}(N||(N={}));class _{static empty(){return new _(0,0,0,0)}static fromRect(t){return new _(t.x,t.y,t.width,t.height)}static fromPoints(...t){if(0===t.length)return null;let e=t[0].x,i=t[0].y,n=t[0].x,o=t[0].y;for(let r=1;r<t.length;r++){let s=t[r];e=Math.min(e,s.x),i=Math.min(i,s.y),n=Math.max(n,s.x),o=Math.max(o,s.y)}return new _(e,i,n-e,o-i)}static fromUnion(...t){if(0===t.length)return null;let e=t[0].left,i=t[0].top,n=t[0].right,o=t[0].bottom;for(let r of t)e=Math.min(e,r.left),i=Math.min(i,r.top),n=Math.max(n,r.right),o=Math.max(o,r.bottom);return new _(e,i,n-e,o-i)}constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return new A(this.x+this.width/2,this.y+this.height/2)}get centerX(){return this.x+this.width/2}get centerY(){return this.y+this.height/2}get topLeft(){return new A(this.left,this.top)}get topRight(){return new A(this.right,this.top)}get bottomLeft(){return new A(this.left,this.bottom)}get bottomRight(){return new A(this.right,this.bottom)}get area(){return this.width*this.height}round(){let{x:t,y:e,right:i,bottom:n}=this;return t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),new _(t,e,i-t,n-e)}roundToHalf(){let{x:t,y:e,right:i,bottom:n}=this;return t=Math.round(t+.5)-.5,e=Math.round(e+.5)-.5,i=Math.round(i+.5)-.5,n=Math.round(n+.5)-.5,new _(t,e,i-t,n-e)}union(t){let e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.right,t.right),o=Math.max(this.bottom,t.bottom);return new _(e,i,n-e,o-i)}intersect(t){let e=Math.max(this.left,t.left),i=Math.max(this.top,t.top),n=Math.min(this.right,t.right),o=Math.min(this.bottom,t.bottom);return e>n||i>o?new _(0,0,0,0):new _(e,i,n-e,o-i)}intersectWith(t){let e=Math.max(this.left,t.left),i=Math.max(this.top,t.top),n=Math.min(this.right,t.right),o=Math.min(this.bottom,t.bottom);return!(e>n||i>o)}leastIntersectWith(t,e){return this.intersect(t).area>=t.area*e}anchorPointAt(t){let e=N.getAnchorVector(t);return this.anchorPointByVector(e)}anchorPointByVector(t){let{x:e,y:i}=t;return new A(this.x+e*this.width,this.y+i*this.height)}expand(...t){let e=O(t);return this.expandWithObject(e)}expandWithObject(t){let{top:e,right:i,bottom:n,left:o}=t,r=this.x-o,s=this.y-e,a=this.width+i+o,l=this.height+e+n;return new _(r,s,a,l)}containsPoint(t){return this.x<=t.x&&this.right>=t.x&&this.y<=t.y&&this.bottom>=t.y}containsBox(t){return this.x<=t.x&&this.right>=t.right&&this.y<=t.y&&this.bottom>=t.bottom}expandToContain(t){let e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.right,t.x),o=Math.max(this.bottom,t.y);return new _(e,i,n-e,o-i)}translate(t,e){return new _(this.x+t,this.y+e,this.width,this.height)}isEmpty(){return this.width<=0||this.height<=0}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}clone(){return new _(this.x,this.y,this.width,this.height)}getCornerPoints(){let{top:t,right:e,bottom:i,left:n}=this;return[new A(n,t),new A(e,t),new A(e,i),new A(n,i)]}distanceToPoint(t){let e=t.x>=this.left&&t.x<=this.right,i=t.y>=this.top&&t.y<=this.bottom,n=e?0:Math.min(Math.abs(this.left-t.x),Math.abs(this.right-t.x)),o=i?0:Math.min(Math.abs(this.top-t.y),Math.abs(this.bottom-t.y));return new P(n,o).getLength()}distanceDirectionToBoxLike(t,e){let i=this.distanceDirectionToBox(t);return N.isCloseWith(i,e)}distanceDirectionToBox(t){let e=this.distanceVectorToBox(t);return N.fromVector(e)}distanceToBox(t){return this.distanceVectorToBox(t).getLength()}distanceVectorToBox(t){let{left:e,right:i,top:n,bottom:o}=this,{left:r,right:s,top:a,bottom:l}=t,h=0,d=0;return e>=s?h=s-e:r>=i&&(h=r-i),n>=l?d=l-n:a>=o&&(d=a-o),new P(h,d)}distanceAtDirection(t,e){let i=this.anchorPointAt(e);return t.anchorPointAt(N.getOpposite(e)).diff(i).dot(N.toVector(e).normalize())}unionAtDirection(t,e){let{left:i,top:n,right:o,bottom:r}=this;return e===R.Left?i=Math.min(i,t.x):e===R.Right?o=Math.max(o,t.right):e===R.Top?n=Math.min(n,t.y):e===R.Bottom&&(r=Math.max(r,t.bottom)),new _(i,n,o-i,r-n)}unionAtHVDirection(t,e){let{left:i,top:n,right:o,bottom:r}=this;return"horizontal"===e?(i=Math.min(i,t.x),o=Math.max(o,t.right)):(n=Math.min(n,t.y),r=Math.max(r,t.bottom)),new _(i,n,o-i,r-n)}}const z=new Map;function F(t,e){z.set(t,e)}function W(t){let e=z.get(t);if(!e)throw new Error(`Can't create knode instance at "<${t}>"!`);return e}const $={8:{key:"Backspace",code:"Backspace"},9:{key:"Tab",code:"Tab"},12:{key:"Clear",code:"NumLock"},13:{key:"Enter",code:"Enter"},17:{key:"Control",code:"ControlLeft"},18:{key:"Alt",code:"AltLeft"},20:{key:"CapsLock",code:"CapsLock"},27:{key:"Escape",code:"Escape"},32:{key:" ",code:"Space"},33:{key:"PageUp",code:"PageUp"},34:{key:"PageDown",code:"PageDown"},35:{key:"End",code:"End"},36:{key:"Home",code:"Home"},37:{key:"ArrowLeft",code:"ArrowLeft"},38:{key:"ArrowUp",code:"ArrowUp"},39:{key:"ArrowRight",code:"ArrowRight"},40:{key:"ArrowDown",code:"ArrowDown"},45:{key:"Insert",code:"Insert"},46:{key:"Delete",code:"Delete"},48:{key:"0",code:"Digit0"},49:{key:"1",code:"Digit1"},50:{key:"2",code:"Digit2"},51:{key:"3",code:"Digit3"},52:{key:"4",code:"Digit4"},53:{key:"5",code:"Digit5"},54:{key:"6",code:"Digit6"},55:{key:"7",code:"Digit7"},56:{key:"8",code:"Digit8"},57:{key:"9",code:"Digit9"},65:{key:"a",code:"KeyA"},66:{key:"b",code:"KeyB"},67:{key:"c",code:"KeyC"},68:{key:"d",code:"KeyD"},69:{key:"e",code:"KeyE"},70:{key:"f",code:"KeyF"},71:{key:"g",code:"KeyG"},72:{key:"h",code:"KeyH"},73:{key:"i",code:"KeyI"},74:{key:"j",code:"KeyJ"},75:{key:"k",code:"KeyK"},76:{key:"l",code:"KeyL"},77:{key:"m",code:"KeyM"},78:{key:"n",code:"KeyN"},79:{key:"o",code:"KeyO"},80:{key:"p",code:"KeyP"},81:{key:"q",code:"KeyQ"},82:{key:"r",code:"KeyR"},83:{key:"s",code:"KeyS"},84:{key:"t",code:"KeyT"},85:{key:"u",code:"KeyU"},86:{key:"v",code:"KeyV"},87:{key:"w",code:"KeyW"},88:{key:"x",code:"KeyX"},89:{key:"y",code:"KeyY"},90:{key:"z",code:"KeyZ"},91:{key:"Meta",code:"MetaLeft"},93:{key:"Meta",code:"MetaRight"},106:{key:"*",code:"NumpadMultiply"},107:{key:"+",code:"NumpadAdd"},109:{key:"-",code:"NumpadSubtract"},110:{key:".",code:"NumpadDecimal"},111:{key:"/",code:"NumpadDivide"},112:{key:"F1",code:"F1"},113:{key:"F2",code:"F2"},114:{key:"F3",code:"F3"},115:{key:"F4",code:"F4"},116:{key:"F5",code:"F5"},117:{key:"F6",code:"F6"},118:{key:"F7",code:"F7"},119:{key:"F8",code:"F8"},120:{key:"F9",code:"F9"},121:{key:"F10",code:"F10"},122:{key:"F11",code:"F11"},123:{key:"F12",code:"F12"},186:{key:";",code:"Semicolon"},187:{key:"=",code:"Equal"},188:{key:",",code:"Comma"},189:{key:"-",code:"Minus"},190:{key:".",code:"Period"},191:{key:"/",code:"Slash"},192:{key:"",code:"Backquote"},219:{key:"[",code:"BracketLeft"},220:{key:"\\",code:"Backslash"},221:{key:"]",code:"BracketRight"},222:{key:"'",code:"Quote"},229:{key:"q",code:"KeyQ"}},V={48:{key:")",code:"Digit0"},49:{key:"!",code:"Digit1"},50:{key:"@",code:"Digit2"},51:{key:"#",code:"Digit3"},52:{key:"$",code:"Digit4"},53:{key:"%",code:"Digit5"},54:{key:"^",code:"Digit6"},55:{key:"&",code:"Digit7"},56:{key:"*",code:"Digit8"},57:{key:"(",code:"Digit9"},69:{key:"E",code:"KeyE"},73:{key:"I",code:"KeyI"},79:{key:"O",code:"KeyO"},80:{key:"P",code:"KeyP"},81:{key:"Q",code:"KeyQ"},82:{key:"R",code:"KeyR"},84:{key:"T",code:"KeyT"},85:{key:"U",code:"KeyU"},87:{key:"W",code:"KeyW"},89:{key:"Y",code:"KeyY"},186:{key:":",code:"Semicolon"},187:{key:"+",code:"Equal"},188:{key:"<",code:"Comma"},189:{key:"_",code:"Minus"},190:{key:">",code:"Period"},191:{key:"?",code:"Slash"},192:{key:"~",code:"Backquote"},219:{key:"{",code:"BracketLeft"},220:{key:"|",code:"Backslash"},221:{key:"}",code:"BracketRight"},222:{key:'"',code:"Quote"}};function j(t){return[17,18].includes(t)}function H(t,e=!1){var i,n;let o=t.shiftKey&&e?null===(i=V[t.which])||void 0===i?void 0:i.key:null===(n=$[t.which])||void 0===n?void 0:n.key;return o=o||t.key,j(t.which)&&(o=""),U(t)+K(o)}function U(t){let e="";return(t.ctrlKey||t.metaKey)&&(e+="Ctrl+"),t.altKey&&(e+="Alt+"),t.shiftKey&&(e+="Shift+"),e}function K(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function q(t,e=!1){let i=t.shiftKey&&e?V[t.code]:$[t.code];if(!i)return null;let n=K(i.key);return j(t.code)&&(n=""),U(t)+K(n)}class Z{constructor(){this.map=new WeakMap}set(t,e,i){let n=this.map.get(t);n||(n=new Map,this.map.set(t,n)),n.set(e,i)}has(t,e){let i=this.map.get(t);return!!i&&i.has(e)}get(t,e){let i=this.map.get(t);if(i)return i.get(e)}delete(t,e){let i=this.map.get(t);i&&(i.delete(e),0===i.size&&this.map.delete(t))}}class G{constructor(){this.map=new Map}set(t,e,i){let n=this.map.get(t);n||(n=new Map,this.map.set(t,n)),n.set(e,i)}has(t,e){let i=this.map.get(t);return!!i&&i.has(e)}get(t,e){let i=this.map.get(t);if(i)return i.get(e)}delete(t,e){let i=this.map.get(t);i&&(i.delete(e),0===i.size&&this.map.delete(t))}}var Y,J;!function(t){const e=new Z;function i(t,i,n,o,r,s){let a=r?o.bind(r):o,l=e.get(i,n);l||(l=[],e.set(i,n,l)),l.push({type:n,handler:o,bindedHandler:a,scope:r}),i.addEventListener(n,a,{once:t,passive:s})}function n(t){return t instanceof MouseEvent?t:t.touches[0]||t.changedTouches[0]||null}t.on=function(t,e,n,o,r=!1){i(!1,t,e,n,o,r)},t.once=function(t,e,n,o,r=!1){i(!0,t,e,n,o,r)},t.off=function(t,i,n,o){let r=e.get(t,i);if(r)for(let e=r.length-1;e>=0;e--){let s=r[e];s.handler!==n||o&&s.scope!==o||(t.removeEventListener(i,s.bindedHandler),r.splice(e,1))}},t.getSingle=n,t.fromPencil=function(t){if(!(t instanceof TouchEvent))return!1;let e=n(t);return!!e&&"stylus"===e.touchType}}(Y||(Y={}));class X extends b{constructor(t,e){super(t.type,t.target,{},t),this.svg=e}getTargetKNode(){return Wt.fromElement(this.originalEvent.target)}getShortCutKey(){return this.originalEvent instanceof KeyboardEvent?H(this.originalEvent):null}getPaperPosition(){let t=this.getScreenPosition();return this.svg.toPaperOrigin(t)}getScreenPosition(){if(!(this.originalEvent instanceof MouseEvent||this.originalEvent.touches))return new A(0,0);let t=Y.getSingle(this.originalEvent);return t?new A(t.clientX,t.clientY):new A(0,0)}clone(){return new X(this.originalEvent,this.svg)}}class Q{constructor(t){this.array=[],this.comparer=t}isEmpty(){return 0===this.array.length}add(t){this.array.push(t),this.shiftUp(this.array.length-1)}getArray(){return this.array}getHead(){if(0!==this.array.length)return this.array[0]}removeHead(){if(0===this.array.length)return;if(1===this.array.length)return this.array.pop();let t=this.array[0];return this.array[0]=this.array.pop(),this.shiftDown(0),t}shiftUp(t){if(0===t)return;let e=(t+1>>1)-1;this.comparer(this.array[t],this.array[e])<0&&(this.swap(t,e),this.shiftUp(e))}shiftDown(t){let e=t+1<<1,i=e-1,n=i;e<this.array.length&&this.comparer(this.array[i],this.array[e])>0&&(n=e),n>=this.array.length||this.comparer(this.array[n],this.array[t])<0&&(this.swap(n,t),this.shiftDown(n))}swap(t,e){let i=this.array[t];this.array[t]=this.array[e],this.array[e]=i}clear(){this.array=[]}}class tt{constructor(){this.set=new Set,this.heap=new Q(((t,e)=>t.order-e.order))}isEmpty(){return this.heap.isEmpty()}has(t){return this.set.has(t)}add(t,e=0){this.has(t)||(this.set.add(t),this.heap.add({item:t,order:e}))}pop(){if(!this.heap.isEmpty()){let{item:t}=this.heap.removeHead();return this.set.delete(t),t}}}!function(t){t[t.PENDING=0]="PENDING",t[t.WILL_UPDATE_SOON=1]="WILL_UPDATE_SOON",t[t.UPDATING=2]="UPDATING"}(J||(J={}));let et=J.PENDING,it=new tt,nt=new tt;function ot(t){it.add(t),st()}function rt(){return new Promise((t=>{nt.add(t),st()}))}function st(){et===J.PENDING&&(Promise.resolve().then(at),et=J.WILL_UPDATE_SOON)}function at(){let t,e;for(;!it.isEmpty();){for(;t=it.pop();)t.needsUpdate&&(t.update(),t.needsUpdate=!1);for(;e=nt.pop();)e()}et=J.PENDING}class lt{static I(){return new lt(1,0,0,1,0,0)}static zero(){return new lt(0,0,0,0,0,0)}static parse(t){let e=t.match(/matrix\s*\((.+?)\)/);if(e){let t=e[1].split(/[, ]/).map((t=>Number(t)));return new lt(t[0],t[1],t[2],t[3],t[4],t[5])}return lt.zero()}static fromDOMMatrix(t){let{a:e,b:i,c:n,d:o,e:r,f:s}=t;return new lt(e,i,n,o,r,s)}static fromBoxPair(t,e){let i=lt.I();return i=i.translate(-t.centerX,-t.centerY),i=i.scale(e.width/t.width,e.height/t.height),i=i.translate(e.centerX,e.centerY),i}constructor(t,e,i,n,o,r){this.a=t,this.b=e,this.c=i,this.d=n,this.e=o,this.f=r}mergeOutMatrixData(t){let e=this;return new lt(t.a*e.a+t.c*e.b,t.b*e.a+t.d*e.b,t.a*e.c+t.c*e.d,t.b*e.c+t.d*e.d,t.a*e.e+t.c*e.f+t.e,t.b*e.e+t.d*e.f+t.f)}translate(t,e){return this.mergeOutMatrixData({a:1,c:0,e:t,b:0,d:1,f:e})}rotateAngle(t){return this.rotateRadians(S(t))}rotateRadians(t){let e=Math.sin(t),i=Math.cos(t);return this.mergeOutMatrixData({a:i,c:-e,e:0,b:e,d:i,f:0})}scale(t,e=t){return this.mergeOutMatrixData({a:t,c:0,e:0,b:0,d:e,f:0})}skewAngle(t,e=t){return this.skewRadians(S(t),S(e))}skewRadians(t,e=t){let i=Math.tan(t),n=Math.tan(e);return this.mergeOutMatrixData({a:1,c:i,e:0,b:n,d:1,f:0})}inverse(){let{a:t,b:e,c:i,d:n,e:o,f:r}=this,s=n,a=-i,l=i*r-o*n,h=t*s+e*a;if(0===h)return lt.zero();{let i=1/h;return new lt(s*i,-e*i,a*i,t*i,l*i,(o*e-t*r)*i)}}getTranslate(){let{a:t,d:e,e:i,f:n}=this;return{x:i/t,y:n/e}}mergeOut(t){return this.mergeOutMatrixData(t)}multiply(t){return t.mergeOutMatrixData(this)}equals(t){let e=this,i=t;return e.a==i.a&&e.b==i.b&&e.c==i.c&&e.d==i.d&&e.e==i.e&&e.f==i.f}clone(){let{a:t,b:e,c:i,d:n,e:o,f:r}=this;return new lt(t,e,i,n,o,r)}toString(){let{a:t,b:e,c:i,d:n,e:o,f:r}=this;return`matrix(${t} ${e} ${i} ${n} ${o} ${r})`}transferPoint(t){let{a:e,b:i,c:n,d:o,e:r,f:s}=this,{x:a,y:l}=t;return new A(e*a+n*l+r,i*a+o*l+s)}transferVector(t){let{a:e,b:i,c:n,d:o}=this,{x:r,y:s}=t;return new P(e*r+n*s,i*r+o*s)}transferBox(t){let e=this.transferPoint(new A(t.x,t.y)),i=this.transferPoint(new A(t.right,t.y)),n=this.transferPoint(new A(t.x,t.bottom)),o=this.transferPoint(new A(t.right,t.bottom));return _.fromPoints(e,i,n,o)}transferAngle(t){let e=S(t);return T(this.transferRadians(e))}transferRadians(t){let e=P.fromRadians(t),i=this.transferVector(e);return Math.atan2(i.y,i.x)}reset(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}isI(){let{a:t,b:e,c:i,d:n,e:o,f:r}=this;return 1===t&&0===e&&0===i&&1===n&&0===o&&0===r}isZero(){let{a:t,b:e,c:i,d:n,e:o,f:r}=this;return 0===t&&0===e&&0===i&&0===n&&0===o&&0===r}mix(t,e){return new lt(this.a*(1-e)+t.a*e,this.b*(1-e)+t.b*e,this.c*(1-e)+t.c*e,this.d*(1-e)+t.d*e,this.e*(1-e)+t.e*e,this.f*(1-e)+t.f*e)}interpolate(t){return this.mix(lt.I(),1-t)}}class ht extends k{constructor(t){super(),this.startTouchPoint1=null,this.startTouchPoint2=null,this.eventPrefix="pinch-zoom:",this.el=t,Y.on(t,"touchstart",this.onTouchStart,this)}get inTouching(){return!!this.startTouchPoint1}onTouchStart(t){this.fire(this.eventPrefix+"start",t),Y.on(document,"touchmove",this.onTouchMove,this),Y.on(document,"touchend",this.onTouchEnd,this)}onTouchMove(t){if(2!==t.touches.length)return;this.startTouchPoint1||(this.startTouchPoint1=new A(t.touches[0].clientX,t.touches[0].clientY),this.startTouchPoint2=new A(t.touches[1].clientX,t.touches[1].clientY));let e=new A(t.touches[0].clientX,t.touches[0].clientY),i=new A(t.touches[1].clientX,t.touches[1].clientY),n=this.makeMatrix(e,i);this.fire(this.eventPrefix+"transform",t,n)}makeMatrix(t,e){return function(t,e){let i=t[0],n=t[1],o=e[0],r=e[1],s=new M(i.x-n.x,-(i.y-n.y),i.y-n.y,i.x-n.x),a=new P(o.x-r.x,o.y-r.y),{x:l,y:h}=s.inverse().transfer2(a);0===l&&(l=1);let d=-h,c=l,u=o.x-l*i.x+h*i.y,p=o.y-h*i.x-l*i.y;return new lt(l,h,d,c,u,p)}([this.startTouchPoint1,this.startTouchPoint2],[t,e])}onTouchEnd(t){this.endTouching(),this.fire(this.eventPrefix+"end",t)}endTouching(){Y.off(document,"touchmove",this.onTouchMove,this),Y.off(document,"touchend",this.onTouchEnd,this),this.startTouchPoint1=null,this.startTouchPoint2=null}remove(){Y.off(this.el,"touchstart",this.onTouchStart,this),this.inTouching&&this.endTouching()}}function dt(t,e,i=t=>t){if(0===t.length)return 0;if(e<=i(t[0]))return 0;if(e>i(t[t.length-1]))return t.length;{let n=0,o=t.length-1;for(;n+1<o;){let r=Math.floor((o+n)/2),s=i(t[r]);if(s===e){o=r;break}s<e?n=r:o=r}return o}}function ct(t,e,i){return t*(1-i)+e*i}function ut(t,e){t=Math.min(t,1);let i,n=e.length-1,o=t*e[n],r=function(t,e,i=t=>t){return dt(t,e,i)-1}(e,o);return i=-1===r?0:r===n?1:(r+function(t,e,i){return t<=e?0:t>=i?1:t=(t-e)/(i-e)}(o,e[r],e[r+1]))/n,i}class pt{constructor(t,e){this.lengthDivisions=20,this.cachedLengths=null,this.startPoint=t,this.endPoint=e}spacedPointAt(t){return this.pointAt(this.mapU2T(t))}mapU2T(t){return ut(t,this.getLengths())}tAtLength(t){let e=t/this.getLength();return this.mapU2T(e)}pointAtLength(t){let e=t/this.getLength();return this.spacedPointAt(e)}getPoints(t){let e=[];for(let i=0;i<=t;i++){let n=i/t;e.push(this.pointAt(n))}return e}getSpacedPoints(t){return this.getSpacedTs(t).map((t=>this.pointAt(t)))}getSpacedTs(t=this.lengthDivisions){let e=[];for(let i=0;i<=t;i++){let n=i/t;e.push(this.mapU2T(n))}return e}getLengths(t=this.lengthDivisions){var e;if((null===(e=this.cachedLengths)||void 0===e?void 0:e.length)===t+1)return this.cachedLengths;let i=[0],n=0,o=this.pointAt(0);for(let e=1;e<=t;e++){let r=e/t,s=this.pointAt(r),a=n+s.distanceTo(o);i.push(a),o=s,n=a}return t===this.lengthDivisions&&(this.cachedLengths=i),i}getLength(){let t=this.getLengths();return t[t.length-1]}tagentAt(t){let e=this.pointAt(t);return this.pointAt(t+.001).diff(e).multiplyScalar(1e3)}normalAt(t,e=!0){return this.tagentAt(t).rotateInDegree(e?-90:90).normalize()}curvatureAt(t){let e=this.pointAt(t-.001),i=this.pointAt(t),n=this.pointAt(t+.001),o=i.diff(e),r=n.diff(i),s=o.getLength(),a=r.getLength(),l=s;return Math.acos(o.dot(r)/(s*a))/l}getBendedPoints(t,e){return this.getBendedTs(t,e).map((t=>this.pointAt(t)))}getBendedTs(t=.3,e=this.lengthDivisions){let i=this.samplingLengthCurvatures(e),n=i[i.length-1],o=[],r=Math.ceil(n/t+1e-4);for(let t=0;t<=r;t++){let e=t/r;o.push(this.getBendedTAt(e,i))}return o}samplingLengthCurvatures(t){let e=[],i=this.pointAt(0),n=0;for(let o=1;o<=t;o++){let r=o/t,s=this.pointAt(r),a=this.curvatureAt(r),l=n+a*s.distanceTo(i);e.push(a),i=s,n=l}return e}getBendedTAt(t,e){return ut(t,e)}}class mt extends pt{constructor(){super(...arguments),this.lengthDivisions=1}pointAt(t){let e=ct(this.startPoint.x,this.endPoint.x,t),i=ct(this.startPoint.y,this.endPoint.y,t);return new A(e,i)}tagentAt(){return this.endPoint.diff(this.startPoint)}mapU2T(t){return t}partOf(t,e){return new mt(this.pointAt(t),this.pointAt(e))}transform(t){let e=t.transferPoint(this.startPoint),i=t.transferPoint(this.endPoint);return new mt(e,i)}toJSON(){return{type:"L",data:[this.endPoint.x,this.endPoint.y]}}}class gt extends pt{constructor(t,e,i,n,o,r){super(t,e),this.radius=i,this.xAxisAngle=n,this.largeArcFlag=o,this.clockwiseFlag=r,this.parameters=function(t,e,i,n,o,r){let s=S(n),a=Math.cos(s),l=Math.sin(s),h=new M(i.x*a,-i.y*l,i.x*l,i.y*a).inverse(),{x:d,y:c}=h.transfer2(new P(t.x-e.x,t.y-e.y)),u=r?-1:1,p=Math.sqrt(d*d+c*c)/2*u;p=Math.min(Math.max(p,-1),1);let m=Math.asin(p);o&&(m=Math.PI*u-m);let g=Math.atan2(-d*u,c*u),f=g+m,y=g-m,x=Math.cos(f),w=Math.sin(f);return{center:{x:t.x-i.x*x*a+i.y*w*l,y:t.y-i.x*x*l-i.y*w*a},radius:{x:i.x,y:i.y},startRadians:f,endRadians:y,xAxisRadians:s}}(t,e,i,n,o,r)}pointAt(t){let{center:e,startRadians:i,endRadians:n,xAxisRadians:o}=this.parameters,{radius:r}=this,s=Math.cos(o),a=Math.sin(o),l=ct(i,n,t),h=Math.cos(l),d=Math.sin(l),c=e.x+r.x*s*h-r.y*a*d,u=e.y+r.x*a*h+r.y*s*d;return new A(c,u)}tagentAt(t){let{startRadians:e,endRadians:i,xAxisRadians:n}=this.parameters,{radius:o}=this,r=Math.cos(n),s=Math.sin(n),a=ct(e,i,t),l=Math.cos(a),h=Math.sin(a),d=i-e,c=(-o.x*r*h-o.y*s*l)*d,u=(-o.x*s*h+o.y*r*l)*d;return new P(c,u)}partOf(t,e){let{startRadians:i,endRadians:n}=this.parameters,{radius:o}=this,r=this.pointAt(t),s=this.pointAt(e),a=ct(i,n,t),l=ct(i,n,e)-a>Math.PI?1:0;return new gt(r,s,o,this.xAxisAngle,l,this.clockwiseFlag)}transform(t){let e=t.transferPoint(this.startPoint),i=t.transferPoint(this.endPoint),n=this.radius,o=t.transferAngle(this.xAxisAngle),r=this.largeArcFlag,s=t.a>0?this.clockwiseFlag:1-this.clockwiseFlag;return new gt(e,i,n,o,r,s)}toJSON(){return{type:"A",data:[this.radius.x,this.radius.y,this.xAxisAngle,this.largeArcFlag,this.clockwiseFlag,this.endPoint.x,this.endPoint.y]}}}class ft extends pt{constructor(t,e,i,n){super(t,e),this.controlPoint1=i,this.controlPoint2=n}pointAt(t){let e=1-t,i=e*e*e,n=e*e*t*3,o=e*t*t*3,r=t*t*t,{x:s,y:a}=this.interpolatePoints(i,n,o,r);return new A(s,a)}tagentAt(t){let e=1-t,i=-3*e*e,n=3*e*e-6*t*e,o=-3*t*t+6*t*e,r=3*t*t,{x:s,y:a}=this.interpolatePoints(i,n,o,r);return new P(s,a)}interpolatePoints(t,e,i,n){let o=this.startPoint,r=this.controlPoint1,s=this.controlPoint2,a=this.endPoint;return{x:o.x*t+r.x*e+s.x*i+a.x*n,y:o.y*t+r.y*e+s.y*i+a.y*n}}partOf(t,e){let i=this.pointAt(t),n=this.pointAt(e),o=this.tagentAt(t),r=this.tagentAt(e),s=i.add(o.multiplyScalar(1/3)),a=n.add(r.multiplyScalar(-1/3));return new ft(i,n,s,a)}transform(t){let e=t.transferPoint(this.startPoint),i=t.transferPoint(this.endPoint),n=t.transferPoint(this.controlPoint1),o=t.transferPoint(this.controlPoint2);return new ft(e,i,n,o)}toJSON(){return{type:"C",data:[this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.endPoint.x,this.endPoint.y]}}}class yt extends pt{constructor(t,e,i){super(t,e),this.controlPoint=i}pointAt(t){let e=1-t,i=e*e,n=2*e*t,o=t*t,{x:r,y:s}=this.interpolatePoints(i,n,o);return new A(r,s)}tagentAt(t){let e=1-t,i=-2*e,n=2*(e-t),o=2*t,{x:r,y:s}=this.interpolatePoints(i,n,o);return new P(r,s)}interpolatePoints(t,e,i){let n=this.startPoint,o=this.controlPoint,r=this.endPoint;return{x:n.x*t+o.x*e+r.x*i,y:n.y*t+o.y*e+r.y*i}}partOf(t,e){let i=this.pointAt(t),n=this.pointAt(e),o=this.tagentAt(t),r=i.add(o.multiplyScalar(.5));return new yt(i,n,r)}transform(t){let e=t.transferPoint(this.startPoint),i=t.transferPoint(this.endPoint),n=t.transferPoint(this.controlPoint);return new yt(e,i,n)}toJSON(){return{type:"Q",data:[this.controlPoint.x,this.controlPoint.y,this.endPoint.x,this.endPoint.y]}}}class xt{constructor(){this.curves=[],this.closed=!1,this.currentPoint=null,this.cachedLengths=null}static fromPathData(t){let e=new xt;for(let i of t)e.addPathData(i.type,i.data);return e}static fromCurves(t,e=!1){let i=new xt;return i.addList(t),e&&i.closePath(),i}add(t){this.curves.push(t),this.currentPoint=t.endPoint,this.cachedLengths=null}addList(t){for(let e of t)this.curves.push(e);t.length>0&&(this.currentPoint=t[t.length-1].endPoint),this.cachedLengths=null}closePath(){let t=this.startPoint,e=this.endPoint;t.equals(e)||this.curves.push(new mt(e,t)),this.closed=!0}get startPoint(){return this.curves[0].startPoint}get endPoint(){return this.curves[this.curves.length-1].endPoint}pointAt(t){let{i:e,t:i}=this.mapTToIT(t);return this.curves[e].pointAt(i)}mapTToIT(t){let e=ut(t,this.getLengths())*this.curves.length,i=Math.floor(e);return i===this.curves.length&&(i=this.curves.length-1),{i,t:e-i}}mapUToIT(t){let e=ut(t,this.getLengths())*this.curves.length,i=Math.floor(e);i===this.curves.length&&(i=this.curves.length-1);let n=e-i;return{i,t:this.curves[i].mapU2T(n)}}spacedPointAt(t){let{i:e,t:i}=this.mapUToIT(t);return this.curves[e].pointAt(i)}pointAtLength(t){let e=t/this.getLength();return this.spacedPointAt(e)}getSpacedPoints(t){return this.getSpacedITs(t).map((({i:t,t:e})=>this.curves[t].pointAt(e)))}getSpacedITs(t){let e=[];for(let i=0;i<=t;i++){let n=i/t;e.push(this.mapUToIT(n))}return e}getLengths(){if(this.cachedLengths)return this.cachedLengths;let t=[0,...this.curves.map((t=>t.getLength()))];for(let e=2;e<t.length;e++)t[e]+=t[e-1];return this.cachedLengths=t}getLength(){let t=this.getLengths();return t[t.length-1]}tagentAt(t){let{i:e,t:i}=this.mapTToIT(t);return this.curves[e].tagentAt(i)}normalAt(t){let{i:e,t:i}=this.mapTToIT(t);return this.curves[e].normalAt(i)}curvatureAt(t){let{i:e,t:i}=this.mapTToIT(t);return this.curves[e].curvatureAt(i)}getBendedPoints(t,e){return this.getBendedITs(t,e).map((({i:t,t:e})=>this.curves[t].pointAt(e)))}getBendedITs(t=.3,e){let i=[];for(let n=0;n<this.curves.length;n++){let o=this.curves[n].getBendedTs(t,e);for(let t=0;n<o.length;t++){let e=o[t];0!==n&&0===t||i.push({i:n,t:e})}}return i}addPathData(t,e){if("M"===t)return void(this.currentPoint=new A(e[0],e[1]));if(!this.currentPoint)throw new Error('Path must starts with a "MoveTo" direction!');let i=this.currentPoint,n=i.clone();if("m"===t){let[t,i]=e;n.x+=t,n.y+=i,this.currentPoint=n}else if("L"===t){let[t,o]=e;n.x=t,n.y=o,this.add(new mt(i,n))}else if("l"===t){let[t,o]=e;n.x+=t,n.y+=o,this.add(new mt(i,n))}else if("H"===t){let[t]=e;n.x=t,this.add(new mt(i,n))}else if("h"===t){let[t]=e;n.x+=t,this.add(new mt(i,n))}else if("V"===t){let[t]=e;n.y=t,this.add(new mt(i,n))}else if("v"===t){let[t]=e;n.y+=t,this.add(new mt(i,n))}else if("A"===t){let[t,o,r,s,a,l,h]=e;n.x=l,n.y=h,this.add(new gt(i,n,new P(t,o),r,s,a))}else if("a"===t){let[t,o,r,s,a,l,h]=e;n.x+=l,n.y+=h,this.add(new gt(i,n,new P(t,o),r,s,a))}else if("Q"===t){let[t,o,r,s]=e;n.x=r,n.y=s,this.add(new yt(i,n,new A(t,o)))}else if("q"===t){let[t,o,r,s]=e;n.x+=r,n.y+=s,this.add(new yt(i,n,new A(i.x+t,i.y+o)))}else if("C"===t){let[t,o,r,s,a,l]=e;n.x=a,n.y=l,this.add(new ft(i,n,new A(t,o),new A(r,s)))}else if("c"===t){let[t,o,r,s,a,l]=e;n.x+=a,n.y+=l,this.add(new ft(i,n,new A(i.x+t,i.y+o),new A(i.x+r,i.y+s)))}else"Z"!==t&&"z"!==t||this.closePath()}transform(t){let e=this.curves.map((e=>e.transform(t)));return xt.fromCurves(e,this.closed)}toJSON(){let t=[];t.push({type:"M",data:[this.startPoint.x,this.startPoint.y]});for(let e of this.curves)t.push(e.toJSON());return this.closed&&t.push({type:"Z",data:[]}),t}}function wt(t,e){let i;i=e?t.map(e):t;let n=-1,o=1/0;for(let t=0;t<i.length;t++)i[t]<o&&(n=t,o=i[t]);return{index:n,value:o}}function vt(t,e){return function(t,e){let i;i=e?t.map(e):t;let n=-1,o=-1/0;for(let t=0;t<i.length;t++)i[t]>o&&(n=t,o=i[t]);return{index:n,value:o}}(t,e).index}function bt(t,e){let i=function(t,e){return wt(t,e).index}(t,e);return t[i]||null}function kt(t,e){return t[vt(t,e)]||null}function Ct(t,e){let{index:i,value:n}=wt(t,e);return{item:i>-1?t[i]:null,value:n}}function St(t,e){let i=new Map;for(let n of t){let[t,o]=e(n),r=i.get(t);r||(r=[],i.set(t,r)),r.push(o)}return i}function Tt(t,e=1){return[...Mt(t,e)]}function*Mt(t,e){for(let i of t)Array.isArray(i)&&e>0?yield*Mt(i,e-1):yield i}class At{constructor(){this.continuousCurves=[],this.currentCurve=null}static fromPathData(t){let e=new At;for(let i of t)e.addPathData(i.type,i.data);return e}static fromContinuousCurves(...t){let e=new At;return e.addContinuous(...t),e}get currentPoint(){return this.continuousCurves.length>0?this.continuousCurves[this.continuousCurves.length-1].currentPoint:null}addContinuous(...t){if(this.continuousCurves.push(...t),t.length>0){let e=t[t.length-1];this.currentCurve=e}}addPathData(t,e){if("M"===t){let[t,i]=e;this.startNewContinuousCurve(new A(t,i))}else if("m"===t){let t=this.currentPoint;if(!t)throw new Error('Path must starts with a "MoveTo" direction!');let[i,n]=e;this.startNewContinuousCurve(t.translate(i,n))}else{if(!this.currentCurve)throw new Error("Have no current curve!");"Z"===t||"z"===t?this.closePath():this.currentCurve.addPathData(t,e)}}closePath(){if(!this.currentCurve)throw new Error("Have no current curve!");this.currentCurve.closePath(),this.currentCurve=null}startNewContinuousCurve(t){(!this.currentCurve||this.currentCurve.curves.length>0)&&(this.currentCurve=new xt,this.currentCurve.addPathData("M",[t.x,t.y]),this.addContinuous(this.currentCurve))}transform(t){let e=this.continuousCurves.map((e=>e.transform(t)));return At.fromContinuousCurves(...e)}toJSON(){return Tt(this.continuousCurves.map((t=>t.toJSON())))}}class Pt{static fromPointAndDirection(t,e){return new Pt(t,N.toVector(e))}static fromPointAndDegree(t,e){return new Pt(t,P.fromDegree(e))}static fromPointAndRadians(t,e){return new Pt(t,P.fromRadians(e))}static fromPoints(t,e){return new Pt(t,e.diff(t))}constructor(t,e){this.point=t,this.vector=e}interactWithLineSegment(t,e){let i=new Pt(t,e.diff(t)),n=this.normalIntersectWithRadialLine(i);if(!n)return null;let{point:o,miu:r,niu:s}=n;return{point:o,miu:r,niu:s,intersected:r>=0&&s>=0&&s<=1}}interactWithRadialLine(t){let e=this.normalIntersectWithRadialLine(t);if(!e)return null;let{point:i,miu:n,niu:o}=e;return{point:i,miu:n,niu:o,intersected:n>=0&&o>=0}}normalIntersectWithRadialLine(t){let e=this.point,i=this.vector,n=t.point,o=t.vector,r=M.fromCoord(i,o);if(0===r.getDetermint())return null;let s=r.inverse().transfer2(n.diff(e)),a=s.x,l=-s.y;return{point:e.add(i.multiplyScalar(a)),miu:a,niu:l}}}!function(t){function e(t,e){return Math.abs(t-e)>=180&&(t>e?t-=360:t+=360),t}function i(t,e,i){let o=n(e,t),r=n(i,t);return Math.abs(o)>90||Math.abs(r)>90||o*r>0?null:r/(r-o)}function n(t,e){let i=t-e;return i>180?i=360-i:i<-180&&(i=360+i),i}t.intersectWithPath=function(t,n,o=n.point){let r=t.toCurvePath().continuousCurves[0],s=n.point,a=n.vector.angleInDegree(),l=r.getLength(),h=Math.round(l/10),d=r.spacedPointAt(0),c=d.diff(s).angleInDegree(),u=[d],p=[];for(let t=1;t<=h;t++){let n=t/h,o=r.spacedPointAt(n),l=o.diff(s).angleInDegree();l=e(l,c),u.push(o);let d=i(a,l,c);if(null!==d){let e=ct(t-1,t,d)/h,i=r.spacedPointAt(e);p.push(i)}c=l}return p.length>1?bt(p,(t=>t.diff(o).getLength())):1===p.length?p[0]:bt(u,(t=>t.diff(o).getLength()))},t.getClosestIntersectPointWithBox=function(t,e){let i=t.getCornerPoints(),n=bt([e.interactWithLineSegment(i[0],i[1]),e.interactWithLineSegment(i[1],i[2]),e.interactWithLineSegment(i[2],i[3]),e.interactWithLineSegment(i[3],i[0])].filter((t=>null!==t)).filter((t=>t.intersected)),(t=>t.miu));return(null==n?void 0:n.point)||null},t.getClosestIntersectPointWithBoxExtended=function(t,e){0===t.width&&0===t.height&&(t=t.expand(1));let i=t.getCornerPoints(),n=[e.interactWithLineSegment(i[0],i[1]),e.interactWithLineSegment(i[1],i[2]),e.interactWithLineSegment(i[2],i[3]),e.interactWithLineSegment(i[3],i[0])].filter((t=>null!==t)),o=n.filter((t=>t.intersected));return 0===o.length&&(o=n.filter((t=>t.miu>=0))),0===o.length&&(o=n),bt(o,(t=>Math.abs(t.miu))).point},t.getDoubleSidesIntersectPointsWithBox=function(t,e){let i=t.getCornerPoints(),n=[e.interactWithLineSegment(i[0],i[1]),e.interactWithLineSegment(i[1],i[2]),e.interactWithLineSegment(i[2],i[3]),e.interactWithLineSegment(i[3],i[0])].filter((t=>null!==t)).filter((t=>t.niu>=0&&t.niu<=1));return n.sort(((t,e)=>t.miu>=0&&e.miu>=0?t.miu-e.miu:e.miu-t.miu)),n.map((t=>t.point))}}(Pt||(Pt={}));class Dt{static fromPoints(t,e,i){let n=t.y<=e.y;return i&&n||!i&&!n?new Dt(t,new A(e.x,t.y)):new Dt(new A(t.x,e.y),e)}constructor(t,e){this.from=t,this.to=e}get v(){return this.from.y}set v(t){this.from.y=t,this.to.y=t}get fromU(){return this.from.x}set fromU(t){this.from.x=t}get toU(){return this.to.x}set toU(t){this.to.x=t}distanceTo(t,e){return e?this.v-t.v:t.v-this.v}translateSelf(t){this.from.x+=t.x,this.from.y+=t.y,this.to.x+=t.x,this.to.y+=t.y}clone(){return new Dt(this.from.clone(),this.to.clone())}}class It extends Dt{static fromPoints(t,e,i=!1){let n=t.x<=e.x;return i&&n||!i&&!n?new It(t,new A(t.x,e.y)):new It(new A(e.x,t.y),e)}get v(){return this.from.x}set v(t){this.from.x=t,this.to.x=t}get fromU(){return this.from.y}set fromU(t){this.from.y=t}get toU(){return this.to.y}set toU(t){this.to.y=t}clone(){return new It(this.from.clone(),this.to.clone())}}var Et;!function(t){t[t.Normal=0]="Normal",t[t.Reverse=1]="Reverse"}(Et||(Et={}));class Lt{constructor(t,e,i,n){this.heap=new Q(((t,e)=>t.canSlide-e.canSlide)),this.slided=0,this.cachedDistance=null,this.slideable=t,this.fixed=e,this.slideToLow=i,this.distanceGetter=n,this.makeStartStates()}makeStartStates(){for(let t=0;t<this.slideable.length;t++){let e=this.makeSlideConnect(t);this.heap.add(e)}for(let t=0;t<this.fixed.length;t++){let e=this.makeFixedConnect(t);this.heap.add(e)}}getDistance(){if(null!==this.cachedDistance)return this.cachedDistance;let t=1/0;for(let e of this.heap.getArray())e.distance<t&&(t=e.distance);return this.cachedDistance=t,t}makeSlideConnect(t){return this.makeConnect(Et.Normal,this.slideable,t,this.fixed)}makeFixedConnect(t){return this.makeConnect(Et.Reverse,this.fixed,t,this.slideable)}makeConnect(t,e,i,n){let o=this.slideToLow,r=this.slided;t===Et.Reverse&&(o=!o),o&&(r=-r);let s,a,l=e[i]+r;return o?(s=dt(n,l),a=0===s?1/0:l-n[s-1]):(s=function(t,e,i=t=>t){let n=dt(t,e,i);return i(t[n])===e&&n++,n}(n,l),a=s===n.length?1/0:n[s]-l),a+=this.slided,{type:t,fromIndex:i,toIndex:s,canSlide:a,distance:this.distanceGetter(t,i,s,o)}}*iterate(){for(;!this.heap.isEmpty();){let t=this.heap.getHead(),e=t.canSlide-this.slided;yield this.slided,this.slided+=e+1e-6,t.distance===this.cachedDistance&&(this.cachedDistance=null);let i=this.removeHeads();for(let t of i){let e=this.resetConnect(t);isFinite(e.canSlide)&&this.heap.add(e)}}}removeHeads(){let t=[];for(;!this.heap.isEmpty();){let e=this.heap.getHead();if(!(e.canSlide<=this.slided))break;this.heap.removeHead(),t.push(e)}return t}resetConnect(t){return t.type===Et.Normal?this.makeSlideConnect(t.fromIndex):this.makeFixedConnect(t.fromIndex)}}class Ot{constructor(t){this.segments=[],this.unionPreferLow=t}makeIntersectedSegment(t,e){return Dt.fromPoints(t,e,!this.unionPreferLow)}makeSegmentByU(t,e){return t<e.x?new Dt(new A(t,e.y),e):new Dt(e,new A(t,e.y))}getPointU(t){return t.x}getPointV(t){return t.y}getUs(){return[this.segments[0].fromU,...this.segments.map((t=>t.toU))]}unionWithSegment(t){if(0===this.segments.length)this.segments.push(t);else{let e=this.unionWithSegmentWithoutPrune(t);this.pruneFromRange(...e)}}unionWithSegmentWithoutPrune(t){let e=this.splitAtPoint(t.from),i=this.splitAtPoint(t.to);for(let n=e;n<i;n++){let e=this.segments[n];this.unionPreferLow?e.v>t.v&&(e.v=t.v):e.v<t.v&&(e.v=t.v)}return this.unionInRange(t,e,i),[e,i]}splitAtPoint(t){let e=this.getPointU(t),i=this.findPointIndex(e);if(-1===i){if(e<this.segments[0].fromU){let e=this.makeIntersectedSegment(t,this.segments[0].from.clone());return this.segments.unshift(e),0}return 0}if(i===this.segments.length){let e=this.makeIntersectedSegment(this.segments[this.segments.length-1].to.clone(),t);return this.segments.push(e),i+1}{let t=this.segments[i];if(e===t.toU)return i+1;let n=this.makeSegmentByU(e,t.from.clone());return t.fromU=e,this.segments.splice(i,0,n),i+1}}findPointIndex(t){let e=dt(this.segments,t,(t=>t.toU));return t<=this.segments[0].fromU&&(e=-1),e}unionInRange(t,e,i){for(let n=e;n<i;n++){let e=this.segments[n];this.unionPreferLow?e.v>t.v&&(e.v=t.v):e.v<t.v&&(e.v=t.v)}}pruneFromRange(t,e){t=Math.max(t-2,0),e=Math.min(e+2,this.segments.length);let i=this.segments[t],n=[i];for(let o=t+1;o<e;o++){let t=this.segments[o];t.v===i.v?i.toU=t.toU:(n.push(t),i=t)}this.segments.splice(t,e-t,...n)}unionWithSequence(t){let e=null,i=null;for(let n of t.segments)if(0===this.segments.length)this.segments.push(n);else{let t=this.unionWithSegmentWithoutPrune(n);null===e&&(e=t[0]),i=t[1]}null!==e&&null!==i&&this.pruneFromRange(e,i)}getAntiOverlayTranslate(t,e){let i=new Lt(t.getUs(),this.getUs(),e,((e,i,n,o)=>this.getSegmentDistance(t,e,i,n,o))),n=new P(0,1/0),o=1/0;for(let t of i.iterate()){let e=this.getMinimumDistanceToFix(i),r=new P(t,e),s=r.x+r.y;if(0===r.x&&0===r.y)return null;if(r.x>=o)break;s<o&&(n=r,o=s)}return n}getMinimumDistanceToFix(t){let e=t.getDistance();return Math.max(-e,0)}getSegmentDistance(t,e,i,n,o){let r=e===Et.Normal?t:this,s=e===Et.Normal?this:t,a=i-1,l=i,h=n-1;if(!(h>=0&&h<s.segments.length))return 1/0;let d=s.segments[h],c=0===i?r.segments[0].fromU:r.segments[i-1].toU;o?c===d.toU&&(l=-1):c===d.fromU&&(a=-1);let u=this.getSegmentDistanceByIndices(r,a,d),p=this.getSegmentDistanceByIndices(r,l,d);return Math.min(u,p)}getSegmentDistanceByIndices(t,e,i){return e>=0&&e<t.segments.length?t.segments[e].distanceTo(i,t.unionPreferLow):1/0}translateSelf(t){for(let e of this.segments)e.translateSelf(t)}}class Bt extends Ot{makeIntersectedSegment(t,e){return It.fromPoints(t,e,!this.unionPreferLow)}makeSegmentByU(t,e){return t<e.y?new It(new A(e.x,t),e):new It(e,new A(e.x,t))}getPointU(t){return t.y}getPointV(t){return t.x}}class Rt{constructor(){this.top=new Ot(!0),this.bottom=new Ot(!1),this.left=new Bt(!0),this.right=new Bt(!1)}static fromBoxes(...t){let e=new Rt;for(let i of t)e.unionWithBox(i);return e}unionWithBox(t){this.top.unionWithSegment(new Dt(t.topLeft,t.topRight)),this.bottom.unionWithSegment(new Dt(t.bottomLeft,t.bottomRight)),this.left.unionWithSegment(new It(t.topLeft,t.bottomLeft)),this.right.unionWithSegment(new It(t.topRight,t.bottomRight))}unionWithHVBox(t){this.top.unionWithSequence(t.top),this.bottom.unionWithSequence(t.bottom),this.left.unionWithSequence(t.left),this.right.unionWithSequence(t.right)}getAntiOverlayTranslate(t,e,i){let n=null,o=null;return n=this.getOneAntiOverlayTranslate(t,e,i),n&&(o=this.getOneAntiOverlayTranslate(t,i,e),o)?bt([n,o],(t=>t.getLengthSquare())):null}getOneAntiOverlayTranslate(t,e,i){let n=this.getDirectionalAntiOverlayTranslate(t,e,i);if(n){let t=N.toVector(e),o=N.toVector(i);return t.multiplyScalar(n.x).add(o.multiplyScalar(n.y))}return null}getDirectionalAntiOverlayTranslate(t,e,i){return i===R.Top?this.top.getAntiOverlayTranslate(t.bottom,e===R.Left):i===R.Bottom?this.bottom.getAntiOverlayTranslate(t.top,e===R.Left):i===R.Left?this.left.getAntiOverlayTranslate(t.right,e===R.Top):i===R.Right?this.right.getAntiOverlayTranslate(t.left,e===R.Top):null}translateSelf(t){this.top.translateSelf(t),this.bottom.translateSelf(t),this.left.translateSelf(t),this.right.translateSelf(t)}}function Nt(t){return{width:t.width,height:t.height}}const _t={tap:class extends k{constructor(t){super(),this.cachedTouchStartEvent=null,this.touchStartTimeStamp=null,this.el=t,Y.on(t,"touchstart",this.onTouchStart,this,!0)}get inTouching(){return!!this.cachedTouchStartEvent}onTouchStart(t){1===t.touches.length&&(this.cachedTouchStartEvent=t,this.touchStartTimeStamp=t.timeStamp,Y.on(this.el,"touchend",this.onTouchEnd,this))}onTouchEnd(t){let e=t.timeStamp-this.touchStartTimeStamp,i=Y.getSingle(t),n=new P(i.clientX-this.cachedTouchStartEvent.touches[0].clientX,i.clientY-this.cachedTouchStartEvent.touches[0].clientY);e<500&&n.getLength()<5&&this.fire("tap",t),this.endTouching()}endTouching(){Y.off(this.el,"touchend",this.onTouchEnd,this),this.touchStartTimeStamp=null,this.cachedTouchStartEvent=null}remove(){Y.off(this.el,"touchstart",this.onTouchStart,this),this.inTouching&&this.endTouching()}},"double-tap":class extends k{constructor(t){super(),this.cachedTouchStartEvent=null,this.touchStartTimeStamp=null,this.touchCount=0,this.timeoutId=null,this.el=t,Y.on(t,"touchstart",this.onTouchStart,this)}get inTouching(){return!!this.cachedTouchStartEvent}onTouchStart(t){if(1!==t.touches.length&&this.inTouching)this.endTouching();else{if(this.cachedTouchStartEvent&&new P(t.touches[0].clientX-this.cachedTouchStartEvent.touches[0].clientX,t.touches[0].clientY-this.cachedTouchStartEvent.touches[0].clientY).getLength()>20)return this.endTouching(),void this.onTouchStart(t);this.cachedTouchStartEvent||(this.cachedTouchStartEvent=t,this.touchStartTimeStamp=t.timeStamp),0===this.touchCount?(Y.on(document,"touchmove",this.onTouchMove,this),Y.on(document,"touchend",this.onTouchEnd,this)):t.cancelable&&t.preventDefault(),this.touchCount++}}onTouchMove(t){1===t.touches.length?new P(t.touches[0].clientX-this.cachedTouchStartEvent.touches[0].clientX,t.touches[0].clientY-this.cachedTouchStartEvent.touches[0].clientY).getLength()>20&&this.endTouching():this.endTouching()}onTouchEnd(t){2===this.touchCount?this.testDoubleTap(t):(null!==this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.onTimeout()}),1e3)),this.touchCount>=2&&this.endTouching()}testDoubleTap(t){t.timeStamp-this.touchStartTimeStamp<1e3&&this.fire("double-tap",this.cachedTouchStartEvent)}onTimeout(){this.endTouching()}endTouching(){Y.off(document,"touchmove",this.onTouchMove,this),Y.off(document,"touchend",this.onTouchEnd,this),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.cachedTouchStartEvent=null,this.touchStartTimeStamp=null,this.touchCount=0}remove(){Y.off(this.el,"touchstart",this.onTouchStart,this),this.inTouching&&this.endTouching()}},hold:class extends k{constructor(t){super(),this.cachedTouchStartEvent=null,this.cachedTouchStartPoint=null,this.timeoutId=null,this.el=t,Y.on(t,"touchstart",this.onTouchStart,this)}get inTouching(){return!!this.cachedTouchStartEvent}onTouchStart(t){1===t.touches.length&&(this.cachedTouchStartEvent=t,this.cachedTouchStartPoint=new A(this.cachedTouchStartEvent.touches[0].clientX,this.cachedTouchStartEvent.touches[0].clientY),this.timeoutId=setTimeout((()=>this.onTimeout()),500),Y.on(document,"touchmove",this.onTouchMove,this),Y.on(document,"touchend",this.onTouchEnd,this))}onTimeout(){var t;(null===(t=this.cachedTouchStartEvent)||void 0===t?void 0:t.cancelable)&&this.cachedTouchStartEvent.preventDefault(),this.fire("hold:start",this.cachedTouchStartEvent)}onTouchMove(t){1===t.touches.length?new A(t.touches[0].clientX,t.touches[0].clientY).diff(this.cachedTouchStartPoint).getLength()>5&&this.endTouching():this.endTouching()}onTouchEnd(t){this.fire("hold:end",t),this.endTouching()}endTouching(){Y.off(document,"touchmove",this.onTouchMove,this),Y.off(document,"touchend",this.endTouching,this),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.cachedTouchStartEvent=null}remove(){Y.off(this.el,"touchstart",this.onTouchStart,this),this.inTouching&&this.endTouching()}},"pinch-zoom":ht,"pinch-non-scaling-zoom":class extends ht{constructor(){super(...arguments),this.eventPrefix="pinch-non-scaling-zoom:"}makeMatrix(t,e){return function(t,e){let i=t[0],n=t[1],o=e[0],r=e[1],s=i.mix(n,.5),a=o.mix(r,.5),l=n.diff(i),h=r.diff(o).getLength()/l.getLength(),d=h,c=a.x-h*s.x,u=a.y-h*s.y;return new lt(h,0,0,d,c,u)}([this.startTouchPoint1,this.startTouchPoint2],[t,e])}},slide:class extends k{constructor(t){super(),this.cachedTouchStartEvent=null,this.el=t,Y.on(t,"touchstart",this.onTouchStart,this,!0)}get inTouching(){return!!this.cachedTouchStartEvent}onTouchStart(t){1===t.touches.length&&(this.cachedTouchStartEvent=t,Y.on(this.el,"touchend",this.onTouchEnd,this))}onTouchEnd(t){let e=Y.getSingle(t),i=new P(e.clientX-this.cachedTouchStartEvent.touches[0].clientX,e.clientY-this.cachedTouchStartEvent.touches[0].clientY),n=this.getMoveDirection(i);i.getLength()>=100&&n&&this.fire("slide",t,n),this.endTouching()}getMoveDirection(t){let e=N.straightFromVector(t);return N.toVector(e).dot(t.normalize())>Math.cos(S(30))?e:null}endTouching(){Y.off(this.el,"touchend",this.onTouchEnd,this),this.cachedTouchStartEvent=null}remove(){Y.off(this.el,"touchstart",this.onTouchStart,this),this.inTouching&&this.endTouching()}}};var zt;!function(t){const e=new Z;function i(t,i){let n=i.replace(/:.+/,""),o=e.get(t,n);return o||(o=new(0,_t[n])(t),e.set(t,n,o)),o}t.isSimulatedEventType=function(t){let e=t.replace(/:.+/,"");return _t.hasOwnProperty(e)},t.on=function(t,e,n,o){i(t,e).on(e,n,o)},t.once=function(t,e,n,o){i(t,e).once(e,n,o)},t.off=function(t,n,o,r){let s=i(t,n);s.off(n,o,r),s.hasListeners()||(s.remove(),function(t,i){let n=i.replace(/:.+/,"");e.delete(t,n)}(t,n))}}(zt||(zt={}));let Ft=1;class Wt extends k{static fromElement(t){return v(t)||null}static fromClosestElement(t){let e=v(t);for(;!e&&t.parentElement;)e=v(t=t.parentElement);return e}static fromCode(t){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=t;let i=e.firstElementChild,n=i.localName;return new(W(n))(n,i)}constructor(t,e){var i;super(),this.elementListeners=null,this.cachedAttributes=new Map,this.cachedAttributesNS=new G,this.cachedStyle=new Map,this.needsUpdate=!1,this.element=e||this.createElement(t),i=this.element,w.set(i,this)}createElement(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}get parent(){return v(this.element.parentNode)}get svg(){return v(this.element.ownerSVGElement)}get localName(){return this.element.localName}get attached(){return!!this.element.ownerSVGElement}get index(){var t;return(null===(t=this.parent)||void 0===t?void 0:t.indexOf(this))||null}get previousNode(){return v(this.element.previousElementSibling)}get nextNode(){return v(this.element.nextElementSibling)}getId(){return this.element.id||(this.element.id="kitty_"+this.element.localName+"_"+Ft++),this.element.id}setId(t){this.element.id=t}getViewBox(){var t,e;if(!["marker","pattern","svg","symbol","view"].includes(this.element.localName))throw new Error(`"<${this.element.localName}>" doesn't shpport viewBox!`);let i=this.element.getAttribute("viewBox");if(i){let t=i.split(" ").map((t=>Number(t)));return new _(t[0],t[1],t[2],t[3])}return new _(0,0,this.element.clientWidth||(null===(t=this.element.parentNode)||void 0===t?void 0:t.clientWidth),this.element.clientHeight||(null===(e=this.element.parentNode)||void 0===e?void 0:e.clientHeight))}setViewBox(t,e,i,n){if(!["marker","pattern","svg","symbol","view"].includes(this.element.localName))throw new Error(`"<${this.element.localName}>" doesn't support viewBox!`);this.element.setAttribute("viewBox",[t,e,i,n].join(" "))}setAttribute(t,e){null===e?this.removeAttribute(t):this.cachedAttributes.get(t)!==e&&(this.element.setAttribute(t,String(e)),this.cachedAttributes.set(t,e))}getAttribute(t){if(this.cachedAttributes.has(t)){let e=this.cachedAttributes.get(t);return null===e?null:String(e)}{let e=this.element.getAttribute(t);return this.cachedAttributes.set(t,e),e}}removeAttribute(t){this.element.removeAttribute(t),this.cachedAttributes.set(t,null)}setAttributeNS(t,e,i){null===i?this.removeAttributeNS(t,e):this.cachedAttributesNS.get(t,e)!==i&&(this.cachedAttributesNS.set(t,e,i),this.element.setAttributeNS(t,e,String(i)))}getAttributeNS(t,e){let i;if(this.cachedAttributesNS.has(t,e)){let n=this.cachedAttributesNS.get(t,e);i=null===n?null:String(n)}else i=this.element.getAttributeNS(t,e),this.cachedAttributesNS.set(t,e,i);return i}removeAttributeNS(t,e){let i=this.cachedAttributesNS.get(t,e);null!=i&&(this.element.removeAttributeNS(t,e),void 0===i&&this.cachedAttributesNS.set(t,e,null))}getStyle(t){return this.cachedStyle.has(t)?this.cachedStyle.get(t):this.element.style[t]}setStyle(t,e){this.cachedStyle.get(t)!==e&&(this.element.style[t]=String(e),this.cachedStyle.set(t,e))}getHTML(){return this.cachedStyle.has("html")?this.cachedStyle.get("html"):this.element.innerHTML}setHTML(t){this.cachedStyle.get("html")!==t&&(this.element.innerHTML=t,this.cachedStyle.set("html",t))}before(...t){this.element.before(...t.map((t=>t.element)))}after(...t){this.element.after(...t.map((t=>t.element)))}remove(){this.element.remove()}replaceWith(...t){this.element.replaceWith(...t.map((t=>t.element)))}willUpdate(){this.needsUpdate=!0,ot(this)}update(){}ensureElementListenerType(t,e){var i;(null===(i=this.elementListeners)||void 0===i?void 0:i.has(t))||this.bindElementListenerType(t,e)}bindElementListenerType(t,e){this.elementListeners||(this.elementListeners=new Map);let i=e=>{let i=new X(e,this.svg);this.fire(t,i)};zt.isSimulatedEventType(t)&&zt.on(this.element,t,i),this.element.addEventListener(t,i,{passive:e}),this.elementListeners.set(t,i)}removeSvgElementListenerType(t){var e;let i=null===(e=this.elementListeners)||void 0===e?void 0:e.get(t);zt.isSimulatedEventType(t)?zt.off(this.element,t,i):this.element.removeEventListener(t,i)}on(t,e,i=null,n=!1){for(let e of Array.isArray(t)?t:[t])this.ensureElementListenerType(e,n);super.on(t,e,i)}once(t,e,i=null,n=!1){for(let e of Array.isArray(t)?t:[t])this.ensureElementListenerType(e,n);super.once(t,e,i)}off(t,e,i=null){super.off(t,e,i);for(let e of Array.isArray(t)?t:[t])this.hasListenerType(e)||this.removeSvgElementListenerType(e)}clone(){let t=this.element.cloneNode(!0),e=t.localName;return new(W(e))(e,t)}}class $t extends Wt{indexOf(t){let e=0;for(let i of this.children){if(i===t)return e;e++}return-1}append(...t){this.element.append(...t.map((t=>t.element)))}prepend(...t){this.element.prepend(...t.map((t=>t.element)))}get firstChild(){return v(this.element.firstChild)}get lastChild(){return v(this.element.lastChild)}get children(){return this.getChildren()}*getChildren(){for(let t of this.element.children){let e=v(t);e&&(yield e)}}childAt(t){return v(this.element.children[t])}}class Vt extends $t{constructor(t,e){super(t,e)}toString(){return"url(#"+this.getId()+")"}}class jt extends Vt{constructor(t="clipPath",e){super(t,e)}}F("clipPath",jt);class Ht{constructor(t){this.matrix=lt.I(),this.onUpdate=t}setMatrix(t){this.matrix=t,this.onUpdate()}translate(t,e){this.matrix=this.matrix.translate(t,e),this.onUpdate()}setTranslate(t,e){this.matrix=lt.I(),this.matrix=this.matrix.translate(t,e),this.onUpdate()}rotateAngle(t){this.matrix=this.matrix.rotateAngle(t),this.onUpdate()}scale(t,e=t){this.matrix=this.matrix.scale(t,e),this.onUpdate()}skewAngle(t,e){this.matrix=this.matrix.skewAngle(t,e),this.onUpdate()}clear(){this.matrix=lt.I(),this.onUpdate()}toString(){return this.matrix.isI()?"":this.matrix.toString()}}class Ut extends $t{constructor(t,e){super(t,e),this.transform=new Ht((()=>{this.updateTransform()}))}getBoundaryBoxInPaper(){let t=this.getLocalBoundaryBox();return this.getPaperCTM().transferBox(t)}getBoundaryBoxInScreen(){let t=this.getLocalBoundaryBox();return this.getScreenCTM().transferBox(t)}getLocalBoundaryBox(){if(!(this.element instanceof SVGGraphicsElement))throw new Error(`"<${this.element.localName}>" is not a graphic element!`);et===J.WILL_UPDATE_SOON&&at();let t=this.element.getBBox();return new _(t.x,t.y,t.width,t.height)}getPaperCTM(){if(!(this.element instanceof SVGGraphicsElement))throw new Error(`"<${this.element.localName}>" is not a graphic element!`);let t=this.element.getCTM()||new DOMMatrix,e=lt.fromDOMMatrix(t);return this.svg.getViewTransformMatrix().inverse().multiply(e)}getScreenCTM(){if(!(this.element instanceof SVGGraphicsElement))throw new Error(`"<${this.element.localName}>" is not a graphic element!`);return lt.fromDOMMatrix(this.element.getScreenCTM())}getComputedWidth(){return this.element.clientWidth}getComputedHeight(){return this.element.clientHeight}getComputedSize(){return{width:this.getComputedWidth(),height:this.getComputedHeight()}}getOpacity(){var t;return null!==(t=Number(this.getAttribute("opacity")))&&void 0!==t?t:1}setOpacity(t){this.setAttribute("opacity",String(t))}setVisible(t){this.setAttribute("display",t?null:"none")}getVisible(){return"none"!==this.getAttribute("display")}updateTransform(){let t=this.transform.toString();this.setAttribute("transform",t||null)}bringTo(t){var e,i;let n=null===(e=this.parent)||void 0===e?void 0:e.childAt(t);n?n.before(this):null===(i=this.parent)||void 0===i||i.append(this)}bringToFront(){var t,e;(null===(t=this.parent)||void 0===t?void 0:t.lastChild)!==this&&(null===(e=this.parent)||void 0===e||e.append(this))}bringToBack(){var t,e;(null===(t=this.parent)||void 0===t?void 0:t.firstChild)!==this&&(null===(e=this.parent)||void 0===e||e.prepend(this))}setClipPath(t){t.parent||this.svg.appendResource(t),this.setAttribute("clip-path","url(#"+t.getId()+")")}clearClipPath(){this.removeAttribute("clip-path")}setMarker(t,e="end"){this.setAttribute("marker-"+e,t.toString())}clearMarker(t="end"){this.removeAttribute("marker-"+t)}onUpdateViewTransformMatrix(t){}}class Kt extends Ut{constructor(t="g",e){super(t,e)}}F("g",Kt);class qt extends Ut{constructor(t="a",e){super(t,e)}set href(t){this.setAttributeNS("http://www.w3.org/1999/xlink","href",t)}get href(){return this.getAttributeNS("http://www.w3.org/1999/xlink","href")||""}set target(t){this.setAttribute("target",t)}get target(){return this.getAttribute("target")}}F("a",qt);class Zt extends Ut{constructor(t="image",e){super(t,e),this.willUpdate()}get url(){return this.getAttributeNS("http://www.w3.org/1999/xlink","href")||""}set url(t){this.setAttributeNS("http://www.w3.org/1999/xlink","href",t)}get title(){return this.getAttributeNS("http://www.w3.org/1999/xlink","title")||""}set title(t){this.setAttributeNS("http://www.w3.org/1999/xlink","title",t||"")}get x(){return Number(this.getAttribute("x"))}set x(t){this.setAttribute("x",t)}get y(){return Number(this.getAttribute("y"))}set y(t){this.setAttribute("y",t)}get width(){return Number(this.getAttribute("width"))}set width(t){this.setAttribute("width",t)}get height(){return Number(this.getAttribute("height"))}set height(t){this.setAttribute("height",t)}}F("image",Zt);class Gt{constructor(t){this.curvePath=t}smooth(t,e){let i=[],n=0;for(let o=0;o<this.curvePath.continuousCurves.length;o++){let r=this.curvePath.continuousCurves[o],s=n+r.curves.length+1,a=e?this.findLocalIndicesInRange(e,n,s):null,l=this.smoothContinuous(r,t,a);i.push(l),n=s}return At.fromContinuousCurves(...i)}findLocalIndicesInRange(t,e,i){return t.filter((t=>t>=e&&t<i)).map((t=>t-e))}smoothContinuous(t,e,i){var n,o,r,s;let a=t.closed,l=[],h=new Array(t.curves.length),d=a?t.curves[t.curves.length-1]:null;for(let n=0;n<t.curves.length;n++){let o=t.curves[n];if((!i||i.includes(n))&&d){let i=this.smoothEach(d,o,e,a,n,t.curves.length);i&&(h[n]=i)}d=o}for(let e=0;e<t.curves.length;e++){let i=t.curves[e],a=h[(e-1+t.curves.length)%t.curves.length],d=h[e],c=h[(e+1)%t.curves.length];if(d&&d.qPoint){let t=Math.max(0,d.leftCurve.getLength()-(null!==(n=null==a?void 0:a.radius)&&void 0!==n?n:0)-d.radius),e=Math.max(0,d.rightCurve.getLength()-(null!==(o=null==c?void 0:c.radius)&&void 0!==o?o:0)-d.radius),i=1-t/(t+d.radius+1e-4),r=1-e/(e+d.radius+1e-4),s=.552*i+.75*(1-i),h=.552*r+.75*(1-r);l.push(new ft(d.leftPoint,d.rightPoint,d.leftPoint.mix(d.qPoint,s),d.rightPoint.mix(d.qPoint,h)))}d||c?l.push(i.partOf(null!==(r=null==d?void 0:d.rightT)&&void 0!==r?r:0,null!==(s=null==c?void 0:c.leftT)&&void 0!==s?s:1)):l.push(i)}return xt.fromCurves(l,t.closed)}smoothEach(t,e,i,n,o,r){var s;let a=t.tagentAt(1).normalize(),l=e.tagentAt(0).normalize();if(0===a.getLengthSquare()||0===l.getLengthSquare())return null;if(l.dot(a)>.9962)return null;let h=t.getLength(),d=e.getLength(),c=n||1!==o?h/2:h,u=n||o!==r-1?d/2:d;i=Math.min(i,c,u);let p=t.tAtLength(h-i),m=e.tAtLength(i),g=t.pointAt(p),f=e.pointAt(m),y=t.tagentAt(p),x=e.tagentAt(m),w=new Pt(g,y),v=new Pt(f,x);return{leftT:p,rightT:m,leftPoint:g,rightPoint:f,leftCurve:t,rightCurve:e,qPoint:(null===(s=w.normalIntersectWithRadialLine(v))||void 0===s?void 0:s.point)||null,radius:i}}}class Yt{constructor(){this.key="",this.value=null}set(t,e){this.key=t.map((t=>String(t))).join("$"),this.value=e}get(t){return t.map((t=>String(t))).join("$")===this.key?this.value:null}}class Jt extends pt{constructor(t,e,i,n,o){super(t,e),this.radius=i,this.largeArcFlag=n,this.clockwiseFlag=o,this.parameters=function(t,e,i,n,o){let r=(t.x-e.x)/i,s=(t.y-e.y)/i,a=o?-1:1,l=Math.sqrt(r*r+s*s)/2*a;l=Math.min(Math.max(l,-1),1);let h=Math.asin(l);n&&(h=Math.PI*a-h);let d=Math.atan2(-r*a,s*a),c=d+h,u=d-h,p=Math.cos(c),m=Math.sin(c);return{center:{x:t.x-i*p,y:t.y-i*m},startRadians:c,endRadians:u}}(t,e,i,n,o)}pointAt(t){let{center:e,startRadians:i,endRadians:n}=this.parameters,{radius:o}=this,r=ct(i,n,t),s=Math.cos(r),a=Math.sin(r),l=e.x+o*s,h=e.y+o*a;return new A(l,h)}tagentAt(t){let{startRadians:e,endRadians:i}=this.parameters,{radius:n}=this,o=ct(e,i,t),r=Math.cos(o),s=Math.sin(o),a=i-e;return new P(-n*s*a,n*r*a)}partOf(t,e){let{startRadians:i,endRadians:n}=this.parameters,{radius:o}=this,r=this.pointAt(t),s=this.pointAt(e),a=ct(i,n,t),l=ct(i,n,e)-a>Math.PI?1:0;return new Jt(r,s,o,l,this.clockwiseFlag)}transform(t){let e=t.transferPoint(this.startPoint),i=t.transferPoint(this.endPoint),n=this.radius,o=this.largeArcFlag,r=t.a>0?this.clockwiseFlag:1-this.clockwiseFlag;return new Jt(e,i,n,o,r)}toJSON(){return{type:"A",data:[this.radius,this.radius,0,this.largeArcFlag,this.clockwiseFlag,this.endPoint.x,this.endPoint.y]}}}class Xt{constructor(t,e){this.curvePath=t,this.useRoundedLineCap=e}generateCurvePath(t,e=2){let i=[];for(let n of this.curvePath.continuousCurves){let o=[],{leftPoints:r,rightPoints:s,startStrokeWidth:a,endStrokeWidth:l}=this.generatePolygonPointsForContinuousCurve(n,t,e);for(let t=1;t<r.length;t++){let e=new mt(r[t-1],r[t]);o.push(e)}this.useRoundedLineCap?o.push(new Jt(r[r.length-1],s[s.length-1],l/2,0,1)):o.push(new mt(r[r.length-1],s[s.length-1]));for(let t=s.length-1;t>=1;t--){let e=new mt(s[t],s[t-1]);o.push(e)}this.useRoundedLineCap?o.push(new Jt(s[0],r[0],a/2,0,1)):o.push(new mt(s[0],r[0]));let h=xt.fromCurves(o,!0);i.push(h)}return At.fromContinuousCurves(...i)}generatePolygonPointsForContinuousCurve(t,e,i){let n=t.getLength(),o=Math.ceil(n/i),{leftResults:r,rightResults:s,startStrokeWidth:a,endStrokeWidth:l}=this.samplingCurvesBasedOnSegmentLength(t,e,o);return{leftPoints:this.connectStrokePoints(r),rightPoints:this.connectStrokePoints(s),startStrokeWidth:a,endStrokeWidth:l}}samplingCurvesBasedOnSegmentLength(t,e,i){let n=t.getLength(),o=n/i,r=0,s=[],a=[];for(let i of t.curves){let t=i.getLength(),l=Math.ceil(t/o),h=[],d=[];if(0!==l){for(let o=0;o<=l;o++){let s=o/l,a=(r+s*t)/n,c=i.spacedPointAt(s),u=i.tagentAt(s).normalize(),p=i.curvatureAt(s),m=u.rotateInDegree(90),g=e(a,n)/2,f=c.add(m.multiplyScalar(-g)),y=c.add(m.multiplyScalar(g));h.push({point:f,tagent:u,curvature:p,halfWidth:g}),d.push({point:y,tagent:u,curvature:p,halfWidth:g})}h.length>0&&(s.push(h),a.push(d)),r+=i.getLength()}}return{leftResults:s,rightResults:a,startStrokeWidth:e(0,n),endStrokeWidth:e(1,n)}}connectStrokePoints(t){let e=[],i=new Array(t.length);for(let e=0;e<t.length;e++)i[e]=[0,t[e].length-1];let n=[],o=[];for(let e=0;e<t.length;e++)n[e]=[],o[e]=[];for(let e=1;e<t.length;e++){let r=t[e],s=r[0],a=t[e-1],l=a[a.length-1];if(s.point.distanceTo(l.point)<1e-4)continue;let h=this.getNormalDiffTagent(a,a.length-1,-1),d=this.getNormalDiffTagent(r,0,1),c=new Pt(l.point,h),u=new Pt(s.point,d),p=c.normalIntersectWithRadialLine(u);if(!p)continue;let{point:m}=p;if(this.isCrossOutside(p)){if(h.dot(d)>-.5){n[e].push(m);let{untilIndex:t,crossPoint:s}=this.fixGillIndexAtEdge(a,m,-1);i[e-1][1]=t,s&&o[e-1].push(s);let{untilIndex:l,crossPoint:h}=this.fixGillIndexAtEdge(r,m,1);i[e][0]=l,h&&n[e].push(h)}}else if(this.isCrossInside(p)){let t=this.queryInnerCrossPoint(a,r,p);t&&(n[e].push(t.point),i[e-1][1]=t.lastIndex,i[e][0]=t.currentIndex)}else{let t=c.point.add(c.vector.multiplyScalar(l.halfWidth));n[e].push(t)}}for(let r=0;r<t.length;r++){n[r]&&e.push(...n[r]);let s=t[r].slice(i[r][0],i[r][1]+1);e.push(...s.map((t=>t.point))),o[r]&&e.push(...o[r])}return e}fixGillIndexAtEdge(t,e,i){let n=1===i?0:t.length-1,o=n,r=Pt.fromPoints(e,t[n].point),s=null;for(let e=0;e<t.length-2;e++){let n=1===i?e:t.length-1-e;if(this.getDiffTagent(t,n,i).dot(t[n].tagent)<.9){o=n;continue}let a=Pt.fromPoints(t[n].point,t[n+i].point),l=r.normalIntersectWithRadialLine(a);if(!(l&&(s=l.point,l.niu>=1)))break}return{untilIndex:o,crossPoint:s}}getDiffTagent(t,e,i){let n=null;return 1===i?e+1<t.length&&(n=t[e+1].point.diff(t[e].point).normalize()):e>0&&(n=t[e].point.diff(t[e-1].point).normalize()),n||t[e].tagent}getNormalDiffTagent(t,e,i){let n=t[e].tagent,o=null;return 1===i?e+1<t.length&&(o=t[e+1].point.diff(t[e].point).normalize()):e>0&&(o=t[e].point.diff(t[e-1].point).normalize()),o&&t[e].curvature<.1?o:n}queryInnerCrossPoint(t,e,i){let n=t.length-1,o=0;for(;-i.miu>i.niu?n--:o++,n>=0&&o<e.length;){let r=t[n],s=e[o],a=this.getDiffTagent(t,n,-1),l=this.getDiffTagent(e,o,1),h=new Pt(r.point,a),d=new Pt(s.point,l);if(!(i=h.normalIntersectWithRadialLine(d)))return null;if(this.isCrossOutside(i))return a.normalize().dot(l.normalize())<-.5?null:{point:i.point,lastIndex:n,currentIndex:o}}return null}isCrossOutside(t){return t.miu>=0&&t.niu<=0}isCrossInside(t){return t.miu<=0&&t.niu>=0}}class Qt{constructor(){this.matrix=null,this.strokeWidth=0,this.smoothRadius=0,this.smoothCornerIndices=null,this.strokeWidthBy=null,this.useRoundedLineCap=!1,this.suggestedSegmentLength=2,this.pieces=[],this.cache=null,this.cachedCurvePath=null,this.cachedPieces=null}setElementStrokeWidth(t){this.strokeWidthBy||(this.strokeWidth=t)}moveTo(t,e){this.add("M",[t,e])}moveBy(t,e){this.add("m",[t,e])}lineTo(t,e){this.add("L",[t,e])}lineBy(t,e){this.add("l",[t,e])}verticalLineTo(t){this.add("V",[t])}verticalLineBy(t){this.add("v",[t])}horizontalLineTo(t){this.add("H",[t])}horizontalLineBy(t){this.add("h",[t])}ellipseTo(t,e,i,n,o,r,s){this.add("A",[t,e,i,n,o,r,s])}ellipseBy(t,e,i,n,o,r,s){this.add("a",[t,e,i,n,o,r,s])}arcTo(t,e,i,n,o){this.add("A",[t,t,0,e,i,n,o])}arcBy(t,e,i,n,o){this.add("a",[t,t,0,e,i,n,o])}bezierTo(t,e,i,n,o,r){this.add("C",[t,e,i,n,o,r])}bezierBy(t,e,i,n,o,r){this.add("c",[t,e,i,n,o,r])}qBezierTo(t,e,i,n){this.add("Q",[t,e,i,n])}qBezierBy(t,e,i,n){this.add("q",[t,e,i,n])}close(){this.add("z",[])}add(t,e){this.pieces.push({type:t,data:e})}getPathD(){let t=this.makePathD(this.pieces);if(this.cache){let e=this.cache.get(this.getCacheKey(t));if(e)return e}let e=this.makeFinalPathD(t);return this.shouldUseCache()?(this.cache||(this.cache=new Yt),this.cache.set(this.getCacheKey(t),e)):this.cache&&(this.cache=null),e}makePathD(t){let e="";for(let i=0;i<t.length;i++){let{type:n,data:o}=t[i],r=i===t.length-1?"":" ";e+=n+o.map((t=>C(t,3))).join(" ")+r}return e}shouldUseCache(){return this.matrix||this.smoothRadius||this.strokeWidthBy}getCacheKey(t){return[this.matrix,this.smoothRadius,this.smoothCornerIndices,this.strokeWidthBy?this.strokeWidthBy(.5,500):null,this.suggestedSegmentLength,this.strokeWidth,t]}makeFinalPathD(t){let e=this.pieces,i=null,n=this.matrix;return n&&(i=At.fromPathData(e),i=i.transform(n)),this.smoothRadius>0&&(i=i||At.fromPathData(e),i=new Gt(i).smooth(this.smoothRadius,this.smoothCornerIndices)),this.cachedCurvePath=i,this.cachedPieces=e,this.strokeWidthBy&&(i=i||At.fromPathData(e),i=new Xt(i,this.useRoundedLineCap).generateCurvePath(this.strokeWidthBy,this.suggestedSegmentLength)),i&&(e=i.toJSON()),e!==this.pieces?this.makePathD(e):t}getFinalCurvePath(){return this.cachedCurvePath||(this.cachedCurvePath=At.fromPathData(this.getFinalPieces()))}getFinalPieces(){return this.cachedPieces||this.pieces}getNormalPathD(){if(this.cachedCurvePath){let t=this.cachedCurvePath.toJSON();return this.makePathD(t)}return this.makePathD(this.getFinalPieces())}clear(){this.pieces=[]}}class te extends Ut{constructor(t="path",e){super(t,e),this.closed=!1,this.builder=new Qt}set matrix(t){this.builder.matrix=t,this.willUpdate()}set smoothRadius(t){this.builder.smoothRadius=t,this.willUpdate()}set smoothCornerIndices(t){this.builder.smoothCornerIndices=t,this.willUpdate()}setDynamicStroke(t,e,i,n,o){this.builder.strokeWidthBy=t,this.builder.strokeWidth=e,this.builder.useRoundedLineCap=o,i&&(this.builder.suggestedSegmentLength=i),t?(this.removeAttribute("stroke-width"),this.removeAttribute("stroke"),this.setAttribute("fill",n)):(this.setAttribute("stroke",n),this.setAttribute("stroke-width",e),this.setAttribute("fill","none")),this.willUpdate()}getAttribute(t){return"d"===t&&this.needsUpdate&&(this.update(),this.needsUpdate=!1),super.getAttribute(t)}moveTo(t,e){this.builder.moveTo(t,e),this.willUpdate()}moveBy(t,e){this.builder.moveBy(t,e),this.willUpdate()}lineTo(t,e){this.builder.lineTo(t,e),this.willUpdate()}lineBy(t,e){this.builder.lineBy(t,e),this.willUpdate()}verticalLineTo(t){this.builder.verticalLineTo(t),this.willUpdate()}verticalLineBy(t){this.builder.verticalLineBy(t),this.willUpdate()}horizontalLineTo(t){this.builder.horizontalLineTo(t),this.willUpdate()}horizontalLineBy(t){this.builder.horizontalLineBy(t),this.willUpdate()}ellipseTo(t,e,i,n,o,r,s){this.builder.ellipseTo(t,e,i,n,o,r,s),this.willUpdate()}ellipseBy(t,e,i,n,o,r,s){this.builder.ellipseBy(t,e,i,n,o,r,s),this.willUpdate()}arcTo(t,e,i,n,o){this.builder.arcTo(t,e,i,n,o),this.willUpdate()}arcBy(t,e,i,n,o){this.builder.arcBy(t,e,i,n,o),this.willUpdate()}bezierTo(t,e,i,n,o,r){this.builder.bezierTo(t,e,i,n,o,r),this.willUpdate()}bezierBy(t,e,i,n,o,r){this.builder.bezierBy(t,e,i,n,o,r),this.willUpdate()}qBezierTo(t,e,i,n){this.builder.qBezierTo(t,e,i,n),this.willUpdate()}qBezierBy(t,e,i,n){this.builder.qBezierBy(t,e,i,n),this.willUpdate()}close(){this.builder.close(),this.willUpdate()}update(){this.builder.setElementStrokeWidth(Number(this.getAttribute("stroke-width"))||0),this.setAttribute("d",this.builder.getPathD())}clear(){this.builder.clear()}toCurvePath(){return this.needsUpdate&&(this.update(),this.needsUpdate=!1),this.builder.getFinalCurvePath()}getNormalPathD(){return this.builder.getNormalPathD()}}F("path",te);class ee extends te{constructor(){super(...arguments),this._x1=0,this._y1=0,this._x2=0,this._y2=0}get x1(){return this._x1}set x1(t){this._x1=t,this.willUpdate()}get y1(){return this._y1}set y1(t){this._y1=t,this.willUpdate()}get x2(){return this._x2}set x2(t){this._x2=t,this.willUpdate()}get y2(){return this._y2}set y2(t){this._y2=t,this.willUpdate()}update(){let t=this.builder;t.clear(),t.moveTo(this._x1,this._y1),t.lineTo(this._x2,this._y2),super.update()}}class ie extends Vt{constructor(t="marker",e){super(t,e)}get refX(){return Number(this.getAttribute("refX"))}set refX(t){this.setAttribute("refX",t)}get refY(){return Number(this.getAttribute("refY"))}set refY(t){this.setAttribute("refY",t)}get markerWidth(){return Number(this.getAttribute("markerWidth"))}set markerWidth(t){this.setAttribute("markerWidth",t)}get markerHeight(){return Number(this.getAttribute("markerHeight"))}set markerHeight(t){this.setAttribute("markerHeight",t)}get orient(){let t=this.getAttribute("orient");return t&&/^\d+(?:\.\d+)?$/.test(t)?Number(t):t}set orient(t){this.setAttribute("orient",t)}}F("marker",ie);class ne extends Ut{constructor(t="text",e){super(t,e),this._content=""}get x(){return Number(this.getAttribute("x"))}set x(t){this.setAttribute("x",t)}get y(){return Number(this.getAttribute("y"))}set y(t){this.setAttribute("y",t)}get content(){var t,e;return null!==(e=null!==(t=this._content)&&void 0!==t?t:this.element.textContent)&&void 0!==e?e:""}set content(t){this._content!==t&&(this.element.textContent=t,this._content=t)}get textAnchor(){return this.getAttribute("text-anchor")||"start"}set textAnchor(t){this.setAttribute("text-anchor",t)}}function oe(t,e=10){if("object"!=typeof t||!t||0===e)return t;if(Array.isArray(t))return t.map((t=>"object"==typeof t&&t?oe(t,e-1):t));{let i={};for(let n of Object.keys(t)){let o=t[n];i[n]=oe(o,e-1)}return i}}function re(t,e,i=10){if(t===e)return!0;if(0===i)return!1;if("object"!=typeof t||"object"!=typeof e||!t||!e)return!1;if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every(((t,n)=>re(t,e[n],i-1)));{let n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(let o of n)if(!re(t[o],e[o],i-1))return!1;return!0}}function se(t,e,i=10){if("object"!=typeof e||"object"!=typeof t||!e||!t)return t;if(0===i)return t;for(let n of Object.keys(e)){let o=e[n],r=t[n];t[n]="object"==typeof r&&r?se(oe(r),o,i-1):oe(o)}return t}F("text",ne);class ae{constructor(){this.map=new Map}set(t,e,i){let n=this.map.get(t);n||(n=new Map,this.map.set(t,n)),n.set(e,i)}has(t,e){let i=this.map.get(t);return!!i&&i.has(e)}get(t,e){let i=this.map.get(t);if(i)return i.get(e)}getCountOf(t){var e;return(null===(e=this.map.get(t))||void 0===e?void 0:e.size)||0}delete(t,e){let i=this.map.get(t);i&&(i.delete(e),0===i.size&&this.map.delete(t))}}class le{constructor(){this.lm=new Map,this.rm=new Map}getLeftSize(){return this.lm.size}getRightSize(){return this.rm.size}add(t,e){this.lm.set(t,e),this.rm.set(e,t)}hasLeft(t){return this.lm.has(t)}hasRight(t){return this.rm.has(t)}getFromLeft(t){return this.lm.get(t)}getFromRight(t){return this.rm.get(t)}deleteFromLeft(t){return!!this.hasLeft(t)&&(this.rm.delete(this.lm.get(t)),this.lm.delete(t),!0)}deleteFromRight(t){return!!this.hasRight(t)&&(this.lm.delete(this.rm.get(t)),this.rm.delete(t),!0)}getAllLeft(){return this.lm.keys()}getAllRight(){return this.rm.keys()}}const he=new Map;function de(t){let e=(he.get(t)||0)+1;return he.set(t,e),t+"-"+e}function ce(t){return t.replace(/-\d+$/,"")}function ue(){return crypto.randomUUID().slice(-10)}function pe(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}function me(){return new Promise(((t,e)=>{let i="fullscreenchange",n="fullscreenerror";const o=document.body;"requestFullscreen"in o?(i="fullscreenchange",n="fullscreenerror"):"webkitRequestFullscreen"in o?(i="webkitfullscreenchange",n="webkitfullscreenerror"):"mozRequestFullScreen"in o?(i="mozfullscreenchange",n="mozfullscreenerror"):"msRequestFullscreen"in o?(i="MSFullscreenChange",n="MSFullscreenError"):e(new Error("Fullscreen API is not supported"));let r=()=>{t(pe()),document.removeEventListener(i,r,!1),document.removeEventListener(n,s,!1)},s=t=>{e(t),document.removeEventListener(i,r,!1),document.removeEventListener(n,s,!1)};document.addEventListener(i,r,!1),document.addEventListener(n,s,!1)}))}function ge(t){return t.includes(" ")?t.trim().split(/\s*,\s*/g).map((t=>(t=t.replace(/['"]/g,"")).includes(" ")?`"${t}"`:t)).join(", "):t}function fe(t,e="yyyy-MM-dd hh:mm:ss"){return e.replace(/y+|M+|d+|h+|m+|s+/g,(e=>{let i=e[0],n=function(t,e){switch(e){case"y":return t.getFullYear();case"M":return t.getMonth();case"d":return t.getDate();case"h":return t.getHours();case"m":return t.getMinutes();case"s":return t.getSeconds();default:throw new Error(`"${e}" is not a valid date unit`)}}(t,i[0]);return"M"===i&&(n+=1),String(n).padStart(e.length,"0")}))}var ye,xe;let we,ve,be;"randomUUID"in crypto||(crypto.randomUUID=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>{let e=Number(t);return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}),function(t){t[t.None=0]="None",t[t.Warn=1]="Warn",t[t.Log=2]="Log",t[t.Verbose=3]="Verbose",t[t.VeryVerbose=4]="VeryVerbose"}(ye||(ye={})),function(t){var e;t.inDevelopment="localhost"===location.hostname||"127.0.0.1"===location.hostname,t.logLevel=t.inDevelopment?ye.Verbose:ye.None;let i=null===(e=location.search.match(/loglevel=(\d+)/))||void 0===e?void 0:e[1];function n(e){t.logLevel>=ye.Log&&console.log(e)}i&&(t.logLevel=Number(i)),t.verbose=function(e){t.logLevel>=ye.Verbose&&console.log("%c"+e,"color: #999")},t.veryVerbose=function(e){t.logLevel>=ye.VeryVerbose&&console.log("%c"+e,"color: #bbb")},t.log=n,t.warn=function(e){t.logLevel>=ye.Warn&&console.warn(e)},t.timeStart=function(e){let i=0;return t.logLevel>=ye.Log&&(i=performance.now()),()=>{if(t.logLevel>=ye.Log){let t=C(performance.now()-i,2),o=`${e} cost ${t} ms`;t>10?console.log("%c"+o,"color: #c80"):n(o)}}}}(xe||(xe={}));const ke="A quick brown fox jump over the lazy dog.",Ce=new Map;let Se=null,Te=null;function Me(){if(Se)return Se;let t=document.createElement("canvas");return Se=t.getContext("2d"),Se}class Ae{constructor(t){this.hash=null,this.context=t}updateContextState(t){let{fontSize:e,fontFamily:i}=t,n=this.getFontStyle(t),o=this.makeHash(t);this.hash&&this.compareHash(o,this.hash)||(this.context.font=`${n||""} ${e}px "${i}"`,this.context.textAlign="left",this.context.textBaseline="alphabetic",this.hash=o)}makeHash(t){let{fontSize:e,fontFamily:i,fontWeight:n,italic:o}=t;return[e,i,n,o]}compareHash(t,e){return t.every(((t,i)=>t===e[i]))}getFontStyle(t){let{fontWeight:e,italic:i}=t;return e+" "+(i?"italic":"").trim()}}function Pe(t,e){let i=e.measureText(t),n=i.advances;if(!n){n=[0];for(let o=1;o<t.length;o++){let r=t.slice(0,o),s=o===t.length?i.width:e.measureText(r).width;n.push(s)}i.advances=n}return i}function De(t){return"left"===t?0:"right"===t?1:.5}function Ie(t,e,i){if(!/\w/i.test(t[e]))return e;for(let n=e;n>=i;n--)if(!/\w/.test(t[n]))return n+1;return e}function Ee(t){return/[ \u00a0\t]/.test(t)}function Le(t){return/[\r\n]/.test(t)}function Oe(t,e=0){let i=0;if(t.length>e+1&&Le(t[e]))for(let n=e;n<t.length&&Le(t[n]);n++)i++;else for(let n=e;n<t.length&&Ee(t[n]);n++)i++;return i}const Be={fontFamily:"",fontWeight:"normal",italic:!1,fontSize:14,width:1/0,lineHeight:1.5,textAlign:"center",letterSpacingRate:0,maxLineCount:1/0,maxHeight:1/0};class Re{constructor(t={width:1/0}){this.properties={...Be,...t},this.updateContextState()}async loadFontFaces(t,e=1e3){let i=document.fonts.load(this.properties.fontFamily,t),n=new Promise((t=>{setTimeout(t,e)}));await Promise.race([i,n])}isFontFacesLoaded(t){return document.fonts.check(this.properties.fontFamily,t)}measure(t,e){let{lineHeight:i,textAlign:n,fontSize:o}=this.properties,{line:r,shrinked:s}=this.reuseMeasuredLine(e)||this.measureOneLineOfText(t),{textLines:a,ellipsisInEnd:l}=this.measureTextLines(r,s),h={unwrappedTextLine:r,lines:a,lineCount:a.length,totalWidth:Math.max(...a.map((t=>t.lineWidth)),0),totalHeight:0,naturalWidth:r.lineWidth,fontSize:o,lineHeight:0,textAlign:n,lineWrapped:a.length>1,ellipsisInEnd:l};return this.applyLineHeight(h,i),this.applyTextAlign(h,n),h}normalizeText(t){return t.trim().replace(/\r\n?/g,"\n")}reuseMeasuredLine(t){if(!t)return null;if(t.fontSize>this.properties.fontSize)return null;let{fontSize:e}=this.properties,i=e/t.fontSize,n=t.unwrappedTextLine.xs.map((t=>t*i)),o=t.unwrappedTextLine.lineWidth*i;return{line:{text:t.unwrappedTextLine.text,xs:n,y:0,lineWidth:o,autoLineWrap:!1},shrinked:!1}}measureOneLineOfText(t){let e=!1;t=this.normalizeText(t),({text:t,shrinked:e}=this.shrinkText(t));let{fontSize:i}=this.properties,{letterSpacingRate:n}=this.properties,o=n*i,r=Pe(t,Me()),s=r.width+o*(t.length-1),a=r.advances,l=[];for(let e=0;e<t.length;e++){let t=a[e]+(e<=1?0:e-1)*o;l.push(t)}return{line:{text:t,xs:l,y:0,lineWidth:s,autoLineWrap:!1},shrinked:e}}shrinkText(t){let{fontSize:e,width:i}=this.properties,n=this.getFinalMaxLineCount(),o=!1;if(n>0&&i){let r=i*n/e*3;t.length>r&&(t=t.slice(0,r),o=!0)}return{text:t,shrinked:o}}updateContextState(){!function(t){if(!Te){let t=Me();Te=new Ae(t)}Te.updateContextState(t)}(this.properties)}getFirstLineBaseLineY(){let{fontFamily:t,fontSize:e,lineHeight:i}=this.properties,n=function(t){if(Ce.has(t))return Ce.get(t);let e=function(t){we||function(){let t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.style.position="fixed",e.style.top="0",e.style.visibility="hidden",e.style.fontSize="100px";let i=document.createElementNS(t,"text");i.setAttribute("x","0"),i.setAttribute("y","0"),i.style.dominantBaseline="alphabetic",i.textContent=ke,e.appendChild(i);let n=document.createElementNS(t,"text");n.setAttribute("x","0"),n.setAttribute("y","0"),n.style.dominantBaseline="middle",n.textContent=ke,e.appendChild(n),we=e,ve=i,be=n}(),we.style.fontFamily=t,document.body.appendChild(we);let e=ve.getBoundingClientRect(),i=be.getBoundingClientRect(),n=e.height/100,o=-e.top/100,r=n-o,s={ascent:o,descent:r,xHeight:2*(o- -i.top/100),boxHeight:n,yMin:-r,yMax:o};return Ce.set(t,s),document.body.removeChild(we),s}(t);return Ce.set(t,e),e}(t);return e*(n.ascent+(i-n.boxHeight)/2)}measureTextLines(t,e){let i=this.getFinalMaxLineCount(),n=!1,o=this.splitTextLines(t);for((o.length>i||e)&&(o.length>i&&(o=o.slice(0,i)),this.addEllipsisToLine(o[o.length-1]),n=!0);o.length>0&&0===o[o.length-1].xs.length;)o.pop();return{textLines:o,ellipsisInEnd:n}}getFinalMaxLineCount(){let{maxLineCount:t,maxHeight:e,fontSize:i,lineHeight:n}=this.properties,o=isFinite(e)?Math.floor(e/(i*n)):1/0;return Math.min(t,o)}addEllipsisToLine(t){let e,{width:i,fontSize:n,letterSpacingRate:o}=this.properties,r=o*n,s=Pe("",Me()).width,{xs:a}=t;if(t.lineWidth+r+s<=i)e=a.length;else{let t=dt(a,i,(t=>t+r+s))-1;e=Math.max(t,0)}let l=e===t.xs.length?t.lineWidth:t.xs[e];t.text=t.text.slice(0,e)+"",t.xs=[...t.xs.slice(0,e),l],t.lineWidth=l+s+r}splitTextLines(t){let{width:e,fontSize:i,letterSpacingRate:n}=this.properties,o=n*i,{text:r,xs:s,lineWidth:a}=t,l=[],h=Oe(r,0);for(let t=h;t<s.length;t++){let i=s[h]+(0===h?0:o),n=r[t],d=!1,c=(t===s.length-1?a:s[t+1])-i;if(c>e||"\n"===n){let i=t;c>e&&(d=!0,i=Ie(r,t,h));let n=this.makeTextLine(r,s,a,o,h,i,d);l.push(n),h=i+Oe(r,i)}}if(h<s.length){let t=this.makeTextLine(r,s,a,o,h,r.length,!1);t.xs.length>0&&l.push(t)}return l}makeTextLine(t,e,i,n,o,r,s){let a=e[o]+(0===o?0:n),l=r-function(t,e,i){let n=0;for(let o=e;o>=i&&Ee(t[o]);o--)n++;return n}(t,r-1,o),h=t.slice(o,l),d=e.slice(o,l).map((t=>t-a));return d[0]=0,{text:h,xs:d,y:0,lineWidth:(l===e.length?i:e[l])-a,autoLineWrap:s}}applyLineHeight(t,e){let i=t.lines,{fontSize:n}=this.properties,o=n*e,r=this.getFirstLineBaseLineY();for(let t=0;t<i.length;t++)i[t].y=r+o*t;t.totalHeight=o*i.length,t.lineHeight=e}applyTextAlign(t,e){let i=t.lines;for(let t=0;t<i.length;t++){let n=i[t],o=De(e),{text:r,lineWidth:s,xs:a}=n,l=-o*s-a[0];n.lineWidth=s,n.text=r,n.xs=a.map((t=>t+l))}t.textAlign=e}}class Ne{constructor(t,e,i,n,o=1){this.properties={...Be,...t},this.content=e,this.minFontSize=i,this.avoidMinShortLastLineRate=n,this.fontSizePerLineDecreasingRate=o,this.initialMeasurement=new Re({...t}),this.initialResult=this.initialMeasurement.measure(e)}getAdjustedFontMeasurement(){let t,e,i=this.calcMinimumFontSize();if(this.shouldShrinkFontSize(this.initialResult,i)){let n=this.calcFontSizeWhenLimitingMaxHeight()||1/0,o=this.calcFontSizeWhenLimitingMaxLineCount()||1/0,r=Math.min(Math.max(n,o),this.properties.fontSize);({result:t,measurement:e}=this.shrinkedFontSize(r,i))}else t=this.initialResult,e=this.initialMeasurement;return this.shouldShrinkLastLine(t)&&(this.properties.maxLineCount=t.lineCount-1,({result:t,measurement:e}=this.shrinkedFontSize(e.properties.fontSize,i))),{result:t,measurement:e}}shouldShrinkFontSize(t,e){return t.ellipsisInEnd||isFinite(this.properties.maxHeight)&&t.totalHeight>this.properties.maxHeight||this.fontSizePerLineDecreasingRate<1&&t.fontSize>this.properties.fontSize*Math.pow(this.fontSizePerLineDecreasingRate,t.lineCount-1)&&t.fontSize>e}shouldShrinkLastLine(t){return this.avoidMinShortLastLineRate>0&&t.lineCount>1&&t.lines[t.lineCount-1].lineWidth<this.avoidMinShortLastLineRate*t.totalWidth&&!0===t.lines[t.lineCount-2].autoLineWrap}shrinkedFontSize(t,e){t=Math.max(t,e);let i=new Re({...this.properties,fontSize:e}),n=i.measure(this.content,this.initialResult),o=n;if(t>e){let r=[];for(let i=e;i<t;i++)r.push(i);let s=dt(r,0,(t=>{let i=new Re({...this.properties,fontSize:t}).measure(this.content,n);return this.shouldShrinkFontSize(i,e)?1:-1}))-1;s=Math.max(s,0);let a=r[s];i=new Re({...this.properties,fontSize:a}),o=i.measure(this.content,n)}return{result:o,measurement:i}}calcFontSizeWhenLimitingMaxHeight(){if(!isFinite(this.properties.maxHeight))return null;let t=this.initialResult.naturalWidth/this.properties.width,e=this.properties.fontSize*this.properties.lineHeight*t,i=Math.sqrt(this.properties.maxHeight/e);return i=Math.min(i,1),Math.floor(this.properties.fontSize*i)}calcFontSizeWhenLimitingMaxLineCount(){if(!this.properties.maxLineCount)return null;let t=this.initialResult.naturalWidth/this.properties.width,e=this.properties.maxLineCount/t;return e=Math.min(e,1),Math.floor(this.properties.fontSize*e)}calcMinimumFontSize(){if(this.minFontSize)return this.minFontSize;if(!isFinite(this.properties.maxHeight)||!this.properties.maxLineCount)return 14;let t=Math.floor(this.properties.maxHeight/(this.properties.maxLineCount*this.properties.lineHeight));return t=Math.min(t,this.properties.fontSize),t=Math.max(t,14),t}}class _e extends Kt{constructor(){super(...arguments),this._content="",this._x=0,this._y=0,this._width=null,this._maxWidth=1/0,this._maxHeight=1/0,this._fontFamily="",this._fontSize=14,this._minFontSize=0,this._lineHeight=1.2,this._textAlign="left",this._letterSpacingRate=0,this._fontWeight="normal",this._italic=!1,this._maxLineCount=1/0,this._textAlignForMultiLines=null,this._lineHeightForMultiLines=null,this._adaptFontSize=!1,this._avoidMinShortLastLineRate=.2,this._fontSizePerLineDecreasingRate=1,this.spans=[]}getSpans(){return this.spans}get content(){return this._content}set content(t){this._content!==t&&(this._content=t,this.willUpdate())}get x(){return this._x}set x(t){this._x=t,this.willUpdate()}get y(){return this._y}set y(t){this._y=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth=t,this.willUpdate()}get maxHeight(){return this._maxHeight}set maxHeight(t){this._maxHeight=t,this.willUpdate()}get textAlign(){return this._textAlign}set textAlign(t){this._textAlign=t,this.willUpdate()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.setAttribute("font-family",ge(t)),this.willUpdate()}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this.willUpdate()}get minFontSize(){return this._minFontSize}set minFontSize(t){this._minFontSize=t,this.willUpdate()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.willUpdate()}get letterSpacingRate(){return this._letterSpacingRate}set letterSpacingRate(t){this._letterSpacingRate=t,this.willUpdate()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.setAttribute("font-weight",t),this.willUpdate()}get italic(){return this._italic}set italic(t){this._italic=t,this.setAttribute("font-style",t?"italic":"normal"),this.willUpdate()}get maxLineCount(){return this._maxLineCount}set maxLineCount(t){this._maxLineCount=t,this.willUpdate()}get textAlignForMultiLines(){return this._textAlignForMultiLines}set textAlignForMultiLines(t){this._textAlignForMultiLines=t,this.willUpdate()}get lineHeightForMultiLines(){return this._lineHeightForMultiLines}set lineHeightForMultiLines(t){this._lineHeightForMultiLines=t,this.willUpdate()}get adaptFontSize(){return this._adaptFontSize}set adaptFontSize(t){this._adaptFontSize=t,this.willUpdate()}get avoidMinShortLastLineRate(){return this._avoidMinShortLastLineRate}set avoidMinShortLastLineRate(t){this._avoidMinShortLastLineRate=t,this.willUpdate()}get fontSizePerLineDecreasingRate(){return this._fontSizePerLineDecreasingRate}set fontSizePerLineDecreasingRate(t){this._fontSizePerLineDecreasingRate=t,this.willUpdate()}update(){let t={fontFamily:this._fontFamily,fontSize:this._fontSize,textAlign:this._textAlign,width:this._width||this._maxWidth,lineHeight:this._lineHeight,letterSpacingRate:this._letterSpacingRate,fontWeight:this._fontWeight,italic:this._italic,maxLineCount:this._maxLineCount,maxHeight:this._maxHeight};if(this._adaptFontSize){let e=new Ne(t,this._content,this._minFontSize,this._avoidMinShortLastLineRate,this._fontSizePerLineDecreasingRate).getAdjustedFontMeasurement(),i=e.result,n=e.measurement;this.applyResult(i,n)}else{let e=new Re(t),i=e.measure(this._content);this.applyResult(i,e)}}applyResult(t,e){let i=e.properties.fontSize;this._lineHeightForMultiLines&&t.lineCount>=this._lineHeightForMultiLines[0]&&this._lineHeightForMultiLines[1]!==this._lineHeight&&e.applyLineHeight(t,this._lineHeightForMultiLines[1]),this._textAlignForMultiLines&&t.lineCount>=this._textAlignForMultiLines[0]&&this._textAlignForMultiLines[1]!==this._textAlign&&e.applyTextAlign(t,this._textAlignForMultiLines[1]),this.updateComputed(t),this.setAttribute("font-size",i),this.applyLetterSpacing(i),this.updateSpanPositions(t)}applyLetterSpacing(t){this.setAttribute("letter-spacing",t*this._letterSpacingRate)}updateSpanPositions(t){let e=De(this.computed.textAlign)*this.getComputedWidth();for(let i=0;i<t.lineCount;i++){let n=t.lines[i],o=this.spans[i];o||(o=this.spans[i]=this.makeSpan(),this.append(o)),o.content=n.text,o.x=this._x+e+n.xs[0],o.y=this._y+n.y}for(let e=this.spans.length;e>t.lineCount;e--)this.spans.pop().remove()}makeSpan(){return new ne}updateComputed(t){this.computed=t}getComputedWidth(){var t;return null!==(t=this._width)&&void 0!==t?t:this.computed.totalWidth}getComputedHeight(){return this.computed.totalHeight}}class ze extends _e{applyLetterSpacing(t){}updateSpanPositions(t){let e=De(this.computed.textAlign)*this.getComputedWidth(),i=0;for(let n=0;n<t.lineCount;n++){let o=t.lines[n];for(let t=0;t<o.text.length;t++){let n=o.text[t],r=this.spans[i],s=t===o.xs.length-1?o.xs[0]+o.lineWidth:o.xs[t+1];r||(r=this.spans[i]=this.makeSpan(),r.setAttribute("text-anchor","end"),this.append(r)),r.content=n,r.x=this._x+e+s,r.y=this._y+o.y,i++}}for(let t=this.spans.length;t>i;t--)this.spans.pop().remove()}}F("use",class extends Ut{constructor(t="use",e){super(t,e)}get x(){return Number(this.getAttribute("x"))}set x(t){this.setAttribute("x",t)}get y(){return Number(this.getAttribute("y"))}set y(t){this.setAttribute("y",t)}get width(){return Number(this.getAttribute("width"))}set width(t){this.setAttribute("width",t)}get height(){return Number(this.getAttribute("height"))}set height(t){this.setAttribute("height",t)}ref(t){let e=t.getId();this.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+e),this.ensureRefResource(t)}ensureRefResource(t){var e;t.parent||null===(e=this.svg)||void 0===e||e.appendResource(t)}});class Fe extends Ut{constructor(){super("foreignObject"),this.cachedDivStyle=new Map,this.html="",this.appliedScaling=1,this.setStyle("overflow","visible"),this.initDiv(),Promise.resolve().then((()=>{this.svg&&this.onUpdateViewTransformMatrix(this.svg.getViewTransformMatrix())}))}initDiv(){let t=this.div=document.createElement("div");t.setAttribute("xmlns",t.namespaceURI),this.setDivStyle("display","inline-block"),this.setDivStyle("line-height",1.2),this.setDivStyle("vertical-align","top"),this.setDivStyle("tab-size",4),this.setDivStyle("width","max-content"),this.setDivStyle("word-break","break-word"),(c||p)&&(this.setDivStyle("position","fixed"),this.setDivStyle("top","0"),this.setDivStyle("left","0"),this.setDivStyle("transform-origin","top left")),this.element.appendChild(t)}get x(){return Number(this.getAttribute("x"))}set x(t){this.setAttribute("x",t)}get y(){return Number(this.getAttribute("y"))}set y(t){this.setAttribute("y",t)}get width(){return Number(this.getAttribute("width"))}set width(t){d&&(t=Math.max(t,1)),this.setAttribute("width",t)}get height(){return Number(this.getAttribute("height"))}set height(t){d&&(t=Math.max(t,1)),this.setAttribute("height",t)}getLocalBoundaryBox(){let t=super.getLocalBoundaryBox(),e=this.svg.getViewTransformMatrix().a,i=this.div.getBoundingClientRect(),n=i.width/e,o=i.height/e;(c||p)&&(n/=this.appliedScaling,o/=this.appliedScaling);let r=this.fixBoundarySize(n,o);return t.width=r.width,t.height=r.height,t}fixBoundarySize(t,e){return 1!==devicePixelRatio&&Math.abs(t/devicePixelRatio-this.div.clientWidth)<1&&(t=this.div.clientWidth,e=this.div.clientHeight),{width:t,height:e}}getDivStyle(t){return this.div.style[t]}setDivStyle(t,e){this.cachedDivStyle.get(t)!==e&&(this.div.style[t]=String(e),this.cachedDivStyle.set(t,e))}getDivScrollWidth(){return this.div.scrollWidth}setHTML(t){t!==this.html&&(this.div.innerHTML=t,this.html=t)}getHTML(){var t;return null!==(t=this.html)&&void 0!==t?t:this.div.innerHTML}onUpdateViewTransformMatrix(t){(c||p)&&(this.setDivStyle("transform",`scale(${t.a})`),this.appliedScaling=t.a)}}F("symbol",class extends Ut{constructor(t="symbol",e){super(t,e)}});class We extends te{constructor(){super(...arguments),this._r=0,this._cx=0,this._cy=0}set smoothRadius(t){}get r(){return this._r}set r(t){this._r=t,this.willUpdate()}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}setContentSize(t,e){this.r=Math.sqrt(t**2+e**2)/2}setSize(t,e){this.r=Math.min(t,e)/2}update(){let t=this._r,e=this._cx+t,i=this._cx-t,n=this._cy,o=this.builder;o.clear(),o.moveTo(e,n),o.arcTo(t,1,1,i,n),o.arcTo(t,1,1,e,n),super.update()}}class $e extends te{constructor(){super(...arguments),this._rx=0,this._ry=0,this._cx=0,this._cy=0}get rx(){return this._rx}set rx(t){this._rx=t,this.willUpdate()}get ry(){return this._ry}set ry(t){this._ry=t,this.willUpdate()}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}setContentSize(t,e){this.rx=.707*t,this.ry=.707*e}setSize(t,e){this.rx=t/2,this.ry=e/2}update(){let t=this._rx,e=this._ry,i=this._cx+t,n=this._cx-t,o=this._cy,r=this.builder;r.clear(),r.moveTo(i,o),r.ellipseTo(t,e,0,1,1,n,o),r.ellipseTo(t,e,0,1,1,i,o),super.update()}}class Ve extends te{constructor(){super(...arguments),this._x=0,this._y=0,this._width=0,this._height=0}get x(){return this._x}set x(t){this._x=t,this.willUpdate()}get y(){return this._y}set y(t){this._y=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}setSize(t,e){this.width=t,this.height=e}update(){let t=this._x,e=this._y,i=this._width,n=this._height,o=this.builder;o.clear(),o.moveTo(t,e),o.horizontalLineBy(i),o.verticalLineBy(n),o.horizontalLineBy(-i),o.close(),super.update()}}class je extends te{constructor(){super(...arguments),this._cx=0,this._cy=0,this._width=0,this._height=0}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}setContentSize(t,e){this.width=2*t,this.height=2*e}setSize(t,e){this.width=t,this.height=e}update(){let t=this._cx,e=this._cy,i=this._width/2,n=this._height/2,o=this.builder;o.clear(),o.moveTo(t-i,e),o.lineTo(t,e+n),o.lineTo(t+i,e),o.lineTo(t,e-n),o.close(),super.update()}}class He extends te{constructor(){super(...arguments),this._cx=0,this._cy=0,this._width=0,this._height=0,this._sidesWidthRate=.4}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}get sidesWidthRate(){return this._sidesWidthRate}set sidesWidthRate(t){this._sidesWidthRate=t,this.willUpdate()}setContentSize(t,e){this.height=e,this.width=t+this.getBothSidesWidth()}setSize(t,e){this.width=t,this.height=e}getBothSidesWidth(){return this.height*this._sidesWidthRate}update(){let t=this.getBothSidesWidth(),e=this.width-t,i=this._cx,n=this._cy,o=this._width/2,r=this._height/2,s=e/2,a=this.builder;a.clear(),a.moveTo(i-s,n-r),a.lineTo(i-o,n),a.lineTo(i-s,n+r),a.lineTo(i+s,n+r),a.lineTo(i+o,n),a.lineTo(i+s,n-r),a.close(),super.update()}}class Ue extends te{constructor(){super(...arguments),this._cx=0,this._cy=0,this._width=0,this._height=0,this._roofHeightRate=.4}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}get roofHeightRate(){return this._roofHeightRate}set roofHeightRate(t){this._roofHeightRate=t,this.willUpdate()}setContentSize(t,e){this.width=t,this.height=e*(1+this._roofHeightRate)}setSize(t,e){this.width=t,this.height=e}getBothRoofHeight(){return this.height*this._roofHeightRate/(1+this._roofHeightRate)}update(){let t=this.getBothRoofHeight(),e=this._height-t,i=this._cx,n=this._cy,o=this._width/2,r=this._height/2,s=e/2,a=this.builder;a.clear(),a.moveTo(i-o,n-s),a.lineTo(i-o,n+s),a.lineTo(i,n+r),a.lineTo(i+o,n+s),a.lineTo(i+o,n-s),a.lineTo(i,n-r),a.close(),super.update()}}class Ke extends te{constructor(){super(...arguments),this._cx=0,this._cy=0,this._width=0,this._height=0,this._roofHeightRate=.3}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}get roofHeightRate(){return this._roofHeightRate}set roofHeightRate(t){this._roofHeightRate=t,this.willUpdate()}setContentSize(t,e){this.width=t,this.height=e*(1+this._roofHeightRate)}setSize(t,e){this.width=t,this.height=e}getBothRoofHeight(){return this.height*this._roofHeightRate/(this._roofHeightRate+1)}getRoofRadius(){let t=this.width/2,e=this.getBothRoofHeight()/2,i=2*Math.atan2(e,t);return t/Math.sin(i)||0}update(){let t=this.getRoofRadius(),e=this.getBothRoofHeight(),i=this.height-e,n=this._cx,o=this._cy,r=this._width/2,s=i/2,a=this.builder;a.clear(),a.moveTo(n-r,o-s),a.lineTo(n-r,o+s),a.arcTo(t,0,0,n+r,o+s),a.lineTo(n+r,o-s),a.arcTo(t,0,0,n-r,o-s),a.close(),super.update()}}class qe extends te{constructor(){super(...arguments),this._cx=0,this._cy=0,this._width=0,this._height=0,this._sidesWidthRate=.5}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}get sidesWidthRate(){return this._sidesWidthRate}set sidesWidthRate(t){this._sidesWidthRate=t,this.willUpdate()}setContentSize(t,e){this.height=e,this.width=t+this.getBothSidesWidth()}setSize(t,e){this.width=t,this.height=e}getBothSidesWidth(){return this.height*this._sidesWidthRate}getRadius(){let t=this.height/2,e=this.getBothSidesWidth()/2,i=2*Math.atan2(e,t);return t/Math.sin(i)||0}update(){let t=this.getRadius(),e=this.getBothSidesWidth(),i=Math.max(0,this._width-e),n=this._cx,o=this._cy,r=this._height/2,s=i/2,a=this.builder;a.clear(),a.moveTo(n-s,o-r),a.arcTo(t,0,0,n-s,o+r),a.lineTo(n+s,o+r),a.arcTo(t,0,0,n+s,o-r),a.lineTo(n-s,o-r),a.close(),super.update()}}class Ze extends te{constructor(){super(...arguments),this._cx=0,this._cy=0,this._width=0,this._height=0,this._sidesWidthRate=-.4}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get width(){return this._width}set width(t){this._width=t,this.willUpdate()}get height(){return this._height}set height(t){this._height=t,this.willUpdate()}get sidesWidthRate(){return this._sidesWidthRate}set sidesWidthRate(t){this._sidesWidthRate=t,this.willUpdate()}setContentSize(t,e){this.height=e,this.width=t+2*this.getOneSideWidth()}setSize(t,e){this.width=t,this.height=e}getOneSideWidth(){return Math.abs(this.height*this._sidesWidthRate)}update(){let t=this.getOneSideWidth(),e=0,i=0;this._sidesWidthRate<0?e=t:i=t;let n=this._cx,o=this._cy,r=this._width/2,s=this._height/2,a=this.builder;a.clear(),a.moveTo(n-r+e,o-s),a.lineTo(n-r+i,o+s),a.lineTo(n+r-e,o+s),a.lineTo(n+r-i,o-s),a.close(),super.update()}}class Ge extends Kt{constructor(){super(),this._r=0,this._cx=0,this._cy=0,this._color="",this._priority=0,this.initContents()}initContents(){this.circle=new We,this.circle.setAttribute("stroke-width","1"),this.circle.setAttribute("stroke","white"),this.append(this.circle),this.text=new ne,this.text.x=0,this.text.textAnchor="middle",this.text.setStyle("vertical-align","middle"),this.text.setStyle("font-weight","bold"),this.text.setStyle("font-family","Arial"),this.text.setStyle("user-select","none"),this.text.setAttribute("fill","white"),this.append(this.text)}get r(){return this._r}set r(t){this._r=t,this.willUpdate()}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get color(){return this._color}set color(t){this._color=t,this.willUpdate()}get strokeWidth(){return Number(this.circle.getAttribute("style-width"))}set strokeWidth(t){this.circle.setAttribute("stroke-width",t)}get priority(){return this._priority}set priority(t){this._priority=t,this.willUpdate()}update(){this.circle.r=this._r-.5,this.circle.cx=this._cx,this.circle.cy=this._cy,this.circle.setAttribute("fill",this._color);let t=1.25*this._r;this._priority>=10&&(t=1.11*this._r),this.text.setStyle("font-size",t+"px"),this.text.x=this._cx,this.text.y=this._cy+Math.round(.36*t),this.text.content=String(this._priority)}}class Ye extends Kt{constructor(){super(),this._r=0,this._cx=0,this._cy=0,this._progress=0,this._nonColor="#999999",this._activeColor="#1acc67",this._strokeWidth=1,this.initContents()}initContents(){this.circleWhite=new We,this.circleWhite.setAttribute("fill","white"),this.circle=new We,this.circle.setAttribute("stroke-width","1"),this.path=new te,this.append(this.circleWhite),this.append(this.circle),this.append(this.path)}get r(){return this._r}set r(t){this._r=t,this.willUpdate()}get cx(){return this._cx}set cx(t){this._cx=t,this.willUpdate()}get cy(){return this._cy}set cy(t){this._cy=t,this.willUpdate()}get progress(){return this._progress}set progress(t){this._progress=t,this.willUpdate()}get nonColor(){return this._nonColor}set nonColor(t){this._nonColor=t,this.willUpdate()}get activeColor(){return this._activeColor}set activeColor(t){this._activeColor=t,this.willUpdate()}get strokeWidth(){return this._strokeWidth}set strokeWidth(t){this._strokeWidth=t,this.willUpdate()}update(){this.circleWhite.r=this._r,this.circleWhite.cx=this._cx,this.circleWhite.cy=this._cy,this.circle.r=this._r-1.5*this._strokeWidth,this.circle.cx=this._cx,this.circle.cy=this._cy,this.circle.setAttribute("stroke-width",this._strokeWidth),0===this._progress?this.setNonProgress():8===this._progress?this.setFullProgress():this.setNormalProgress()}setNonProgress(){this.circle.setAttribute("fill",this.nonColor),this.circle.setAttribute("stroke",this.nonColor);let t=this._r-1.5*this._strokeWidth,e=this._cx,i=this._cy;this.path.setAttribute("stroke","#fff"),this.path.clear(),this.path.moveTo(e-.5*t,i),this.path.lineTo(e+.5*t,i)}setFullProgress(){this.circle.setAttribute("fill",this.activeColor),this.circle.setAttribute("stroke",this.activeColor);let t=this._r-1.5*this._strokeWidth,e=this._cx,i=this._cy;this.path.setAttribute("stroke","#fff"),this.path.setAttribute("fill","none"),this.path.clear(),this.path.moveTo(e-.6*t,i),this.path.lineTo(e-.15*t,i+.45*t),this.path.lineTo(e+.6*t,i-.4*t)}setNormalProgress(){this.circle.setAttribute("fill","#fff"),this.circle.setAttribute("stroke",this.activeColor);let t=this._cx,e=this._cy,i=this._r-1.5*this._strokeWidth,n=t+i*Math.cos(S(45*this.progress-90)),o=e+i*Math.sin(S(45*this.progress-90));this.path.setAttribute("stroke","none"),this.path.setAttribute("fill",this.activeColor),this.path.clear(),this.path.moveTo(t,e),this.path.lineTo(t,e-i),this.path.arcTo(i,this.progress>4?1:0,1,n,o),this.path.lineTo(t,e),this.path.close()}}const Je={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-quad":[.55,.085,.68,.53],"ease-in-cubic":[.55,.055,.675,.19],"ease-in-quart":[.895,.03,.685,.22],"ease-in-quint":[.755,.05,.855,.06],"ease-in-sine":[.47,0,.745,.715],"ease-in-expo":[.95,.05,.795,.035],"ease-in-circ":[.6,.04,.98,.335],"ease-in-back":[.6,-.28,.735,.045],"ease-out-quad":[.25,.46,.45,.94],"ease-out-cubic":[.215,.61,.355,1],"ease-out-quart":[.165,.84,.44,1],"ease-out-quint":[.23,1,.32,1],"ease-out-sine":[.39,.575,.565,1],"ease-out-expo":[.19,1,.22,1],"ease-out-circ":[.075,.82,.165,1],"ease-out-back":[.175,.885,.32,1.275],"ease-in-out-quad":[.455,.03,.515,.955],"ease-in-out-cubic":[.645,.045,.355,1],"ease-in-out-quart":[.77,0,.175,1],"ease-in-out-quint":[.86,0,.07,1],"ease-in-out-sine":[.445,.05,.55,.95],"ease-in-out-expo":[1,0,0,1],"ease-in-out-circ":[.785,.135,.15,.86],"ease-in-out-back":[.68,-.55,.265,1.55]},Xe={linear:function(t){return t}};class Qe{constructor(t=200,e="ease-in-out-quad",i){this.frameId=null,this.fromValue=null,this.toValue=null,this.currentValue=null,this.resolve=null,this.promise=null,this.duration=t,this.easing=e,this.onValue=i}getPromise(){return this.promise}playBetween(t,e){return this.fromValue=t,this.currentValue=t,this.toValue=e,this.play()}playTo(t){if(null===this.fromValue)throw new Error('Must call "playBetween" firstly.');return this.fromValue=this.currentValue,this.toValue=t,this.play()}play(){return this.cancel(),this.promise=new Promise((t=>{this.startPlayingInterval(),this.resolve=t}))}startPlayingInterval(){let t=performance.now(),e=(n=this.easing,Xe[n]?Xe[n]:Xe[n]=function(t){let[e,i,n,o]=Je[t],r=3*e-3*n+1,s=-6*e+3*n,a=3*e,l=3*i-3*o+1,h=-6*i+3*o,d=3*i;return function(t){if(0===t)return 0;if(1===t)return 1;let e=-t,i=0,n=1,o=(i+n)/2;for(;n-i>1e-4;)((r*o+s)*o+a)*o+e<0?i=o:n=o,o=(i+n)/2;return((l*o+h)*o+d)*o}}(n)),i=()=>{this.frameId=requestAnimationFrame((n=>{let o=n-t,r=Math.max(0,o/this.duration);if(r>=1)this.onInterval(1),this.resolve&&(this.resolve(!0),this.resolve=null),this.frameId=null;else{let t=e(r);if(this.onInterval(t),null===this.frameId)return;i()}}))};var n;this.onInterval(0),i()}onInterval(t){this.currentValue=this.mix(t),this.onValue(this.currentValue)}mix(t){return this.fromValue instanceof A||this.fromValue instanceof P?this.fromValue.mix(this.toValue,t):Array.isArray(this.fromValue)?this.fromValue.map(((e,i)=>ct(e,this.toValue[i],t))):ct(this.fromValue,this.toValue,t)}cancel(){this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.resolve&&(this.resolve(!1),this.resolve=null)}}class ti{constructor(t,e,i=200,n="ease-in-out-quad"){this.resolve=null,this.promise=null,this.playingTransitions=null,this.from=t,this.to=e,this.duration=i,this.easing=n}getPromise(){return this.promise}play(){return this.cancel(),this.promise=new Promise((async t=>{let e=this.startPlaying();this.resolve=t,await e,t(!0),this.resolve=null}))}async startPlaying(){let t=this.from.computed.fontSize,e=this.to.computed.fontSize,i=this.from.getSpans(),n=this.to.getSpans(),o=Math.max(i.length,n.length),r=[];for(let s=0;s<o;s++){let o=i[Math.min(s,i.length-1)],a=n[Math.min(s,n.length-1)],l=s>=i.length,h=s>=n.length,d=""===o.content&&s===i.length-1&&this.from.computed.ellipsisInEnd,c=""===a.content&&s===n.length-1&&this.to.computed.ellipsisInEnd;r.push(this.playEachSpanTransition(o,a,t,e,l,h,d,c))}return this.playingTransitions=r,Promise.all(r.map((t=>t.getPromise())))}playEachSpanTransition(t,e,i,n,o,r,s,a){let l=lt.I();l=l.translate(-t.x,-t.y),l=l.scale(n/i),l=l.translate(e.x,e.y);let h=l.inverse(),d=l;(r||a&&!s)&&(d=lt.I(),d=d.translate(-t.x,-t.y),d=d.scale(1/i),d=d.translate(e.x,e.y));let c=h,u=l;(o||s&&!a)&&(c=c.translate(-t.x,-t.y),c=c.scale(1/i),c=c.translate(t.x,t.y),u=lt.I(),u=u.translate(-t.x,-t.y),u=u.scale(n/1),u=u.translate(e.x,e.y));let p=new Qe(this.duration,this.easing,(i=>{let n=d.interpolate(i),s=u.interpolate(i).multiply(c);o||t.transform.setMatrix(n),r||e.transform.setMatrix(s),t.setAttribute("opacity",1-i),e.setAttribute("opacity",i)}));return p.playBetween(0,1),p}cancel(){this.resolve&&(this.resolve(!1),this.resolve=null),this.playingTransitions&&(this.playingTransitions.forEach((t=>t.cancel())),this.playingTransitions=null)}}class ei extends Ut{constructor(){super("svg"),this.container=null,this.viewTransformMatrix=lt.I(),this.resourceContainer=new $t("defs"),this.shapeContainer=new Ut("g"),this.append(this.resourceContainer),this.append(this.shapeContainer),this.fullOfContainer()}fullOfContainer(){this.setAttribute("width","100%"),this.setAttribute("height","100%")}createElement(){let t=super.createElement("svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("version","1.1"),t}get svg(){return this}appendTo(t){this.container=t,t.appendChild(this.element)}appendShape(t){this.shapeContainer.append(t)}appendResource(t){this.resourceContainer.append(t)}getNodeById(t){let e=this.element.querySelector("#"+t);return e?Wt.fromElement(e):null}setViewTransformMatrix(t){this.shapeContainer.transform.setMatrix(t),this.viewTransformMatrix=t,this.applyViewTransformToDescents(this)}applyViewTransformToDescents(t){for(let e of t.children)e instanceof Ut&&(e.onUpdateViewTransformMatrix(this.viewTransformMatrix),this.applyViewTransformToDescents(e))}getViewTransformMatrix(){return this.viewTransformMatrix}toPaperOrigin(t){let e=this.viewTransformMatrix,i=this.getScreenCTM().multiply(e).inverse();return t instanceof _?i.transferBox(t):t instanceof A?i.transferPoint(t):i.transferVector(t)}toScreenOrigin(t){let e=this.viewTransformMatrix,i=this.getScreenCTM().multiply(e);return t instanceof _?i.transferBox(t):t instanceof A?i.transferPoint(t):i.transferVector(t)}}var ii;!function(t){t[t.PENDING=0]="PENDING",t[t.WILL_UPDATE=1]="WILL_UPDATE",t[t.UPDATING=2]="UPDATING",t[t.UPDATING_NODE_CONTENTS=3]="UPDATING_NODE_CONTENTS",t[t.READING_NODE_CONTENT_BOUNDARY=4]="READING_NODE_CONTENT_BOUNDARY",t[t.UPDATING_NODE_CONTENT_LAYOUT=5]="UPDATING_NODE_CONTENT_LAYOUT",t[t.READING_TEXT_CONTENT_BOUNDARY=6]="READING_TEXT_CONTENT_BOUNDARY",t[t.UPDATING_TEXT_CONTENT_LAYOUT=7]="UPDATING_TEXT_CONTENT_LAYOUT",t[t.READING_TEXT_CONTENT_BOUNDARY_ADJUST=8]="READING_TEXT_CONTENT_BOUNDARY_ADJUST",t[t.UPDATING_TEXT_CONTENT_LAYOUT_ADJUST=9]="UPDATING_TEXT_CONTENT_LAYOUT_ADJUST",t[t.READING_CONTAINER_BOUNDARY=10]="READING_CONTAINER_BOUNDARY",t[t.UPDATING_CONTAINER_LAYOUT=11]="UPDATING_CONTAINER_LAYOUT",t[t.BEFORE_TREE_LAYOUT_CALLBACKS=12]="BEFORE_TREE_LAYOUT_CALLBACKS",t[t.UPDATING_TREE_LAYOUT=13]="UPDATING_TREE_LAYOUT",t[t.AFTER_TREE_LAYOUT=14]="AFTER_TREE_LAYOUT",t[t.AFTER_TREE_LAYOUT_CALLBACKS=15]="AFTER_TREE_LAYOUT_CALLBACKS",t[t.CALLING_COMPLETE_CALLBACKS=16]="CALLING_COMPLETE_CALLBACKS"}(ii||(ii={}));let ni=ii.PENDING;const oi={[ii.UPDATING]:new tt,[ii.UPDATING_NODE_CONTENTS]:new tt,[ii.READING_NODE_CONTENT_BOUNDARY]:new tt,[ii.UPDATING_NODE_CONTENT_LAYOUT]:new tt,[ii.READING_TEXT_CONTENT_BOUNDARY]:new tt,[ii.UPDATING_TEXT_CONTENT_LAYOUT]:new tt,[ii.READING_TEXT_CONTENT_BOUNDARY_ADJUST]:new tt,[ii.UPDATING_TEXT_CONTENT_LAYOUT_ADJUST]:new tt,[ii.READING_CONTAINER_BOUNDARY]:new tt,[ii.UPDATING_CONTAINER_LAYOUT]:new tt,[ii.BEFORE_TREE_LAYOUT_CALLBACKS]:new tt,[ii.UPDATING_TREE_LAYOUT]:new tt,[ii.AFTER_TREE_LAYOUT]:new tt,[ii.AFTER_TREE_LAYOUT_CALLBACKS]:new tt,[ii.CALLING_COMPLETE_CALLBACKS]:new tt};function ri(t,e){oi[ii.UPDATING].add(t,e),xi(ii.UPDATING)}function si(t,e){oi[ii.UPDATING_TEXT_CONTENT_LAYOUT].add(t,e),xi(ii.UPDATING_TEXT_CONTENT_LAYOUT)}function ai(t,e){oi[ii.READING_TEXT_CONTENT_BOUNDARY_ADJUST].add(t,e),xi(ii.READING_TEXT_CONTENT_BOUNDARY_ADJUST)}function li(t,e){oi[ii.UPDATING_TEXT_CONTENT_LAYOUT_ADJUST].add(t,e),xi(ii.UPDATING_TEXT_CONTENT_LAYOUT_ADJUST)}function hi(t,e){oi[ii.UPDATING_CONTAINER_LAYOUT].add(t,e),xi(ii.UPDATING_CONTAINER_LAYOUT)}function di(t,e){oi[ii.BEFORE_TREE_LAYOUT_CALLBACKS].add(t,e),xi(ii.BEFORE_TREE_LAYOUT_CALLBACKS)}function ci(t){return new Promise((e=>{di(e,t)}))}function ui(t,e){oi[ii.UPDATING_TREE_LAYOUT].add(t,e),xi(ii.UPDATING_TREE_LAYOUT)}function pi(t,e){oi[ii.AFTER_TREE_LAYOUT].add(t,e),xi(ii.AFTER_TREE_LAYOUT)}function mi(t,e){oi[ii.AFTER_TREE_LAYOUT_CALLBACKS].add(t,e),xi(ii.AFTER_TREE_LAYOUT_CALLBACKS)}function gi(t){return new Promise((e=>{mi(e,t)}))}function fi(t,e){oi[ii.CALLING_COMPLETE_CALLBACKS].add(t,e),xi(ii.CALLING_COMPLETE_CALLBACKS)}function yi(){return new Promise((t=>{fi(t)}))}function xi(t){ni===ii.PENDING&&(requestAnimationFrame(wi),ni=ii.WILL_UPDATE),t<ni&&(ni=t)}function wi(){for(ii.UPDATING;ni<=ii.CALLING_COMPLETE_CALLBACKS;)ni===ii.UPDATING?vi(ii.UPDATING,(t=>{t.__update()})):ni===ii.UPDATING_NODE_CONTENTS?vi(ii.UPDATING_NODE_CONTENTS,(t=>{t.__updateContents()})):ni===ii.READING_NODE_CONTENT_BOUNDARY?vi(ii.READING_NODE_CONTENT_BOUNDARY,(t=>{t.__readContentBoundary()})):ni===ii.UPDATING_NODE_CONTENT_LAYOUT?vi(ii.UPDATING_NODE_CONTENT_LAYOUT,(t=>{t.__updateContentLayout()})):ni===ii.READING_TEXT_CONTENT_BOUNDARY?vi(ii.READING_TEXT_CONTENT_BOUNDARY,(t=>{t.__readTextContentBoundary()})):ni===ii.UPDATING_TEXT_CONTENT_LAYOUT?vi(ii.UPDATING_TEXT_CONTENT_LAYOUT,(t=>{t.__updateTextContentLayout()})):ni===ii.READING_TEXT_CONTENT_BOUNDARY_ADJUST?vi(ii.READING_TEXT_CONTENT_BOUNDARY_ADJUST,(t=>{t.__readTextContentBoundaryAdjustment()})):ni===ii.UPDATING_TEXT_CONTENT_LAYOUT_ADJUST?vi(ii.UPDATING_TEXT_CONTENT_LAYOUT_ADJUST,(t=>{t.__updateTextContentLayoutAdjustment()})):ni===ii.READING_CONTAINER_BOUNDARY?vi(ii.READING_CONTAINER_BOUNDARY,(t=>{t.__readContainerBoundary()})):ni===ii.UPDATING_CONTAINER_LAYOUT?vi(ii.UPDATING_CONTAINER_LAYOUT,(t=>{t.__updateContainerLayout()})):ni===ii.BEFORE_TREE_LAYOUT_CALLBACKS?vi(ii.BEFORE_TREE_LAYOUT_CALLBACKS,(t=>{t()})):ni===ii.UPDATING_TREE_LAYOUT?vi(ii.UPDATING_TREE_LAYOUT,(t=>{t.__updateTreeLayout()})):ni===ii.AFTER_TREE_LAYOUT?vi(ii.AFTER_TREE_LAYOUT,(t=>{t.__afterTreeLayout()})):ni===ii.AFTER_TREE_LAYOUT_CALLBACKS?vi(ii.AFTER_TREE_LAYOUT_CALLBACKS,(t=>{t()})):ni===ii.CALLING_COMPLETE_CALLBACKS?vi(ii.CALLING_COMPLETE_CALLBACKS,(t=>{t()})):ni++;ni=ii.PENDING}function vi(t,e){let i,n=oi[t];for(;i=n.pop();)try{e(i)}catch(t){console.log(t)}ni===t&&ni++}class bi{static isSupported(){if(null!==this.cachedSupported)return this.cachedSupported;try{let t="kitt_test_supported";localStorage[t]="test";let e="test"===localStorage[t];return delete localStorage[t],e}catch(t){return!1}}constructor(t){this.prefix="",this.expireSuffix="_expires_at",this.prefix=t}has(t){return!!bi.isSupported()&&(t=this.prefix+t)in localStorage}get(t,e=null){if(!bi.isSupported())return e;t=this.prefix+t;let i=localStorage[t];if(void 0===i)return e;if(!i||"string"!=typeof i)return e;try{i=JSON.parse(i);let n=localStorage[t+this.expireSuffix];return n&&n<Date.now()?(delete localStorage[t],delete localStorage[t+this.expireSuffix],e):i}catch(t){return e}}set(t,e,i){return bi.isSupported()?(t=this.prefix+t,localStorage[t]=JSON.stringify(e),i&&i>0&&(localStorage[t+this.expireSuffix]=Date.now()+1e3*i),!0):null}delete(t){return bi.isSupported()?(t=this.prefix+t,delete localStorage[t+this.expireSuffix],delete localStorage[t]):null}}bi.cachedSupported=null;const ki=new bi("kitty_");class Ci{constructor(t,e){this.name=t,this.dbs=e}async makeTransactionQuery(t,e){let i=await this.dbs.getDB();if(!i)throw new Error("Can't open indexedDB!");let n=e(i.transaction([this.name],t).objectStore(this.name));return await this.requestToPromise(n)}requestToPromise(t){return new Promise(((e,i)=>{t.onsuccess=()=>e(t.result),t.onerror=i}))}async has(t){return await this.count(t)>0}async count(t){return await this.makeTransactionQuery("readonly",(e=>e.count(t)))}async get(t){return await this.makeTransactionQuery("readonly",(e=>e.get(t)))}async getAll(t){return await this.makeTransactionQuery("readonly",(e=>e.getAll(t)))}async getAllKeys(){return await this.makeTransactionQuery("readonly",(t=>t.getAllKeys()))}async delete(t){return await this.makeTransactionQuery("readwrite",(e=>e.delete(t))),!0}async add(t,e){return await this.makeTransactionQuery("readwrite",(i=>i.add(t,e)))}async put(t,e){return await this.makeTransactionQuery("readwrite",(i=>i.put(t,e)))}async clear(){return await this.makeTransactionQuery("readwrite",(t=>t.clear())),!0}}const Si=new class{constructor(t){this.expireSuffix="_expires_at",this.store=void 0,this.db=t}isSupported(){return this.db.isSupported()}async getStore(){return this.db?(void 0===this.store&&(this.store=await this.db.getStore("storage")),this.store):null}async has(t){let e=await this.getStore();return!!e&&await e.has(t)}async get(t,e=null){let i=await this.getStore();if(!i)return e;try{if(await i.has(t)){let n=await i.get(t);n=JSON.parse(n);let o=await i.get(t+this.expireSuffix);return o&&o<Date.now()?(await i.delete(t),await i.delete(t+this.expireSuffix),e):n}return e}catch(t){return e}}async set(t,e,i){let n=await this.getStore();if(!n)return null;try{return await n.put(JSON.stringify(e),t),i&&i>0&&await n.put(Date.now()+1e3*i,t+this.expireSuffix),!0}catch(t){return null}}async delete(t){let e=await this.getStore();if(!e)return null;try{return await e.delete(t),await e.delete(t+this.expireSuffix),!0}catch(t){return null}}async clear(){let t=await this.getStore();return t?(await t.clear(),!0):null}async clearExpired(){let t=await this.getStore();if(!t)return null;try{let e=await t.getAllKeys(),i=(new Date).getTime();for(let n of e)if(n.endsWith(this.expireSuffix)&&i>await t.get(n)){let t=n.slice(0,-this.expireSuffix.length);await this.delete(t)}return!0}catch(t){return null}}async throttledClearExpired(t=86400){let e=(new Date).getTime();await this.get("clear_cache_at",0)+1e3*t<e&&(await Si.clearExpired(),await this.set("clear_cache_at",e))}}(new class{constructor(t,e,i){this.db=null,this.openPromise=null,this.cachedSupported=null,this.name=t,this.version=e,this.storeOptions=i}async isSupported(){if(null!==this.cachedSupported)return this.cachedSupported;if(!window.indexedDB)return!1;try{return await this.getDB(),this.cachedSupported=!0}catch(t){return this.cachedSupported=!1}}get opening(){return!this.db&&this.openPromise}get opened(){return!!this.db}async close(){var t;this.opened?(this.db.close(),this.db=null):this.opening&&(null===(t=await this.getDB())||void 0===t||t.close(),this.db=null)}async getDB(){if(this.db)return this.db;if(this.openPromise)return this.openPromise;let t=indexedDB.open(this.name,this.version),e=new Promise((t=>setTimeout((()=>t(null)),500)));return this.openPromise=this.handleOpenDBRequest(t),this.db=await Promise.any([this.openPromise,e]),this.openPromise=null,this.db}handleOpenDBRequest(t){return new Promise(((e,i)=>{t.onupgradeneeded=()=>{this.ensureStores(t.result)},t.onsuccess=()=>{e(t.result)},t.onerror=i}))}ensureStores(t){for(let e of this.storeOptions)t.objectStoreNames.contains(e.name)||t.createObjectStore(e.name,e)}async getStore(t){return this.isSupported()?new Ci(t,this):null}}("kitty_storage",1,[{name:"storage"}]));class Ti{constructor(t){this.children=[],this.x=0,this.y=0,this.width=0,this.height=0,this.minWidth=0,this.minHeight=0,this.margins={top:0,right:0,bottom:0,left:0},this.totalFlex=0,this.unit=t}get childrenInUnitOrder(){return"row-reverse"===this.unit.direction||"column-reverse"===this.unit.direction?[...this.children].reverse():this.children}isSizable(){return this.unit.alwaysSizable||this.width>0&&this.height>0||this.unit.flex>0}doDisplay(){for(let t of this.unit.children)t.doDisplay();this.doSelfDisplay()}doSelfDisplay(){this.updateChildren(),this.makeBasicMargins(),0===this.unit.children.length?this.doLayoutFromUnit():this.doFlexDisplay()}updateChildren(){let t=this.unit.children.map((t=>t.display));"row-reverse"===this.unit.direction||"column-reverse"===this.unit.direction?this.children=t.reverse():this.children=t}makeBasicMargins(){this.margins=O(this.unit.margin)}doLayoutFromUnit(){this.width=Math.max(this.unit.minWidth,this.unit.width||0),this.height=Math.max(this.unit.minHeight,this.unit.height||0),this.minWidth=this.unit.flex?this.unit.minWidth:this.width,this.minHeight=this.unit.flex?this.unit.minHeight:this.height}toLocalRenderBox(){return new _(0,0,this.width,this.height)}toRenderBoxInParentOrigin(){return new _(this.x,this.y,this.width,this.height)}expandToFitContent(){}fitContent(){}}function Mi(...t){return Math.max(...t,0)+Math.min(...t,0)}function Ai(t,e,...i){if(!e)for(let e of i)t+=e;return t}class Pi extends Ti{doFlexDisplay(){this.layoutInMainAxis(),this.layoutInCrossAxis(),this.makeMargins()}layoutInMainAxis(){this.doContentLayout();let t=Math.max(this.unit.height||0,this.unit.minHeight);t&&this.reAllocateInMainAxis(t)}doContentLayout(){let t=0,e=0,i=0,n=0,o=0,r=0,s=!1;for(let a=0;a<this.children.length;a++){let l=this.children[a],h=l.isSizable();if(h)if(s){let e=Mi(l.margins.top,r);t+=e,n+=e}else t=Ai(t,this.unit.collapseChildMargins,l.margins.top),n=Ai(n,this.unit.collapseChildMargins,l.margins.top),s=!0;l.y=t,h&&(t+=l.height,n+=l.minHeight,e=Math.max(e,Ai(l.width,this.unit.collapseChildMargins,l.margins.left,l.margins.right)),i=Math.max(i,Ai(l.minWidth,this.unit.collapseChildMargins,l.margins.left,l.margins.right)),o+=l.unit.flex,r=l.margins.bottom)}n=Ai(n,this.unit.collapseChildMargins,r),t=Ai(t,this.unit.collapseChildMargins,r),this.height=t,this.width=e,this.minHeight=Math.max(n,this.unit.minHeight),this.minWidth=Math.max(i,this.unit.minWidth),this.totalFlex=o}reAllocateInMainAxis(t){t<this.minHeight&&(t=this.minHeight);let e=this.totalFlex,i=t-this.height,n=0===e?0:i/e,o=0;0===e&&("center"===this.unit.justifyContent?o+=i/2:"end"===this.unit.justifyContent&&(o+=i));for(let t of this.children){let e=t.isSizable();if(t.y+=o,t.unit.flex>0&&e){let e=t.height,i=t.unit.flex*n,r=e+i;t.resetHeight(r),o+=i}}this.height=t}layoutInCrossAxis(){let t=Math.max(this.unit.width||0,this.unit.minWidth);t?this.reAllocateInCrossAxis(t):this.alignInCrossAxis()}reAllocateInCrossAxis(t){t<this.minWidth&&(t=this.minWidth),this.width=t,this.alignInCrossAxis()}alignInCrossAxis(){for(let t=0;t<this.children.length;t++){let e=this.children[t],i=e.unit.alignSelf||this.unit.alignItems||"center";if("stretch"===i)e.x=0,e.resetWidth(this.width);else{let t="center"===i?.5:"end"===i?1:0,n=Ai(e.width,this.unit.collapseChildMargins,e.margins.left,e.margins.right),o=Ai(0,this.unit.collapseChildMargins,e.margins.left);e.x=(this.width-n)*t+o}}}makeMargins(){if(!this.unit.collapseChildMargins)return;let{top:t,right:e,bottom:i,left:n}=this.margins,o=this.children[0],r=this.children[this.children.length-1];t=Math.max(Mi(t,o.margins.top),-this.height),i=Math.max(Mi(i,r.margins.bottom),-this.height);let s=-1/0,a=-1/0;for(let t=0;t<this.children.length;t++){let e=this.children[t];s=Math.max(s,e.margins.left),a=Math.max(a,e.margins.right)}n=isFinite(s)?Mi(s,n):n,e=isFinite(a)?Mi(a,e):e,n=Math.max(n,-this.width),e=Math.max(e,-this.width),this.margins={top:t,right:e,bottom:i,left:n}}resetWidth(t){0===this.children.length?this.width=Math.max(t,this.minWidth):this.reAllocateInCrossAxis(t)}resetHeight(t){0===this.children.length?this.height=Math.max(t,this.minWidth):this.reAllocateInMainAxis(t)}expandToFitContent(){this.children.length>0&&(this.expandToFitInMainAxis(),this.expandToFitInCrossAxis())}expandToFitInMainAxis(){let t=this.children[0],e=this.children[this.children.length-1],i=-t.y;if(i>0){for(let t of this.children)t.y+=i;this.y-=i,this.height+=i}let n=Ai(e.y+e.height,this.unit.collapseChildMargins,e.margins.bottom);this.height=Math.max(this.height,n,this.minHeight)}expandToFitInCrossAxis(){let t=1/0,e=-1/0;for(let i of this.children){let n=-Ai(-i.x,this.unit.collapseChildMargins,i.margins.left),o=Ai(i.x+i.width,this.unit.collapseChildMargins,i.margins.right);t=Math.min(t,n),e=Math.max(e,o)}if(t<0){for(let e of this.children)e.x-=t;e-=t,this.x+=t}this.width=Math.max(this.width,e,this.minWidth)}fitContent(){this.children.length>0&&(this.fitInMainAxis(),this.fitInCrossAxis())}fitInMainAxis(){let t=this.children[0],e=this.children[this.children.length-1],i=-t.y;if(0!==i){for(let t of this.children)t.y+=i;this.y-=i,this.height+=i}let n=Ai(e.y+e.height,this.unit.collapseChildMargins,e.margins.bottom);this.height=Math.max(n,this.minHeight)}fitInCrossAxis(){let t=1/0,e=-1/0;for(let i of this.children){let n=-Ai(-i.x,this.unit.collapseChildMargins,i.margins.left),o=Ai(i.x+i.width,this.unit.collapseChildMargins,i.margins.right);t=Math.min(t,n),e=Math.max(e,o)}if(0!==t){for(let e of this.children)e.x-=t;e-=t,this.x+=t}this.width=Math.max(e,this.minWidth)}}class Di extends Ti{doFlexDisplay(){this.layoutInMainAxis(),this.layoutInCrossAxis(),this.makeMargins()}layoutInMainAxis(){this.doContentLayout();let t=Math.max(this.unit.width||0,this.unit.minWidth);t&&this.reAllocateInMainAxis(t)}doContentLayout(){let t=0,e=0,i=0,n=0,o=0,r=0,s=!1;for(let a=0;a<this.children.length;a++){let l=this.children[a],h=l.isSizable();if(h)if(s){let e=Mi(l.margins.left,r);t+=e,i+=e}else t=Ai(t,this.unit.collapseChildMargins,l.margins.left),i=Ai(i,this.unit.collapseChildMargins,l.margins.left),s=!0;l.x=t,h&&(t+=l.width,i+=l.minWidth,e=Math.max(e,Ai(l.height,this.unit.collapseChildMargins,l.margins.top,l.margins.bottom)),n=Math.max(n,Ai(l.minHeight,this.unit.collapseChildMargins,l.margins.top,l.margins.bottom)),o+=l.unit.flex,r=l.margins.right)}i=Ai(i,this.unit.collapseChildMargins,r),t=Ai(t,this.unit.collapseChildMargins,r),this.width=t,this.height=e,this.minWidth=Math.max(i,this.unit.minWidth),this.minHeight=Math.max(n,this.unit.minHeight),this.totalFlex=o}reAllocateInMainAxis(t){t<this.minWidth&&(t=this.minWidth);let e=this.totalFlex,i=t-this.width,n=0===e?0:i/e,o=0;0===e&&("center"===this.unit.justifyContent?o=i/2:"end"===this.unit.justifyContent&&(o=i));for(let t of this.children){let e=t.isSizable();if(t.x+=o,t.unit.flex>0&&e){let e=t.width,i=t.unit.flex*n,r=e+i;t.resetWidth(r),o+=i}}this.width=t}layoutInCrossAxis(){let t=Math.max(this.unit.height||0,this.unit.minHeight);t?this.reAllocateInCrossAxis(t):this.alignInCrossAxis()}reAllocateInCrossAxis(t){t<this.minHeight&&(t=this.minHeight),this.height=t,this.alignInCrossAxis()}alignInCrossAxis(){for(let t of this.children){let e=t.unit.alignSelf||this.unit.alignItems||"center";if("stretch"===e)t.y=0,t.resetHeight(this.height);else{let i="center"===e?.5:"end"===e?1:0,n=Ai(t.height,this.unit.collapseChildMargins,t.margins.top,t.margins.bottom),o=Ai(0,this.unit.collapseChildMargins,t.margins.top);t.y=(this.height-n)*i+o}}}makeMargins(){if(!this.unit.collapseChildMargins)return;let{top:t,right:e,bottom:i,left:n}=this.margins,o=this.children[0],r=this.children[this.children.length-1];n=Math.max(Mi(n,o.margins.left),-this.width),e=Math.max(Mi(e,r.margins.right),-this.width);let s=-1/0,a=-1/0;for(let e=0;e<this.children.length;e++){let n=this.children[e];t=Math.max(t,n.margins.top),i=Math.max(i,n.margins.bottom)}t=isFinite(s)?Mi(s,t):t,i=isFinite(a)?Mi(a,i):i,t=Math.max(t,-this.height),i=Math.max(i,-this.height),this.margins={top:t,right:e,bottom:i,left:n}}resetWidth(t){0===this.children.length?this.width=Math.max(t,this.minWidth):this.reAllocateInMainAxis(t)}resetHeight(t){0===this.children.length?this.height=Math.max(t,this.minWidth):this.reAllocateInCrossAxis(t)}expandToFitContent(){this.children.length>0&&(this.expandToFitInMainAxis(),this.expandToFitInCrossAxis(),this.makeMargins())}expandToFitInMainAxis(){let t=this.children[0],e=this.children[this.children.length-1],i=-t.x;if(i>0){for(let t of this.children)t.x+=i;this.x-=i,this.width+=i}let n=Ai(e.x+e.width,this.unit.collapseChildMargins,e.margins.right);this.width=Math.max(this.width,n,this.minWidth)}expandToFitInCrossAxis(){let t=1/0,e=-1/0;for(let i of this.children){let n=-Ai(-i.y,this.unit.collapseChildMargins,i.margins.top),o=Ai(i.y+i.height,this.unit.collapseChildMargins,i.margins.bottom);t=Math.min(t,n),e=Math.max(e,o)}if(t<0){for(let e of this.children)e.y-=t;e-=t,this.y+=t}this.height=Math.max(this.height,e,this.minHeight)}fitContent(){this.children.length>0&&(this.fitInMainAxis(),this.fitInCrossAxis())}fitInMainAxis(){let t=this.children[0],e=this.children[this.children.length-1],i=-t.x;if(0!==i){for(let t of this.children)t.x+=i;this.x-=i,this.width+=i}let n=Ai(e.x+e.width,this.unit.collapseChildMargins,e.margins.right);this.width=Math.max(n,this.minWidth)}fitInCrossAxis(){let t=1/0,e=-1/0;for(let i of this.children){let n=-Ai(-i.y,this.unit.collapseChildMargins,i.margins.top),o=Ai(i.y+i.height,this.unit.collapseChildMargins,i.margins.bottom);t=Math.min(t,n),e=Math.max(e,o)}if(0!==t){for(let e of this.children)e.y-=t;e-=t,this.y+=t}this.height=Math.max(e,this.minHeight)}}class Ii{constructor(t=null){this.children=[],this.width=NaN,this.height=NaN,this.minWidth=0,this.minHeight=0,this.alwaysSizable=!1,this.margin=[0],this.direction="row",this.justifyContent="center",this.alignItems="center",this.alignSelf=null,this.flex=0,this.collapseChildMargins=!0,this.data=t}append(t){this.children.push(t)}prepend(t){this.children.unshift(t)}remove(t){let e=this.children.indexOf(t);this.children.splice(e,1)}doDisplay(){return this.ensureDisplay(),this.display.doDisplay(),this.display}doSelfDisplay(){return this.ensureDisplay(),this.display.doSelfDisplay(),this.display}ensureDisplay(){let t=!this.display;this.display&&(this.display instanceof Di&&"row"!==this.direction&&"row-reverse"!==this.direction||this.display instanceof Pi&&"column"!==this.direction&&"column-reverse"!==this.direction)&&(t=!0),t&&("row"===this.direction||"row-reverse"===this.direction?this.display=new Di(this):this.display=new Pi(this))}*walkWithPositions(t=0,e=0){t+=this.display.x,e+=this.display.y,yield{unit:this,x:t,y:e};for(let i of this.children)yield*i.walkWithPositions(t,e)}*walk(){yield this;for(let t of this.children)yield*t.walk()}findDescendant(t){for(let e of this.walk())if(t(e))return e;return null}}var Ei;function Li(t){return t.split(".").map((t=>t.padStart(4,"0"))).join("")}function Oi(t){return t.version||(t.version=t.version="1.0.0"),Bi.forEach((e=>{-1===Ei.compare(t.version,e.version)&&(e.process(t),t.version=e.version)})),t}!function(t){t.compare=function(t,e){let i=Li(t),n=Li(e);return i<n?-1:i>n?1:0},t.initial="1.4.43",t.current="2.1.3"}(Ei||(Ei={}));const Bi=[],Ri=new Map;var Ni,_i,zi;!function(t){t.register=function(t,e){Ri.set(t,e)},t.get=function(t){return Ri.get(t)}}(Ni||(Ni={})),function(t){t.externalResourceOptions={},t.setExternalResourceOptions=function(e){t.externalResourceOptions=e},t.patchExternalResourceOptions=function(e){t.externalResourceOptions={...t.externalResourceOptions,...e}},t.trans=function(e){var i,n;return null!==(n=null===(i=t.externalResourceOptions.trans)||void 0===i?void 0:i[e])&&void 0!==n?n:""},t.getBackgroundURL=function(e){var i;return(null===(i=t.externalResourceOptions.presentationBackgroundURLs)||void 0===i?void 0:i[e])||null}}(_i||(_i={})),function(t){t.Themes={},t.register=function(e,i){t.Themes[e]=i},t.has=function(e){return!!t.Themes[e]},t.get=function(e){return t.Themes[e]}}(zi||(zi={}));const Fi={"line-height":1.3,"text-align":"left","text-vertical-align":"center","font-size":14,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1},Wi={...Fi,"fill-color":"#fff",shape:"rect","stroke-width":0,"stroke-color":"#000","image-alignment":"top","sticker-alignment":"top",padding:[6,9],margin:[20],radius:0,connect:"fork","connect-width":2,"connect-color":"#000","connect-out-adjust":"none","connect-tapered":!1,"connect-tapered-power":0,"connect-tapered-start-width":10},$i={map:{"background-color":"#fff"},content:{"progress-non-color":"#999999","progress-active-color":"#1cabfc","icon-size-rate":1.2,"render-icon-size":18,"outline-color":"#1cabfc","outline-expanded":3,"outline-width":2,"interact-fill-color":"#fff","interact-normal-size":24,"expander-size":15,"expander-font-size":11,"comment-size":16,"comment-font-size":11,"comment-stroke-color":"#1cabfc","minimum-aspect-ratio":1,"max-text-width":400,"min-image-size":{width:24,height:24},"max-image-size":{width:400,height:400},"can-line-wrap":!0,"default-font-family":"","use-adaptive-padding":!0,"show-text-color-indicator":!1,"justify-same-deepth-width":!1},common:{"mobile-scaling":1.3,"transition-duration":200},layout:{"partition-margin":26,"connect-smooth-radius":17,"connect-max-aligning-position-fixing":12,"summary-minimum-margin":36,"margin-from-siblings-when-have-children":4,"broadcast-margins":!0,"avoid-overlay":!0,"connection-minimum-out-pixels":13,"connection-minimum-out-pixel-rate":.333,"connection-maximum-gradient-rate":.666,"layout-balanced-shifting":32,"layout-timeline-margin":32,"layout-fishbone-shifting":0,"layout-skew-angle":52.5},theme:{colorTheme:"",structTheme:""},root:{...Wi,color:"#fff","fill-color":"#000","font-size":26,"font-weight":"bold","connect-width":3,"text-align":"center",padding:[16,28],margin:[50],radius:0,"stroke-width":0},main:{...Wi,color:"#333","fill-color":"#fff","font-size":20,padding:[10,16],margin:[30],radius:0,"connect-width":3,"connect-color":"#000","stroke-color":"#000","stroke-width":3},sub:{...Wi,color:"#333","fill-color":"transparent","font-size":16,padding:[6,10],margin:[20],radius:0,"connect-width":2,"connect-color":"#000","stroke-color":"#000","stroke-width":0},floatRoot:{color:"#fff","fill-color":"#000","font-weight":"bold","font-size":20,"stroke-width":0,padding:[14,20],margin:[30],radius:6},boundary:{...Wi,color:"#fff","fill-color":"rgba(0.5, 0.5, 0.5, 0.1)","font-size":14,"stroke-color":"#333","stroke-width":2,"stroke-dasharray":[4,2],padding:[6,10],"boundary-padding":10,radius:8},summary:{...Wi,color:"#fff","fill-color":"#3982fc","font-size":16,"connect-color":"#bdc5c9","stroke-color":"#41599E","stroke-width":0,padding:[6,10],margin:[20],radius:6,"summary-connect":"bracket","summary-connect-width":2,"summary-connect-color":"#3982fc"},relLine:{...Fi,shape:"rect","fill-color":"transparent","stroke-color":"transparent",color:"#333","font-size":12,padding:[3,6],"marker-start":"line","marker-end":"triangle","stroke-width":0,"line-type":"bezier","line-color":"#3982fc","line-width":2,"line-dasharray":[4,1]}};var Vi,ji,Hi;$i.floatRoot={...$i.root,...$i.floatRoot},function(t){t.Themes={},t.register=function(e,i){t.Themes[e]=i},t.has=function(e){return!!t.Themes[e]},t.get=function(e){return t.Themes[e]}}(Vi||(Vi={})),function(t){t.defaultStyleData=$i,t.multiColors={},t.priorityColors=[],t.setDefaultStyle=function(e){e.root&&(e.floatRoot={...e.root,...e.floatRoot||{}}),t.defaultStyleData=se(oe($i),e)},t.patchDefaultStyle=function(e){e.root&&(e.floatRoot={...e.root,...e.floatRoot||{}}),se(t.defaultStyleData,e)},t.registerColorTheme=function(t,e){zi.register(t,e)},t.registerStructTheme=function(t,e){Vi.register(t,e)},t.setMultiColors=function(e){t.multiColors=e},t.setPriorityColors=function(e){t.priorityColors=e};const e={katexURLs:{cssURL:"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css",cssIntegrity:"sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB",jsURL:"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js",jsIntegrity:"sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p"}};t.externalResourceOptions={...e},t.setExternalResourceOptions=function(i){t.externalResourceOptions={...e,...i},_i.setExternalResourceOptions(i)},t.patchExternalResourceOptions=function(e){t.externalResourceOptions={...t.externalResourceOptions,...e},_i.patchExternalResourceOptions(e)},t.permissionOptions={},t.setPermissionOptions=function(e){t.permissionOptions=e},t.patchPermissionOptions=function(e){t.permissionOptions={...t.permissionOptions,...e}}}(ji||(ji={})),function(t){t.trans=function(t){var e,i;return null!==(i=null===(e=ji.externalResourceOptions.trans)||void 0===e?void 0:e[t])&&void 0!==i?i:""},t.getBackgroundURL=function(t){var e;return(null===(e=ji.externalResourceOptions.backgroundURLs)||void 0===e?void 0:e[t])||null},t.getIconURL=function(t){var e;return(null===(e=ji.externalResourceOptions.iconURLs)||void 0===e?void 0:e[t])||null},t.getStickerResource=function(t){var e;return(null===(e=ji.externalResourceOptions.stickerResources)||void 0===e?void 0:e[t])||null},t.uploadImage=async function(t,e){return ji.externalResourceOptions.uploadImage?await ji.externalResourceOptions.uploadImage(t,e):{url:t}},t.getOriginalImageURL=function(t,e){return ji.externalResourceOptions.getOriginalImageURL?ji.externalResourceOptions.getOriginalImageURL(t,e):t};let e=!1,i=null;t.hasLoadedKatexResources=function(){return e},t.ensureKatexResourcesLoaded=async function(){if(!e){if(i)return i;i=async function(){let t=ji.externalResourceOptions.katexURLs.cssURL,e=ji.externalResourceOptions.katexURLs.cssIntegrity,i=ji.externalResourceOptions.katexURLs.jsURL,n=ji.externalResourceOptions.katexURLs.jsIntegrity,o=function(t,e=""){return new Promise(((i,n)=>{let o=document.createElement("link");o.rel="stylesheet",o.href=t,o.integrity=e,o.setAttribute("crossorigin","anonymous"),document.head.append(o),o.addEventListener("load",(()=>i(o))),o.addEventListener("error",(()=>n()))}))}(t,e),r=function(t,e=""){return new Promise(((i,n)=>{let o=document.createElement("script");o.async=!1,o.src=t,o.integrity=e,o.setAttribute("crossorigin","anonymous"),document.head.append(o),o.addEventListener("load",(()=>i(o))),o.addEventListener("error",(()=>n()))}))}(i,n);await Promise.all([o,r])}(),await i,i=null,e=!0}}}(Hi||(Hi={}));const Ui={mainCount:0,style:{}};var Ki;function qi(t){return Ji(t).split("\n").map((t=>`<p>${t}</p>`)).join("")}function Zi(t){return t=t.replace(/<br ?\/?>(<\/(?:p|div))>/gi,"$1").replace(/<\/p>\s*?<p.*?>|<br ?\/?>/gi,"\n").replace(/<[\s\S]*?>/g,""),(new DOMParser).parseFromString(`<!DOCTYPE html><body>${t}</body></html>`,"text/html").body.textContent||""}!function(t){function e(){return{id:ue()}}function i(t,i){for(let o of n(t))if(Object.assign(o.data,e()),i&&i.length>0)for(let t of i)delete o.data[t];return t}function*n(t){yield t,yield*o(t)}function*o(t){if(t.children)for(let e of t.children)yield*n(e);if(t.summaries)for(let e of t.summaries)yield*n(e);if(t.relLines)for(let e of t.relLines)yield*n(e)}t.generateEmptyData=function(t={}){let i={...Ui,...t},n=(new Date).getTime();const o=t.id||ue();let r={id:o,created:n,modified:n,autoIncrementId:0,version:Ei.current,style:i.style,root:{data:{...e(),expanded:!0}},floatRoots:[],relLines:[],watermark:{id:o,show:!1}};if(i.mainCount>0){r.root.children=[];for(let t=0;t<i.mainCount;t++)r.root.children.push({data:e()})}return r},t.getDefaultText=function(t,e=-1,i=-1){let n="";return"branch-root"===t?n=Hi.trans("rootTopic")||"Root Topic":"branch-float-root"===t?n=Hi.trans("floatTopic")||"Float Topic":"branch"===t?n=2===e?Hi.trans("mainTopic")||"Main Topic":Hi.trans("subTopic")||"Sub Topic":"summary"===t?n=Hi.trans("summary")||"Summary":"rel-line"===t&&(n=Hi.trans("toEdit")||"Double Click To Edit"),i>=0&&("branch"===t||"summary"===t||"rel-line"===t)&&(n+=" "+(i+1)),n},t.generateOwnBaseData=e,t.cloneDataItemDeeply=function(t,e){let n=oe(t);return n.data=n.data||{},i(n,e)},t.reuseDataItemDeeply=i,t.walkMeAndDescendants=n,t.walkDescendants=o,t.walkMeAndBranchDescendants=function*t(e){if(yield e,e.children)for(let i of e.children)yield*t(i)}}(Ki||(Ki={}));const Gi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yi=function(t){let e={};for(let[i,n]of t)e[i]=n;return e}(Object.entries(Gi).map((t=>[t[1],t[0]])));function Ji(t){return t.replace(/[&<>"']/g,(t=>Gi[t]))}function Xi(t){return t.replace(/&\w+;|&#\d+;/g,(t=>function(t){if(Yi[t])return Yi[t];let e=document.createElement("span");e.textContent=t;let i=e.textContent;return 1===i.length&&(Yi[t]=i),i}(t)))}function Qi(t){return(t=function(t){return t.replace(/<!--[\s\S]*?-->/g,"")}(t)).replace(/<(\/?)(\w+)([\s\S]*?)>/g,((t,e,i,n)=>{let o=i.toLowerCase();return"div"===o&&(o="p"),"font"===o&&(o="span"),["p","span","strong","em","s","u","b","i","strike","br","code"].includes(o)?`<${e}${o}${n=function(t){let e=/\s*(.+?)\s*=\s*['"](.+?)['"]/g,i=null;for(;i=e.exec(t);){let[,t,e]=i;if("style"===t.toLowerCase()){let t=nn(e);if(t)return` style="${t}"`}}return""}(n)}>`:""}))}function tn(t){return t.replace(/\r?\n/g," ").replace(/ {2,}/g," ").replace(/<br\/?><\/p>$/g,"</p>").replace(/<p><\/p>$/g,"").replace(/[\ufeff]/g,"").trim()}const en=["color","background-color","text-decoration","font-weight","font-style","text-decoration","font-size","font-family"];function nn(t){let e=/\s*(.+?)\s*:\s*(.+?)(?:;|$)/g,i=null,n="";for(;i=e.exec(t);){let[,t,e]=i;t=t.toLowerCase(),en.includes(t)&&(n+=t+":"+e+";")}return n}function on(t){return hn(t,["b","strong"],"font-weight")}function rn(t){return hn(t,["i","em"],"font-style")}function sn(t){return hn(t,["u"],"text-decoration")}function an(t){return hn(t,["s","strike"],"text-decoration")}function ln(t){return hn(t,[],"color")}function hn(t,e,i){t=t.replace(/<(\/?)(\w+)(.*?)>/g,((t,n,o,r)=>(e.includes(o.toLowerCase())&&(o="span"),i&&r&&(r=(r=r.replace(/([\w-]+)\s*:\s*.+?\s*(?:;\s*|$)/g,((t,e)=>e===i?"":t))).trim()),`<${n}${o}${r?" "+r:""}>`)));let n=[];return t.replace(/<\/?span(.*?)>/g,((t,e)=>"/"===t[1]?n.pop()?"":t:e?(n.push(!1),t):(n.push(!0),"")))}function dn(t){if("object"==typeof t)for(let e of Object.keys(t)){null==t[e]&&delete t[e]}return t}function cn(t){let e,i,n=!0;return function(...o){e=this,i=o,n&&(n=!1,requestAnimationFrame((function(){t.call(e,...i),n=!0})))}}function un(t){return t>0?1:t<0?-1:0}function pn(t,e){for(let[i,n]of t.entries())e.set(i,n);return e}function mn(t,e){return!!(e.compareDocumentPosition(t)&t.DOCUMENT_POSITION_PRECEDING)}function gn(t,e){return!!(e.compareDocumentPosition(t)&t.DOCUMENT_POSITION_FOLLOWING)}function fn(t){if(!t.parentNode)return-1;for(let e=0;e<t.parentNode.childNodes.length;e++)if(t.parentNode.childNodes[e]===t)return e;return-1}function*yn(t,e){for(let i of function*(t){for(;t.parentElement;)t=t.parentElement,yield t}(t))if(yield i,i===e)break}function*xn(t,e){for(let i of wn(t)){if(i===e)break;yield i}}function*wn(t){for(;t;)yield t,t=t.parentElement}function vn(t,e,i){for(let n of xn(t,e))if(n instanceof Element&&n.matches(i))return n;return null}var bn;function*kn(t,e){if(t===e)return;let i=t.firstChild||t.nextSibling,n=t.firstChild?bn.FirstChild:bn.NextSibling;if(!i)for(i=t.parentNode,n=bn.Parent;i;){if(yield{type:n,node:i,enum:!1},i.nextSibling){i=i.nextSibling,n=bn.NextSibling;break}i=i.parentNode,n=bn.Parent,i===e&&(i=null)}i&&(yield{type:n,node:i,enum:!0})}function*Cn(t,e){let i=t;for(;;){let t=null;for(t of kn(i,e))yield t;if(i=(null==t?void 0:t.enum)?t.node:null,!i)break}}function Sn(t,e){for(let i of function*(t,e){if(t===e)return;let i=t.previousSibling,n=bn.PreviousSibling;for(;i instanceof Element&&i.lastChild;)yield{type:n,node:i,enum:!1},i=i.lastChild,n=bn.LastChild;i||t.parentNode===e||(i=t.parentNode,n=bn.Parent),i&&(yield{type:n,node:i,enum:!0})}(t,e))if(i.enum)return i.node;return null}function Tn(t,e){for(let i of kn(t,e))if(i.enum)return i.node;return null}function Mn(t){let e=null,i=Ln(t);for(let n of En(t,i))e=e?Pn(e,n):n;return e=e||{},function(t){!function(t,e,i=Object.keys(e)){for(let n of i){let i=e[n];void 0!==i&&void 0===t[n]&&(t[n]=i)}}(t,{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1})}(e),dn(e||{})}function An(t){let e=Mn(t);return delete e["background-color"],e}function Pn(t,e){return{"font-weight":Dn(t,e,"font-weight","bold")?"bold":"normal","font-style":Dn(t,e,"font-style","italic")?"italic":"normal","text-underline":Dn(t,e,"text-underline",!0),"text-line-through":Dn(t,e,"text-line-through",!0),color:In(t,e,"color"),"font-family":In(t,e,"font-family"),"font-size":In(t,e,"font-size"),"background-color":In(t,e,"background-color")}}function Dn(t,e,i,n){return t[i]===n&&e[i]===n}function In(t,e,i){return t[i]===e[i]&&t[i]?t[i]:void 0}function*En(t,e){if(!function(t){return t.matches(".katex")}(t))for(let i of t.childNodes)if(i instanceof Element){let t=Ln(i);yield*En(i,{...e,...t})}else i instanceof Text&&i.textContent.length>0&&(yield e)}function Ln(t){var e,i,n,o;let r={};"b"===t.localName?r["font-weight"]="bold":"i"===t.localName?r["font-style"]="italic":"u"===t.localName?r["text-underline"]=!0:"s"!==t.localName&&"strike"!==t.localName||(r["text-line-through"]=!0);let s=t.getAttribute("style");if(s){let t=function(t){let e=/\s*(.+?)\s*:\s*(.+?)(?:;|$)/g,i=null,n={};for(;i=e.exec(t);){let[,t,e]=i;t=t.toLowerCase(),en.includes(t)&&(n[t]=e)}return n}(s);if("bold"!==t["font-weight"]&&"normal"!==t["font-weight"]||(r["font-weight"]=t["font-weight"]),(null===(e=t["font-style"])||void 0===e?void 0:e.includes("italic"))?r["font-style"]="italic":(null===(i=t["font-style"])||void 0===i?void 0:i.includes("normal"))&&(r["font-style"]="normal"),(null===(n=t["text-decoration"])||void 0===n?void 0:n.includes("underline"))&&(r["text-underline"]=!0),(null===(o=t["text-decoration"])||void 0===o?void 0:o.includes("line-through"))&&(r["text-line-through"]=!0),t.color&&(r.color=t.color),t["font-family"]&&(r["font-family"]=t["font-family"]),t["font-size"]){let e=Number(t["font-size"].replace(/px$/,""));e>0&&(r["font-size"]=e)}t["background-color"]&&(r["background-color"]=t["background-color"])}return r}function On(t,e,i){let n=null,o=new Map;for(let r of function*(t,e,i){if(t&&e&&!gn(t,e)){if(t===e)return yield t;yield t;for(let n of Cn(t,i))if(yield n.node,n.node===e)break}}(t,e,i)){if(!(r instanceof Text))continue;let t=!1;for(let e of yn(r,i))if("false"===e.getAttribute("contenteditable")){t=!0;break}if(t)break;let e=Rn(r,i,o);n=n?Pn(n,e):e}return dn(n||{})}function Bn(){let t=getSelection();if(!t)return{};let{anchorNode:e,anchorOffset:i,focusNode:n,focusOffset:o}=t;if(!e||!n)return{};let r=e.compareDocumentPosition(n),s=function(t,e){let i=t.parentElement;for(;i&&!i.contains(e);)i=i.parentElement;return i}(e,n);return s?((r&e.DOCUMENT_POSITION_PRECEDING||0===r&&i>o)&&([e,n]=[n,e]),On(e,n,s)):{}}function Rn(t,e,i){if(i.has(t))return i.get(t);let n={...t.parentNode&&t!==e?Rn(t.parentNode,e,i):{},...t instanceof Element?Ln(t):{}};return i.set(t,n),n}function Nn(t){return function(t){return/\$\$.+?\$\$/.test(t)}(t)&&!("katex"in window)}function _n(t){let e,i=/\$\$([\s\S]*?)\$\$/g,n="",o=0;for(;e=i.exec(t);){let r=e.index,s=i.lastIndex;n+=jn(t.slice(o,r)),n+=zn(e[1]),o=s}return n+=jn(t.slice(o)),n}function zn(t){if(!t)return"";let e=t;return"katex"in window&&(e=Wn(t),i=t,e=e.replace(/<span/,(t=>t+` data-source="${Ji(i)}"`))),"\ufeff"+e.replace(/class="katex"/,'$& contenteditable="false"')+"\ufeff";var i}async function Fn(t){return await Hi.ensureKatexResourcesLoaded(),Wn(t)}function Wn(t){if(!t)return"";let e=t;if("katex"in window)try{e=window.katex.renderToString(t,{output:"html"})}catch(i){console.warn(i),e=t}return e}function $n(t){return t.getAttribute("data-source")}function Vn(t){return t.replace(/\$\$.+?\$\$|[\\$]/g,(t=>1===t.length?"\\"+t:t))}function jn(t){return t.replace(/\$\$.+?\$\$|\\([\\$])/g,((t,e)=>e||t))}!function(t){t[t.FirstChild=0]="FirstChild",t[t.LastChild=1]="LastChild",t[t.PreviousSibling=2]="PreviousSibling",t[t.NextSibling=3]="NextSibling",t[t.Parent=4]="Parent"}(bn||(bn={}));const Hn={fillDefaultText:!1,fillText:!0,usage:"saving",expandAll:!1,nodeOriginalImage:!1};class Un extends k{constructor(t,e){super(),this.children=[],this.relLines=[],this.isImporting=!1,this.dataModifier=t,this.minder=e,this.initEvents()}initEvents(){this.dataModifier.on("data-change-bundled",this.updateModifiedTime,this)}get id(){return this.data.id}get root(){return this.children[0]}get floatRoots(){return this.children.slice(1)}updateModifiedTime(){this.data.modified=(new Date).getTime(),this.data.autoIncrementId=(this.data.autoIncrementId||0)+1}getTotalNodeCount(){return this.dataModifier.getTotalCount()-1}getTotalBranchNodeCount(){return this.dataModifier.getTypeCount("Branch")}getTotalImageCount(){let t=0;for(let e of this.dataModifier.walkMeAndDescendants(this.dataModifier.id)){let i=this.dataModifier.getType(e.data.id);"Branch"!==i&&"Summary"!==i||!e.data.image||t++}return t}async createNew(t,e,i){await this.import(Ki.generateEmptyData(t),e,i)}async import(t,e,i){this.isImporting=!0,this.ensureInsertedInToDocument(),t=Oi(t),this.dataModifier.clear(),this.minder.history.clear(),this.minder.style.clearAllCache(),this.minder.style.setDefaultStyleData(i),this.minder.style.setOverwrittenStyleData(e),await this.dataModifier.expandedStates.loadById(t.id),this.importTreeData(t),this.fire("import",t),this.isImporting=!1}ensureInsertedInToDocument(){if(!this.minder.paper.k.element.parentElement)throw new Error("Must insert paper to a container before importing!")}importTreeData(t){this.data=t,this.children=[t.root,...t.floatRoots||[]],this.relLines=t.relLines||[],this.dataModifier.addTree(this),this.minder.willUpdate()}untilImported(){return!this.data||this.isImporting?new Promise((t=>{this.once("import",t)})):Promise.resolve()}export(t={}){let e={...Hn,...t},i=oe(this.data);return i.root=oe(this.root),i.floatRoots=oe(this.floatRoots),i.relLines=oe(this.relLines),this.modifyExportedByOptions(i,e),i}modifyExportedByOptions(t,e){let i=[t.root,...t.floatRoots];for(let t of i)for(let i of Ki.walkMeAndDescendants(t)){if(e.fillText&&void 0!==i.data.html&&(i.data.text=Zi(i.data.html)),e.fillDefaultText&&void 0===i.data.html&&void 0===i.data.text){let t=this.dataModifier.getClassify(i.data.id),e=this.dataModifier.getDeepth(i.data.id),n=this.dataModifier.getIndex(i.data.id),o=Ki.getDefaultText(t,e,n);i.data.text=o}e.nodeOriginalImage&&i.data.image&&(i.data.image=Hi.getOriginalImageURL(i.data.image,i.data.imageOthers)||i.data.image),e.expandAll?i.data.expanded=!0:"view"===e.usage&&(i.data.expanded=this.dataModifier.expandedStates.getExpanded(i.data.id))}if("view"===e.usage){let e={};se(e,this.minder.style.getGlobalDefaultStyleData()),se(e,t.style),t.style=e}}exportNodeAsTreeData(t,e={}){let i={...Hn,...e},n=this.dataModifier.getItemMust(t),o=Ki.generateEmptyData();return o.root=n,this.modifyExportedByOptions(o,i),o}async exportAs(t,e={}){let i=Ni.get(t);if(!i)throw new Error("Unsupported encoding protocol: "+t+"!");if(!i.encodeMinder)throw new Error(`Encoding protocol "${t}" doesn't support encoding minder!`);return await i.encodeMinder(this.minder,e)}async exportAsFile(t,e,i={}){let n=Ni.get(t);if(!n)throw new Error("Unsupported encoding protocol: "+t+"!");n.toDataTypes.includes("blob")&&i.toDataType;let o,r=await this.exportAs(t,i),s=e+n.fileExtension;o="string"==typeof r.data?new Blob([r.data],{type:n.mimeType}):r.data,function(t,e){let i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=e,n.click(),setTimeout((()=>{URL.revokeObjectURL(i)}),6e4)}(o,s)}}function Kn(t,e,i){t&&t.hasOwnProperty(e)&&(t[i]=t[e],delete t[e])}function qn(t,e){if(t)for(let[i,n]of Object.entries(e))Kn(t,i,n)}function Zn(t,e,i,n){if(!t)return;let o=t[e];void 0===o&&void 0!==n&&(t[e]=o),i[o]&&(t[e]=i[o])}function Gn(t,e,i,n=i){t&&e&&t.hasOwnProperty(i)&&(e[n]=t[i],delete t[i])}function Yn(t,e,i){if(t&&e)if(Array.isArray(i))for(let n of i)Gn(t,e,n);else for(let[n,o]of Object.entries(i))Gn(t,e,n,o)}function Jn(t,e){t&&"object"==typeof t&&(1===e.length?delete t[e[0]]:Jn(t[e[0]],e.slice(1)))}function Xn(t,e){if(t)for(let i of Object.keys(t))e.includes(i)||delete t[i]}function Qn(t){if(!t)return t;for(let e of Object.keys(t))null!==t[e]&&void 0!==t[e]||delete t[e];return t}function*to(t){for(let e of oo(t))for(let t of eo(e))yield t}function*eo(t){if(yield t,t.children)for(let e of t.children)yield*eo(e);if(t.summaries)for(let e of t.summaries)yield*eo(e)}function*io(t){if(t.children)for(let e of t.children)yield e,yield*io(e);if(t.summaries)for(let e of t.summaries)yield e,yield*io(e)}function*no(t){for(let e of oo(t))for(let t of eo(e))t.summaries&&(yield*t.summaries)}function*oo(t){let e=[t.root,...t.floatRoots||[]];yield*e}class ro{constructor(){this.map=new WeakMap}add(t,e,i){this.map.set(t,{parent:e,key:i})}getKeyChain(t){let e,i=[];for(;e=this.map.get(t);)i.unshift(e.key),t=e.parent;return{top:t,keys:i}}}class so extends k{constructor(){super(),this.childOfMap=new ro,this.proxyMap=new WeakMap,this.targetMap=new WeakMap,this.objectProxyHandler=this.makeObjectProxyHandler(),this.arrayProxyHandler=this.makeArrayProxyHandler(),this.arrayProxyMethods=this.makeArrayProxyMethods()}makeObjectProxyHandler(){let t=this;return{get(e,i){let n=t.observe(e[i]);return t.childOfMap.add(n,t.getProxy(e),i),n},set(e,i,n){let o=e[i];e[i]=n;let{top:r,keys:s}=t.childOfMap.getKeyChain(t.observe(e));return s.push(i),o!==n&&t.fire("objectset",t.getTarget(r),s,o,n),!0},deleteProperty(e,i){let{top:n,keys:o}=t.childOfMap.getKeyChain(e);o.push(i);let r=e[i],s=delete e[i];return s&&t.fire("objectset",n,o,r,void 0),s}}}makeArrayProxyHandler(){let t=this;return{get(e,i){var n;let o=e[i],r=typeof o;return e.hasOwnProperty(i)?t.observe(o):"function"===r?null!==(n=t.arrayProxyMethods[i])&&void 0!==n?n:e[i]:o},set(e,i,n){let o=e[i];e[i]=n;let{top:r,keys:s}=t.childOfMap.getKeyChain(e);return s.push(i),o!==n&&i>=0&&t.fire("objectset",t.getTarget(r),s,o,n),!0}}}makeArrayProxyMethods(){let t=this;return{push:function(...e){let i=this.length,n=Array.prototype.push.call(this,...e),{top:o,keys:r}=t.childOfMap.getKeyChain(this);return t.fire("arraysplice",t.getTarget(o),r,i,[],e),n},unshift:function(...e){let i=Array.prototype.unshift.call(this,...e),{top:n,keys:o}=t.childOfMap.getKeyChain(this);return t.fire("arraysplice",t.getTarget(n),o,0,[],e),i},pop:function(){let e=this.length,i=Array.prototype.pop.call(this);if(e>0){let{top:n,keys:o}=t.childOfMap.getKeyChain(this);t.fire("arraysplice",t.getTarget(n),o,e-1,[i],[])}},shift:function(){let e=this.length,i=Array.prototype.shift.call(this);if(e>0){let{top:e,keys:n}=t.childOfMap.getKeyChain(this);t.fire("arraysplice",t.getTarget(e),n,0,[i],[])}},splice:function(e,i,...n){let o=Array.prototype.splice.call(this,e,i,n),{top:r,keys:s}=t.childOfMap.getKeyChain(this);t.fire("arraysplice",t.getTarget(r),s,e,o,n)}}}getTarget(t){var e;return null!==(e=this.targetMap.get(t))&&void 0!==e?e:t}getProxy(t){var e;return null!==(e=this.proxyMap.get(t))&&void 0!==e?e:t}observe(t){if("object"==typeof t){if(this.proxyMap.has(t))return this.proxyMap.get(t);let e;return e=Array.isArray(t)?this.observeArray(t):this.observePlainObject(t),this.proxyMap.set(t,e),this.proxyMap.set(e,e),this.targetMap.set(e,t),e}return t}observePlainObject(t){return new Proxy(t,this.objectProxyHandler)}observeArray(t){return new Proxy(t,this.arrayProxyHandler)}}class ao extends k{constructor(){super(...arguments),this.dataMap=new Map,this.parentMap=new Map}hasItem(t){return this.dataMap.has(t)}getItem(t){return this.dataMap.get(t)}getItemMust(t){let e=this.dataMap.get(t);if(!e)throw new Error(`Data item with id "${t}" is not exist!`);return e}getParentId(t){return this.parentMap.get(t)}getParent(t){let e=this.parentMap.get(t);return e?this.getItem(e):null}getPreviousSibling(t){var e,i;let n=this.getParent(t);if(!n)return null;let o=this.getIndex(t);return o>0&&null!==(i=null===(e=n.children)||void 0===e?void 0:e[o-1])&&void 0!==i?i:null}getNextSibling(t){var e,i;let n=this.getParent(t);if(!n)return null;let o=this.getIndex(t);return o>=0&&n.children&&o<n.children.length-1&&null!==(i=null===(e=n.children)||void 0===e?void 0:e[o+1])&&void 0!==i?i:null}getFirstChild(t){let e=this.getItem(t);return e&&e.children&&0!==e.children.length?e.children[0]:null}getLastChild(t){let e=this.getItem(t);return e&&e.children&&0!==e.children.length?e.children[e.children.length-1]:null}getPrevious(t){let e,i=this.getPreviousSibling(t);if(!i)return this.getParent(t);for(;e=this.getLastChild(i.data.id);)i=e;return i}getNext(t){let e=this.getFirstChild(t)||this.getNextSibling(t);if(e)return e;let i=this.getParent(t);if(!i)return null;for(;i;){let t=this.getNextSibling(i.data.id);if(t)return t;i=this.getParent(i.data.id)}return null}getFinalDescentant(t){let e,i=this.getItem(t);if(!i)return this.getParent(t);for(;e=this.getLastChild(i.data.id);)i=e;return i}getTotalCount(){return this.dataMap.size}getIndex(t){let e=this.getParent(t);return e?e.children.findIndex((e=>e.data.id===t)):0}getDeepth(t){let e=0,i=t;for(;i=this.getParentId(i);)e++;return e}addItem(t){if(!this.hasItem(t.data.id)&&(this.dataMap.set(t.data.id,t),t.children))for(let e of t.children)this.parentMap.set(e.data.id,t.data.id),this.addItem(e)}deleteById(t){let e=this.getItemMust(t);this.deleteItem(e)}deleteItem(t){let e=this.parentMap.get(t.data.id);e&&this.notAsChildOf(t.data.id,e);for(let e of this.walkMeAndDescentItems(t))this.parentMap.delete(e.data.id),this.dataMap.delete(e.data.id)}*walkMeAndDescentItems(t){if(yield t,t.children)for(let e of t.children)yield e,yield*this.walkMeAndDescentItems(e)}asChildOf(t,e,i=-1){let n=this.getItemMust(t),o=this.getItemMust(e);o.children||(o.children=[]),i<0&&(i+=o.children.length),o.children.splice(i,0,n),this.parentMap.set(t,e)}notAsChildOf(t,e){let i=this.getItemMust(e),n=i.children.findIndex((e=>e.data.id===t));n>-1&&i.children.splice(n,1),this.parentMap.delete(t)}clear(){this.dataMap=new Map,this.parentMap=new Map}}class lo extends ao{constructor(t){super(),this.id="",this.typeMap=new Map,this.typedCountMap={},this.typeChildKeyMap=t,this.childKeyTypeMap=Object.fromEntries(Object.entries(t).map((t=>[t[1],t[0]])));for(let e of Object.keys(t))this.typedCountMap[e]=0}getChildKeyByType(t){return this.typeChildKeyMap[t]}getTypeByChildKey(t){return this.childKeyTypeMap[t]}getType(t){return this.typeMap.get(t)}getTypeCount(t){return this.typedCountMap[t]||0}getChildKeyInParent(t){let e=this.getType(t);return this.getChildKeyByType(e)}getIndex(t){var e,i;let n=this.getParent(t);if(!n)return 0;let o=this.getChildKeyInParent(t);return o&&null!==(i=null===(e=n[o])||void 0===e?void 0:e.findIndex((e=>e.data.id===t)))&&void 0!==i?i:-1}getClassify(t){let e=this.getType(t);return"Connection"===e?"connection":"Paper"===e?"paper":"RelLine"===e?"rel-line":"Summary"===e?"summary":1===this.getDeepth(t)?t===this.getSiblingIds(t)[0]?"branch-root":"branch-float-root":"branch"}addTree(t){this.clear(),this.addWithType(t,"Paper"),this.id=t.data.id}getSiblingIds(t){var e;let i=this.getParent(t);if(!i)return[t];let n=this.getChildKeyInParent(t);return n?(null===(e=i[n])||void 0===e?void 0:e.map((t=>t.data.id)))||[]:[t]}getRootIdOf(t){if(t===this.id)return null;let e=this.getParentId(t);for(;e&&e!==this.id;)t=e,e=this.getParentId(e);return t}getSameDeepthIdBelowSameRoot(t,e,i){for(let{deepth:n,item:o}of this.walkDeepedDescendants(t,1,e))if(n===e&&this.getType(o.data.id)===i)return o.data.id;return null}getSiblingsOfIds(t){let e=new Set;for(let i of t){let t=this.getSiblingIds(i);for(let i of t)e.add(i)}return[...e]}getSameDeepthOfIds(t){let e=new Set;for(let i of t){if(e.has(i))continue;let t=this.getSameDeepthIdsOfOne(i);for(let i of t)e.add(i)}return[...e]}getSameDeepthIdsOfOne(t){let e=this.getRootIdOf(t),i=this.getDeepth(t),n=this.getType(t);return e?this.getSameDeepthIdsByDeepthAndType(e,i,n):[]}getSameDeepthIdsByDeepthAndType(t,e,i){let n=[];for(let{deepth:o,item:r}of this.walkDeepedDescendants(t,1,e))o===e&&this.getType(r.data.id)===i&&n.push(r.data.id);return n}getDescentantOfIds(t){let e=new Set;for(let i of t){if(e.has(i))continue;let t=this.getType(i);for(let n of this.walkDescendantsInType(i,t))e.add(n.data.id)}return[...e]}addWithType(t,e){if(this.hasItem(t.data.id))return!1;this.dataMap.set(t.data.id,t),this.typeMap.set(t.data.id,e),this.typedCountMap[e]=this.typedCountMap[e]+1;for(let[e,i]of Object.entries(this.typeChildKeyMap))if(t[i]){let n=[];for(let o=0;o<t[i].length;o++){let r=t[i][o];this.addWithType(r,e)?this.parentMap.set(r.data.id,t.data.id):n.push(r.data.id)}n.length>0&&(t[i]=t[i].filter((t=>!n.includes(t.data.id))))}return!0}deleteById(t){let e=this.getItemMust(t);this.deleteItem(e)}deleteItem(t){let e=this.parentMap.get(t.data.id);e&&this.notAsChildOf(t.data.id,e);for(let e of this.walkMeAndDescentItems(t)){let t=this.getType(e.data.id);this.dataMap.delete(e.data.id),this.typeMap.delete(e.data.id),this.typedCountMap[t]=this.typedCountMap[t]-1}}*walkMeAndDescentItems(t){yield t;for(let e of Object.values(this.typeChildKeyMap))if(t[e])for(let i of t[e])yield*this.walkMeAndDescentItems(i)}*walkMeAndAncestors(t){let e=this.getItemMust(t);yield e,yield*this.walkAncestors(t)}*walkAncestors(t){let e=this.getParentId(t);e&&(yield*this.walkMeAndAncestors(e))}*walkMeAndDescendants(t){let e=this.getItemMust(t);yield e,yield*this.walkDescendants(t)}*walkDescendants(t){let e=this.getItemMust(t);for(let t of Object.values(this.typeChildKeyMap))if(e[t])for(let i of e[t])yield*this.walkMeAndDescendants(i.data.id)}*walkMeAndAncestorsInType(t,e){for(let i of this.walkMeAndAncestors(t))this.getType(i.data.id)===e&&(yield i)}*walkAncestorsInType(t,e){for(let i of this.walkAncestors(t))this.getType(i.data.id)===e&&(yield i)}*walkMeAndDescendantsInType(t,e){for(let i of this.walkMeAndDescendants(t))this.getType(i.data.id)===e&&(yield i)}*walkDescendantsInType(t,e){for(let i of this.walkDescendants(t))this.getType(i.data.id)===e&&(yield i)}*walkDeepedDescendants(t,e,i){let n=this.getItemMust(t);for(let t of Object.values(this.typeChildKeyMap))if(n[t])for(let o of n[t])yield*this.walkDeepedMeAndDescendants(o.data.id,e+1,i)}*walkDeepedMeAndDescendants(t,e,i){if(e<=i){let i=this.getItemMust(t);yield{deepth:e,item:i}}e<i&&(yield*this.walkDeepedDescendants(t,e,i))}asTypedChildOf(t,e,i=-1,n){let o=this.getItemMust(t),r=this.getItemMust(e),s=this.getChildKeyByType(n);s&&(r[s]||(r[s]=[]),i<0&&(i+=r[s].length+1),r[s].splice(i,0,o),this.parentMap.set(t,e))}notAsChildOf(t,e){let i=this.getItemMust(e);this.parentMap.delete(t);let n=this.getChildKeyInParent(t);if(!n)return;let o=i[n].findIndex((e=>e.data.id===t));o>-1&&i[n].splice(o,1)}asChildOf(t,e,i=-1){let n=this.getItemMust(t),o=this.getItemMust(e),r=this.getChildKeyInParent(t);r&&(o[r]||(o[r]=[]),i<0&&(i+=o[r].length),o[r].splice(i,0,n),this.parentMap.set(t,e))}getSiblingIdInIndex(t,e){var i,n;let o=this.getParentId(t);if(!o)return null;let r=this.getItemMust(o),s=this.getChildKeyInParent(t);return s&&(null===(n=null===(i=r[s])||void 0===i?void 0:i[e])||void 0===n?void 0:n.data.id)||null}getChildIdInIndex(t,e,i){var n,o;return e<0?null:i&&(null===(o=null===(n=this.getItemMust(t)[i])||void 0===n?void 0:n[e])||void 0===o?void 0:o.data.id)||null}clear(){this.dataMap=new Map,this.typeMap=new Map,this.parentMap=new Map;for(let t of Object.keys(this.typeChildKeyMap))this.typedCountMap[t]=0}}class ho extends lo{constructor(t){super(t),this.dataChangeBundled=null,this.dataObserver=new so,this.dataObserver.on("objectset",this.onObservedObjectSet,this),this.dataObserver.on("arraysplice",this.onObservedArraySplice,this)}onObservedObjectSet(t,e,i,n){let o=t.data.id,r={type:"modify",keys:e,id:o,fromValue:oe(i),toValue:oe(n)};this.fireDataChangeEvent(o),this.onModifiedRecord(r)}onObservedArraySplice(t,e,i,n,o){let r=t.data.id,s={type:"arrayModify",keys:e,id:r,index:i,removeValues:oe(n),insertValues:oe(o)};this.fireDataChangeEvent(r),this.onModifiedRecord(s)}modify(t,e,i){let{o:n,key:o}=this.getOAndKey(t,e),r=n[o];if(i===r&&"object"!=typeof i)return!1;let s={type:"modify",keys:e,id:t,fromValue:oe(r),toValue:oe(i)};return this.editByModifyRecord(s),this.onModifiedRecord(s),!0}arrayModify(t,e,i,n,o){if(-1===i){let n=this.getOByChainedKeys(t,e);i=Array.isArray(n)?n.length:0}let r={type:"arrayModify",keys:e,id:t,index:i,removeValues:oe(n),insertValues:oe(o)};return Qn(r),this.editByArrayModifyRecord(r),this.onModifiedRecord(r),!0}arrayInsert(t,e,i,n){return this.arrayModify(t,e,i,void 0,n)}arrayRemove(t,e,i,n){if(void 0===n){let o=this.getOByChainedKeys(t,e);n=Array.isArray(o)?[o[i]]:[]}return this.arrayModify(t,e,i,n,void 0)}addTypedChild(t,e,i=-1,n){var o;if(this.hasItem(t.data.id))return this.moveChild(t.data.id,e,i);let r=this.getChildKeyByType(n);-1===i&&(i=(null===(o=this.getItemMust(e)[r])||void 0===o?void 0:o.length)||0);let s={type:"addChild",key:r,toId:e,toIndex:i,toNextId:this.getChildIdInIndex(e,i,r),item:oe(t)};return this.editByChildAddRecord(s),this.onModifiedRecord(s),!0}removeChild(t){if(!this.hasItem(t))return!1;let e=this.getParentId(t),i=this.getItemMust(t),n=this.getChildKeyInParent(t),o=this.getIndex(t),r={type:"removeChild",key:n,fromId:e,fromIndex:o,fromNextId:this.getSiblingIdInIndex(t,o+1),item:oe(i)};return this.editByChildRemoveRecord(r),this.onModifiedRecord(r),!0}moveChild(t,e,i){var n;if(!this.hasItem(t))throw new Error(`Data item "${t}" is not exist and can't be moved!`);let o=this.getParentId(t);if(!o)throw new Error("Can't move an isolated child which have no parent!");let r=this.getIndex(t),s=this.getChildKeyInParent(t);if(-1===i&&(i=(null===(n=this.getItemMust(e)[s])||void 0===n?void 0:n.length)||0),o===e&&r===i)return!1;let a=this.getSiblingIdInIndex(t,r+1),l=this.getChildIdInIndex(e,i,s);o===e&&r<i&&i--;let h={type:"moveChild",id:t,key:s,fromId:o,fromIndex:r,fromNextId:a,toId:e,toIndex:i,toNextId:l};return this.editByChildMoveRecord(h),this.onModifiedRecord(h),!0}onModifiedRecord(t){this.fire("data-modify",t)}reverseRecords(t){return(t=t.map((t=>"modify"===t.type?{type:t.type,keys:t.keys,id:t.id,fromValue:t.toValue,toValue:t.fromValue}:"arrayModify"===t.type?{type:"arrayModify",keys:t.keys,id:t.id,index:t.index,removeValues:t.insertValues,insertValues:t.removeValues}:"addChild"===t.type?{type:"removeChild",key:t.key,fromId:t.toId,fromIndex:t.toIndex,fromNextId:t.toNextId,item:t.item}:"removeChild"===t.type?{type:"addChild",key:t.key,toId:t.fromId,toIndex:t.fromIndex,toNextId:t.fromNextId,item:t.item}:{type:"moveChild",id:t.id,key:t.key,fromId:t.toId,fromIndex:t.toIndex,toId:t.fromId,toIndex:t.fromIndex,fromNextId:t.toNextId,toNextId:t.fromNextId}))).reverse()}modifyByRecords(t){let e=!1;for(let i of t)this.editByRecord(i)&&(this.onModifiedRecord(i),e=!0);return e}editByRecords(t){let e=!1;for(let i of t)e=this.editByRecord(i)||e;return e}editByRecord(t){return"modify"===t.type?this.editByModifyRecord(t):"arrayModify"===t.type?this.editByArrayModifyRecord(t):"addChild"===t.type?this.editByChildAddRecord(t):"removeChild"===t.type?this.editByChildRemoveRecord(t):"moveChild"===t.type&&this.editByChildMoveRecord(t)}editByModifyRecord(t){let e=this.getOByChainedKeys(t.id,t.keys.slice(0,-1));if(!e||"object"!=typeof e)return!1;let i=t.keys[t.keys.length-1];return void 0===t.toValue?delete e[i]:e[i]=oe(t.toValue),this.fireDataChangeEvent(t.id),!0}editByArrayModifyRecord(t){let e=this.getOByChainedKeys(t.id,t.keys.slice(0,-1));if(!e||"object"!=typeof e)return!1;let i=t.keys[t.keys.length-1],n=e[i],{index:o,removeValues:r,insertValues:s}=t;if(r=oe(r),s=oe(s),Array.isArray(n)&&r&&r.length>0)for(let t of r){let e=n.findIndex((e=>re(e,t)));e>-1&&n.splice(e,1)}return s&&s.length>0&&(Array.isArray(n)||(n=e[i]=[]),-1===o?n.push(...s):n.splice(o,0,...s)),this.fireDataChangeEvent(t.id),!0}editByChildAddRecord(t){let{key:e,item:i,toNextId:n,toId:o,toIndex:r}=t;if(!this.hasItem(o))return!1;i=oe(i),n&&(r=this.getIndex(n));let s=this.getTypeByChildKey(e);return!!this.addWithType(i,s)&&(this.asTypedChildOf(i.data.id,o,r,s),this.fireDataChangeEvent(o),!0)}editByChildRemoveRecord(t){let{item:e}=t;return!!this.hasItem(e.data.id)&&(this.deleteItem(e),this.fireDataChangeEvent(t.fromId),!0)}editByChildMoveRecord(t){let{id:e,fromId:i,toId:n,toIndex:o,toNextId:r}=t;return!!(this.hasItem(e)&&this.hasItem(i)&&this.hasItem(n)&&e!==i&&e!==n)&&(this.notAsChildOf(e,i),r&&(o=this.getIndex(r)),this.asChildOf(e,n,o),this.fireDataChangeEvent(t.fromId),this.fireDataChangeEvent(t.toId),!0)}fireDataChangeEvent(t){this.fire("data-change",t),this.willFireDataChangeBundled(t)}willFireDataChangeBundled(t){this.dataChangeBundled?this.dataChangeBundled.push(t):(this.dataChangeBundled=[t],requestAnimationFrame((()=>{this.fire("data-change-bundled",this.dataChangeBundled),this.dataChangeBundled=null})))}getOByChainedKeys(t,e){if(!this.hasItem(t))return null;let i=this.getItemMust(t);if(!i)return null;for(let t of e){let e=i[t];null==e&&(e=i[t]={}),i=e}return i}getOAndKey(t,e){return{o:this.getOByChainedKeys(t,e.slice(0,-1)),key:e[e.length-1]}}editFromOutside(t){this.editByRecords(t),this.fire("data-edit-from-outside",t)}observe(t){return this.dataObserver.observe(t)}getObservedById(t){return this.dataObserver.observe(this.getItemMust(t))}}class co extends k{constructor(){super(...arguments),this.store=null,this.lockingNodeId=null}setStore(t){this.store&&this.store.unBroadcastTo(this),this.store=t,t&&t.broadcastTo(this,["lock-add","lock-delete"])}hasLock(t){var e;return!!(null===(e=this.store)||void 0===e?void 0:e.hasLock(t))}hasLockedByOthers(t){var e;return!!(null===(e=this.store)||void 0===e?void 0:e.hasLockedByOthers(t))}getLockInfo(t){var e;return null===(e=this.store)||void 0===e?void 0:e.getLockInfo(t)}getUserLocked(t){var e;return null===(e=this.store)||void 0===e?void 0:e.getUserLocked(t)}lockUnique(t){this.hasLock(t)||(this.lockingNodeId=t,this.fire("need-lock",t))}unlockUnique(){this.lockingNodeId&&(this.fire("need-unlock",this.lockingNodeId),this.lockingNodeId=null)}getLockedUnique(){return this.lockingNodeId}}class uo{constructor(t,e){this.id=null,this.expandedState={},this.dataModifier=t,this.settings=e}async loadById(t){this.id=t,this.expandedState={},"local"===this.settings.get("expandedStateMode")&&await this.loadLocalExpandedStates(t)}setExpanded(t,e){"local"===this.settings.get("expandedStateMode")?(this.expandedState[t]=e,this.saveLocalExpandedStates(),this.dataModifier.fireDataChangeEvent(t)):"remote"===this.settings.get("expandedStateMode")?(this.expandedState[t]=e,this.dataModifier.fireDataChangeEvent(t)):this.dataModifier.getObservedById(t).data.expanded=e}getExpanded(t){var e,i,n;return["local","remote"].includes(this.settings.get("expandedStateMode"))?null!==(i=null!==(e=this.expandedState[t])&&void 0!==e?e:this.dataModifier.getItemMust(t).data.expanded)&&void 0!==i&&i:null!==(n=this.dataModifier.getItemMust(t).data.expanded)&&void 0!==n&&n}async loadLocalExpandedStates(t){this.expandedState=await Si.get("expanded_state_"+t,{})}saveLocalExpandedStates(){this.id&&Si.set("expanded_state_"+this.id,this.expandedState)}}class po extends ho{constructor(t){super({Branch:"children",Boundary:"boundaries",Summary:"summaries",RelLine:"relLines"}),this.dataLocker=new co,this.expandedStates=new uo(this,t)}setMetaData(t,e,i){this.modify(t,["data","metaData",e],i)}getMetaData(t,e){let i=this.getItemMust(t).data.metaData;return null==i?void 0:i[e]}hasLockedInDirectly(t){for(let e of this.walkMeAndDescendants(t))if(this.dataLocker.hasLockedByOthers(e.data.id))return!0;return!1}*walkMeAndExpandedDescendants(t){yield t,yield*this.walkExpandedDescendants(t)}*walkExpandedDescendants(t){if(this.expandedStates.getExpanded(t.data.id)){if(t.children)for(let e of t.children)yield*this.walkMeAndExpandedDescendants(e);if(t.summaries)for(let e of t.summaries)yield*this.walkMeAndExpandedDescendants(e)}}}class mo extends k{constructor(t){super(),this.records=[],this.recording=!1,this.paused=!1,this.modifier=t}isRecording(){return this.recording}isPaused(){return this.paused}isRunning(){return this.recording&&!this.paused}hasAnyRecords(){return this.records.length>0}start(){this.recording||(this.modifier.on("data-modify",this.addRecord,this),this.fire("start"),this.paused=!1,this.recording=!0)}end(){this.recording&&(this.modifier.off("data-modify",this.addRecord,this),this.fire("end"),this.recording=!1)}pause(){if(!this.recording)throw new Error("Recording is not started!");this.paused||(this.modifier.off("data-modify",this.addRecord,this),this.fire("pause"),this.paused=!0)}resume(){if(!this.recording)throw new Error("Recording is not started!");this.paused&&(this.modifier.on("data-modify",this.addRecord,this),this.fire("resume"),this.paused=!1)}addRecord(t){this.records.push(t)}getRecords(){return this.records}clearRecords(){this.records=[]}undo(){let t=this.modifier.reverseRecords(this.records);return this.modifier.editByRecords(t),t}redo(){return this.modifier.editByRecords(this.records),this.records}merge(){let t=new ae,e=new Set;for(let i=0;i<this.records.length;i++){let n=this.records[i];if("modify"===n.type){let o=n.id,r=n.keys.join("-"),s=t.get(o,r);s&&(n.fromValue=s.record.fromValue,e.add(s.index)),t.set(o,r,{record:n,index:i})}}this.records=this.records.filter(((t,i)=>!e.has(i)))}}class go extends k{constructor(t){super(),this.recorders=[],this.currentRecorder=null,this.recordIndex=0,this.recordingDeepth=0,this.modifier=t}recordExecution(t){this.startRecording();try{t()}catch(t){console.warn(t)}this.endRecording()}startRecording(){this.recordingDeepth++,this.currentRecorder||(this.currentRecorder=new mo(this.modifier),this.currentRecorder.start())}endRecording(){this.recordingDeepth--,this.currentRecorder&&0===this.recordingDeepth&&(this.currentRecorder.end(),this.recorderContentToHistory(this.currentRecorder))}recorderContentToHistory(t){t.hasAnyRecords()&&(this.recorders.length>this.recordIndex&&this.recorders.splice(this.recordIndex,this.recorders.length-this.recordIndex),this.recorders.push(t),this.recordIndex++),t.merge();let e=t.getRecords();return e.length>0&&this.fire("history-edit",e),this.currentRecorder===t&&(this.currentRecorder=null),e}startCustomRecording(){let t=new mo(this.modifier);return t.on("start",(()=>{this.recordingDeepth++,this.currentRecorder=t})),t.on("pause",(()=>{this.recordingDeepth--,this.currentRecorder=null})),t.on("resume",(()=>{this.recordingDeepth++,this.currentRecorder=t})),t.on("end",(()=>{this.recorderContentToHistory(t)})),t}canUndo(){return this.recordIndex>0}undo(){if(this.recordIndex>0){this.recordIndex--;let t=this.recorders[this.recordIndex].undo();return this.fire("history-undo"),this.fire("history-edit",t),!0}return!1}canRedo(){return this.recordIndex<this.recorders.length}redo(){if(this.recordIndex<this.recorders.length){let t=this.recorders[this.recordIndex].redo();return this.recordIndex++,this.fire("history-redo"),this.fire("history-edit",t),!0}return!1}clear(){this.currentRecorder&&(this.currentRecorder.end(),this.currentRecorder=null),this.recorders=[],this.recordIndex=0}}class fo extends go{}class yo{constructor(){this.map=new WeakMap}has(t,e){var i;return!!(null===(i=this.map.get(t))||void 0===i?void 0:i.has(e))}get(t,e){var i;return null===(i=this.map.get(t))||void 0===i?void 0:i.get(e)}set(t,e,i){let n=this.map.get(t);n||(n=new Map,this.map.set(t,n)),n.set(e,i)}clear(){this.map=new WeakMap}}const xo=new yo,wo=new yo;class vo extends k{constructor(t,e,i={},n={}){super(),this.themeData={},this.defaultStyleData={},this.overwrittenStyleData={},this.manager=t,this.settings=e,this.globalDefaultStyleData=i,this.globalOverwrittenData=n}get ownData(){return this.manager.data.style}getGlobalDefaultStyleData(){return this.globalDefaultStyleData}get(t,e){var i,n,o;return null!==(o=null!==(n=null!==(i=this.getOverwritten(t,e))&&void 0!==i?i:this.getOwn(t,e))&&void 0!==n?n:this.getOnlyInTheme(t,e))&&void 0!==o?o:this.getDefault(t,e)}getOwn(t,e){var i;return null===(i=this.ownData[t])||void 0===i?void 0:i[e]}getOverwritten(t,e){var i,n,o;return null!==(n=null===(i=this.overwrittenStyleData[t])||void 0===i?void 0:i[e])&&void 0!==n?n:null===(o=this.globalOverwrittenData[t])||void 0===o?void 0:o[e]}getOnlyInTheme(t,e){var i;return null===(i=this.themeData[t])||void 0===i?void 0:i[e]}getDefault(t,e){var i,n,o,r;return"font-family"===e?this.get("content","default-font-family"):null!==(r=null!==(n=null===(i=this.defaultStyleData[t])||void 0===i?void 0:i[e])&&void 0!==n?n:null===(o=this.globalDefaultStyleData[t])||void 0===o?void 0:o[e])&&void 0!==r?r:ji.defaultStyleData[t][e]}getDirectionalValue(t,e){let[i,n]=e.split("-");return I(this.get(t,i),n)}getDirectionalValues(t,e){return O(this.get(t,e))}modify(t,e,i){this.doModifying(t,e,i),this.fire("tree-style-change")}modifyWholeType(t,e){this.manager.dataModifier.modify(this.manager.id,["data","style",t],e),this.fire("tree-style-change")}modifyTotal(t){this.manager.dataModifier.modify(this.manager.id,["data","style"],t),this.fire("tree-style-change")}patchTotal(t){this.modifyTotal(se(this.ownData,t))}doModifying(t,e,i){this.manager.dataModifier.modify(this.manager.id,["data","style",t,e],i)}setDefaultStyleData(t={}){this.defaultStyleData=t}setOverwrittenStyleData(t={}){this.overwrittenStyleData=t}updateThemeData(t){this.themeData=t,this.fire("tree-style-change")}setBackgroundColor(t){this.doModifying("map","background-color",t),this.fire("tree-style-change"),this.fire("tree-style-background-change")}setBackgroundImage(t){this.doModifying("map","background-image",t),this.fire("tree-style-change"),this.fire("tree-style-background-change")}setBackgroundResourceId(t){this.doModifying("map","background-resource-id",t),this.fire("tree-style-change"),this.fire("tree-style-background-change")}resetBackground(){this.doModifying("map","background-color",void 0),this.doModifying("map","background-image",void 0),this.doModifying("map","background-resource-id",void 0),this.fire("tree-style-change"),this.fire("tree-style-background-change")}getBackgroundStyle(){let t=this.get("map","background-image"),e=this.get("map","background-color"),i=this.get("map","background-resource-id");return t?`url(${i?t:Hi.getBackgroundURL(t)}) left bottom / ${m?"cover":"100% 100%"} ${e}`.trim():e}contrastWithBackgroundColor(t,e){let i=this.get("map","background-color");return f.improveContrast(t,i,e)}getSkewAspectRatio(){return Math.tan(S(90-this.get("layout","layout-skew-angle")))}getMobileScaled(t,e){let i=this.get(t,e);return i*=this.getMobileScaling(),i}getMobileScaling(){return this.settings.get("mobileMode")?this.get("common","mobile-scaling"):1}getByBranchDeepth(t,e,i){var n,o,r;return null===(r=null===(o=null===(n=this.ownData.byBranchDeepth)||void 0===n?void 0:n[t])||void 0===o?void 0:o[e])||void 0===r?void 0:r[i]}setByBranchDeepth(t,e,i,n){this.ownData.byBranchDeepth||(this.ownData.byBranchDeepth={}),this.manager.dataModifier.modify(this.manager.id,["data","style","byBranchDeepth",t,String(e),i],n)&&this.fire("tree-style-change")}clearAllCache(){xo.clear(),wo.clear()}}function bo(t,e){let i=new Set([...t]);for(let t of e)i.delete(t);return i}var ko;!function(t){t.TextKeys=["font-family","font-size","font-weight","font-style","line-height","text-align","text-vertical-align","text-underline","text-line-through","color","color-multicolor"],t.ContainerKeys=["shape","stroke-width","stroke-dasharray","fill-color","fill-multicolor","stroke-color","stroke-multicolor"],t.ConnectKeys=["connect","connect-width","connect-dasharray","connect-color","connect-multicolor","connect-out-adjust","connect-tapered","connect-tapered-start-width","connect-tapered-power"],t.NodeInRangeKeys=new Set([...t.TextKeys,...t.ContainerKeys]),t.CrossingLevelOwnInheritableKeys=["connect","connect-color","connect-width","connect-tapered","connect-tapered-power","connect-dasharray"],t.InheritableKeysWhenInitFrom=["font-family","font-size","color","fill-color","shape","stroke-width","stroke-color","stroke-dasharray","line-height"],t.SameDeepthInheritableKeysWhenInit=["margin","padding"],t.WillInsteadCustomKeys={"stroke-color":"connect-color"},t.WillInsteadThemeKeys={"stroke-color":"connect-color","stroke-width":"connect-width"},t.MultiColorKeyMap={"connect-color":"connect-multicolor",color:"color-multicolor","fill-color":"fill-multicolor","stroke-color":"stroke-multicolor"},t.StructThemeKeys=new Set(["layout","shape","radius","margin","padding","connect","connect-out-adjust","connect-tapered","connect-tapered-start-width","connect-tapered-power","connect-dasharray"]),t.ColorThemeKeys=bo(new Set([...t.TextKeys,...t.ContainerKeys,...t.ConnectKeys]),[...t.StructThemeKeys,"color","line-height"]),t.ColorThemeNotOverwriteKeys=new Set(["font-weight","font-style","text-align","text-vertical-align","text-underline","text-line-through"]),t.ColorThemeOverwriteKeys=bo(t.ColorThemeKeys,t.ColorThemeNotOverwriteKeys),t.StructThemeNotOverwriteKeys=new Set(["shape","connect-color","connect-width","connect-dasharray"]),t.StructThemeOverwriteKeys=bo(t.StructThemeKeys,t.StructThemeNotOverwriteKeys),t.FloatInheritRootThemeKeys=bo([...t.TextKeys,...t.ContainerKeys,...t.ConnectKeys,"layout"],["font-size","connect-out-adjust"])}(ko||(ko={}));class Co extends k{constructor(t){super(),this.colorName="",this.structName="",this.style=t}updateThemeNames(){this.setColorThemeName(this.style.get("theme","colorTheme")),this.setStructThemeName(this.style.get("theme","structTheme"))}setColorThemeName(t){t&&!zi.has(t)&&(console.error(`Color Theme "${t}" is not exist!`),t=""),t!==this.colorName&&(this.style.modify("theme","colorTheme",t),this.colorName=t,this.fire("color-theme-change",t))}setStructThemeName(t){t&&!Vi.has(t)&&(console.error(`Struct Theme "${t}" is not exist!`),t=""),t!==this.structName&&(this.style.modify("theme","structTheme",t),this.structName=t,this.fire("struct-theme-change",t))}getThemeStyle(){let t=this.colorName?zi.get(this.colorName):{},e=this.structName?Vi.get(this.structName):{},i={};return se(i,t),se(i,e),this.processInheritingOfFloatStyles(i),i}processInheritingOfFloatStyles(t){if(t.root){t.floatRoot=t.floatRoot||{};for(let e of Object.keys(t.root))!t.floatRoot.hasOwnProperty(e)&&ko.FloatInheritRootThemeKeys.has(e)&&(t.floatRoot[e]=t.root[e])}}}const So={previewMode:!1,mobileMode:!1,paperPadding:[10],shortcutKeyTriggerMode:"non-outer-input",willCacheData:!1,cacheDataIntervalSeconds:7,cacheDataExpireSeconds:2592e3,viewControl:"client",viewControlClientFallback:"center-root-visible",viewControlAfterPassiveSelected:"visible",zoomToRounded:!0,wheelTo:"scrolling",rightMouseToDrag:!1,canDblClickToAddFloat:!0,canDragToggleFloatAndNormal:!0,canDragCauseOffset:!0,showsDragOffset:!0,dragConnectPreviewMode:"static",toEditAfterNewlyAdded:!0,alwaysKeepsTextEditorAlive:!1,preserveTextEditorAliveAfterEnter:!1,dblclickCursorControl:"all",spaceCursorControl:"user-end-default-all",enterAtRootToAddChild:!0,clearPastedTextStyle:!1,delaySelectingAllText:!1,delayMovingCursorToTheEnd:!1,showDefaultText:!0,showLocalImageBeforeUploaded:!0,expandedStateMode:"local",autoSelectUniqueRoot:!0,alwaysSelectAnyNodes:!1,willRenderWatermark:!0};class To extends x{constructor(t){super(t,So)}}class Mo extends b{static fromEvent(t){return new Mo(t.type,t.target,{},t)}getShortCutKey(){return this.originalEvent instanceof KeyboardEvent?H(this.originalEvent):null}getShortCutCode(){return this.originalEvent instanceof KeyboardEvent?function(t,e=!1){var i,n;let o=t.shiftKey&&e?null===(i=V[t.which])||void 0===i?void 0:i.code:null===(n=$[t.which])||void 0===n?void 0:n.code;return o=o||t.code,j(t.which)&&(o=""),U(t)+K(o)}(this.originalEvent):null}clone(){return new Mo(this.type,this.target,this.data,this.originalEvent)}}class Ao extends k{constructor(t,e){super(),this.status=t,this.settings=e,this.initEvents()}initEvents(){this.status.on("can-interact",this.startInteracting,this),this.status.on("cant-interact",this.endInteracting,this)}startInteracting(){Y.on(document,"keydown",this.dispatchKeyEvent,this),Y.on(document,"keyup",this.dispatchKeyEvent,this),Y.on(document,"keypress",this.dispatchKeyEvent,this),Y.on(document,"compositionstart",this.dispatchKeyEvent,this),Y.on(document,"compositionupdate",this.dispatchKeyEvent,this),Y.on(document,"compositionend",this.dispatchKeyEvent,this),Y.on(document,"copy",this.dispatchKeyEvent,this),Y.on(document,"cut",this.dispatchKeyEvent,this),Y.on(document,"paste",this.dispatchKeyEvent,this)}endInteracting(){Y.off(document,"keydown",this.dispatchKeyEvent,this),Y.off(document,"keyup",this.dispatchKeyEvent,this),Y.off(document,"keypress",this.dispatchKeyEvent,this),Y.off(document,"compositionstart",this.dispatchKeyEvent,this),Y.off(document,"compositionupdate",this.dispatchKeyEvent,this),Y.off(document,"compositionend",this.dispatchKeyEvent,this),Y.off(document,"copy",this.dispatchKeyEvent,this),Y.off(document,"cut",this.dispatchKeyEvent,this),Y.off(document,"paste",this.dispatchKeyEvent,this)}dispatchKeyEvent(t){this.canTriggerShortcutKeys(t.target)&&this.fire(t.type,Mo.fromEvent(t))}canTriggerShortcutKeys(t=document.activeElement){let e=this.settings.get("shortcutKeyTriggerMode");return"none"!==e&&(!!(this.status.isInInputing()&&t instanceof Element&&t.matches(".mm-editor"))||("focus"===e?t instanceof Element&&t.matches(".mm-editor, .mm-paper"):"non-outer-input"!==e||!t||t instanceof Element&&(!t.matches("input, textarea, [contenteditable=true]")||t.matches(".mm-editor"))))}}class Po{constructor(t){this.canExecWhenDisabled=!1,this.acceptShortKeyWhenInputing=!1,this.minder=t}acceptShortcutkey(){return!!this.acceptShortKeyWhenInputing||!this.minder.status.isInInputing()}canExecFinally(){return!!this.canExecPredicted()&&this.canExec()}canExecPredicted(){return!(!this.canExecWhenDisabled&&this.minder.status.isReadonly())}canExec(){return!0}queryValue(...t){return null}}class Do extends Po{canExec(){return this.getSelectedNodes().some((t=>t&&this.canExecWithNode(t)))}canExecFinallyWithIds(t){if(!this.canExecPredicted())return!1;let e=t.map((t=>this.minder.paper.getNodeById(t)));return this.canExecWithNodes(e)}canExecPredicted(){return!!super.canExecPredicted()&&!!this.minder.status.canInteract()}canExecWithNodes(t){return t.some((t=>this.canExecWithNode(t)))}getSelectedNodes(){return this.minder.selections.getSelected()}exec(...t){return this.execWithSelected(...t)}execWithSelected(...t){let e=this.getSelectedNodes();return e=this.filtersNodes(e),this.execWithNodes(e,...t)}filtersNodes(t){return t.filter((t=>t&&this.canExecWithNode(t)))}execWithIds(t,...e){let i=t.map((t=>this.minder.paper.getNodeById(t)));return i=this.filtersNodes(i),i.length>0?this.execWithNodes(i,...e):null}queryValue(...t){let e=this.getSelectedNodes();return this.queryValueWithNodes(e,...t)}queryValueWithIds(t,...e){let i=t.map((t=>this.minder.paper.getNodeById(t)));return this.queryValueWithNodes(i,...e)}queryValueWithNodes(t,...e){return 0===(t=this.filtersNodes(t)).length?null:this.queryValueWithNode(t[0],...e)}queryValueWithNode(t,...e){return null}}const Io=new WeakMap,Eo=new WeakMap,Lo=new WeakMap,Oo=new WeakMap;function Bo(t){return t=Lo.get(t)||t,Io.get(t)||null}class Ro extends k{static fromK(t){return function(t){return t=Oo.get(t)||t,Eo.get(t)||null}(t)||null}static fromClosestElement(t){let e=Bo(t);for(;!e&&t.parentElement;)e=Bo(t=t.parentElement);return e}constructor(t,e,i){super(),this.parent=null,this.tree=null,this.attached=!1,this.type=t,this.classify=e,this.tree=i}init(){var t;return this.initKs(),this.initEvents(),t=this.k,Eo.set(t,this),Io.set(t.element,this),this.tree&&this.tree.__fireNodeCreated(this),this}initEvents(){}get previousNode(){var t;let e=this.getIndexAsChild();return(null===(t=this.parent)||void 0===t?void 0:t.childAt(e-1))||null}get nextNode(){var t;let e=this.getIndexAsChild();return(null===(t=this.parent)||void 0===t?void 0:t.childAt(e+1))||null}get previousSameTypeNode(){let t=this.previousNode;for(;t&&t.type!==this.type;)t=t.previousNode;return t}get nextSameTypeNode(){let t=this.nextNode;for(;t&&t.type!==this.type;)t=t.nextNode;return t}__fireAttach(){this.fire("attach")}async __fireDetach(){return await Promise.resolve(),!this.attached&&(this.fire("detach"),!0)}getIndexAsChild(){return this.parent?this.parent.children.indexOf(this):-1}getDeepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}*walkMeAndAncestors(){yield this,yield*this.walkAncestors()}*walkAncestors(){let t=this.parent,e=this.tree;for(;t&&t!==e;)yield t,t=t.parent}*walkMeAndDescendants(){yield this}*walkDescendants(){}before(...t){var e;for(let e of t)e.parent&&e.parent.__removeFromChildren(e);null===(e=this.parent)||void 0===e||e.insertChildrenAt(t,this.getIndexAsChild())}after(...t){var e;for(let e of t)e.parent&&e.parent.__removeFromChildren(e);null===(e=this.parent)||void 0===e||e.insertChildrenAt(t,this.getIndexAsChild()+1)}remove(){var t;null===(t=this.parent)||void 0===t||t.removeChild(this)}bringToFront(){this.k.bringToFront()}setVisible(t){this.k.setVisible(t)}}class No extends Ro{constructor(){super(...arguments),this.children=[]}insertChildrenAt(t,e){this.children.splice(e,0,...t);for(let e of t)this.resetChildPropertiesAfterInserted(e)}resetChildPropertiesAfterInserted(t){var e;if(t.parent!==this){t.parent&&t.parent.removeChild(t),t.parent=this;for(let e of t.walkMeAndDescendants())e.attached=!0;null===(e=this.tree)||void 0===e||e.__fireNodeInserted(t)}}get firstChild(){return this.childAt(0)}get lastChild(){return this.childAt(this.children.length-1)}append(...t){for(let e of t)e.parent&&e.parent.__removeFromChildren(e);this.insertChildrenAt(t,this.children.length)}prepend(...t){for(let e of t)e.parent&&e.parent.__removeFromChildren(e);this.insertChildrenAt(t,0)}removeChild(t){let e=this.children.indexOf(t);this.removeChildAtIndex(t,e)}__removeFromChildren(t){let e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)}removeChildAtIndex(t,e){e>-1&&(this.children.splice(e,1),this.resetChildPropertiesAfterRemoved(t))}resetChildPropertiesAfterRemoved(t){var e;t.parent=null;for(let e of t.walkMeAndDescendants())e.attached=!1;null===(e=this.tree)||void 0===e||e.__fireNodeRemoved(t,this)}childAt(t){return this.children[t]||null}contains(t){return this==t||this.isAncestorOf(t)}isAncestorOf(t){let e=t.parent;for(;e;){if(e===this)return!0;e=e.parent}return!1}getAllNodeCount(){let t=0;for(let e of this.walkMeAndDescendants())t++;return t}*walkMeAndDescendants(){yield this;for(let t of this.children)yield*t.walkMeAndDescendants()}*walkDescendants(){for(let t of this.children)yield*t.walkMeAndDescendants()}*walkDeepedDescendants(t=this.getDeepth(),e=1/0){for(let i of this.children)i instanceof No&&(yield*i.walkDeepedMeAndDescendants(t+1,e))}*walkDeepedMeAndDescendants(t=this.getDeepth(),e=1/0){t<=e&&(yield{deepth:t,node:this}),t<e&&(yield*this.walkDeepedDescendants(t,e))}}class _o extends No{constructor(){super("Paper","paper",null),this.hoverIn=null,this.tree=this}initKs(){this.k=new ei,this.k.setId(de("minder"))}initEvents(){g&&this.k.on("mouseover",this.fireNodeHoverEvents,this),this.k.on("click",this.fireNodeClickEvents,this),this.k.on("mousedown",this.fireNodeMouseDownEvents,this),this.k.on("tap",this.fireNodeTapEvents,this),this.k.on("mouseup",this.fireNodeMouseUpEvents,this),this.k.on("contextmenu",this.fireNodeContextMenuEvents,this),this.k.on("hold:start",this.fireHoldStartEvent,this),this.k.on("hold:end",this.fireHoldEndEvent,this)}__fireNodeCreated(t){this.fire("node-create",t)}__fireNodeInserted(t){for(let e of t.walkMeAndDescendants())e.__fireAttach(),this.fire("node-attach",e)}__fireNodeRemoved(t,e){this.fire("node-remove",t,e);for(let e of t.walkMeAndDescendants())e.__fireDetach().then((t=>{t&&this.fire("node-detach",e)}))}fireNodeHoverEvents(t){let e=Ro.fromClosestElement(t.target);e instanceof _o&&(e=null),e!==this.hoverIn&&(this.hoverIn&&this.fire("node-hover-out",this.hoverIn),e&&this.fire("node-hover-in",e),this.hoverIn=e)}fireNodeClickEvents(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-click",e,t)}fireNodeMouseDownEvents(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-mousedown",e,t)}fireNodeTapEvents(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-tap",e,t)}fireNodeMouseUpEvents(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-mouseup",e,t)}fireNodeContextMenuEvents(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-contextmenu",e,t)}fireHoldStartEvent(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-hold-start",e,t)}fireHoldEndEvent(t){let e=Ro.fromClosestElement(t.target);e&&this.fire("node-hold-end",e,t)}excludeDescendants(t){let e=new Set(t);return t.filter((t=>{for(let i of t.walkAncestors())if(e.has(i))return!1;return!0}))}sortNodes(t){return t.sort(((t,e)=>this.compareNodes(t,e)))}compareNodes(t,e){let i=t.getDeepth(),n=e.getDeepth();if(i<n)for(let t=0;t<n-i;t++)e=e.parent;else if(i>n)for(let e=0;e<i-n;e++)t=t.parent;return t===e?0:t.getIndexAsChild()-e.getIndexAsChild()}getCommonAncestor(t){return 1===t.length?t[0].parent:t.reduce(this.reduceAncestor)}reduceAncestor(t,e){if(!t||!e)return null;if(t instanceof No&&t.isAncestorOf(e))return t;if(e instanceof No&&e.isAncestorOf(t))return e;let i=t.parent;for(;i&&!i.isAncestorOf(e);)i=i.parent;return i}getNodeById(t){return Ro.fromK(this.k.getNodeById(t))}remove(){this.k.remove()}}class zo extends No{static fromClosestElement(t){let e=super.fromClosestElement(t);return e instanceof _o?null:e}constructor(t,e,i,n){super(i,n,e),this.data=t,this.initStyle()}get siblings(){var t;return(null===(t=this.parent)||void 0===t?void 0:t.children)||[this]}get sameTypeSiblings(){var t;return(null===(t=this.parent)||void 0===t?void 0:t.children.filter((t=>t.type===this.type)))||[this]}get id(){return this.data.data.id}get ownData(){return this.data.data}get element(){return this.k.element}get isRoot(){return"branch-root"===this.classify||"branch-float-root"===this.classify}get root(){for(let t of this.walkMeAndAncestors())if(t.isRoot)return t;return null}beHovered(){var t;return(null===(t=this.tree)||void 0===t?void 0:t.hoverIn)===this}getSameTypeIndex(){return this.sameTypeSiblings.indexOf(this)}getIndex(){return this.siblings.indexOf(this)}getLevel(){var t,e;let i=this.classify;return"branch-root"===i?"root":"branch-float-root"===i?"floatRoot":"branch"==i?"branch-float-root"===(null===(t=this.parent)||void 0===t?void 0:t.classify)||"branch-root"===(null===(e=this.parent)||void 0===e?void 0:e.classify)?"main":"sub":"rel-line"===i?"relLine":"connection"===i?"connection":i}getChildLevel(){let t=this.getLevel();return"root"===t||"floatRoot"===t?"main":"main"===t||"sub"===t?"sub":t}modifyOwnData(t,e){return this.tree.dataManager.dataModifier.modify(this.id,["data",t],e)}modify(t,e){return this.tree.dataManager.dataModifier.modify(this.id,t,e)}willUpdate(){ri(this)}__update(){this.attached&&this.willUpdateSelf()}willUpdateSelf(){}__updateContents(){}__readContentBoundary(){}__updateContentLayout(){}__readContainerBoundary(){}__afterTreeLayout(){}}var Fo,Wo,$o,Vo,jo,Ho;!function(t){const e=new Map;t.register=function(t,i){e.set(t,i)};const i=new WeakMap;function n(t,e){let n=i.get(t);return!n||n instanceof e||(n=void 0),n||(n=new e(t),i.set(t,n)),n}t.get=function(t){let o=i.get(t);if(!o){let i=e.get(t.classify);if(i)return n(t,i);throw new Error(`Node with classify "${t.classify}" doesn't have a layout!`)}return o},t.getOf=n,t.remove=function(t){let e=i.get(t);e&&(e.remove(),i.delete(t))}}(Fo||(Fo={}));class Uo extends zo{constructor(t,e,i,n){super(t,e,i,n),this.initContentRenderer()}initKs(){(this.k=new Kt).setId(de(this.classify+"-node"))}getLocalShapeContainerBox(){return this.contentRenderer.getLocalShapeContainerBox()}getShapeContainerPath(){return this.contentRenderer.getShapeContainerPath()}setMetaData(t,e){this.tree.dataModifier.setMetaData(this.id,t,e)}getMetaData(t){return this.tree.dataModifier.getMetaData(this.id,t)}getUnAdjustedSize(){return this.contentRenderer.unAdjustedSize}willUpdateSelf(){oi[ii.UPDATING_NODE_CONTENTS].add(this,undefined),xi(ii.UPDATING_NODE_CONTENTS)}__updateContents(){this.attached&&(this.contentRenderer.updateContents(),oi[ii.READING_NODE_CONTENT_BOUNDARY].add(this,undefined),xi(ii.READING_NODE_CONTENT_BOUNDARY))}__readContentBoundary(){this.attached&&(this.contentRenderer.readContentsBox(),oi[ii.UPDATING_NODE_CONTENT_LAYOUT].add(this,undefined),xi(ii.UPDATING_NODE_CONTENT_LAYOUT))}__updateContentLayout(){this.contentRenderer.updateLayout(),oi[ii.READING_TEXT_CONTENT_BOUNDARY].add(this,undefined),xi(ii.READING_TEXT_CONTENT_BOUNDARY)}__readTextContentBoundary(){this.contentRenderer.readTextContentBoxAndReflow(),si(this)}__updateTextContentLayout(){this.contentRenderer.updateLayoutAfterTextReflow()}getText(){return void 0!==this.ownData.html?Zi(this.ownData.html):this.ownData.text}getFinalText(){var t;return null!==(t=this.getText())&&void 0!==t?t:this.getDefaultText()}getDefaultText(){return this.tree.settings.get("showDefaultText")?Ki.getDefaultText(this.classify):""}getHTML(){return void 0!==this.ownData.html?this.ownData.html:void 0!==this.ownData.text?qi(this.ownData.text):void 0}getFinalHTML(){var t;return null!==(t=this.getHTML())&&void 0!==t?t:qi(this.getDefaultText())}getFinalStyledHTML(t=!1){let e=this.getFinalHTML(),i=this.getTextStyle(),n="";t&&(e=ln(e),e=function(t){return hn(t,[],"background-color")}(e)),t||(n+="color: "+i.color+"; "),n+="font-family: "+i["font-family"]+"; ",n+="font-size: "+i["font-size"]+"px; ",n+="text-align: "+i["text-align"]+"; ","normal"!=i["font-weight"]&&(n+="font-weight: "+i["font-weight"]+"; "),"normal"!=i["font-style"]&&(n+="font-style: "+i["font-style"]+"; ");let o=this.style.get("text-underline")?"underline":"";return o+=this.style.get("text-line-through")?" line-through":"",o=o.trim(),o&&(n+="text-decoration: "+o+"; "),n=n.trim(),e=`<div style="${n}">${e}<div>`,e}getTextStyle(){return{color:this.style.get("color"),"font-family":this.style.get("font-family"),"font-size":this.style.get("font-size"),"font-weight":this.style.get("font-weight"),"font-style":this.style.get("font-style"),"line-height":this.style.get("line-height"),"text-align":this.style.get("text-align"),"text-underline":this.style.get("text-underline"),"text-line-through":this.style.get("text-line-through")}}getCommentCount(){return this.ownData.commentCount||void 0}getLocalRenderBox(){return this.contentRenderer.localRenderBox}getLocalContentBox(){return this.contentRenderer.localContentBox}findContent(t){return this.contentRenderer.findContent(t)}getClosestContentType(t){for(let e of xn(t,this.k.element)){let t=e.getAttribute("id");if(t){let e=ce(t);if(e.startsWith("node-content-"))return e.replace("node-content-","")}}return null}__fireContentClick(t){this.fire("content-click",this,this.getClosestContentType(t))}__fireContentCommentFocus(t){this.fire("content-comment-focus",t,this)}__fireContentCommentBlur(t){this.fire("content-comment-blur",t,this)}getScreenBox(){let t=Fo.get(this).getRenderBoxInPaperOrigin();return this.tree.toScreenOrigin(t)}}class Ko extends Po{canExec(){return this.getSelectedIds().some((t=>{let e=this.minder.dataModifier.getItem(t);return e&&this.canExecWithDataItem(e,this.minder.dataModifier.getType(e.data.id))}))}canExecWithDataItems(t){return t.some((t=>this.canExecWithDataItem(t,this.minder.dataModifier.getType(t.data.id))))}filterDataItems(t){return t.filter((t=>this.canExecWithDataItem(t,this.minder.dataModifier.getType(t.data.id))))}canExecFinallyWithIds(t){if(!this.canExecPredicted())return!1;let e=t.map((t=>this.minder.dataModifier.getItem(t))).filter((t=>t));return this.canExecWithDataItems(e)}getSelectedIds(){return this.minder.selections.getSelected().map((t=>t.id))}execWithIds(t,...e){let i=t.map((t=>this.minder.dataModifier.getItem(t))).filter((t=>t));return i=this.filterDataItems(i),this.execWithDataItems(i,...e)}exec(...t){return this.execWithSelected(...t)}execWithSelected(...t){let e=this.getSelectedIds();return this.execWithIds(e,...t)}execWithSiblings(...t){let e=this.getSelectedIds();return this.execWithSiblingsOfIds(e,...t)}execWithSiblingsOfIds(t,...e){let i=this.minder.dataModifier.getSiblingsOfIds(t);return this.execWithIds(i,...e)}execWithSameDeepth(...t){let e=this.getSelectedIds();return this.execWithSameDeepthOfIds(e,...t)}execWithSameDeepthOfIds(t,...e){let i=this.minder.dataModifier.getSameDeepthOfIds(t);return this.execWithIds(i,...e)}execWithAll(...t){let e=[];for(let t of this.minder.dataModifier.walkDescendants(this.minder.dataModifier.id))e.push(t.data.id);return this.execWithIds(e,...t)}execWithAllInType(t,...e){let i=[];for(let e of this.minder.dataModifier.walkDescendantsInType(this.minder.dataModifier.id,t))i.push(e.data.id);return this.execWithIds(i,...e)}queryValue(...t){let e=this.getSelectedIds();return this.queryValueWithIds(e,...t)}queryValueWithIds(t,...e){let i=t.map((t=>this.minder.dataModifier.getItem(t))).filter((t=>t));return i=this.filterDataItems(i),0===i.length?null:this.queryValueWithDataItem(i[0],...e)}queryValueWithDataItem(t,...e){return null}pinOneOfDataItems(t){for(let e of t){let t=this.minder.paper.getNodeById(e.data.id);if(t instanceof Uo){this.minder.paper.pinNodeInDirection(t,R.Center);break}}}}class qo{static register(t){let{name:e,class:i,shortcutKeys:n}=t;qo.Commands[e]=i,n&&(qo.CommandShortcutKeys[e]=n)}constructor(t){this.minder=t}canExec(t){return this.createCommand(t).canExecFinally()}canExecWithIds(t,e){let i=this.createCommand(t);return(i instanceof Do||i instanceof Ko)&&i.canExecFinallyWithIds(e)}queryValue(t,...e){return this.minder.status.canInteract()?this.createCommand(t).queryValue(...e):null}queryValueWithIds(t,e,...i){if(!this.minder.status.canInteract())return null;let n=this.createCommand(t);return n instanceof Do||n instanceof Ko?n.queryValueWithIds(e,...i):null}exec(t,...e){if(!this.minder.status.canInteract())return!1;let i=this.createCommand(t),n=!1;try{i.canExecFinally()&&this.minder.history.recordExecution((()=>{i.exec(...e),n=!0}))}catch(t){console.warn(t)}return n}execWithSelected(t,...e){return this.execNodeOrDataItemCommand(t,(t=>!!t.canExecFinally()&&(t.execWithSelected(...e),!0)))}execWithSiblings(t,...e){return this.execDataItemCommand(t,(t=>!!t.canExecFinally()&&(t.execWithSiblings(...e),!0)))}execWithIds(t,e,...i){return this.execNodeOrDataItemCommand(t,(t=>!!t.canExecFinallyWithIds(e)&&(t.execWithIds(e,...i),!0)))}execWithSiblingsOfIds(t,e,...i){return this.execDataItemCommand(t,(t=>!!t.canExecFinallyWithIds(e)&&(t.execWithSiblingsOfIds(e,...i),!0)))}execWithSameDeepth(t,...e){return this.execDataItemCommand(t,(t=>!!t.canExecFinally()&&(t.execWithSameDeepth(...e),!0)))}execWithSameDeepthOfIds(t,e,...i){return this.execDataItemCommand(t,(t=>!!t.canExecFinallyWithIds(e)&&(t.execWithSameDeepthOfIds(e,...i),!0)))}execWithAll(t,...e){return this.execDataItemCommand(t,(t=>(t.execWithAll(...e),!0)))}execWithAllInType(t,e,...i){return this.execDataItemCommand(t,(t=>(t.execWithAllInType(e,...i),!0)))}execNodeOrDataItemCommand(t,e){if(!this.minder.status.canInteract())return!1;let i=this.createCommand(t),n=!1;if(!(i instanceof Do||i instanceof Ko))throw new Error(`"${t}" is not a node type or data item type command!`);return this.minder.history.recordExecution((()=>{n=e(i)})),n}execDataItemCommand(t,e){if(!this.minder.status.canInteract())return!1;let i=this.createCommand(t),n=!1;if(!(i instanceof Ko))throw new Error(`"${t}" is not a data item type command!`);return this.minder.history.recordExecution((()=>{n=e(i)})),n}acceptShortcutKey(t){return this.createCommand(t).acceptShortcutkey()}getShortcutKeys(t){return this.minder.shortcutKeys.getCommandShortcutKeys(t)}triggerShortcutKey(t){return this.minder.shortcutKeys.triggerShortcutKey(t)}triggerShortcutKeyFromExternalKeydown(t){let e=q(t);return!!e&&this.triggerShortcutKey(e)}getShortcutKeyFromKeydownProperties(t){return q(t)}createCommand(t){let e=qo.Commands[t];if(!e)throw new Error(`No command with name "${t}" exist!`);return new e(this.minder)}}qo.Commands={},qo.CommandShortcutKeys={};class Zo extends k{constructor(t,e){super(),this.commandsKeysMap=new Map,this.commandsHandlerMap=new Map,this.preventedCommandKeys=new Set,this.commands=e,this.initEvents(t),this.initShortcutKeys()}initEvents(t){t.on("keydown",(t=>{let e=t.getShortCutKey();e&&this.hasListenerType(e)&&this.triggerShortcutKey(e)&&t.preventDefault()}))}triggerShortcutKey(t){let e=new Mo(t,this,{key:t});return this.fire(t,e),e.defaultPrevented}addShortcutKey(t,e,i){let n=Array.isArray(t)?t:[t];for(let t of n)this.on(t,e,i)}deleteShortcutKey(t,e,i){let n=Array.isArray(t)?t:[t];for(let t of n)this.off(t,e,i)}initShortcutKeys(){for(let[t,e]of Object.entries(qo.CommandShortcutKeys))this.setCommandShortcutKeys(t,e)}setCommandShortcutKeys(t,e){let i=Array.isArray(e)?e:[e];this.addShortcutKey(e,this.makeCommandHandler(t)),this.commandsKeysMap.set(t,i)}getCommandShortcutKeys(t){return this.commandsKeysMap.get(t)||null}makeCommandHandler(t){return e=>{this.preventedCommandKeys.has(e.data.key)||this.commands.acceptShortcutKey(t)&&this.commands.exec(t)&&e.preventDefault()}}resetCommandShortcutKeys(t,e){this.deleteCommandShortcutKeys(t),this.setCommandShortcutKeys(t,e)}deleteCommandShortcutKeys(t){let e=this.commandsKeysMap.get(t);if(e){let i=this.commandsHandlerMap.get(t);this.deleteShortcutKey(e,i),this.commandsKeysMap.delete(t)}}getAllCommandKeysMap(){return this.commandsKeysMap}preventCommandByName(t){let e=this.getCommandShortcutKeys(t);e&&this.preventCommandWithShortKey(...e)}unPreventCommandByName(t){let e=this.getCommandShortcutKeys(t);e&&this.unPreventCommandWithShortKey(...e)}preventCommandWithShortKey(...t){for(let e of t)this.preventedCommandKeys.add(e)}unPreventCommandWithShortKey(...t){for(let e of t)this.preventedCommandKeys.delete(e)}}class Go extends k{constructor(){super(...arguments),this.whetherCanInteract=!1,this.readonly=!1,this.focused=!0,this.inInputing=!1,this.editingNode=null,this.inDragging=!1,this.mouseButtonPressing=!1,this.activeComment=null}isReadonly(){return this.readonly}setReadonly(){this.readonly=!0}isReadWrite(){return!this.readonly}setReadWrite(){this.readonly=!1}canInteract(){return this.whetherCanInteract}setCanInteract(t){this.whetherCanInteract!==t&&(this.whetherCanInteract=t,t?this.fire("can-interact"):this.fire("cant-interact"))}isFocused(){return this.focused}setFocused(t){this.focused=t}isInInputing(){return this.inInputing}setInputing(t){this.inInputing=t,this.fire("inputing-state-change",t)}getEditingNode(){return this.editingNode}setEditingNode(t){this.editingNode=t,this.fire("editing-node-change",t)}isInDragging(){return this.inDragging}setInDragging(t){this.inDragging=t}isMouseButtonPressing(){return this.mouseButtonPressing}setMouseButtonPressing(t){this.mouseButtonPressing=t,t||this.fire("mouse-press-end")}hasActiveComment(){return!!this.activeComment}setActiveComment(t){t!==this.activeComment&&(this.activeComment&&(this.activeComment.setBlur(),this.activeComment.node.off("detach",this.setNonActiveComment,this)),t&&(t.setFocus(),t.node.on("detach",this.setNonActiveComment,this)),this.activeComment=t)}setNonActiveComment(){this.setActiveComment(null)}}class Yo extends k{constructor(t){super(),this.selected=new Set,this.latestTouched=null,this.latestTouchTime=0,this.enqueuedFireSelectionChange=!1,this.locked=!1,this.type=t}canSelect(t){return t.type===this.type}hasSelected(t){return this.selected.has(t)}hasAnySelected(){return this.selected.size>0}select(...t){if(this.locked)return;let e=!1;for(let i of t)this.selected.has(i)||(this.selected.add(i),this.fire("select",i),e=!0);t.length>0&&(this.latestTouched=t[t.length-1],this.latestTouchTime=performance.now()),e&&this.willFireSelectionChange()}willFireSelectionChange(){this.enqueuedFireSelectionChange||(this.enqueuedFireSelectionChange=!0,Promise.resolve().then((()=>{this.fire("selection-change"),this.enqueuedFireSelectionChange=!1})))}selectOnly(...t){this.locked||(this.deselect(...[...this.selected].filter((e=>!t.includes(e)))),this.select(...t))}deselect(...t){if(this.locked)return;let e=!1;for(let i of t)this.selected.has(i)&&(this.selected.delete(i),this.fire("deselect",i),e=!0);t.length>0&&(this.latestTouched=t[t.length-1],this.latestTouchTime=performance.now()),e&&this.willFireSelectionChange()}toggleSelect(t){return!this.locked&&(this.selected.has(t)?(this.deselect(t),!1):(this.select(t),!0))}getSelectedCount(){return this.selected.size}getSelected(){return[...this.selected]}getFirstSelected(){for(let t of this.getSelected())return t;return null}getLatestTouched(){return this.latestTouched}getLatestTouchTime(){return this.latestTouchTime}getLatestSelected(){let t=this.getLatestTouched();return t&&this.hasSelected(t)?t:null}clear(){if(!this.locked&&this.selected.size>0){for(let t of this.selected)this.fire("deselect",t);this.selected.clear(),this.willFireSelectionChange()}}lock(){this.locked=!0}unlock(){this.locked=!1}}class Jo extends k{constructor(t){super(),this.locked=!1,this.selectionMap=t,this.initSelections()}initSelections(){for(let t of this.iterateSelections())t.broadcastTo(this)}*iterateSelections(){for(let t of Object.keys(this.selectionMap))yield this.selectionMap[t]}getSelectionOfType(t){return this.selectionMap[t]}canSelect(t){for(let e of this.iterateSelections())if(e.canSelect(t))return!0;return!1}hasSelected(t){for(let e of this.iterateSelections())if(e.hasSelected(t))return!0;return!1}hasAnySelected(){for(let t of this.iterateSelections())if(t.hasAnySelected())return!0;return!1}select(...t){if(!this.locked)for(let e of this.iterateSelections()){let i=t.filter((t=>e.canSelect(t)));e.select(...i)}}selectOnly(...t){if(!this.locked)for(let e of this.iterateSelections()){let i=t.filter((t=>e.canSelect(t)));e.selectOnly(...i)}}deselect(...t){if(!this.locked)for(let e of this.iterateSelections()){let i=t.filter((t=>e.canSelect(t)));e.deselect(...i)}}toggleSelect(t){if(!this.locked)for(let e of this.iterateSelections())if(e.canSelect(t)){e.toggleSelect(t);break}}getSelectedCount(){let t=0;for(let e of this.iterateSelections())t+=e.getSelectedCount();return t}getSelected(){let t=[];for(let e of this.iterateSelections())t.push(...e.getSelected());return t}getFirstSelected(){for(let t of this.iterateSelections()){let e=t.getFirstSelected();if(e)return e}return null}getLatestTouched(){return kt([...this.iterateSelections()],(t=>t.getLatestTouchTime())).getLatestTouched()}getLatestTouchTime(){return kt([...this.iterateSelections()],(t=>t.getLatestTouchTime())).getLatestTouchTime()}getLatestSelected(){let t=this.getLatestTouched();return t&&this.hasSelected(t)?t:null}clear(){for(let t of this.iterateSelections())t.clear()}lock(){this.locked=!0;for(let t of this.iterateSelections())t.lock()}unlock(){this.locked=!1;for(let t of this.iterateSelections())t.unlock()}}class Xo extends Jo{constructor(){super({branch:new Yo("Branch"),summary:new Yo("Summary")}),this.branch=this.getSelectionOfType("branch"),this.summary=this.getSelectionOfType("summary")}}class Qo extends Jo{constructor(){super({contentable:new Xo,boundary:new Yo("Boundary"),relLine:new Yo("RelLine")}),this.contentable=this.getSelectionOfType("contentable"),this.relLine=this.getSelectionOfType("relLine"),this.branch=this.contentable.branch,this.summary=this.contentable.summary,this.boundary=this.getSelectionOfType("boundary")}}class tr extends Jo{constructor(){super({textable:new Qo}),this.textable=this.getSelectionOfType("textable"),this.contentable=this.textable.contentable,this.branch=this.textable.branch,this.summary=this.textable.summary,this.boundary=this.textable.boundary,this.relLine=this.textable.relLine}}!function(t){t[t.None=0]="None",t[t.Inline=1]="Inline",t[t.Block=2]="Block",t[t.Customize=3]="Customize",t[t.InFront=4]="InFront",t[t.InBack=5]="InBack"}(Wo||(Wo={}));class er{static willRender(t){return!1}get margin(){return[0]}constructor(t){this.displayWay=Wo.Inline,this.basedOnCoordinateCenter=!1,this.localBox=_.empty(),this.node=t}init(){return this.initKs(),this.initEvents(),this}initEvents(){this.displayWay!==Wo.InFront&&this.displayWay!==Wo.InBack||this.node.on("detach",(()=>{this.k.remove()}))}getKs(){return[this.k]}readSize(){let t=this.k.getBoundaryBoxInPaper();this.localBox.width=t.width,this.localBox.height=t.height}setPosition(t,e){this.localBox.x=t,this.localBox.y=e,this.k.transform.setTranslate(t,e)}setPositionAsCenter(t,e){this.localBox.x=t-this.localBox.width/2,this.localBox.y=e-this.localBox.height/2,this.k.transform.setTranslate(t,e)}doCustomizeLayout(){}getContentBoxInPaperOrigin(){return Fo.get(this.node).toPaperOrigin(this.localBox)}remove(){this.k.remove()}}class ir extends er{constructor(){super(...arguments),this.displayWay=Wo.InBack}static willRender(){return!0}initKs(){var t,e;this.k=new Ve,this.k.setAttribute("fill-opacity",0),this.k.setId(de("node-action-area")),t=this.k,e=this.node.k,Oo.set(t,e),Lo.set(t.element,e.element)}update(){}doCustomizeLayout(){let t=Fo.get(this.node).getContentBoxInPaperOrigin();this.k.x=t.x,this.k.y=t.y,this.k.width=t.width,this.k.height=t.height}}!function(t){t.willCreateNode=function(t){var e,i,n;return null===(n=null===(i=(e=ji.permissionOptions).willCreateNode)||void 0===i?void 0:i.call(e,t))||void 0===n||n},t.willAddImage=function(t){var e,i,n;return null===(n=null===(i=(e=ji.permissionOptions).willAddImage)||void 0===i?void 0:i.call(e,t))||void 0===n||n},t.willShowWatermark=function(){var t,e,i;return null!==(i=null===(e=(t=ji.permissionOptions).willShowWatermark)||void 0===e?void 0:e.call(t))&&void 0!==i&&i},t.willShowComment=function(){var t,e,i;return null!==(i=null===(e=(t=ji.permissionOptions).willShowComment)||void 0===e?void 0:e.call(t))&&void 0!==i&&i}}($o||($o={}));class nr extends er{constructor(){super(...arguments),this.displayWay=Wo.Customize,this.basedOnCoordinateCenter=!0,this.bodySize={width:0,height:0},this.inActive=!1,this.hovered=!1}static willRender(t){return!t.tree.settings.get("previewMode")&&(!!$o.willShowComment()&&(!(t.tree.selections.textable.getSelectedCount()>1&&t.tree.selections.textable.getLatestTouched()!==t)&&(!!t.ownData.commentCount||!(t.tree.settings.get("mobileMode")||!t.beHovered()&&!t.beSelected()))))}get margin(){return this.node.tree.settings.get("mobileMode")?[-10]:[0]}initKs(){this.k=new Kt,this.k.setId(de("node-content-comment")),this.k.setStyle("cursor","pointer"),this.hoverArea=new Ve,this.hoverArea.setAttribute("stroke","none"),this.hoverArea.setAttribute("fill","transparent"),this.k.append(this.hoverArea),this.body=new qe,this.body.setAttribute("stroke-width",2),this.body.sidesWidthRate=1,this.k.append(this.body),this.tail=new te,this.tail.setAttribute("d","M-2.8,8.1c0.6,1.6,0.6,2.6,0,3.1c-0.9,0.8,4.4-0.5,4.9-2.4C2.4,7.5,0.8,7.3-2.8,8.1z"),this.k.prepend(this.tail),this.dots=new te,this.k.append(this.dots),this.text=new ne,this.text.x=0,this.text.textAnchor="middle",this.text.setStyle("vertical-align","middle"),this.text.setStyle("user-select","none"),this.text.setStyle("font-family","Arial"),this.text.setStyle("font-size","12px"),this.text.y=4.4,this.k.append(this.text),this.displayWay=this.node.tree.settings.get("mobileMode")?Wo.Inline:Wo.Customize}initEvents(){this.k.on(["mousedown","tap"],this.onMouseDownOrTap,this),this.k.on("mouseenter",this.onMouseEnter,this),this.k.on("mouseleave",this.onMouseLeave,this)}onMouseDownOrTap(){this.node.tree.status.setActiveComment(this)}onMouseEnter(){this.hovered=!0,this.updateStyle()}onMouseLeave(){this.hovered=!1,this.updateStyle()}setFocus(){this.inActive=!0,this.node.__fireContentCommentFocus(this.k),this.node.willUpdateSelf()}setBlur(){this.inActive=!1,this.node.__fireContentCommentBlur(this.k),this.node.willUpdateSelf()}update(){this.updateProperties(),this.updateShapes(),this.updateStyle(),this.updateDots(),this.updateText()}updateProperties(){let t=this.node.tree.style.get("content","comment-size"),e=t,i=this.node.ownData.commentCount||0,n=0===i?1:String(i).length,o=.4*t;e=Math.round(e+o*(n-.75)),this.bodySize={width:e,height:t}}updateShapes(){let t=this.node.tree.style.get("content","interact-normal-size"),e=this.bodySize.width,i=this.bodySize.height,n=Math.max(t,1.5*e),o=t,r=this.node.tree.settings.get("mobileMode")?10:0;this.hoverArea.x=-n/2-r,this.hoverArea.y=-o/2-r,this.hoverArea.width=n+2*r,this.hoverArea.height=o+2*r,this.body.width=e,this.body.height=i,this.body.smoothRadius=0,this.tail.transform.setTranslate(-1,(this.bodySize.height-17)/2)}updateStyle(){let t=this.node.ownData.commentCount||0,e=this.getStrokeColor(),i=this.getFillColor(),n=this.node.beSelected()||this.node.beHovered()||t?1:.5;this.k.setAttribute("opacity",n),this.body.setAttribute("stroke",e),this.body.setAttribute("fill",i),this.dots.setAttribute("fill",this.getTextColor()),this.tail.setAttribute("stroke","none"),this.tail.setAttribute("fill",e)}getStrokeColor(){let t=this.node.tree.style.get("content","outline-color");return this.inActive||this.node.ownData.commentCount||this.hovered?t:this.node.tree.style.get("content","comment-stroke-color")}getFillColor(){return this.inActive?this.getStrokeColor():this.node.tree.style.get("content","interact-fill-color")}updateDots(){if(this.node.ownData.commentCount)return void this.dots.setStyle("visibility","hidden");this.dots.setStyle("visibility","");this.dots.clear();for(let t of[0,-4.5,4.5])this.dots.moveTo(t+1.3,0),this.dots.arcBy(1.3,1,1,-2.6,0),this.dots.arcBy(1.3,1,1,2.6,0)}updateText(){this.node.ownData.commentCount?(this.text.setStyle("visibility",""),this.text.setAttribute("fill",this.getTextColor()),this.text.content=String(this.node.ownData.commentCount)):this.text.setStyle("visibility","hidden")}getTextColor(){return this.inActive?this.node.tree.style.get("content","interact-fill-color"):this.getStrokeColor()}doCustomizeLayout(){let t=this.node.getLocalRenderBox().anchorPointAt(R.TopRight),e=this.node.tree.style.get("content","outline-expanded"),i=this.bodySize.height;this.setPositionAsCenter(t.x,t.y-i/2-e)}getLocalBodyBox(){let t=this.localBox.center,e=this.bodySize.width,i=this.bodySize.height;return new _(t.x-e/2,t.y-i/2,e,i)}remove(){super.remove(),this.inActive&&this.node.tree.status.setActiveComment(null)}}!function(t){const e=new Map;function i(){return[...e.keys()]}function n(t){return["underline"].includes(t)}t.DefaultShapeName="rect",t.getAllShapeNames=i,t.register=function(t,i){e.set(t,i)},t.create=function(t,i){let n=e.get(t);return n||(console.warn(`"${t}" is not a registered shape container!`),n=e.get("rect")),new n(i)},t.isShapeNotFullyFilled=n,t.isShapeBeLine=function(t){return["underline"].includes(t)},t.getAllowedShapeNames=function(t){let e=i();return t.isRoot&&(e=e.filter((t=>!n(t)))),e}}(Vo||(Vo={}));class or extends er{constructor(){super(...arguments),this.displayWay=Wo.Customize}static willRender(t){return!t.tree.settings.get("previewMode")&&!!(t.data.children&&t.data.children.length>0)}initKs(){this.k=new Kt,this.k.setId(de("node-content-expander")),this.k.setStyle("cursor","pointer"),this.hoverArea=new Ve,this.hoverArea.setAttribute("stroke","none"),this.hoverArea.setAttribute("fill","transparent"),this.k.append(this.hoverArea),this.connectLine=new ee,this.connectLine.x2=0,this.connectLine.y2=0,this.k.append(this.connectLine),this.outline=new We,this.outline.setAttribute("stroke-width","1"),this.k.append(this.outline),this.sign=new te,this.sign.setAttribute("stroke-width","1"),this.k.append(this.sign),this.text=new ne,this.text.x=0,this.text.textAnchor="middle",this.text.setStyle("vertical-align","middle"),this.text.setStyle("user-select","none"),this.text.setStyle("font-family","Arial"),this.k.append(this.text)}initEvents(){this.k.on("touchstart",(t=>{t.stopPropagation()}),!0),this.k.on("mousedown",(t=>{t.stopPropagation()})),this.k.on(["click","tap"],(t=>{t.stopPropagation(),t.preventDefault(),this.node.tree.history.recordExecution((()=>{this.toggleExpanded()}))})),this.k.on("dblclick",(t=>{t.stopPropagation(),t.preventDefault()}))}toggleExpanded(){let t=!this.node.getExpanded();this.node.setExpanded(t);let e=Fo.get(this.node).getBranchLayout().getOutVectorDirection();this.node.tree.pinNodeInDirection(this.node,e)}update(){let t=this.getChildrenCount();this.updateStyle(),this.updateSign(t),this.updateText(t),fi((()=>{this.updatePosition()}))}getChildrenCount(){let t=0;for(let e of this.node.tree.dataModifier.walkDescendantsInType(this.node.id,"Branch"))t++;return t}updateStyle(){var t;let e=this.node.tree.style.getMobileScaled("content","expander-size")/2,i=this.node.tree.style.getMobileScaled("content","interact-normal-size");this.hoverArea.x=-i/2,this.hoverArea.y=-i/2,this.hoverArea.width=i,this.hoverArea.height=i,this.outline.r=e;let n=this.node.style.get("connect-color");if(this.node.style.get("connect-multicolor")){let t;t=this.node.style.get("stroke-width")>0?this.node.style.get("stroke-color"):this.node.style.get("fill-color"),"transparent"!==t&&(n=t)}let o=this.node.tree.style.get("map","background-color"),r=ji.defaultStyleData.map["background-color"];o="transparent"===o?r:(null===(t=f.fromString(o))||void 0===t?void 0:t.toRGB())||r,n=f.improveContrast(n,o,20),this.outline.setAttribute("stroke",n),this.outline.setAttribute("fill",o),this.sign.setAttribute("stroke",n),this.sign.setAttribute("fill",n),this.text.setAttribute("fill",n),this.connectLine.setAttribute("stroke",n),this.connectLine.setAttribute("stroke-width",1),this.node.beHovered()||this.node.beSelected()||!this.node.getExpanded()?this.k.setStyle("opacity","1"):this.k.setStyle("opacity","0")}shouldShowChildrenCount(t){return!this.node.getExpanded()&&t<=100}updateSign(t){if(this.shouldShowChildrenCount(t))return void this.sign.setStyle("visibility","hidden");let e=this.node.tree.style.getMobileScaled("content","expander-size")/2;if(this.sign.setStyle("visibility",""),this.sign.clear(),this.node.getExpanded())this.sign.setAttribute("stroke-width",1),this.sign.moveTo(2.5-e,0),this.sign.lineTo(e-2.5,0);else{this.sign.setAttribute("stroke-width",0);let t=1.25;for(let i of[0,-e/2,e/2])this.sign.moveTo(i+t,0),this.sign.arcBy(t,1,1,-2*t,0),this.sign.arcBy(t,1,1,2*t,0),this.sign.close()}}updateText(t){if(!this.shouldShowChildrenCount(t))return void this.text.setStyle("visibility","hidden");this.text.setStyle("visibility","");let e=this.node.tree.style.get("content","expander-font-size");t>=10&&(e*=.8),e*=this.node.tree.style.getMobileScaling(),this.text.setStyle("font-size",e),this.text.y=.36*e,this.text.content=String(t)}updatePosition(){let t=Fo.get(this.node).getBranchLayout(),e=Vo.isShapeNotFullyFilled(this.node.style.get("shape")),i=t.getLocalOutPoint(),n=e?t.getLocalFoldedOutPoint():i,o=i.add(t.connectionLayout.getOutToExpanderVector()),r=e?this.node.style.get("stroke-width"):1;this.connectLine.x1=n.x-o.x,this.connectLine.y1=n.y-o.y,this.connectLine.setAttribute("stroke-width",r),this.setPositionAsCenter(o.x,o.y)}}!function(t){const e=new Map;function i(){return[...e.keys()]}function n(){return i().filter((t=>!t.startsWith("-")))}function o(t){let i=e.get(t).outDirection;return i===R.Center||i===R.None?R.Right:i}function r(t){if(t.isRoot)return n();if("Summary"===t.type){let i=t.parent,r=i.branchChildAt(t.ownData.startIndex),a=r||i,l=i.style.get("layout"),h=e.get(l),d=r?h.getChildInDirection(r):o(i.style.get("layout"));if(l.startsWith("timeline-")){let t=N.getPerpendicularPositive(d),e=a.style.get("layout");N.isCloseWith(o(e),t)||(t=N.getOpposite(t)),d=t}return n().filter((t=>s(t,d,null,!1,!0)))}{let i=t.parent;if(!(i instanceof Hr))return[];let o=i.style.get("layout"),r=e.get(o),a=r.getLimitedChildLayoutNames(t);if(a)return a;let l=r.getChildInDirection(t),h=r.possibleChildOutDirections;return n().filter((t=>s(t,l,h)))}}function s(t,i,n,r=!0,s=!1){let a=o(t);if(n){let t=!n||n.some((t=>N.isCloseWith(t,a)));if(!t)return!1}let l=s?N.isCloseWith(i,a):N.isCompatible(i,a);if(!l&&r&&N.isOpposite(i,a)){let i=e.get(t).possibleChildInDirections,n=i&&i.every((t=>!N.isCloseWith(t,a)));n&&(l=!0)}return l}function a(t){return e.get(t).getLimitedConnectNames()}t.DefaultRootLayoutNmae="right",t.register=function(t,i){e.set(t,i)},t.create=function(t,i){let n=e.get(t);return new n(i,n.outDirection,n.childAlignDirection).init()},t.getAllLayoutNames=i,t.getAllConfigableLayoutNames=n,t.getAllowedLayoutNames=r,t.getFinalLayoutName=function(i,n){let s;s=n&&function(e,i){let n=t.getAllowedLayoutNames(e);if(n.includes(i))return i;let o=i.split("-");return kt(n,(t=>{let e=t.split("-"),i=0;for(let t=0;t<e.length;t++)i+=(e[t]===o[t]?1:0)*Math.pow(Math.E,-t);return i}))}(i,n)||function(i){if(i.isRoot||!(i.parent instanceof Hr))return t.DefaultRootLayoutNmae;let n=r(i);if(1===n.length)return n[0];let s=i.parent.style.get("layout");if("file-tree-down-left"===s||"file-tree-down-right"===s||"file-tree-up-left"===s||"file-tree-up-right"===s)return s;let a=e.get(s).getChildInDirection(i),l=["right","left","bottom","top"];for(let t of l)if(n.includes(t)&&o(t)===a)return t;for(let t of l){if(!n.includes(t))continue;let e=o(t);if(N.isCloseWith(a,e))return t}for(let t of l)if(n.includes(t))return t;return n[0]}(i);let a=i.parent instanceof Hr?i.parent.style.get("layout-alternate"):"none";if("odd"===a&&i.getSameTypeIndex()%2==1||"even"===a&&i.getIndex()%2==0){let t=r(i),e=function(t){let e=["right","left","bottom","top","up","down"],i=t.split("-");for(let t=0;t<i.length;t++){let n=i[t],o=e.indexOf(n);if(o>-1){let n=o%2==0?o+1:o-1;i[t]=e[n];break}}return i.join("-")}(s);t.includes(e)&&(s=e)}return s},t.isLayoutNameHaveMultipleOutPoints=function(t){return["mind"].includes(t)},t.isStraightlyFacedLayoutName=function(t){if("mind"===t)return!0;let i=e.get(t);return N.isOpposite(i.outDirection,i.childAlignDirection)},t.getLimitedConnectNames=function(t){return t instanceof Hr?a(t.style.get("layout")):null},t.getLayoutLimitedConnectNames=a}(jo||(jo={})),function(t){const e=new Map;function i(){return[...e.keys()]}t.DefaultConnectName="fork",t.register=function(t,i){e.set(t,i)},t.create=function(t,i){return new(e.get(t))(i)},t.getAllConnectNames=i,t.getAllConfigableConnectNames=function(){return i().filter((t=>!t.startsWith("-")))},t.getAllowedConnectNames=function(t){return jo.getLimitedConnectNames(t)||i().filter((i=>e.get(i).matchOutNode(t)))},t.getLimitedLayoutName=function(t){let e=jo.getAllLayoutNames().filter((e=>{let i=jo.getLayoutLimitedConnectNames(e);return i&&i.includes(t)}));return e.length>0?e:null}}(Ho||(Ho={}));class rr{constructor(t,e){this.node=t,this.treeStyle=e}get parent(){let t=this.node.parent;return t instanceof Uo?t.style:null}*walkAncestors(){let t=this.parent;for(;t;)yield t,t=t.parent}*walkMeAndAncestors(){yield this,yield*this.walkAncestors()}get(t){if(xo.has(this.node,t))return xo.get(this.node,t);{let e=this.getting(t);return xo.set(this.node,t,e),e}}getting(t){var e;return null!==(e=this.getOwn(t))&&void 0!==e?e:this.getNonOwn(t)}getOwn(t){let e=this.node.data.style;return null==e?void 0:e[t]}getNonOwn(t){var e;return null!==(e=this.getInTheme(t))&&void 0!==e?e:this.getDefault(t)}getInTheme(t){var e;let i=this.getNodeStyleLevel();return null!==(e=this.treeStyle.getOwn(i,t))&&void 0!==e?e:this.treeStyle.getOnlyInTheme(i,t)}getDefault(t){return this.treeStyle.getDefault(this.getNodeStyleLevel(),t)}getNodeStyleLevel(){var t;let e=this.node.getLevel();return"main"===e&&"branch-float-root"===(null===(t=this.node.parent)||void 0===t?void 0:t.classify)?"sub":e}getDirection4Value(t){let[e,i]=t.split("-");return I(this.get(e),i)}getDirection4Object(t){return O(this.get(t))}hasAnyOwn(){let t=this.node.data.style;return!!t&&Object.keys(t).length>0}modify(t,e){this.node.tree.dataManager.dataModifier.modify(this.node.id,["style",t],e)}modifyTotal(t){this.node.tree.dataManager.dataModifier.modify(this.node.id,["style"],t)}}class sr extends rr{contrastWithBackgroundColor(t,e){let i=this.treeStyle.get("map","background-color");return f.improveContrast(t,i,e)}getFullFontSetProperty(){let t=this.get("font-style"),e=this.get("font-weight"),i=this.get("font-family"),n="";return"italic"===t&&(n+=t),"bold"===e&&(n+=(n?" ":"")+e),n+=(n?" ":"")+`${this.get("font-size")}px`,n+=`"${i}"`,n}getMinimunContentSize(){let t=this.getTextLineHeight();return{width:Math.round(t*this.treeStyle.get("content","minimum-aspect-ratio")),height:t}}getTextLineHeight(){return this.get("font-size")*this.get("line-height")}clearTextStyle(){let t=["color","color-multicolor","font-family","font-size","font-weight","font-style","line-height","text-align","text-vertical-align","text-underline","text-line-through"];for(let e of t)this.modify(e,void 0)}getIconSize(){let t=this.node.tree.style.get("content","icon-size-rate");return Math.round(this.get("font-size")*t)}getAdaptivePadding(){let t=this.get("padding");if(this.treeStyle.get("content","use-adaptive-padding")){let e=this.get("font-size")/this.getNonOwn("font-size");return t.map((t=>Math.round(t*e)))}return t}}class ar extends sr{getOutlineSmoothRadius(){let t=this.node.tree.style.get("content","outline-expanded"),e=this.get("shape"),i=this.get("radius"),n=this.get("stroke-width");return"rect"===e?i+n/2+t:t}}class lr extends ar{getting(t){var e,i,n,o,r;let s;return s=this.isInheritableMixedKey(t)?null!==(r=null!==(o=null!==(n=null!==(i=null!==(e=this.getOwn(t))&&void 0!==e?e:this.getInheritable(t))&&void 0!==i?i:this.getInTheme(t))&&void 0!==n?n:this.getInsteadUntilTheme(t))&&void 0!==o?o:this.getCrossingLevelInheritableInTheme(t))&&void 0!==r?r:this.getDefault(t):super.getting(t),s=this.getFixedValue(t,s),s}getNonOwn(t){var e,i,n,o;let r;return r=this.isInheritableMixedKey(t)?null!==(o=null!==(n=null!==(i=null!==(e=this.getInheritable(t))&&void 0!==e?e:this.getInTheme(t))&&void 0!==i?i:this.getInsteadUntilTheme(t))&&void 0!==n?n:this.getCrossingLevelInheritableInTheme(t))&&void 0!==o?o:this.getDefault(t):super.getNonOwn(t),r}isInheritableMixedKey(t){return this.isInheritableKey(t)||ko.WillInsteadCustomKeys.hasOwnProperty(t)||ko.WillInsteadThemeKeys.hasOwnProperty(t)}isInheritableKey(t){return ko.CrossingLevelOwnInheritableKeys.includes(t)}getOwnOrInheritable(t){var e;return null!==(e=this.getOwn(t))&&void 0!==e?e:this.getInheritable(t)}getInheritable(t){if(wo.has(this.node,t))return wo.get(this.node,t);{let e=this.gettingInheritable(t);return wo.set(this.node,t,e),e}}gettingInheritable(t){var e;return null!==(e=this.getInsteadCustom(t))&&void 0!==e?e:this.getCrossingLevelInheritable(t)}getInsteadCustom(t){if(ko.WillInsteadCustomKeys.hasOwnProperty(t)){let e=ko.WillInsteadCustomKeys[t];return this.getOwnOrInheritable(e)}}getCrossingLevelInheritable(t){var e;if(ko.CrossingLevelOwnInheritableKeys.includes(t))return null===(e=this.parent)||void 0===e?void 0:e.getOwnOrInheritable(t)}getInsteadUntilTheme(t){if(ko.WillInsteadThemeKeys.hasOwnProperty(t)){let e=ko.WillInsteadThemeKeys[t],i=this.get(e);if("stroke-width"===t&&!Vo.isShapeNotFullyFilled(this.get("shape")))return;return i}}getCrossingLevelInheritableInTheme(t){var e;if(this.isInheritableKey(t))return null===(e=this.parent)||void 0===e?void 0:e.getInTheme(t)}getFixedValue(t,e){return"connect"===t&&(e=this.fixConnectName(e)),e}fixConnectName(t){let e=Ho.getAllowedConnectNames(this.node);return e.includes(t)||(t=e[0]),t}contrastWithFillColor(t,e=10){let i=this.getFillOrBackgroundColor();return f.improveContrast(t,i,e)}getFillOrBackgroundColor(){var t;let e=this.get("fill-color");return e&&"transparent"!==e&&0!==(null===(t=f.fromString(e))||void 0===t?void 0:t.a)||(e=this.treeStyle.get("map","background-color")),e}getMinimunContentSize(){let t=this.get("font-size"),e=this.get("line-height"),i=Math.round(t*e);return{width:Math.round(i*this.treeStyle.get("content","minimum-aspect-ratio")),height:i}}isOutConnectFromInside(){return"none"!==this.get("connect-out-adjust")}}class hr extends er{constructor(){super(...arguments),this.displayWay=Wo.Customize}static willRender(t){return!t.tree.settings.get("previewMode")&&t.beHovered()&&!t.beSelected()}initKs(){this.k=new Ve,this.k.setId(de("node-content-outline")),this.k.setAttribute("stroke-opacity",this.getStrokeOpacity()),this.k.setAttribute("fill","none"),this.k.setStyle("pointer-events","none")}getStrokeOpacity(){return this.node instanceof $r?.5:.2}update(){this.updateStyle()}updateStyle(){let t=this.node.tree.style.get("content","outline-color");t=this.node.tree.style.contrastWithBackgroundColor(t);let e=this.node.tree.style.get("content","outline-width"),i=this.node.style instanceof lr?this.node.style.getOutlineSmoothRadius():0;this.k.setAttribute("stroke",t),this.k.setAttribute("stroke-width",e),this.k.smoothRadius=i}doCustomizeLayout(){let t=this.node.style instanceof lr?this.node.tree.style.get("content","outline-expanded"):0,e=this.node.getLocalRenderBox();e=e.expand(t),this.k.x=e.x,this.k.y=e.y,this.k.width=e.width,this.k.height=e.height}}const dr={maximumTouchEdgeSpace:30};class cr extends k{constructor(t,e={}){super(),this.started=!1,this.edgeDirection=R.None,this.startTime=0,this.startTimeVector=new P(0,0),this.currentTimeVector=new P(0,0),this.inTouchMode=!1,this.frameId=null,this.el=t,this.options={...dr,...e}}updateMoveEvent(t){this.inTouchMode=!(t instanceof MouseEvent);let e=this.inTouchMode?this.options.maximumTouchEdgeSpace:1,i=_.fromRect(this.el.getBoundingClientRect()).expand(-e),n=new P(0,0),o=Y.getSingle(t);o.clientX<=i.x?n.x=-1:o.clientX>=i.right&&(n.x=1),o.clientY<=i.y?n.y=-1:o.clientY>=i.bottom&&(n.y=1);let r=N.fromVector(n);return r!==R.Center?(this.enterOrContinue(r),!0):(this.end(),!1)}enterOrContinue(t){this.started?this.edgeDirection===t?this.update():this.restartAtDirection(t):this.startAtDirection(t)}restartAtDirection(t){this.update(),this.startTimeVector=this.currentTimeVector,this.startTime=performance.now(),this.edgeDirection=t}startAtDirection(t){this.started=!0,this.startTime=performance.now(),this.edgeDirection=t,this.frameId=requestAnimationFrame(this.onNextFrame.bind(this)),this.fire("start")}onNextFrame(){this.update(),this.frameId=requestAnimationFrame(this.onNextFrame.bind(this))}update(){this.currentTimeVector=this.getCurrentTimeVector(),this.fire("update",this.currentTimeVector,this.inTouchMode)}getCurrentTimeVector(){let t=N.toVector(this.edgeDirection),e=performance.now()-this.startTime;return this.startTimeVector.add(t.multiplyScalar(e))}end(){this.started&&(this.started=!1,this.startTimeVector=this.currentTimeVector=new P(0,0),this.startTime=0,this.edgeDirection=R.None,cancelAnimationFrame(this.frameId),this.fire("end",this.currentTimeVector))}}const ur=new WeakMap,pr={atLeastMovePixels:2,holdToStart:!1,maximumTouchEdgeSpace:30,mouseEdgeMoveSpeed:800,touchEdgeMoveSpeed:400};class mr extends k{constructor(t,e=t.k,i={}){super(),this.viewerMoved=new P(0,0),this.startViewerPosition=null,this.startEvent=null,this.startPosition=null,this.cursorMoves=new P(0,0),this.triggersDragging=!1,this.preventingContextMenu=!1,this.preventingContextMenuTimeout=null,this.inTouchMode=!1,this.paper=t,this.triggerK=e,this.options={...pr,...i},this.atEdgeCounter=new cr(t.k.element),this.initEvents()}initEvents(){this.triggerK.on("mousedown",this.onMouseDown,this),this.triggerK.on("contextmenu",this.onContextMenu,this),this.options.holdToStart?this.triggerK.on("hold:start",this.onHoldStart,this):this.triggerK.on("touchstart",this.onTouchStart,this,!0),this.atEdgeCounter.on("start",this.onMouseAtEdgeCounterStart,this),this.atEdgeCounter.on("end",this.onMouseAtEdgeCounterEnd,this),this.atEdgeCounter.on("update",this.onMouseAtEdgeCounterUpdate,this)}onMouseAtEdgeCounterStart(){this.startViewerPosition=this.paper.viewer.getFinalPosition()}onMouseAtEdgeCounterUpdate(t,e){let i=e?this.options.touchEdgeMoveSpeed:this.options.mouseEdgeMoveSpeed,n=t.multiplyScalar(-i/1e3);this.viewerMoved=this.setViewerMoves(n),this.fireMoveEvent(null)}setViewerMoves(t){let e=this.startViewerPosition.add(t);this.paper.viewer.moveTo(e);let i=this.paper.viewer.getFinalPosition();return t.add(i.diff(e))}onMouseAtEdgeCounterEnd(){let t=this.viewerMoved.negative();this.startPosition=this.startPosition.minus(t),this.cursorMoves=this.cursorMoves.add(t),this.viewerMoved=new P(0,0),this.startViewerPosition=null}onMouseDown(t){let e=0===t.originalEvent.button,i=2===t.originalEvent.button;(e||i)&&this.mayStartDragging(t,!1)&&(Y.on(document,"mousemove",this.onMouseMove,this),Y.on(document,"mouseup",this.onMouseUpOrTouchEnd,this),this.inTouchMode=!1)}onHoldStart(t){this.mayStartDragging(t,!0)&&(Y.on(document,"touchmove",this.onTouchMove,this),Y.on(document,"touchend",this.onMouseUpOrTouchEnd,this),this.inTouchMode=!0,this.startDragging())}onTouchStart(t){1===t.originalEvent.touches.length&&this.mayStartDragging(t,!1)&&(Y.on(document,"touchmove",this.onTouchMove,this),Y.on(document,"touchend",this.onMouseUpOrTouchEnd,this),this.inTouchMode=!0)}mayStartDragging(t,e){if(!e&&ur.has(t.originalEvent))return!1;let i=!1;return this.fire("will-start",t,(()=>{i=!0})),!i&&(this.startEvent=t,this.startPosition=t.getScreenPosition(),ur.has(t.originalEvent)&&ur.get(t.originalEvent).cancel(),ur.set(t.originalEvent,this),!0)}onContextMenu(t){this.preventingContextMenu&&t.preventDefault()}onMouseMove(t){this.onMouseOrTouchMove(t)}onTouchMove(t){1!==t.touches.length?this.cancel():this.onMouseOrTouchMove(t)}onMouseOrTouchMove(t){let e=new X(t,this.paper.k),i=e.getScreenPosition(),n=i.diff(this.startPosition);this.willStartDragging(n)&&(this.startPosition=i,n=i.diff(i),this.startDragging()),this.triggersDragging&&(this.cursorMoves=n,this.fireMoveEvent(e),this.atEdgeCounter.updateMoveEvent(t))}willStartDragging(t){return!this.triggersDragging&&t.getLength()>=this.options.atLeastMovePixels}startDragging(){this.triggerK.setStyle("cursor","grabbing"),this.paper.setNonPointable(),this.paper.shortcutKeys.addShortcutKey("Escape",this.cancel,this),this.paper.status.setInDragging(!0),this.triggersDragging=!0;let t=this.options.holdToStart&&!(this.startEvent instanceof MouseEvent);this.fire("start",this.startEvent,t)}fireMoveEvent(t){let e=this.getFinalMove();this.fire("move",t,e)}getFinalMove(){return this.cursorMoves.minus(this.viewerMoved)}onMouseUpOrTouchEnd(t){if(this.triggersDragging){this.paper.status.setInDragging(!1);let e=new X(t,this.paper.k);this.fire("finish",e,this.cursorMoves)}this.end()}cancel(){this.fire("cancel"),this.end()}end(){this.inTouchMode?(Y.off(document,"touchmove",this.onTouchMove,this),Y.off(document,"touchend",this.onMouseUpOrTouchEnd,this)):(Y.off(document,"mousemove",this.onMouseMove,this),Y.off(document,"mouseup",this.onMouseUpOrTouchEnd,this)),this.triggersDragging&&(this.paper.shortcutKeys.deleteShortcutKey("Escape",this.cancel,this),this.paper.status.setInDragging(!1),this.paper.setPointable(),this.triggerK.setStyle("cursor",""),this.atEdgeCounter.end(),this.startEvent=null,this.startPosition=null,this.triggersDragging=!1,this.cursorMoves=new P(0,0),this.viewerMoved=new P(0,0),this.fire("end"),this.preventContextMenuForAWhile())}preventContextMenuForAWhile(){this.preventingContextMenuTimeout&&clearTimeout(this.preventingContextMenuTimeout),this.preventingContextMenu=!0,this.preventingContextMenuTimeout=setTimeout((()=>{this.preventingContextMenu=!1,this.preventingContextMenuTimeout=null}))}remove(){this.triggerK.off("mousedown",this.onMouseDown,this),this.triggerK.off("contextmenu",this.onContextMenu,this),this.options.holdToStart?this.triggerK.off("hold:start",this.onHoldStart,this):this.triggerK.off("touchstart",this.onTouchStart,this)}}class gr extends k{constructor(t){super(),this.paper=t}init(){return this.initKs(),this.initEvents(),this}initEvents(){}update(){this.updateStyle(),this.updateLayout()}updateStyle(){}updateLayout(){}appendToPaper(){this.paper.appendInteractKnode(this.k)}remove(){this.k.remove()}}class fr extends gr{constructor(t,e,i=!1){super(t.node.tree),this.rectToAlignment=new Map,this.moves=new P(0,0),this.imageContent=t,this.node=t.node,this.alignmentType=e,this.alignment=t.getImageAlignment(),this.narrowArea=i}init(){return super.init(),this.update(),this}initKs(){this.k=new Kt,this.k.setId(de("image-alignment-adjuster-rect")),this.initPreviewImage(),this.initRects()}initPreviewImage(){this.previewImage=this.imageContent.k.clone(),this.previewImage.setAttribute("opacity","0.5"),this.previewImage.setStyle("pointer-events","none"),this.previewImage.transform.clear(),this.k.prepend(this.previewImage)}initRects(){let t=this.makeAlignments(),e=this.makeRectBoxes();for(let i=0;i<t.length;i++){let n=t[i],o=e[i],r=new Ve;r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.setAttribute("stroke-width",2),r.setStyle("cursor","grabbing"),r.on("mouseenter",this.onRectMouseEnter,this),this.k.append(r),this.rectToAlignment.set(r,n)}}makeAlignments(){return"direction4"===this.alignmentType?["top","right","bottom","left"]:"herizontal"===this.alignmentType?["left","right"]:"vertical"===this.alignmentType?["top","bottom"]:[]}makeRectBoxes(){if("direction4"===this.alignmentType)return this.makeDirection4RectBoxes();if("herizontal"===this.alignmentType){let{x:t,y:e,width:i,height:n}=this.getDropAreaBox();return[new _(t,e,i/2,n),new _(t+i/2,e,i/2,n)]}if("vertical"===this.alignmentType){let{x:t,y:e,width:i,height:n}=this.getDropAreaBox();return[new _(t,e,i,n/2),new _(t,e+n/2,i,n/2)]}return[]}getDropAreaBox(){let t=Fo.get(this.node).getRenderBoxInPaperOrigin();if(!this.narrowArea||"herizontal"!==this.alignmentType&&"vertical"!==this.alignmentType)return t;{let e=this.imageContent.getContentBoxInPaperOrigin();if("herizontal"===this.alignmentType){let i=Math.min(e.y-t.y,t.bottom-e.bottom);return e.x=t.x,e.width=t.width,e.expand(i,0)}{let i=Math.min(e.x-t.x,t.right-e.right);return e.y=t.y,e.height=t.height,e.expand(0,i)}}}makeDirection4RectBoxes(){let t=this.getDropAreaBox(),[e,i,n,o]=this.makeBestRectsBoxRates(t),r=[];for(let s=0;s<4;s++){let a=t.x+e[s]*t.width,l=t.y+i[s]*t.height,h=t.width*n[s],d=t.height*o[s];r.push(new _(a,l,h,d))}return r}makeBestRectsBoxRates(t){let e=[.25,.75,.25,0],i=[0,0,.5,0],n=[.5,.25,.5,.25],o=[.5,1,.5,1];return t.width>=t.height?[e,i,n,o]:[i.reverse(),e.reverse(),o.reverse(),n.reverse()]}onRectMouseEnter(t){let e=t.getTargetKNode(),i=this.rectToAlignment.get(e);this.alignment=i,this.updateStyle()}updateStyle(){let t=this.paper.style.get("content","outline-color");t=this.paper.style.contrastWithBackgroundColor(t);for(let e of this.rectToAlignment.keys())e.setAttribute("stroke",t),e.setAttribute("fill",t),this.rectToAlignment.get(e)===this.alignment?e.setAttribute("fill-opacity",.5):e.setAttribute("fill-opacity",.2)}setDragMoves(t){this.moves=this.paper.toPaperOrigin(t),this.updateLayout()}updateLayout(){let t=this.imageContent.getContentBoxInPaperOrigin().translate(this.moves.x,this.moves.y);this.previewImage.x=t.x,this.previewImage.y=t.y,this.previewImage.width=t.width,this.previewImage.height=t.height}setDragFinish(){this.fire("update-alignment",this.alignment)}}var yr;!function(t){t[t.None=0]="None",t[t.CornersAndSides=1]="CornersAndSides",t[t.Corners=2]="Corners",t[t.Sides=3]="Sides",t[t.VerticalSides=4]="VerticalSides",t[t.HorizontalSides=5]="HorizontalSides"}(yr||(yr={}));class xr extends gr{constructor(t,e,i=null,n={width:0,height:0},o={width:1e4,height:1e4},r=null,s=null){super(t),this.box=_.empty(),this.pointToDirections=new Map,this.lineToDirections=new Map,this.dragAtDirection=R.None,this.inDragging=!1,this.mode=e,this.naturalSize=i,this.aspectRatio=i?i.width/i.height:null,this.minSize=n,this.maxSize=o,this.minBox=r,this.maxBox=s}init(){return super.init(),this.box=this.getContentBoxInPaperOrigin(),this.update(),this}getPointSize(){return this.paper.settings.get("mobileMode")?16:6}initKs(){this.k=new Kt,this.initRect(),this.initMinMaxSize(),this.initLines(),this.initPoints(),this.dragger=new mr(this.paper,this.k)}initRect(){this.rect=new Ve,this.rect.setAttribute("stroke-width",2),this.rect.setAttribute("fill","none"),this.k.append(this.rect)}initMinMaxSize(){if(this.aspectRatio){if(this.minSize){let t=Math.max(this.minSize.width,this.minSize.height*this.aspectRatio),e=Math.max(this.minSize.height,this.minSize.width/this.aspectRatio);this.minSize={width:t,height:e}}if(this.maxSize){let t=Math.min(this.maxSize.width,this.maxSize.height*this.aspectRatio),e=Math.min(this.maxSize.height,this.maxSize.width/this.aspectRatio);this.maxSize={width:t,height:e}}}}initLines(){let t=[];this.mode===yr.CornersAndSides||this.mode===yr.Corners||this.mode===yr.Sides?t.push(R.Left,R.Right,R.Top,R.Bottom):this.mode===yr.VerticalSides?t.push(R.Top,R.Bottom):this.mode===yr.HorizontalSides&&t.push(R.Left,R.Right);for(let e of t){let t=new Ve;t.setAttribute("stroke","none"),t.setAttribute("fill","transparent"),t.setStyle("cursor",N.toCursorStyle(e)),this.k.append(t),this.lineToDirections.set(t,e)}}initPoints(){let t=[],e=this.paper.style.get("content","interact-fill-color");this.mode!==yr.CornersAndSides&&this.mode!==yr.Corners||t.push(R.BottomLeft,R.BottomRight,R.TopLeft,R.TopRight),this.mode!==yr.CornersAndSides&&this.mode!==yr.Sides||t.push(R.Left,R.Right,R.Top,R.Bottom),this.mode===yr.VerticalSides?t.push(R.Top,R.Bottom):this.mode===yr.HorizontalSides&&t.push(R.Left,R.Right);for(let i of t){let t=new Ve;t.width=this.getPointSize(),t.height=this.getPointSize(),t.setAttribute("stroke-width",2),t.setAttribute("fill",e),t.setStyle("cursor",N.toCursorStyle(i)),this.k.append(t),this.pointToDirections.set(t,i)}}updateStyle(){let t=this.getLineColor();this.rect.setAttribute("stroke",t);for(let e of this.pointToDirections.keys())e.setAttribute("stroke",t)}getLineColor(){let t=this.paper.style.get("content","outline-color");return t=this.paper.style.contrastWithBackgroundColor(t),t}initEvents(){this.dragger.on("will-start",this.willStartDragging,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("end",this.onDragEnd,this)}willStartDragging(t,e){let i=t.getTargetKNode();i&&(this.pointToDirections.has(i)||this.lineToDirections.has(i))||e()}onDragStart(t){let e=t.getTargetKNode();this.inDragging=!0,this.dragAtDirection=this.pointToDirections.get(e)||this.lineToDirections.get(e),this.paper.k.setStyle("cursor",N.toCursorStyle(this.dragAtDirection))}onDragMove(t,e){let i=N.toVector(this.dragAtDirection);e=this.paper.toPaperOrigin(e);let n=this.makeNewBox(this.getContentBoxInPaperOrigin(),e,i);n=this.limitBoxByAspectRatio(n,i),n=this.limitBoxByMinMaxBox(n),this.box=n,this.updateLayout()}makeNewBox(t,e,i){let{x:n,y:o,right:r,bottom:s}=t;if(i.x>0){let t=n+this.minSize.width,i=n+this.maxSize.width;r+=e.x,r=Math.min(Math.max(r,t),i)}else if(i.x<0){let t=r-this.minSize.width,i=r-this.maxSize.width;n+=e.x,n=Math.max(Math.min(n,t),i)}if(i.y>0){let t=o+this.minSize.height,i=o+this.maxSize.height;s+=e.y,s=Math.min(Math.max(s,t),i)}else if(i.y<0){let t=s-this.minSize.height,i=s-this.maxSize.height;o+=e.y,o=Math.max(Math.min(o,t),i)}return new _(n,o,r-n,s-o)}limitBoxByAspectRatio(t,e){let i=this.naturalSize;if(!i)return t;let{x:n,y:o,width:r,height:s}=t;if(0!==e.x&&0!==e.y){let a=Math.max(r/i.width,s/i.height);r=i.width*a,s=i.height*a,e.x<0&&(n=t.right-r),e.y<0&&(o=t.bottom-s)}else if(0!==e.x){let e=Math.max(r/i.width);r=i.width*e,s=i.height*e,o=t.centerY-s/2}else if(0!==e.y){let e=Math.max(s/i.height);r=i.width*e,s=i.height*e,n=t.centerX-r/2}return new _(n,o,r,s)}limitBoxByMinMaxBox(t){return this.minBox&&(t=t.union(this.minBox)),this.maxBox&&(t=t.intersect(this.maxBox)),t}onDragFinish(){this.fire("update-box",this.box.round(),this.dragAtDirection)}onDragEnd(){this.dragger.cancel(),this.paper.k.setStyle("cursor",""),this.inDragging=!1,this.fire("end")}updateLayout(){let t=this.box,e=this.getPointSize();for(let[i,n]of this.lineToDirections.entries())n===R.Top?(i.x=t.left,i.y=t.top-e/2,i.width=t.width,i.height=e):n===R.Bottom?(i.x=t.left,i.y=t.bottom-e/2,i.width=t.width,i.height=e):n===R.Left?(i.x=t.left-e/2,i.y=t.top,i.width=e,i.height=t.height):n===R.Right&&(i.x=t.right-e/2,i.y=t.top,i.width=e,i.height=t.height);for(let[e,i]of this.pointToDirections.entries()){let n=t.anchorPointAt(i);e.x=n.x-e.width/2,e.y=n.y-e.height/2}this.rect.x=this.box.x,this.rect.y=this.box.y,this.rect.width=this.box.width,this.rect.height=this.box.height}updateBoxFromContent(){this.inDragging||(this.box=this.getContentBoxInPaperOrigin(),this.updateLayout())}}class wr extends xr{constructor(t,e,i,n={width:0,height:0},o={width:1e4,height:1e4}){super(t.node.tree,e,i,n,o),this.previewImage=null,this.imageContent=t,this.node=t.node}getContentBoxInPaperOrigin(){return this.imageContent.getContentBoxInPaperOrigin()}initKs(){super.initKs(),this.k.setId(de("image-resize-rect"))}getLineColor(){let t=this.paper.style.get("content","outline-color");return t=this.node.style.contrastWithFillColor(t),t}onDragStart(t){super.onDragStart(t),this.makePreviewImage()}makePreviewImage(){this.previewImage=this.imageContent.k.clone(),this.previewImage.setAttribute("opacity","0.5"),this.previewImage.setStyle("pointer-events","none"),this.previewImage.transform.clear(),this.k.prepend(this.previewImage)}onDragEnd(){var t;super.onDragEnd(),null===(t=this.previewImage)||void 0===t||t.remove(),this.previewImage=null}updateLayout(){super.updateLayout();let t=this.box;this.previewImage&&(this.previewImage.x=t.x,this.previewImage.y=t.y,this.previewImage.width=t.width,this.previewImage.height=t.height)}}async function vr(t){return new Promise(((e,i)=>{let n=new Image;n.onload=()=>{e(n)},n.onerror=t=>{i(t)},n.src=t,n.crossOrigin="anonymous"}))}async function br(t){let e=await async function(t){return(await fetch(t,{mode:"cors"})).blob()}(t),i=new FileReader,n=new Promise(((t,e)=>{i.onload=()=>{t(i.result)},i.onerror=()=>{e()}}));return i.readAsDataURL(e),n}class kr extends er{constructor(){super(...arguments),this.displayWay=Wo.Block,this.resizer=null,this.alignmentAdjuster=null,this.startedLoadingImage=!1,this.preventResizerShowing=!1}static willRender(t){return!!t.ownData.image}get margin(){return[this.node.style.get("font-size")/2]}getImageAlignment(){return this.node.style.get("image-alignment")}initKs(){this.k=new Zt,this.k.setId(de("node-content-image")),this.dragger=new mr(this.node.tree,this.k)}initEvents(){this.k.on(["mousedown","touchstart"],this.onMouseDown,this),this.k.on(["click","tap"],this.onClick,this),Y.on(this.k.element,"dblclick",this.onDblClickOrTap,this),zt.on(this.k.element,"double-tap",this.onDblClickOrTap,this),this.initDraggerEvents()}initDraggerEvents(){this.dragger.on("will-start",this.willDragStart,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("end",this.onDragEnd,this)}willDragStart(t,e){this.node.tree.status.isReadWrite()||e(),this.node.tree.settings.get("mobileMode")&&e(),t.originalEvent instanceof MouseEvent&&0!==t.originalEvent.button&&e(),this.resizer||e()}onDragStart(){this.alignmentAdjuster=new fr(this,"direction4").init(),this.alignmentAdjuster.on("update-alignment",this.updateAlignment,this),this.alignmentAdjuster.appendToPaper(),this.resizer&&this.removeResizer()}onDragMove(t,e){this.alignmentAdjuster.setDragMoves(e)}onDragFinish(){this.alignmentAdjuster.setDragFinish()}onDragEnd(){var t;this.dragger.cancel(),null===(t=this.alignmentAdjuster)||void 0===t||t.remove(),this.alignmentAdjuster=null}updateAlignment(t){this.node.tree.commands.exec("ImageAlignment",t)}async onMouseDown(){this.node.beSelected()||(this.preventResizerShowing=!0,this.k.once(["mouseup","touchend"],(async()=>{await new Promise((t=>setTimeout(t,0))),this.preventResizerShowing=!1}),this))}onClick(t){t.preventDefault(),this.preventResizerShowing||(this.resizer?this.removeResizer():this.node.tree.status.isReadWrite()&&!this.node.tree.settings.get("mobileMode")&&this.createResizer())}onDblClickOrTap(){this.removeResizer(),this.node.__fireContentImageDblClick(this.k)}createResizer(){let t=this.node.tree.style.get("content","min-image-size"),e={width:screen.width,height:screen.height};this.resizer=new wr(this,yr.CornersAndSides,this.getImageNaturalSize(),t,e).init(),this.resizer.on("update-box",this.updateImageSize,this),this.resizer.on("end",this.removeResizer,this),this.resizer.appendToPaper(),this.node.tree.k.on(["mousedown","tap"],this.onPaperMouseDownOrTap,this),this.node.tree.on("paper-layout-complete",this.onPaperLayout,this),this.node.on("detach",this.removeResizer,this),this.node.tree.status.on("inputing-state-change",this.removeResizer,this),this.node.tree.shortcutKeys.preventCommandWithShortKey("Delete","Backspace"),this.node.tree.shortcutKeys.addShortcutKey(["Delete","Backspace"],this.deleteImage,this),this.node.tree.shortcutKeys.addShortcutKey("Escape",this.removeResizer,this),this.node.tree.selections.on("selection-change",this.removeResizer,this)}getImageNaturalSize(){return this.node.ownData.imageNaturalSize||null}updateImageSize(t,e){this.node.tree.commands.exec("ImagePartial",{size:Nt(t)}),this.node.tree.pinNodeInDirection(this.node,N.getOpposite(e))}deleteImage(){this.node.tree.commands.exec("Image",{})}onPaperMouseDownOrTap(t){t.preventDefault(),!this.resizer||this.k.element.contains(t.target)||this.resizer.k.element.contains(t.target)||this.removeResizer()}onPaperLayout(){var t;null===(t=this.resizer)||void 0===t||t.updateBoxFromContent()}removeResizer(){this.resizer&&(this.node.tree.k.off(["mousedown","tap"],this.onPaperMouseDownOrTap,this),this.node.tree.off("paper-layout-complete",this.onPaperLayout,this),this.node.off("detach",this.removeResizer,this),this.node.tree.status.off("inputing-state-change",this.removeResizer,this),this.node.tree.shortcutKeys.unPreventCommandWithShortKey("Delete","Backspace"),this.node.tree.shortcutKeys.deleteShortcutKey(["Delete","Backspace"],this.deleteImage,this),this.node.tree.shortcutKeys.deleteShortcutKey("Escape",this.removeResizer,this),this.node.tree.selections.on("selection-change",this.removeResizer,this),this.resizer.remove(),this.resizer=null)}update(){this.k.url=this.node.ownData.image,this.k.title=this.node.ownData.imageTitle,this.node.ownData.imageNaturalSize||this.loadImageToKnowSize();let t=this.node.ownData.imageSize;if(!t||!(t.width>0&&t.height>0)){let e=this.node.tree.style.get("content","max-image-size"),i=this.node.ownData.imageNaturalSize;i&&i.width>0&&i.height>0||(i=e);let n=Math.min(1,e.width/i.width,e.height/i.height);t={width:Math.round(i.width*n),height:Math.round(i.height*n)}}this.k.width=t.width,this.k.height=t.height}async loadImageToKnowSize(){if(!this.startedLoadingImage){this.startedLoadingImage=!0;try{let t=await vr(this.node.ownData.image),e={width:t.naturalWidth,height:t.naturalHeight};e.width>0&&e.height>0&&(this.node.ownData.imageNaturalSize=e,this.node.willUpdate())}catch(t){}}}remove(){super.remove(),this.resizer&&this.removeResizer()}}class Cr extends er{constructor(){super(...arguments),this.displayWay=Wo.InFront,this.textBox=_.empty(),this.rectHeight=20}static willRender(t){return!!t.tree.dataModifier.dataLocker.hasLockedByOthers(t.id)}initKs(){this.k=new Kt,this.k.setId(de("node-content-locked-outline")),this.dot=new We,this.dot.r=3,this.k.append(this.dot),this.arrow=new te,this.arrow.moveTo(0,0),this.arrow.lineTo(8,2.8),this.arrow.lineTo(3.8,3.8),this.arrow.lineTo(2.8,8),this.arrow.lineTo(0,0),this.arrow.close(),this.k.append(this.arrow),this.nameRect=new qe,this.nameRect.height=this.rectHeight,this.nameRect.sidesWidthRate=1,this.k.append(this.nameRect),this.text=new ne,this.text.setAttribute("fill","#fff"),this.text.setAttribute("text-anchor","middle"),this.text.setStyle("font-size","11px"),this.k.append(this.text),this.node.once("detach",this.onNodeDetach,this),this.node.tree.on("paper-layout",this.doCustomizeLayout,this)}onNodeDetach(){this.remove(),this.node.tree.off("paper-layout",this.doCustomizeLayout,this)}update(){this.updateStyle(),this.updateText()}updateStyle(){let t=this.getStrokeColor();t=this.node.tree.style.contrastWithBackgroundColor(t),this.dot.setAttribute("fill",t),this.arrow.setAttribute("fill",t),this.nameRect.setAttribute("fill",t)}updateText(){let t=this.node.tree.dataModifier.dataLocker.getUserLocked(this.node.id),e=(null==t?void 0:t.nickname)||"Unknown";this.text.content=e}getStrokeColor(){let t=this.node.tree.dataModifier.dataLocker.getUserLocked(this.node.id);return(null==t?void 0:t.color)||""}readSize(){super.readSize(),this.textBox=this.text.getBoundaryBoxInPaper()}doCustomizeLayout(){let t=this.node.getShapeContainerPath(),e=Fo.get(this.node),i=this.node.getLocalShapeContainerBox().expand(-1),n=null;(!(this.node instanceof $r)||!Vo.isShapeNotFullyFilled(this.node.style.get("shape")))&&(n=Pt.intersectWithPath(t,Pt.fromPoints(i.center,i.bottomRight)),n&&(n=e.toPaperOrigin(n))),n||(n=e.toPaperOrigin(i.bottomRight)),this.dot.cx=n.x,this.dot.cy=n.y,this.arrow.transform.setTranslate(n.x+3.5,n.y+3.5),this.nameRect.cx=n.x+this.textBox.width/2+this.rectHeight/2+8,this.nameRect.cy=n.y+this.rectHeight/2+7,this.nameRect.width=this.textBox.width+this.rectHeight,this.text.x=this.nameRect.cx,this.text.y=this.nameRect.cy+4}}const Sr={triangle:{d:"M-2.5 -3 L3 0 L-2.5 3Z",headX:3,tailX:-2.5},arrow:{d:"M-3 -3.5 L3.5 0 L-3 3.5 L-1.5 0Z",headX:3.5,tailX:-3},block:{d:"M-2.5 -2.5 L2.5 -2.5 L2.5 2.5 L-2.5 2.5Z",headX:2.5,tailX:-2.5},diamond:{d:"M0 -3.5 L3.5 0 L0 3.5 L-3.5 0Z",headX:3.5,tailX:-3.5},dot:{d:"M0 -3 A3 3 0 1 1 0 3 A3 3 0 1 1 0 -3Z",headX:3,tailX:-3},line:{d:"",headX:0,tailX:0}};class Tr extends er{constructor(){super(...arguments),this.displayWay=Wo.None,this.fromCapSize=0,this.toCapSize=0}static willRender(t){return!0}initKs(){this.k=new Kt,this.k.setId(de("node-content-rel-line")),this.initMarkers(),this.initPaths(),this.initClipPath()}initMarkers(){this.markerStart=new ie,this.markerStart.refX=0,this.markerStart.refY=0,this.markerStart.setAttribute("orient","auto"),this.markerStart.setAttribute("viewBox","-4 -4 8 8"),this.markerStartPath=new te,this.markerStart.append(this.markerStartPath),this.node.tree.k.appendResource(this.markerStart),this.markerEnd=new ie,this.markerEnd.refX=0,this.markerEnd.refY=0,this.markerEnd.setAttribute("orient","auto-start-reverse"),this.markerEnd.setAttribute("viewBox","-4 -4 8 8"),this.markerEndPath=new te,this.markerEnd.append(this.markerEndPath),this.node.tree.k.appendResource(this.markerEnd)}initPaths(){this.line=new te,this.line.setMarker(this.markerStart,"start"),this.line.setMarker(this.markerEnd,"end"),this.line.setAttribute("fill","none"),this.k.append(this.line),this.lineExpanded=new te,this.lineExpanded.setAttribute("fill","none"),this.lineExpanded.setAttribute("stroke-linecap","round"),this.k.append(this.lineExpanded)}initClipPath(){this.clipPath=new jt,this.clipPathPath=new te,this.clipPathPath.setAttribute("clip-rule","evenodd"),this.clipPath.append(this.clipPathPath),this.node.tree.k.appendResource(this.clipPath)}update(){this.updateStyle()}updateStyle(){let t=this.node.style.get("marker-start"),e=this.node.style.get("marker-end"),i=this.node.style.get("line-width"),n=i+6*this.node.tree.style.getMobileScaling(),o=this.node.style.get("line-color"),r=this.node.tree.style.get("content","outline-color"),s=this.node.style.get("line-dasharray").map((t=>t*i)).join(" "),a=this.node.beSelected()?.4:this.node.beHovered()?.2:0,l=this.getMarkerRenderSize()/i;this.line.setAttribute("stroke",o),this.line.setAttribute("stroke-width",i),this.line.setAttribute("stroke-dasharray",s),this.lineExpanded.setAttribute("stroke",r),this.lineExpanded.setAttribute("stroke-width",n),this.lineExpanded.setAttribute("stroke-opacity",a),this.markerStart.markerWidth=l,this.markerStart.markerHeight=l,this.markerEnd.markerWidth=l,this.markerEnd.markerHeight=l,this.markerStartPath.setAttribute("d",Sr[t].d),this.markerEndPath.setAttribute("d",Sr[e].d),this.markerStartPath.setAttribute("fill",o),this.markerEndPath.setAttribute("fill",o)}getMarkerRenderSize(){return 4*this.node.style.get("line-width")+4}applyLayoutProperties(t){this.makeCapSizes(),this.updateLinePath(t),this.updateExtendedPath()}makeCapSizes(){var t,e;let i=this.getMarkerRenderSize(),n=(null===(t=this.node.fromNode)||void 0===t?void 0:t.style.get("stroke-width"))||0,o=(null===(e=this.node.toNode)||void 0===e?void 0:e.style.get("stroke-width"))||0,r=this.node.style.get("marker-start"),s=this.node.style.get("marker-end"),a="line"===r?0:-Sr[r].tailX/8*i,l="line"===s?0:Sr[s].headX/8*i;this.fromCapSize=a+n/2,this.toCapSize=l+o/2}updateLinePath(t){let{fromPoint:e,toPoint:i,controlVector1:n,controlVector2:o}=t,[r,s]=this.fixFromToPointsFromMarker(t),a=e.add(n),l=i.add(o),h=this.node.style.get("line-type");this.line.clear(),this.line.moveTo(r.x,r.y),"bezier"===h?this.line.bezierTo(a.x,a.y,l.x,l.y,s.x,s.y):"line"===h?this.line.lineTo(s.x,s.y):"polygon"!==h&&"hv-line"!==h||(this.line.lineTo(a.x,a.y),this.line.lineTo(l.x,l.y),this.line.lineTo(s.x,s.y))}fixFromToPointsFromMarker(t){let{fromPoint:e,toPoint:i,controlVector1:n,controlVector2:o}=t;return e=e.add(n.normalize().multiplyScalar(this.fromCapSize)),i=i.add(o.normalize().multiplyScalar(this.toCapSize)),[e,i]}updateExtendedPath(){this.lineExpanded.setAttribute("d",this.line.getAttribute("d"))}getLineCentralPosition(){let t=this.line.toCurvePath().continuousCurves[0],e=t.getLength()/2;return e-=(this.fromCapSize-this.toCapSize)/2,t.pointAtLength(e)}applyLayoutPropertiesToClipPath(t){if(this.node.getHTML()){let{fromPoint:e,toPoint:i,controlVector1:n,controlVector2:o}=t,r=e.add(n),s=i.add(o),a=_.fromPoints(e,i,r,s).expand(12),l=Fo.get(this.node).getRenderBoxInPaperOrigin();this.line.setClipPath(this.clipPath),this.clipPathPath.clear(),this.clipPathPath.moveTo(a.x,a.y),this.clipPathPath.lineTo(a.right,a.y),this.clipPathPath.lineTo(a.right,a.bottom),this.clipPathPath.lineTo(a.x,a.bottom),this.clipPathPath.moveTo(l.x,l.y),this.clipPathPath.lineTo(l.right,l.y),this.clipPathPath.lineTo(l.right,l.bottom),this.clipPathPath.lineTo(l.x,l.bottom)}else this.line.clearClipPath()}getCurveBoxInPaperOrigin(){return this.line.getBoundaryBoxInPaper()}remove(){super.remove(),this.markerStart.remove(),this.markerEnd.remove(),this.clipPath.remove()}}class Mr extends sr{}class Ar extends er{constructor(){super(...arguments),this.displayWay=Wo.Customize,this.shapeContainerType=""}static willRender(){return!0}get margin(){let t=this.node.style.get("font-size");return[Math.max(.5*t,12)]}initKs(){this.updateShapeContainer()}getKs(){return this.shapeContainer.getKs()}updateShapeContainer(){let t,e=this.node.style.get("shape"),i=this.shapeContainer;i&&this.shapeContainerType===e?t=i:(t=Vo.create(e,this.node),null==i||i.replaceWith(t)),i!==t&&(null==i||i.remove()),this.shapeContainerType=e,this.shapeContainer=t,this.k=t.k}update(){this.updateShapeContainer(),this.shapeContainer.updateStyle()}getShapeContainer(){return this.shapeContainer}}class Pr extends er{constructor(){super(...arguments),this.alignmentAdjuster=null}static willRender(t){return!!t.ownData.image&&!!t.ownData.sticker}get margin(){return[4,12]}getImageAlignment(){return this.node.style.get("sticker-alignment")}initKs(){this.k=new Zt,this.k.setId(de("node-content-sticker-icon")),this.k.setStyle("cursor","pointer"),this.dragger=new mr(this.node.tree,this.k)}initEvents(){this.k.on(["click","tap"],this.onClick,this),this.initDraggerEvents()}onClick(t){t.preventDefault();let e=t.getTargetKNode();if(e instanceof Zt){let i=this.node.ownData.sticker;this.node.__fireContentStickerClick(e,i),t.preventDefault()}}initDraggerEvents(){this.dragger.on("will-start",this.willDragStart,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("end",this.onDragEnd,this)}willDragStart(t,e){this.node.tree.status.isReadWrite()||e(),this.node.tree.settings.get("mobileMode")&&e(),t.originalEvent instanceof MouseEvent&&0!==t.originalEvent.button&&e()}onDragStart(){this.alignmentAdjuster=new fr(this,"herizontal",!0).init(),this.alignmentAdjuster.on("update-alignment",this.updateAlignment,this),this.alignmentAdjuster.appendToPaper()}onDragMove(t,e){this.alignmentAdjuster.setDragMoves(e)}onDragFinish(){this.alignmentAdjuster.setDragFinish()}onDragEnd(){var t;this.dragger.cancel(),null===(t=this.alignmentAdjuster)||void 0===t||t.remove(),this.alignmentAdjuster=null}updateAlignment(t){this.node.tree.commands.exec("StickerAlignment",t)}update(){let t=Math.round(1.8*this.node.style.getIconSize()),e=this.node.ownData.sticker,i=Hi.getStickerResource(e),n=(null==i?void 0:i.url)||"",o=(null==i?void 0:i.size)||{width:100,height:100};this.k.url=n||"",this.k.width=t*o.width/o.height,this.k.height=t}}class Dr extends ar{contrastWithFillColor(t,e=10){let i=this.getFillOrBackgroundColor();return f.improveContrast(t,i,e)}getFillOrBackgroundColor(){var t;let e=this.get("fill-color");return e&&"transparent"!==e&&0!==(null===(t=f.fromString(e))||void 0===t?void 0:t.a)||(e=this.treeStyle.get("map","background-color")),e}}class Ir extends er{constructor(){super(...arguments),this.maxAvailableWidth=null,this.virtualSize=null}static willRender(t){return!t.tree.settings.get("previewMode")||!t.tree.style.get("content","show-text-color-indicator")}get margin(){let t=this.node.style.get("font-size");return[t/3,t/3]}initKs(){this.k=new Fe,this.k.setId(de("node-content-text"))}update(){this.updateStyles(),this.k.setHTML(this.makeNodeHTML())}readSize(){let t=this.virtualSize||this.k.getBoundaryBoxInPaper(),e=this.k.getDivScrollWidth();this.localBox.width=Math.max(t.width,e),this.localBox.height=t.height}forceVirtualSizeTo(t){var e,i;this.virtualSize=t,this.k.setVisible(!t),t&&(e=t,i=this.localBox,e.width!==i.width||e.height!==i.height)&&(this.readSize(),this.node.willUpdate())}updateStyles(){let t=this.node.getTextStyle(),e=t.color;e=this.node.style instanceof lr||this.node.style instanceof Dr?this.node.style.contrastWithFillColor(e):this.node.style.contrastWithBackgroundColor(e);let i=t["font-size"],n=t["line-height"];this.k.setDivStyle("color",e),this.k.setDivStyle("font-family",ge(t["font-family"])),this.k.setDivStyle("font-size",i+"px"),this.k.setDivStyle("line-height",n),this.k.setDivStyle("font-weight",t["font-weight"]),this.k.setDivStyle("font-style",t["font-style"]);let o=null;this.node.tree.style.get("content","can-line-wrap")&&(o=this.node.tree.style.get("content","max-text-width")),null!==o&&this.k.setDivStyle("max-width",o+"px"),this.k.setStyle("text-align",t["text-align"]);let r=function(t){let e=t["text-underline"]?"underline":"";return e+=t["text-line-through"]?" line-through":"",e=e.trim(),e}(t);this.k.setDivStyle("text-decoration",r)}makeNodeHTML(){let t=this.node.getFinalHTML();return Nn(t)&&this.reloadAfterLoadedKatex(),t=_n(t),t}reloadAfterLoadedKatex(){Hi.hasLoadedKatexResources()||Hi.ensureKatexResourcesLoaded().then((()=>{this.node.willUpdate()}))}setSize(t,e){this.k.width=Math.ceil(Math.max(t,0)),this.k.height=Math.max(e,0)}getTextContentAlign(){return this.node.style.get("text-align")}getTextVerticalAlign(){return this.node.style.get("text-vertical-align")}setMaxAvailableWidth(t){this.maxAvailableWidth=t,this.k.setDivStyle("max-width",t+"px")}hasSpecifiedMaxAvailableWidth(){return!!this.maxAvailableWidth}getMaxAvailableWidth(){let t=null;return null!==this.maxAvailableWidth?t=this.maxAvailableWidth:this.node.tree.style.get("content","can-line-wrap")&&(t=this.node.tree.style.get("content","max-text-width")),t&&(t=Math.max(t,this.localBox.width)),t}getMaxAvailableSize(){let t=Nt(this.localBox);return this.maxAvailableWidth&&(t.width=Math.max(this.maxAvailableWidth,this.localBox.width)),t}}class Er{constructor(t,e,i=NaN){this.contents=[],this.textUnit=null,this.contents=t,this.textContent=this.contents.find((t=>t instanceof Ir)),this.minimumContentSize=e,this.customWidth=i,this.willTextReflow=!!i}doLayout(){this.makeUnits(),this.rootUnit.doDisplay(),this.willTextReflow&&this.textUnit&&this.textContent.setMaxAvailableWidth(this.textUnit.display.width)}makeUnits(){let t=this.rootUnit=new Ii,e=this.doLinesCascading(),i=this.textUnit=e.findDescendant((t=>t.data instanceof Ir));t.append(e),t.minWidth=this.minimumContentSize.width,t.minHeight=this.minimumContentSize.height;let n=this.contents.find((t=>t instanceof kr));if(n){let e=n.getImageAlignment(),i=this.makeContentUnit(n);t.direction="top"===e||"bottom"===e?"column":"row","top"===e||"left"===e?t.prepend(i):t.append(i)}this.willTextReflow&&(t.width=this.customWidth,i.flex=1,i.minWidth=this.minimumContentSize.width)}doLinesCascading(){let t=this.makeMultiLineUnit(),e=this.makeLineUnit();for(let i=0;i<this.contents.length;i++){let n=this.contents[i],o=n.displayWay;if(n instanceof kr)continue;let r=this.makeContentUnit(n);if(o===Wo.Inline&&e.append(r),n instanceof Ir){let t=e.findDescendant((t=>t.data instanceof Pr));t&&"right"===t.data.getImageAlignment()&&(e.remove(t),e.append(t))}o===Wo.Block&&(e.children.length>0&&(t.append(e),e=this.makeLineUnit()),e.append(r),e=this.makeLineUnit())}return e.children.length>0&&t.append(e),t}makeMultiLineUnit(){var t;let e=(null===(t=this.textContent)||void 0===t?void 0:t.getTextVerticalAlign())||"center",i="top"===e?"start":"bottom"===e?"end":"center",n=new Ii;return n.direction="column",n.justifyContent=i,n.alignSelf="stretch",n.flex=1,n}makeLineUnit(){var t;let e=(null===(t=this.textContent)||void 0===t?void 0:t.getTextContentAlign())||"center",i="left"===e?"start":"right"===e?"end":"center",n=new Ii;return n.justifyContent=i,n.alignSelf="stretch",n}makeContentUnit(t){let{width:e,height:i}=t.localBox,n=new Ii(t);return n.width=e,n.height=i,n.margin=t.margin,n}readTextContentBoxAndReflow(){this.textUnit&&this.willTextReflow&&(this.textContent.readSize(),this.willTextReflow&&(this.textUnit.flex=0,this.textUnit.width=this.textContent.localBox.width,this.textUnit.height=this.textContent.localBox.height),this.rootUnit.doDisplay())}getContentSize(){return{width:this.rootUnit.display.width,height:this.rootUnit.display.height}}adjustCustomWidth(t){this.customWidth=t,this.willTextReflow=!0,this.rootUnit.width=this.customWidth,this.textUnit&&(this.textUnit.flex=1,this.textUnit.minWidth=this.minimumContentSize.width)}applyLayoutAfterTextReflow(){return this.textUnit&&this.textContent.setSize(this.textUnit.width,this.textUnit.height),this.applyContentPosition(),{width:this.rootUnit.display.width,height:this.rootUnit.display.height}}applyContentPosition(){let t=this.rootUnit,{width:e,height:i}=t.display,n=new P(-e/2,-i/2);for(let{x:e,y:i,unit:o}of t.walkWithPositions()){let t=o.data;if(!t)continue;t.basedOnCoordinateCenter&&(e+=t.localBox.width/2,i+=t.localBox.height/2);let r=new P(e,i).add(n);t.setPosition(r.x,r.y)}}layoutAfterRenderBoxDetermined(){this.doCustomizeLayout()}doCustomizeLayout(){for(let t=0;t<this.contents.length;t++){let e=this.contents[t],i=e.displayWay;i===Wo.Customize?e.doCustomizeLayout():i!==Wo.InFront&&i!==Wo.InBack||gi().then((()=>{e.doCustomizeLayout()}))}}}class Lr{constructor(t){this.localContentBox=_.empty(),this.localPaddingBox=_.empty(),this.localRenderBox=_.empty(),this.unAdjustedSize={width:0,height:0},this.contents=[],this.node=t}getLocalShapeContainerBox(){return this.shapeContainer.localBox}getShapeContainerPath(){return this.shapeContainer.k}updateContents(){let t=[],e=null;for(let i of this.getNodeContentsInOrder())if(i.willRender(this.node)){let n=this.ensureContent(i,e);n.update(),t.push(n),e=n}for(let e of this.contents)t.includes(e)||e.remove();this.contents=t,this.shapeContainer=this.findContent(Ar).getShapeContainer()}ensureContent(t,e){let i=this.contents.find((e=>e.constructor===t));return i||(i=new t(this.node).init(),i.displayWay===Wo.InFront?this.node.tree.appendInteractKnode(...i.getKs()):i.displayWay===Wo.InBack?this.node.tree.appendBottomKnode(...i.getKs()):e?e.k.after(...i.getKs()):this.node.k.prepend(...i.getKs())),i}readContentsBox(){for(let t of this.contents)t.readSize()}updateLayout(){var t;let e=this.node.style.getMinimunContentSize(),i=null===(t=this.node.data.style)||void 0===t?void 0:t["custom-content-width"];"branch"===this.node.classify&&this.node.tree.style.get("content","justify-same-deepth-width")&&!this.node.tree.isResizingNodes()&&(i=this.node.tree.style.getByBranchDeepth(this.node.root.id,this.node.getDeepth(),"custom-content-width")||i),this.contentLayout=new Er(this.contents,e,i),this.contentLayout.doLayout()}readTextContentBoxAndReflow(){this.contentLayout.readTextContentBoxAndReflow(),this.unAdjustedSize=this.contentLayout.getContentSize()}updateLayoutAfterTextReflow(){this.contentLayout.applyLayoutAfterTextReflow(),this.updateBoxes()}updateBoxes(){let t=this.contentLayout.getContentSize(),e=new _(-t.width/2,-t.height/2,t.width,t.height),i=this.node.style.getAdaptivePadding(),n=e.expand(...i);this.localContentBox=e,this.localPaddingBox=n,this.updateLocalRenderBoxFromContent(),this.updateShapeContainerBox()}updateLocalRenderBoxFromContent(){this.localRenderBox=this.localPaddingBox}updateShapeContainerBox(){this.shapeContainer.updateFromBoxes(this.localPaddingBox,this.localContentBox)}findContent(t){return this.contents.find((e=>e instanceof t))||null}}class Or extends Lr{constructor(){super(...arguments),this.relLineContent=null}getNodeContentsInOrder(){return _r}getRelLineContent(){return this.relLineContent}updateContents(){super.updateContents(),this.relLineContent=this.findContent(Tr)}updateLayoutAfterTextReflow(){super.updateLayoutAfterTextReflow(),this.contentLayout.layoutAfterRenderBoxDetermined()}}class Br extends Uo{constructor(t,e){super(t,e,"RelLine","rel-line")}initStyle(){this.style=new Mr(this,this.tree.style)}initContentRenderer(){this.contentRenderer=new Or(this)}get fromNode(){return this.tree.getNodeById(this.ownData.fromId)}get toNode(){return this.tree.getNodeById(this.ownData.toId)}beSelected(){return this.tree.selections.relLine.hasSelected(this)}getFinalHTML(){return this.getHTML()||qi(this.getDefaultTextConsiderSelected())}getFinalText(){return this.getText()||this.getDefaultTextConsiderSelected()}getDefaultText(){return this.tree.settings.get("showDefaultText")?this.tree.status.isReadonly()?"":super.getDefaultText():""}getDefaultTextConsiderSelected(){return this.beSelected()?super.getDefaultText():""}__readContentBoundary(){this.attached&&(super.__readContentBoundary(),pi(this))}__afterTreeLayout(){Fo.get(this).doSelfLayout()}applyLayoutProperties(t){this.contentRenderer.getRelLineContent().applyLayoutProperties(t)}getLineCentralPosition(){return this.contentRenderer.getRelLineContent().getLineCentralPosition()}applyLayoutPropertiesToClipPath(t){this.contentRenderer.getRelLineContent().applyLayoutPropertiesToClipPath(t)}balanceLinesContainerTransform(t){this.contentRenderer.getRelLineContent().k.transform.setMatrix(t.inverse())}getCurveBoxInPaperOrigin(){return this.contentRenderer.getRelLineContent().getCurveBoxInPaperOrigin()}}class Rr extends er{constructor(){super(...arguments),this.displayWay=Wo.Customize,this.interactSize=8,this.startContentWidth=0,this.startContentWidthData=null,this.startContentWidthList=null,this.dragDirection=R.None,this.willResizingNodes=null}static willRender(t){return!!t.tree.status.isReadWrite()&&!t.tree.settings.get("mobileMode")&&!t.tree.dataModifier.dataLocker.hasLockedByOthers(t.id)&&(t instanceof Br?t.beSelected()&&!t.tree.status.isInDragging():(t.beHovered()||t.beSelected())&&!t.tree.status.isInDragging())}initKs(){this.k=new Kt,this.k.setId(de("node-content-resizer")),this.leftRect=new Ve,this.leftRect.setStyle("cursor","ew-resize"),this.leftRect.setAttribute("fill","transparent"),this.leftRect.setAttribute("stroke","none"),this.k.append(this.leftRect),this.rightRect=new Ve,this.rightRect.setStyle("cursor","ew-resize"),this.rightRect.setAttribute("fill","transparent"),this.rightRect.setAttribute("stroke","none"),this.k.append(this.rightRect),this.dragger=new mr(this.node.tree,this.k)}initEvents(){this.k.on(["mousedown","tap"],this.onMouseDownOrTap,this),this.dragger.on("will-start",this.willStartDragDragging,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("cancel",this.onDragCancel,this),this.dragger.on("end",this.onDragEnd,this)}onMouseDownOrTap(t){t.stopPropagation(),t.preventDefault(),this.node.tree.commands.exec("NodeTextEditingCommit")}willStartDragDragging(t,e){let i=this.node.tree.selections;i.textable.getSelectedCount()>0&&!i.hasSelected(this.node)&&e()}onDragStart(t){let e=t.getTargetKNode();this.node.bringToFront(),this.node.tree.k.setStyle("cursor","ew-resize"),this.node.tree.selections.select(this.node);let i=this.node.tree.selections.textable.getSelected();this.dragDirection=e===this.rightRect?R.Right:R.Left,this.startContentWidth=this.node.getLocalContentBox().width,this.startContentWidthData=i.map((t=>{var e;return null===(e=t.data.style)||void 0===e?void 0:e["custom-content-width"]})),this.startContentWidthList=i.map((t=>t.getLocalContentBox().width));for(let t of i)t.bringToFront(),Fo.get(t).pinInDirection(N.getOpposite(this.dragDirection));this.willResizingNodes=i,this.node.tree.setResizingNodes(!0)}onDragMove(t,e){this.setNodeWidthOnly(this.getNewWidth(e))}getNewWidth(t){let e=(t=this.node.tree.toPaperOrigin(t)).x;return e*=N.toVector(this.dragDirection).x,Math.round(this.startContentWidth+e)}setNodeWidthOnly(t){for(let e of this.willResizingNodes)e.data.style=e.data.style||{},e.data.style["custom-content-width"]=t,e.willUpdateSelf(),mi((()=>{let t=Fo.get(e);t.doSelfLayout(),t.updateTransform()}))}onDragFinish(t,e){this.restoreStartContentWidth();let i=this.getNewWidth(e);this.node.tree.history.recordExecution((()=>{this.node.tree.commands.exec("CustomContentWidth",i);for(let t=0;t<this.willResizingNodes.length;t++){let e=this.willResizingNodes[t];if("branch-float-root"===e.classify){let n=e.ownData.position||{x:0,y:0},o=this.dragDirection===R.Left?-.5:this.dragDirection===R.Right?.5:0,r=(i-this.startContentWidthList[t])*o;e.modifyOwnData("position",{x:n.x+r,y:n.y})}}})),this.node.tree.pinNodeInDirection(this.node,N.getOpposite(this.dragDirection));for(let t of this.willResizingNodes)Fo.get(t).unPin()}onDragCancel(){this.restoreStartContentWidth(),this.node.willUpdate()}restoreStartContentWidth(){for(let t=0;t<this.willResizingNodes.length;t++){let e=this.willResizingNodes[t],i=this.startContentWidthData[t];e.data.style=e.data.style||{},e.data.style["custom-content-width"]=i}}onDragEnd(){this.willResizingNodes=null,this.dragDirection=R.None,this.startContentWidth=0,this.startContentWidthData=null,this.startContentWidthList=null,this.node.tree.k.setStyle("cursor",""),this.node.tree.setResizingNodes(!1)}update(){}doCustomizeLayout(){let t=this.node.getLocalRenderBox();this.leftRect.x=t.left-this.interactSize/2,this.leftRect.y=t.top,this.leftRect.width=this.interactSize,this.leftRect.height=t.height,this.rightRect.x=t.right-this.interactSize/2,this.rightRect.y=t.top,this.rightRect.width=this.interactSize,this.rightRect.height=t.height}}class Nr extends hr{static willRender(t){return!t.tree.settings.get("previewMode")&&t.beSelected()}getStrokeOpacity(){return this.node instanceof $r?1:.4}}const _r=[Tr,Ar,Ir,hr,Nr,Rr,Cr],zr=[Ar,Ir,Rr,ir,Cr],Fr=[Ar,Pr,class extends er{static willRender(t){return!!t.ownData.priority}get margin(){return[4,6]}initKs(){this.k=new Ge,this.k.setId(de("node-content-priority")),this.k.setStyle("cursor","pointer")}initEvents(){this.k.on(["click","tap"],(t=>{t.preventDefault(),this.node.__fireContentIconClick(this.k,"priority","")}))}update(){let t=this.node.style.getIconSize(),e=t/this.node.tree.style.get("content","render-icon-size"),i=ji.priorityColors[Number(this.node.ownData.priority-1)];i=this.node.style.contrastWithFillColor(i),this.k.color=i,this.k.strokeWidth=e,this.k.r=t/2,this.k.cx=t/2,this.k.cy=t/2,this.k.priority=this.node.ownData.priority}},class extends er{static willRender(t){return void 0!==t.ownData.progress}get margin(){return[4,6]}initKs(){this.k=new Ye,this.k.setId(de("node-content-progress")),this.k.setStyle("cursor","pointer")}initEvents(){this.k.on(["click","tap"],(t=>{t.preventDefault(),this.node.__fireContentIconClick(this.k,"progress","")}))}update(){let t=Math.round(this.node.style.getIconSize()),e=t/this.node.tree.style.get("content","render-icon-size"),i=this.node.tree.style.get("content","progress-non-color"),n=this.node.tree.style.get("content","progress-active-color");i=this.node.style.contrastWithFillColor(i),n=this.node.style.contrastWithFillColor(n),this.k.nonColor=i,this.k.activeColor=n,this.k.strokeWidth=e,this.k.r=t/2,this.k.cx=t/2,this.k.cy=t/2,this.k.progress=this.node.ownData.progress}},class extends er{constructor(){super(...arguments),this.iconSpacing=4,this.hoverSpacing=4,this.images=[],this.hoverRect=null}static willRender(t){return!!t.ownData.icons&&t.ownData.icons.length>0}get margin(){return[4,6]}initKs(){this.k=new Kt,this.k.setId(de("node-content-icon")),this.k.setStyle("cursor","pointer"),this.placeholder=new Ve,this.placeholder.setAttribute("stroke","none"),this.placeholder.setAttribute("fill","transparent"),this.k.append(this.placeholder)}initEvents(){this.k.on("mouseover",this.onMouseOver,this),this.k.on(["click","tap"],this.onClick,this)}onMouseOver(t){let e=t.getTargetKNode();e instanceof Zt&&(this.applyHoverEffectOnImage(e),e.on("mouseleave",this.onMouseOut,this))}onMouseOut(){var t;null===(t=this.hoverRect)||void 0===t||t.remove(),this.hoverRect=null}onClick(t){t.preventDefault();let e=t.getTargetKNode();if(e instanceof Zt){let i=this.images.indexOf(e),n=this.node.ownData.icons[i];this.node.__fireContentIconClick(e,"icon",n),t.preventDefault()}}applyHoverEffectOnImage(t){this.hoverRect||this.makeHoverRect();let e=Math.round(this.node.style.getIconSize()),i=[...t.parent.children].filter((t=>t instanceof Zt)).indexOf(t);this.hoverRect.x=i*(e+this.hoverSpacing),this.hoverRect.y=0,this.hoverRect.width=e+this.hoverSpacing,this.hoverRect.height=e+this.hoverSpacing}makeHoverRect(){this.hoverRect=new Ve;let t=this.node.tree.style.get("content","outline-color");t=this.node.style.contrastWithFillColor(t),this.hoverRect.setAttribute("fill",t),this.hoverRect.setAttribute("fill-opacity","0.25"),this.k.prepend(this.hoverRect)}update(){let t=this.node.ownData.icons,e=Math.round(this.node.style.getIconSize());for(let i=0;i<t.length;i++){let n=t[i],o=this.images[i];o||(o=this.createImage(),this.images[i]=o),o.url=Hi.getIconURL(n)||"",o.width=e,o.height=e,o.x=this.iconSpacing*(i+.5)+e*i,o.y=this.iconSpacing/2}let i=this.hoverSpacing-this.iconSpacing;for(this.placeholder.x=-i,this.placeholder.y=-i,this.placeholder.width=(e+this.iconSpacing)*t.length+2*i,this.placeholder.height=e+this.iconSpacing+2*i;this.images.length>t.length;)this.images.pop().remove()}createImage(){let t=new Zt;return this.k.append(t),t}},Ir,class extends er{static willRender(t){return t.tree.settings.get("previewMode")&&t.tree.style.get("content","show-text-color-indicator")}get margin(){return[0]}initKs(){this.k=new Ve,this.k.setId(de("node-content-text-color-indicator"))}update(){this.updateStyles(),this.updateSize()}updateStyles(){let t=this.node.style.get("color");this.k.setAttribute("fill",t)}updateSize(){let t=this.node.style.get("font-size"),e=t*this.node.style.get("line-height"),i=t*this.node.tree.style.get("content","minimum-aspect-ratio");this.k.width=i,this.k.height=e,this.k.smoothRadius=e/2}},class extends er{static willRender(t){return!!t.ownData.hyperlink}get margin(){return[0]}initKs(){this.k=new qt,this.k.setId(de("node-content-hyperlink")),this.k.setAttribute("target","_blank"),this.k.setStyle("cursor","pointer"),this.outline=new Ve,this.outline.setAttribute("fill","transparent"),this.outline.setAttribute("fill-opacity","0.2"),this.outline.setAttribute("stroke","transparent"),this.k.append(this.outline);const t=this.node.ownData.hyperlink||"",e=/(reccloud.cn|reccloud.com|dev-reccloud-cn.aoscdn.com|dev-reccloud-com.aoscdn.com)\/u\/[0-9a-zA-Z]{7}$/.test(t);this.linkIcon=e?Wt.fromCode('\n\t\t\t\t<g>\n\t\t\t\t\t<path d="M0-6.1c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S3.3-6.1,0-6.1z M0,5c-2.8,0-5.1-2.3-5.1-5.1S-2.8-5.2,0-5.2s5.1,2.3,5.1,5.1S2.8,5,0,5z"/>\n\t\t\t\t\t<path d="M2.8,0.5l-3.5,2.3c-0.4,0.3-0.9-0.1-0.9-0.6v-4.7c0-0.5,0.5-0.8,0.9-0.6l3.5,2.3C3.2-0.4,3.2,0.3,2.8,0.5z"/>\n\t\t\t\t</g>\n\t\t\t\t'):Wt.fromCode('\n\t\t\t\t<g>\n\t\t\t\t\t<path stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" d="M2.8,0.3l2.5-2.5c0.8-0.9,0.8-2.3,0-3.1C4.5-6.2,3.1-6.2,2.2-5.4c0,0,0,0,0,0l-2.9,2.9c-0.8,0.9-0.8,2.3,0.1,3.1"/>\n\t\t\t\t\t<path stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" d="M0.7-0.7c0.9,0.9,0.8,2.3,0,3.2l0,0l-2.9,2.9c-0.9,0.8-2.3,0.8-3.1,0c0,0,0,0,0,0c-0.9-0.9-0.9-2.3,0-3.1l2.5-2.5"/>\n\t\t\t\t</g>\n\t\t\t\t'),this.k.append(this.linkIcon)}initEvents(){!this.node.tree.settings.get("mobileMode")&&(this.k.on("mouseenter",(()=>{let t=this.node.tree.style.get("content","outline-color");t=this.node.style.contrastWithFillColor(t),this.outline.setAttribute("fill",t),this.node.__fireContentHyperlinkHoverIn(this.k)})),this.k.on("mouseleave",(()=>{this.outline.setAttribute("fill","transparent"),this.node.__fireContentHyperlinkHoverOut(this.k)}))),this.k.on("click",(t=>{t.preventDefault(),this.node.__fireContentHyperlinkClick(this.k,t)})),this.k.on("tap",(t=>{t.preventDefault(),this.node.__fireContentHyperlinkClick(this.k,t)}))}update(){let t=this.node.ownData.hyperlink,e=this.node.style.get("font-size"),i=Math.round(e)+6,n=this.node.style.get("color");n=this.node.style.contrastWithFillColor(n),this.linkIcon.setStyle("color",n),this.linkIcon.transform.setMatrix(lt.I().scale(e/14).translate(i/2,i/2)),this.outline.width=i,this.outline.height=i,/^(https?|ftp|mailto|file):/g.test(t)||(t="http://"+t),this.k.setAttribute("fill",this.node.style.get("color")),this.k.href=t}},class extends er{static willRender(t){return!t.tree.settings.get("previewMode")&&!!t.ownData.note}get margin(){return[0]}initKs(){this.k=new Kt,this.k.setId(de("node-content-note")),this.k.setStyle("cursor","pointer"),this.outline=new Ve,this.outline.setAttribute("fill","transparent"),this.outline.setAttribute("fill-opacity","0.2"),this.outline.setAttribute("stroke","transparent"),this.k.append(this.outline),this.noteIcon=Wt.fromCode('\n\t\t\t<path\n\t\t\t\tfill="none"\n\t\t\t\tstroke-width="1"\n\t\t\t\tstroke="currentColor"\n\t\t\t\td="M-3,-6L3,-6Q5,-6,5,-4L5,4Q5,6,3,6L-3,6Q-5,6,-5,4L-5,-4Q-5,-6,-3,-6Z M-3,-3L3,-3Z M-3,0L3,0Z M-3,3L3,3Z"\n\t\t\t/>\n\t\t\t'),this.k.append(this.noteIcon)}initEvents(){!this.node.tree.settings.get("mobileMode")&&(this.k.on("mouseenter",(()=>{let t=this.node.tree.style.get("content","outline-color");t=this.node.style.contrastWithFillColor(t),this.outline.setAttribute("fill",t),this.node.__fireContentNoteHoverIn(this.k)})),this.k.on("mouseleave",(()=>{this.outline.setAttribute("fill","transparent"),this.node.__fireContentNoteHoverOut(this.k)}))),this.k.on(["click","tap"],(t=>{t.preventDefault(),this.node.__fireContentNoteClick(this.k)}))}update(){let t=this.node.style.get("font-size"),e=Math.round(t)+6,i=this.node.style.get("color");i=this.node.style.contrastWithFillColor(i),this.noteIcon.setStyle("color",i),this.noteIcon.transform.setMatrix(lt.I().scale(t/14).translate(e/2,e/2)),this.outline.width=e,this.outline.height=e}},kr,class extends kr{static willRender(t){return!!t.ownData.sticker&&!t.ownData.image}getImageAlignment(){return this.node.style.get("sticker-alignment")}initKs(){this.k=new Zt,this.k.setId(de("node-content-sticker-image")),this.dragger=new mr(this.node.tree,this.k)}initEvents(){super.initEvents(),this.k.on(["click","tap"],this.onClickSticker,this)}onClickSticker(){this.node.__fireContentStickerClick(this.k,this.node.ownData.sticker)}updateAlignment(t){this.node.tree.commands.exec("StickerAlignment",t)}updateImageSize(t,e){this.node.tree.commands.exec("StickerPartial",{size:Nt(t)}),this.node.tree.pinNodeInDirection(this.node,N.getOpposite(e))}getImageNaturalSize(){let t=this.node.ownData.sticker,e=Hi.getStickerResource(t);return(null==e?void 0:e.size)||{width:100,height:100}}deleteImage(){this.node.tree.commands.exec("Sticker",{})}update(){let t=this.node.ownData.sticker,e=Hi.getStickerResource(t),i=(null==e?void 0:e.url)||"",n=(null==e?void 0:e.size)||{width:100,height:100};this.k.url=i;let o=this.node.ownData.stickerSize;if(!o||!o.width||!o.height){let t=this.node.tree.style.get("content","max-image-size"),e=Math.round(.5*t.width);o={width:e*n.width/n.height,height:e}}this.k.width=o.width,this.k.height=o.height}},or,hr,Nr,Rr,nr,Cr];class Wr extends Lr{getNodeContentsInOrder(){return Fr}updateAdjustedWidthAndReLayout(){let t=this.node.root.getAdjustedBranchWidthByDeepth(this.node.getDeepth());t&&(this.contentLayout.adjustCustomWidth(t),this.contentLayout.doLayout())}readContainerBoundary(){this.shapeContainer.readContainerBoundary(),this.localRenderBox=this.getLocalShapeContainerBox().union(this.localPaddingBox)}layoutAfterRenderBoxDetermined(){this.contentLayout.layoutAfterRenderBoxDetermined()}}class $r extends Uo{initContentRenderer(){this.contentRenderer=new Wr(this)}getDefaultText(){if(!this.tree.settings.get("showDefaultText"))return"";let t=this.getDeepth(),e=this.getSameTypeIndex();return Ki.getDefaultText(this.classify,t,e)}__readTextContentBoundary(){this.contentRenderer.readTextContentBoxAndReflow(),this.tree.style.get("content","justify-same-deepth-width")&&"branch"===this.classify&&!this.tree.isResizingNodes()?(this.root.ensureSameDeepthUpdatingEnqueued(this.getDeepth()),si(this)):li(this)}__updateTextContentLayout(){this.contentRenderer.updateAdjustedWidthAndReLayout(),ai(this)}__readTextContentBoundaryAdjustment(){this.contentRenderer.readTextContentBoxAndReflow(),li(this)}__updateTextContentLayoutAdjustment(){this.contentRenderer.updateLayoutAfterTextReflow(),oi[ii.READING_CONTAINER_BOUNDARY].add(this,undefined),xi(ii.READING_CONTAINER_BOUNDARY)}__readContainerBoundary(){this.contentRenderer.readContainerBoundary(),hi(this)}__updateContainerLayout(){this.contentRenderer.layoutAfterRenderBoxDetermined()}__fireContentImageDblClick(t){let e={url:this.ownData.image,title:this.ownData.imageTitle,naturalSize:this.ownData.imageNaturalSize,size:this.ownData.imageSize,others:this.ownData.imageOthers};this.fire("content-image-dblclick",t,this,e)}__fireContentIconClick(t,e,i){this.fire("content-icon-click",t,this,e,i)}__fireContentStickerClick(t,e){this.fire("content-sticker-click",t,this,e)}__fireContentHyperlinkHoverIn(t){this.fire("content-hyperlink-hover-in",t,this)}__fireContentHyperlinkHoverOut(t){this.fire("content-hyperlink-hover-out",t,this)}__fireContentHyperlinkClick(t,e){this.fire("content-hyperlink-click",t,this,e)}__fireContentNoteHoverIn(t){this.fire("content-note-hover-in",t,this)}__fireContentNoteHoverOut(t){this.fire("content-note-hover-out",t,this)}__fireContentNoteClick(t){this.fire("content-note-click",t,this)}}class Vr extends lr{isInheritableMixedKey(t){return super.isInheritableMixedKey(t)||ko.MultiColorKeyMap.hasOwnProperty(t)}gettingInheritable(t){var e,i;return null!==(i=null!==(e=this.getMultiColorInstead(t))&&void 0!==e?e:this.getInsteadCustom(t))&&void 0!==i?i:this.getCrossingLevelInheritable(t)}getMultiColorInstead(t){var e,i;let n=ko.MultiColorKeyMap[t];if(n){if(this.node.isRoot){let t=(null!==(i=null===(e=this.node.data.children)||void 0===e?void 0:e.length)&&void 0!==i?i:1)-1;return this.getMultiColor(n,t)}let t=this.node.getSameTypeIndex();return this.getMultiColor(n,t)}}getMultiColor(t,e){let i=this.node.parent;if(!(i instanceof Hr))return;let n=i.style.get(t);if(n){let t=ji.multiColors[n];return null==t?void 0:t[e%t.length]}}getFixedValue(t,e){return e=super.getFixedValue(t,e),"layout"===t?e=this.fixLayoutName(e):"shape"===t&&(e=this.fixShapeName(e)),e}fixLayoutName(t){return jo.getFinalLayoutName(this.node,t)}fixShapeName(t){return Vo.getAllowedShapeNames(this.node).includes(t)||(t=Vo.DefaultShapeName),t}isOutConnectFromInside(){return super.isOutConnectFromInside()}}function jr(t,e,i){let n=function(t,e,i,n){let o=[],r=[],s=[],a=[],l=e.filter((e=>e.classify===t)),h=new Map;for(let t of l)h.set(t.id,t);let d=new Set;if(i)for(let t of i)d.add(t.data.id);for(let[t,e]of h.entries())d.has(t)||(a.push(e),h.delete(t));let c=[...h.values()];if(i){let e=-1,a=null;for(let l of i){let i=l.data.id,d=h.get(i);if(d){d.data=l;let t=!1;null!==e&&(t=c[e+1]===d,t?e++:e=null),t||s.push({node:d,lastNode:a})}else d=n.createNode(t,l),r.push({node:d,lastNode:a});o.push(d),a=d}}return{children:o,add:r,move:s,remove:a}}(e,t.children,i,t.tree);for(let{node:e,lastNode:i}of n.move)i?i.after(e):t.prepend(e);for(let{node:e,lastNode:i}of n.add)i?i.after(e):t.prepend(e);for(let t of n.remove)t.remove();for(let t of n.children)t.willUpdate()}class Hr extends $r{constructor(t,e,i="Branch",n="branch"){super(t,e,i,n),this.initConnectionNode()}initStyle(){this.style=new Vr(this,this.tree.style)}initConnectionNode(){let t={data:Ki.generateOwnBaseData()};this.connectionNode=this.tree.createNode("connection",t),this.append(this.connectionNode)}get branchChildren(){return this.children.filter((t=>"Branch"===t.type))}get firstBranchChild(){for(let t=0;t<this.children.length;t++){let e=this.children[t];if(e instanceof Hr)return e}return null}get lastBranchChild(){for(let t=this.children.length-1;t>=0;t--){let e=this.children[t];if(e instanceof Hr)return e}return null}get previousBranchSibling(){let t=this.previousNode;for(;t;){if(t instanceof Hr)return t;t=t.previousNode}return null}get nextBranchSibling(){let t=this.nextNode;for(;t;){if(t instanceof Hr)return t;t=t.nextNode}return null}get summaryChildren(){return this.children.filter((t=>"Summary"===t.type))}get boundaryChildren(){return this.children.filter((t=>"Boundary"===t.type))}get relLineChildren(){return this.children.filter((t=>"RelLine"===t.type))}beSelected(){return this.tree.selections.branch.hasSelected(this)}branchChildAt(t){return this.branchChildren[t]}summaryChildAt(t){return this.summaryChildren[t]}boundaryChildAt(t){return this.boundaryChildren[t]}getMindLayoutSplitIndex(){var t,e;let i=null!==(t=this.ownData.mindLayoutSplitIndex)&&void 0!==t?t:Math.max(0,Math.ceil(this.branchChildren.length/2)),n=(null===(e=this.data.children)||void 0===e?void 0:e.length)||0;return i=Math.min(i,n),i}setMindLayoutSplitIndex(t){this.modifyOwnData("mindLayoutSplitIndex",t)}setExpanded(t){this.tree.dataModifier.hasItem(this.id)?this.tree.dataModifier.expandedStates.setExpanded(this.id,t):this.modifyOwnData("expanded",t)}getExpanded(){var t;return this.tree.dataModifier.hasItem(this.id)?this.tree.dataModifier.expandedStates.getExpanded(this.id):null!==(t=this.ownData.expanded)&&void 0!==t&&t}__update(){this.attached&&(super.__update(),this.updateBranchChildren(),this.updateSummaryChildren(),this.updateBoundaryChildren(),ui(this.tree))}__updateTextContentLayoutAdjustment(){if(super.__updateTextContentLayoutAdjustment(),!this.tree.isResizingNodes()&&this.parent instanceof Hr)for(let t of this.parent.boundaryChildren)si(t);ui(this.tree)}updateBranchChildren(){jr(this,"branch",this.getExpanded()?this.data.children:[])}updateSummaryChildren(){jr(this,"summary",this.getExpanded()?this.data.summaries:[])}updateBoundaryChildren(){var t,e;jr(this,"boundary",this.getExpanded()&&(null===(t=this.data.children)||void 0===t?void 0:t.length)?this.data.boundaries:null===(e=this.data.boundaries)||void 0===e?void 0:e.filter((t=>t.data.containingAttached)))}bringToFront(){var t;super.bringToFront();let e=null===(t=this.root)||void 0===t?void 0:t.id;e&&this.tree.commands.execWithIds("BranchFloatRootBringToFront",[e])}}class Ur extends Hr{constructor(t,e,i="Branch",n="branch-root"){super(t,e,i,n),this.maxWidthByDeepthMap=null,this.shouldReMakeMaxWidthData=!1,this.shouldUpdateMaxWidthData=!1}getSameTypeIndex(){return this.parent.rootChildren.indexOf(this)}toRootOrigin(t){return t}ensureSameDeepthUpdatingEnqueued(t){if(!this.shouldReMakeMaxWidthData&&this.maxWidthByDeepthMap||(this.maxWidthByDeepthMap=new Map,this.shouldUpdateMaxWidthData=!0,yi().then((()=>{this.shouldReMakeMaxWidthData=!0}))),!this.maxWidthByDeepthMap.has(t)){this.maxWidthByDeepthMap.set(t,0);for(let e of this.walkDeepedDescendants(void 0,t))e.deepth===t&&"branch"===e.node.classify&&si(e.node)}}getAdjustedBranchWidthByDeepth(t){var e;return this.shouldUpdateMaxWidthData&&(this.updateMaxWidthByDeepthMap(),this.shouldUpdateMaxWidthData=!1),null===(e=this.maxWidthByDeepthMap)||void 0===e?void 0:e.get(t)}updateMaxWidthByDeepthMap(){this.maxWidthByDeepthMap=new Map;for(let t of this.walkDescendants()){if("branch"!==t.classify)continue;let e=t.getDeepth(),i=t.getUnAdjustedSize();this.maxWidthByDeepthMap.set(e,Math.max(this.maxWidthByDeepthMap.get(e)||0,i.width))}}}class Kr extends Vr{getMultiColorInstead(t){}}class qr extends zo{constructor(t,e){super(t,e,"Connection","connection")}initStyle(){}get outNode(){return this.parent}getOutLayout(){return Fo.get(this.outNode).getBranchLayout()}get style(){return this.outNode.style}beSelected(){return!1}getSameTypeIndex(){return 0}initKs(){this.k=new Kt,this.k.setId(de(this.classify+"-node"))}getBundledLinePathData(){return Fo.get(this).getBundledLinePathData()}getOutConnectColor(){let t=this.outNode.branchChildAt(0)||this.outNode;return this.getInConnectColor(t)}getInConnectColor(t){return t.style.get("connect-color")}getOutConnectWidth(){return this.style.get("connect-width")}getInConnectWidth(t){return t.style.get("connect-width")}getOutConnectDasharray(){return this.style.get("connect-dasharray")}getInConnectDasharray(t){return t.style.get("connect-dasharray")}getConnect(){return this.style.get("connect")}}class Zr extends qr{getOutLayout(){return Fo.get(this.outNode)}getOutConnectColor(){return this.style.get("summary-connect-color")}getInConnectColor(t){return this.style.get("summary-connect-color")}getOutConnectWidth(){return this.style.get("summary-connect-width")}getInConnectWidth(t){return this.style.get("summary-connect-width")}getOutConnectDasharray(){return this.style.get("summary-connect-dasharray")}getInConnectDasharray(t){return this.style.get("summary-connect-dasharray")}getConnect(){return this.style.get("summary-connect")}}class Gr extends Hr{constructor(t,e){super(t,e,"Summary","summary"),this.initSummaryConnectionNode()}initStyle(){this.style=new Kr(this,this.tree.style)}initSummaryConnectionNode(){let t={data:Ki.generateOwnBaseData()};this.summaryConnectionNode=this.tree.createNodeOf(t,Zr),this.append(this.summaryConnectionNode)}beSelected(){return this.tree.selections.summary.hasSelected(this)}get previousSummarySibling(){var t;let e=this.getSameTypeIndex();return(null===(t=this.parent)||void 0===t?void 0:t.summaryChildAt(e-1))||null}get nextSummarySibling(){var t;let e=this.getSameTypeIndex();return(null===(t=this.parent)||void 0===t?void 0:t.summaryChildAt(e+1))||null}}class Yr extends Ur{constructor(t,e){super(t,e,"Branch","branch-float-root")}getSameTypeIndex(){return this.parent.rootChildren.indexOf(this)}toRootOrigin(t){let e=this.ownData.position||{x:0,y:0};return t.translate(-e.x,-e.y)}}var Jr,Xr,Qr,ts,es,is,ns;!function(t){t[t.NoRelLine=0]="NoRelLine",t[t.RelLineCurve=1]="RelLineCurve",t[t.RelLineControl=2]="RelLineControl"}(Jr||(Jr={}));class os{constructor(t){this.paper=t}get mainRoot(){return Fo.get(this.paper.mainRoot)}get mainRootChildren(){return this.paper.rootChildren.filter((t=>"branch-root"===t.classify)).map((t=>Fo.get(t)))}get floatRootChildren(){return this.paper.floatRootChildren.map((t=>Fo.get(t)))}get rootChildren(){return this.paper.rootChildren.map((t=>Fo.get(t)))}get relLineChildren(){return this.paper.relLineChildren.map((t=>Fo.get(t)))}*walkBranchsAndSummaries(){for(let t of this.rootChildren)yield*t.walkBranchsAndSummaries()}*walkBranches(){for(let t of this.rootChildren)yield*t.walkBranches()}doLayout(){for(let t of this.mainRootChildren)t.doLayout(),t.applyMatrixInPaperOriginDeeply();this.floatRootChildren.length>0&&this.doFloatLayout();for(let t of this.relLineChildren)pi(t.node)}doFloatLayout(){let t=this.paper.style.get("layout","avoid-overlay"),e=this.floatRootChildren;for(let t of e)t.doLayout();if(t){let t=this.makeHVBoxFromRootLayout(this.mainRoot);e.sort(((t,e)=>{let i=t.node,n=e.node,o=P.fromCoord(i.ownData.position||{x:0,y:0}),r=P.fromCoord(n.ownData.position||{x:0,y:0});return o.getLengthSquare()-r.getLengthSquare()}));for(let i of e){let e=i.getStartOffsetVector();i.applyMatrixInPaperOriginDeeply(e);let n=e.x>=0?R.Right:R.Left,o=e.y>=0?R.Bottom:R.Top,r=this.makeHVBoxFromRootLayout(i),s=t.getAntiOverlayTranslate(r,n,o);s&&(i.applyMatrixInPaperOriginDeeply(e.add(s)),r.translateSelf(s)),t.unionWithHVBox(r)}}else for(let t of e){let e=t.getStartOffsetVector();t.applyMatrixInPaperOriginDeeply(e)}}makeHVBoxFromRootLayout(t){let e=new Rt,i=this.paper.style.get("layout","partition-margin");for(let n of t.walkBranchsAndSummaries()){let t=n.getExpandedBoxInPaperOrigin().expand(i);e.unionWithBox(t)}return e}getJointRenderBoxInPaperOrigin(t){let e=this.rootChildren.map((t=>t.getJointRenderBoxInPaperOrigin())),i=_.fromUnion(...e);if(t!==Jr.NoRelLine){let e=this.relLineChildren.map((e=>e.getJointRenderBoxInPaperOrigin(t===Jr.RelLineControl)));if(e.length>0){let t=_.fromUnion(...e);i=i.union(t)}}return i}getJointMarginBoxInPaperOrigin(t=Jr.NoRelLine){let e=this.rootChildren.map((t=>t.getJointMarginBoxInPaperOrigin())),i=_.fromUnion(...e);if(t!==Jr.NoRelLine){let e=this.relLineChildren.map((e=>e.getJointRenderBoxInPaperOrigin(t===Jr.RelLineControl)));if(e.length>0){let t=_.fromUnion(...e),n=this.paper.style.get("content","interact-normal-size");t=t.expand(n),i=i.union(t)}}return i}}class rs{constructor(t){this.paper=t}willUpdate(){ri(this,1)}__update(){let t=new Set;this.paper.dataManager.children.forEach((e=>{for(let i of this.paper.dataModifier.walkMeAndExpandedDescendants(e))t.add(i.data.id)}));let e=this.paper.dataManager.relLines.filter((e=>t.has(e.data.fromId)&&t.has(e.data.toId)));jr(this.paper,"rel-line",e)}}!function(t){function e(t,e){return 0===t?e:0===e?t:Math.abs(t)>=Math.abs(e)?e:t}t.makeBoxNotCompletelyOutside=function(t,e,i,n){let o=t.transferBox(i);o=o.expand(-n);let r=new P(0,0);return o.right<e.left?r.x=e.left-o.right:o.left>e.right&&(r.x=e.right-o.left),o.bottom<e.top?r.y=e.top-o.bottom:o.top>e.bottom&&(r.y=e.bottom-o.top),r},t.makeBoxInsideCompletely=function(t,i,n,o=0){let r=t.transferBox(n);r=r.expand(-o);let s=new P(0,0),a=0,l=0;r.left<i.left&&(a=i.left-r.left),r.right>i.right&&(l=i.right-r.right),s.x=e(a,l);let h=0,d=0;return r.top<i.top&&(h=i.top-r.top),r.bottom>i.bottom&&(d=i.bottom-r.bottom),s.y=e(h,d),s},t.makeBoxInCenter=function(t,e,i,n=0){let o=t.transferBox(i);o=o.expand(-n);let r=e.center.diff(o.center);return o.width+n>=e.width&&(r.x=e.left+n-o.left),o.height+n>=e.height&&(r.y=e.top+n-o.top),r}}(Xr||(Xr={}));class ss{constructor(t){this.paper=t}makeMatrix(t,e){let i=lt.I();return i=i.scale(e),i=i.translate(Math.round(t.x),Math.round(t.y)),i}fromMatrix(t){return{position:new A(t.e,t.f),zoom:t.a}}fixPosition(t,e){let i=this.makeMatrix(t,e);return i=this.fixMatrixToMakeAnyVisible(i),this.fromMatrix(i).position}fixMatrixToMakeAnyVisible(t){let e=this.paper.k.getComputedSize(),i=new _(0,0,e.width,e.height),n=this.paper.treeLayout.getJointRenderBoxInPaperOrigin(Jr.RelLineControl),o=Xr.makeBoxNotCompletelyOutside(t,i,n,30);return t.translate(o.x,o.y)}fixMatrixToBeCompletelyVisible(t,e){let i=this.paper.k.getComputedSize(),n=new _(0,0,i.width,i.height),o=Xr.makeBoxInsideCompletely(t,n,e);return t=t.translate(o.x,o.y),this.fixMatrixToMakeAnyVisible(t)}fixMatrixToBeInCenter(t,e){let i=this.paper.k.getComputedSize(),n=new _(0,0,i.width,i.height),o=Xr.makeBoxInCenter(t,n,e);return t=t.translate(o.x,o.y),this.fixMatrixToMakeAnyVisible(t)}}class as{constructor(t){this.vector=null,this.withTransition=!1,this.promise=null,this.running=!1,this.doMoving=t}addMove(t,e){return this.vector?(un(this.vector.x)===un(t.x)?Math.abs(t.x)>Math.abs(this.vector.x)&&(this.vector.x=t.x):this.vector.x=t.x,un(this.vector.y)===un(t.y)?Math.abs(t.y)>Math.abs(this.vector.y)&&(this.vector.y=t.y):this.vector.y=t.y,this.withTransition=this.withTransition||e):(this.vector=t,this.withTransition=e,this.promise=new Promise((t=>{fi((()=>{this.running&&(this.doingMoving(),this.clean(),t())})),this.running=!0}))),this.promise}doingMoving(){this.doMoving(this.vector,this.withTransition)}clean(){this.running=!1,this.vector=null,this.promise=null}cancel(){this.clean()}}class ls extends k{constructor(t,e){super(),this.transition=null,this.eachStepScaling=1.2,this.minEachStepScaling=1.1,this.minScaling=.1,this.maxScaling=10,this.targetPosition=null,this.currentPosition=new A(0,0),this.zoom=1,this.paper=t,this.settings=e,this.calculator=new ss(t),this.moveByStacker=new as(((t,e)=>this.moveBy(t,e)))}getCurrentMatrix(){return this.calculator.makeMatrix(this.currentPosition,this.zoom)}getFinalMatrix(){return this.calculator.makeMatrix(this.getFinalPosition(),this.zoom)}getFinalPosition(){return this.targetPosition||this.currentPosition}getZoom(){return this.zoom}setProperties(t,e){let i=this.calculator.makeMatrix(t,e);this.setMatrix(i)}setMatrix(t){(t.a<this.minScaling||t.a>this.maxScaling)&&(t=this.fixMatrixScaling(t)),t=this.calculator.fixMatrixToMakeAnyVisible(t),this.applyPropertiesFromMatrix(t),this.updateViewTransform(),this.fireViewUpdateEvent()}fixMatrixScaling(t){let e=this.paper.k.getComputedSize(),i=t.a<this.minScaling?this.minScaling/t.a:t.a>this.maxScaling?this.maxScaling/t.a:1,n=new A(e.width/2,e.height/2),o=t.transferPoint(n);return(t=(t=t.translate(-o.x/2,-o.y/2)).scale(i)).translate(o.x/2,o.y/2)}fireViewUpdateEvent(){this.fire("view-update")}applyPropertiesFromMatrix(t){this.clearTransition(),this.currentPosition=new A(t.e,t.f),this.zoom=t.a}moveTo(t,e=!1){this.moveByStacker.cancel(),t=this.calculator.fixPosition(t,this.zoom),this.setPositionMayTransition(t,e),this.fireViewUpdateEvent()}async willMoveBy(t,e=!1){await this.moveByStacker.addMove(t,e)}moveBy(t,e=!1){let i=this.getFinalPosition().add(P.fromCoord(t));i=this.calculator.fixPosition(i,this.zoom),this.setPositionMayTransition(i,e),this.fireViewUpdateEvent()}setPositionMayTransition(t,e=!1){e?this.makeTransitionTo(t):(this.clearTransition(),this.currentPosition=t,this.updateViewTransform())}makeTransitionTo(t){let e=null;this.transition?e=this.transition.playTo(t):(this.transition=new Qe(this.paper.style.get("common","transition-duration"),"ease-out",(t=>{this.currentPosition=t,this.updateViewTransform()})),e=this.transition.playBetween(this.currentPosition,t)),this.targetPosition=t,e.then((t=>{t&&(this.transition=null),this.targetPosition=null}))}clearTransition(){this.transition&&(this.transition.cancel(),this.transition=null)}zoomInWithOrigin(t){this.moveByStacker.cancel(),this.zoomInOut(this.eachStepScaling,t)}zoomOutWithOrigin(t){this.moveByStacker.cancel(),this.zoomInOut(1/this.eachStepScaling,t)}zoomInOut(t,e=this.getViewCenterPositionInPaperOrigin()){let i=this.minScaling,n=this.maxScaling;this.settings.get("zoomToRounded")?t=this.adjustZoomToRounded(t):(i=Math.pow(this.eachStepScaling,Math.floor(Math.log(i)/Math.log(this.eachStepScaling))),n=Math.pow(this.eachStepScaling,Math.ceil(Math.log(n)/Math.log(this.eachStepScaling))));let o=Math.min(Math.max(this.zoom*t,i),n);this.setZoom(o,e)}setZoom(t,e=this.getViewCenterPositionInPaperOrigin()){this.moveByStacker.cancel();let i=this.getCurrentMatrix(),n=i.transferPoint(e),o=t/this.zoom;i=i.translate(-n.x,-n.y),i=i.scale(o),i=i.translate(n.x,n.y),this.setMatrix(i)}getViewCenterPositionInPaperOrigin(){let t=new A(this.paper.k.getComputedWidth()/2,this.paper.k.getComputedHeight()/2);return this.paper.getViewTransformMatrix().inverse().transferPoint(t)}adjustZoomToRounded(t){let e=this.zoom,i=t>1?e*this.minEachStepScaling:e/this.minEachStepScaling,n=t>1?Math.ceil(i):Math.floor(i);0==n?n=t>1?1/Math.floor(1/i):1/Math.ceil(1/i):(2===n&&e<1.5||1===n&&e>1.5)&&(n=1.5);let o=n/e,r=Math.log(o)/Math.log(t);return r=Math.round(r),r=Math.max(1,r),Math.pow(Math.E,Math.log(o)/r)}updateViewTransform(){let t=this.getCurrentMatrix();this.paper.setViewTransformMatrix(t)}toBirdEyeView(){this.moveByStacker.cancel();let t=this.paper.treeLayout.getJointMarginBoxInPaperOrigin(),e=this.paper.k.getComputedSize(),i=Math.min(e.width/t.width,e.height/t.height,2),n=lt.I();n=n.translate(e.width/2-t.center.x,e.height/2-t.center.y),n=n.translate(-e.width/2,-e.height/2),n=n.scale(i),n=n.translate(e.width/2,e.height/2),this.setMatrix(n),i<this.minScaling&&this.moveToMakeNodeInCenter(this.paper.mainRoot)}async mayMoveToMakeBoxCompletelyVisible(t,e=!1){let i=this.settings.get("paperPadding").map((t=>t/this.zoom));t=t.expand(...i);let n=this.getFinalMatrix(),o=this.calculator.fixMatrixToBeCompletelyVisible(n,t),r=new P(o.e-n.e,o.f-n.f).round();(r.x||r.y)&&await this.willMoveBy(r,e)}async moveToMakeBoxInCenter(t,e=!1){let i=this.settings.get("paperPadding").map((t=>t/this.zoom));t=t.expand(...i);let n=this.getFinalMatrix(),o=this.calculator.fixMatrixToBeInCenter(n,t),r=new P(o.e-n.e,o.f-n.f);await this.willMoveBy(r,e)}async mayMoveToMakeNodeCompletelyVisible(t,e=!1){let i=Fo.get(t).getRenderBoxInPaperOrigin();await this.mayMoveToMakeBoxCompletelyVisible(i,e)}async moveToMakeNodeInCenter(t,e=!1){let i=Fo.get(t).getRenderBoxInPaperOrigin();await this.moveToMakeBoxInCenter(i,e)}async moveToCenter(t=!1){let e=this.paper.treeLayout.getJointMarginBoxInPaperOrigin();await this.moveToMakeBoxInCenter(e,t)}getViewBoxInPaperOrigin(){let t=this.paper.k.getComputedSize(),e=new _(0,0,t.width,t.height);return this.getCurrentMatrix().inverse().transferBox(e)}async moveByPassiveSelectedNode(t,e=!1){let i=this.settings.get("viewControlAfterPassiveSelected");"visible"===i?await this.mayMoveToMakeNodeCompletelyVisible(t,e):"center"===i&&await this.moveToMakeNodeInCenter(t,e)}}class hs{constructor(t){this.node=null,this.point=null,this.direction=R.None,this.paper=t}pinned(){return!!this.node}pinInDirection(t,e,i=new P(0,0)){this.node&&this.unPin();let n=Fo.get(t),o=n.getMayPinnedTranslate(),r=n.getRenderBoxInPaperOrigin().translate(o.x,o.y);this.node=t,this.direction=e,this.point=r.anchorPointAt(e).add(i),t.on("detach",this.unPin,this)}unPin(){this.node&&(this.node.off("detach",this.unPin,this),this.node=null,this.direction=R.None,this.point=null)}getPinTranslate(){let t=this.node;return t.attached||(t=this.paper.getNodeById(t.id)),t?Fo.get(t).getRenderBoxInPaperOrigin().anchorPointAt(this.direction).diff(this.point).negative():null}}class ds{constructor(t){this.id=t,this.initStyleTag()}initStyleTag(){let t=document.createElement("style");t.setAttribute("id",this.id),this.styleTag=t}appendToHead(){document.head.appendChild(this.styleTag)}setContent(t){this.styleTag.textContent=t}remove(){this.styleTag.remove()}}class cs extends Lr{constructor(){super(...arguments),this.localContainerBox=_.empty()}getNodeContentsInOrder(){return zr}updateContents(){super.updateContents(),this.textContainer||this.initTextContainer(),this.updateTextContainer(),this.shapeContainer.k.setStyle("pointer-events","none")}initTextContainer(){this.textContainer=new Ve,this.textContainer.setId(de("boundary-text-container")),this.node.k.prepend(this.textContainer)}updateTextContainer(){this.textContainer.setStyle("fill",this.node.style.get("fill-color"))}updateLocalRenderBoxFromContent(){}updateShapeContainerBox(){}updateBoundaryTextWidthAndReLayout(){let t=Fo.get(this.node).getNormalContentBox().width,e=O(this.node.style.getAdaptivePadding());t-=e.left+e.right,this.contentLayout.adjustCustomWidth(t),this.contentLayout.doLayout(),this.contentLayout.readTextContentBoxAndReflow(),this.updateBoxes()}layoutAfterRenderBoxDetermined(){this.contentLayout.layoutAfterRenderBoxDetermined(),mi((()=>{this.layoutText()}))}layoutText(){let t=this.node.getFinalText(),e=this.node.tree.status.getEditingNode()===this.node,i=this.findContent(Ir),n=O(this.node.style.getAdaptivePadding()),o=this.node.getLocalContentBox().height,r=this.localContainerBox,s=new A(-r.width/2+n.right,-o-r.height/2-n.top-n.bottom),a=new A(s.x+n.left,s.y+n.top+1);i.setPosition(a.x,a.y),this.textContainer.smoothRadius=this.node.style.get("radius"),this.textContainer.smoothCornerIndices=[0,1],this.textContainer.setAttribute("opacity",t||e?1:0),this.textContainer.setAttribute("pointer-events",t||e?"":"none"),this.textContainer.x=s.x,this.textContainer.y=s.y,this.textContainer.width=this.localContentBox.width+n.left+n.right,this.textContainer.height=this.localContentBox.height+n.top+n.bottom}updateBoundaryBoxes(t,e){this.localRenderBox=t,this.localContainerBox=e,this.shapeContainer.updateFromBoxes(e,e)}}class us extends Uo{constructor(t,e){super(t,e,"Boundary","boundary")}initStyle(){this.style=new Dr(this,this.tree.style)}initContentRenderer(){this.contentRenderer=new cs(this)}beSelected(){return this.tree.selections.boundary.hasSelected(this)}__update(){this.attached&&(super.__update(),ui(this.tree))}__updateTextContentLayout(){super.__updateTextContentLayout(),ai(this)}__readTextContentBoundaryAdjustment(){this.contentRenderer.readTextContentBoxAndReflow(),li(this)}__updateTextContentLayoutAdjustment(){this.contentRenderer.updateLayoutAfterTextReflow(),hi(this)}__updateContainerLayout(){this.contentRenderer.layoutAfterRenderBoxDetermined()}updateBoundaryTextWidth(){this.contentRenderer.updateBoundaryTextWidthAndReLayout()}updateBoundaryBoxes(t,e){this.contentRenderer.updateBoundaryBoxes(t,e)}}!function(t){t[t.UnLocked=0]="UnLocked",t[t.Locked=1]="Locked",t[t.Enqueued=2]="Enqueued"}(Qr||(Qr={}));class ps extends _o{constructor(t,e,i,n,o,r,s,a,l){super(),this.type="Paper",this.classify="paper",this.container=null,this.size={width:0,height:0},this.children=[],this.idNodeMap=new Map,this.watchContainerObserver=null,this.globalStyle=null,this.layoutLockedState=Qr.UnLocked,this.resizingNodes=!1,this.dataManager=t,this.dataModifier=e,this.selections=i,this.style=n,this.commands=o,this.settings=r,this.shortcutKeys=s,this.status=a,this.history=l,this.viewer=new ls(this,r),this.treeLayout=new os(this),this.relLineUpdator=new rs(this),this.pinner=new hs(this)}initKs(){super.initKs(),this.k.setAttribute("tabindex",0),this.k.setStyle("touch-action","none"),this.k.setStyle("user-select","none"),this.k.setStyle("-webkit-user-select","none"),this.k.setStyle("-webkit-touch-callout","none"),this.k.element.classList.add("mm-paper"),this.initContainers()}initContainers(){this.bottomContainer=new Kt,this.bottomContainer.setId("minder-bottom-container"),this.k.appendShape(this.bottomContainer),this.nodeContainer=new Kt,this.nodeContainer.setId("minder-node-container"),this.k.appendShape(this.nodeContainer),this.relLineBoundaryContainer=new Kt,this.relLineBoundaryContainer.setId("minder-rel-line-boundary-container"),this.k.appendShape(this.relLineBoundaryContainer),this.interactContainer=new Kt,this.interactContainer.setId("minder-interact-container"),this.k.appendShape(this.interactContainer)}initEvents(){super.initEvents(),this.initPageViewEvent(),this.initFocusEvents(),this.initMouseButtonPressedEvents(),this.initNodeEvents(),this.initModifierEvents(),this.initLockEvents()}initPageViewEvent(){Y.on(document,"pageview",this.onPageView,this)}onPageView(){this.willUpdate()}initFocusEvents(){this.k.on("click",(()=>{this.k.element!==document.activeElement&&this.k.element.focus()})),this.k.on("focusin",(()=>{this.fire("paper-focus")})),this.k.on("focusout",(()=>{this.fire("paper-blur")})),m&&document.addEventListener("focusout",(()=>{window.scroll(0,0)}))}initMouseButtonPressedEvents(){this.on("node-mousedown",(()=>{this.status.setMouseButtonPressing(!0)})),this.on("node-mouseup",(()=>{this.status.setMouseButtonPressing(!1)}))}initNodeEvents(){this.on("node-attach",(t=>{this.attachNode(t)})),this.on("node-detach",(t=>{this.detachNode(t)})),this.on(["node-hover-in","node-hover-out"],(t=>{t.willUpdateSelf()})),this.on(["node-click","node-tap"],((t,e)=>{t instanceof Uo&&t.__fireContentClick(e.target)}))}initModifierEvents(){this.dataManager.dataModifier.on("data-change",this.afterDataChange,this)}afterDataChange(t){if(t===this.dataManager.id)this.willUpdate();else{let e=this.getNodeById(t);e&&(e.willUpdate(),this.fire("node-data-change",e))}this.style.clearAllCache()}initLockEvents(){this.dataModifier.dataLocker.on(["lock-add","lock-delete"],(t=>{let e=this.getNodeById(t.node_id);e&&e.willUpdateSelf()}))}setNonPointable(){this.bottomContainer.setStyle("pointer-events","none"),this.nodeContainer.setStyle("pointer-events","none"),this.relLineBoundaryContainer.setStyle("pointer-events","none")}setPointable(){this.bottomContainer.setStyle("pointer-events",""),this.nodeContainer.setStyle("pointer-events",""),this.relLineBoundaryContainer.setStyle("pointer-events","")}get id(){return this.dataManager.id}get data(){return this.dataManager.data}get element(){return this.k.element}get mainRoot(){return this.children.find((t=>"branch-root"===t.classify))}get rootChildren(){return this.children.filter((t=>t.isRoot))}get floatRootChildren(){return this.children.filter((t=>"branch-float-root"===t.classify))}get relLineChildren(){return this.children.filter((t=>t instanceof Br))}attachNode(t){"Branch"===t.type||"Summary"===t.type?(this.nodeContainer.append(t.k),this.relLineUpdator.willUpdate()):"Connection"===t.type?this.bottomContainer.append(t.k):"RelLine"!==t.type&&"Boundary"!==t.type||this.relLineBoundaryContainer.append(t.k),this.idNodeMap.set(t.id,t)}detachNode(t){Promise.resolve().then((()=>{t.attached||this.detachingNode(t)}))}detachingNode(t){t.k.remove(),this.idNodeMap.get(t.id)===t&&this.idNodeMap.delete(t.id),"Branch"!==t.type&&"Summary"!==t.type||this.relLineUpdator.willUpdate()}hasNodeById(t){return this.idNodeMap.has(t)}getNodeById(t){return this.idNodeMap.get(t)}setViewTransformMatrix(t){this.k.setViewTransformMatrix(t),this.fire("paper-view-transform-update",t)}getViewTransformMatrix(){return this.k.getViewTransformMatrix()}toPaperOrigin(t){return t instanceof P?t.multiplyScalar(1/this.getViewTransformMatrix().a):this.k.toPaperOrigin(t)}toScreenOrigin(t){return t instanceof P?t.multiplyScalar(this.getViewTransformMatrix().a):this.k.toScreenOrigin(t)}focus(){this.k.element.contains(document.activeElement)||this.k.element.focus()}blur(){var t;this.k.element.contains(document.activeElement)||null===(t=document.activeElement)||void 0===t||t.blur()}willUpdate(){this.dataManager.data&&(ri(this),this.relLineUpdator.willUpdate())}__update(){this.updateBackgroundStyle(this.style.getBackgroundStyle()),this.updateMainRoot(),this.updateFloatRoots()}updateMainRoot(){jr(this,"branch-root",[this.dataManager.root])}updateFloatRoots(){jr(this,"branch-float-root",this.dataManager.floatRoots)}willUpdateSelf(){for(let t of this.children)t.willUpdateSelf()}createNode(t,e){let i;if(e.data.id&&(i=this.idNodeMap.get(e.data.id),i&&i.classify===t))return i;if("branch-root"===t)i=new Ur(e,this);else if("branch-float-root"===t)i=new Yr(e,this);else if("branch"===t)i=new Hr(e,this);else if("summary"===t)i=new Gr(e,this);else if("boundary"===t)i=new us(e,this);else if("connection"===t)i=new qr(e,this);else{if("rel-line"!==t)throw new Error(`Wrong node type "${t}"!`);i=new Br(e,this)}return i.init(),i.broadcastTo(this),i}createNodeOf(t,e){if(t.data.id&&this.idNodeMap.get(t.data.id))throw new Error("Can't re-create node!");let i=new e(t,this);return i.init(),i.broadcastTo(this),i}appendTo(t){this.k.appendTo(t),this.container=t,this.settings.get("previewMode")||(t.classList.add("mm-container"),this.syncWithContainerSize(),this.watchContainerSize()),this.dataManager.once("import",(()=>{Y.on(document.fonts,"loadingdone",this.willUpdate,this)})),this.on("paper-layout-complete",(()=>{this.globalStyle||(this.globalStyle=new ds("mm-style")),this.globalStyle.setContent(`\n\t\t\t\t.mm-paper code, .mm-editor code{\n\t\t\t\t\tfont-family: Consolas, monospace;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.mm-editor img{\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t\tmax-height: ${this.style.get("content","max-image-size").height}px;\n\t\t\t\t}\n\t\t\t`),this.globalStyle.appendToHead()})),this.fire("paper-appended")}watchContainerSize(){"function"==typeof window.ResizeObserver?(this.watchContainerObserver=new ResizeObserver(this.syncWithContainerSize.bind(this)),this.watchContainerObserver.observe(this.container)):Y.on(document,"resize",this.syncWithContainerSize,this)}unwatchContainerSize(){var t,e;"function"==typeof window.ResizeObserver?(null===(t=this.watchContainerObserver)||void 0===t||t.unobserve(this.k.element),null===(e=this.watchContainerObserver)||void 0===e||e.disconnect()):Y.off(document,"resize",this.syncWithContainerSize,this)}syncWithContainerSize(){this.k.setAttribute("width",this.container.clientWidth),this.k.setAttribute("height",this.container.clientHeight);let t=this.container.clientWidth,e=this.container.clientHeight;if(t!==this.size.width||e!==this.size.height){let i=this.size.width>0?new P(t-this.size.width,e-this.size.height).multiplyScalar(.5):new P(0,0);this.size={width:t,height:e},i.getLength()&&this.viewer.willMoveBy(i,!1),this.fire("paper-size-change",this.size)}}appendBottomKnode(...t){this.bottomContainer.append(...t)}appendInteractKnode(...t){this.interactContainer.append(...t)}isElementBeInteractContainer(t){return this.interactContainer.element.contains(t)}updateBackgroundStyle(t){this.k.setStyle("background",t)}pinNodeInDirection(t,e,i=new P(0,0)){this.pinner.pinInDirection(t,e,i),fi((()=>{this.unPinNode()}))}unPinNode(){this.pinner.unPin()}isResizingNodes(){return this.resizingNodes}setResizingNodes(t){this.resizingNodes=t,t?this.lockTreeLayout():this.unlockTreeLayout()}lockTreeLayout(){this.layoutLockedState=Qr.Locked}unlockTreeLayout(){this.layoutLockedState===Qr.Enqueued&&ui(this),this.layoutLockedState=Qr.UnLocked}__updateTreeLayout(){if(this.layoutLockedState)this.layoutLockedState=Qr.Enqueued;else{if(this.treeLayout.doLayout(),this.pinner.pinned()){let t=this.pinner.getPinTranslate();t&&(t=this.toScreenOrigin(t),this.viewer.willMoveBy(t))}this.fire("paper-layout"),fi((()=>{this.fire("paper-layout-complete")}))}}remove(){var t;super.remove(),this.unwatchContainerSize(),Y.off(document.fonts,"loadingdone",this.willUpdate,this),Y.off(document,"pageview",this.onPageView,this),null===(t=this.globalStyle)||void 0===t||t.remove(),this.fire("paper-remove")}}class ms extends gr{constructor(t){super(t),this.startPoint=null,this.endPoint=null,this.dragger=new mr(t)}initKs(){this.k=new Kt,this.k.setId(de("selection-rect")),this.initRect()}initRect(){this.rect=new Ve,this.rect.setStyle("border-width",2),this.rect.setStyle("stroke-opacity",.5),this.rect.setStyle("fill-opacity",.1),this.k.append(this.rect)}initEvents(){this.dragger.on("will-start",this.willStartDragging,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("end",this.onDragEnd,this)}willStartDragging(t,e){let i=Hr.fromClosestElement(t.target),n=!this.paper.settings.get("rightMouseToDrag");i?e():n&&t.originalEvent instanceof MouseEvent&&0===t.originalEvent.button&&(t.originalEvent.ctrlKey||t.originalEvent.metaKey||e())}onDragStart(t){this.startPoint=t.getPaperPosition(),this.updateStyle(),this.appendToPaper(),this.fire("start-selection",t)}onDragMove(t,e){e=this.paper.toPaperOrigin(e),this.endPoint=this.startPoint.add(e),this.updateLayout(),this.fire("update-selection",this.startPoint,this.endPoint,t)}onDragFinish(t){this.fire("end-selection",t)}onDragEnd(){this.startPoint=null,this.endPoint=null,this.remove()}updateStyle(){let t=this.paper.style.get("content","outline-color");t=this.paper.style.contrastWithBackgroundColor(t),this.rect.setStyle("stroke",t),this.rect.setStyle("fill",t)}updateLayout(){let t=_.fromPoints(this.startPoint,this.endPoint);this.rect.x=t.x,this.rect.y=t.y,this.rect.width=t.width,this.rect.height=t.height}}class gs{constructor(t,e){this.startSelected=[],this.paper=t,this.selections=e,this.selectionRect=new ms(t).init(),this.initEvents()}initEvents(){this.selectionRect.on("start-selection",this.onStartSelection,this),this.selectionRect.on("update-selection",this.selectFromSelectionPoints,this),this.selectionRect.on("end-selection",this.onEndSelection,this)}onStartSelection(t){(t.originalEvent.ctrlKey||t.originalEvent.metaKey)&&(this.startSelected=this.selections.contentable.getSelected())}selectFromSelectionPoints(t,e){let i=_.fromPoints(t,e),n=[];for(let t of this.paper.treeLayout.walkBranchsAndSummaries()){let e=t.getRenderBoxInPaperOrigin();i.intersectWith(e)&&n.push(t.node)}this.selections.contentable.selectOnly(...n,...this.startSelected)}onEndSelection(){this.startSelected=[]}}!function(t){function e(t,e,i,n=0){let o=N.toVector(e),r=0,s=0;return 0!==o.x&&(r=Math.max(n,o.x>0?i.right:i.left)),0!==o.y&&(s=Math.max(n,o.y>0?i.bottom:i.top)),{point:t,direction:e,marginX:r,marginY:s}}function i(t,e,i,n){return 0!==t&&0!==e?t*Math.max(i,n):0!==t?t*i:0!==e?-e*n:0}t.makeAnchorFomBox=function(t,i,n,o=0){return e(t.anchorPointAt(i),i,n,o)},t.makeAnchorFromPoint=e,t.getAligningTranslate=function(t,e){let n=t.point.diff(e.point),o=N.toVector(t.direction),r=N.toVector(e.direction);return n.x+=i(o.x,r.x,t.marginX,e.marginX),n.y+=i(o.y,r.y,t.marginY,e.marginY),n}}(ts||(ts={}));class fs{constructor(t){this.matrixToPaperOrigin=lt.I(),this.pinnedPoint=null,this.pinnedDirection=R.None,this.pinnedTranslate=null,this.node=t}get sameSideSiblings(){return this.node.sameTypeSiblings.map((t=>Fo.get(t)))}doLayout(){this.doSelfLayout()}pinInDirection(t){let e=this.getRenderBoxInPaperOrigin();this.pinnedPoint=e.anchorPointAt(t),this.pinnedDirection=t}unPin(){this.pinnedPoint=null,this.pinnedDirection=R.None,this.pinnedTranslate=null}updateTransform(){let t=this.matrixToPaperOrigin;if(this.pinnedPoint){let e=this.matrixToPaperOrigin.transferBox(this.node.getLocalRenderBox()).anchorPointAt(this.pinnedDirection),i=this.pinnedPoint.diff(e);this.pinnedTranslate=i,t=t.translate(i.x,i.y)}this.applyFinalKMatrix(t)}applyFinalKMatrix(t){this.node.k.transform.setMatrix(t)}getLocalRenderBox(){return this.node.getLocalRenderBox()}getLocalExpandedBox(){return this.node.getLocalRenderBox()}getMatrixToPaperOrigin(){return this.matrixToPaperOrigin}getMayPinnedTranslate(){return this.pinnedTranslate||new P(0,0)}setMatrixInPaperOriginDeeply(t){this.matrixToPaperOrigin=t,this.updateTransform()}toPaperOrigin(t){let e=this.getMatrixToPaperOrigin();return t.translate(e.e,e.f)}getRenderBoxInPaperOrigin(){return this.toPaperOrigin(this.getLocalRenderBox())}getExpandedBoxInPaperOrigin(){return this.toPaperOrigin(this.getLocalExpandedBox())}remove(){}}class ys extends fs{constructor(){super(...arguments),this.translateFromParent=new P(0,0),this.additionalTranslate=new P(0,0),this.inVectorDirection=R.Center,this.inConnectDirection=R.Center,this.outVectorDirection=R.Center,this.outConnectDirection=R.Center,this.jointMargins={top:0,right:0,bottom:0,left:0}}get parent(){return this.node.parent instanceof $r?Fo.get(this.node.parent):null}doSelfLayout(){this.makeJointMargins()}makeJointMargins(){let t=this.node.style.getDirection4Object("margin");this.jointMargins=t}setIn(t,e=N.getOpposite(t)){this.inVectorDirection=t,this.inConnectDirection=e}setOut(t,e=t){this.outVectorDirection=t,this.outConnectDirection=e}getInVectorDirection(){return this.inVectorDirection}getOutVectorDirection(t=R.Center){return N.isCompatible(t,this.outVectorDirection)?this.outVectorDirection:N.getOpposite(this.outVectorDirection)}getOutVector(t=R.Center){let e=this.getOutVectorDirection(t),i=N.toVector(e);return N.isOblique(e)&&(i.x*=this.node.tree.style.getSkewAspectRatio()),i}getInVector(){let t=this.getInVectorDirection(),e=N.toVector(t);return N.isOblique(t)&&(e.x*=this.node.tree.style.getSkewAspectRatio()),e}getInConnectDirection(){return this.inConnectDirection}getOutConnectDirection(t=R.Center){return N.isCompatible(t,this.outConnectDirection)?this.outConnectDirection:N.getOpposite(this.outConnectDirection)}getLocalInPoint(){let t=this.getInConnectDirection();return this.localConnectPointAt(t)}getLocalOutPoint(t=R.Center){let e=this.getOutConnectDirection(t);return this.localConnectPointAt(e)}getLocalFoldedInPoint(){return this.getLocalInPoint().add(this.getFoldedInVector())}getFoldedInVector(){let t=this.getFoldedSize(),e=this.getInVectorDirection();return N.toVector(e).multiplyScalar(t)}getLocalFoldedOutPoint(t=R.Center){return this.getLocalOutPoint(t).add(this.getFoldedOutVector(t))}getFoldedOutVector(t=R.Center){let e=this.getFoldedSize(),i=this.getOutVectorDirection(t);return N.toVector(i).multiplyScalar(-e)}getFoldedSize(){if("transparent"===this.node.style.get("stroke-color"))return 0;let t=this.node.style.get("stroke-width");return Math.max(0,t/2)}getNormalOutPixels(){let t=this.getOutConnectDirection(),e=N.getStraightPreferVertical(t),i=N.toStraightDirection4Key(e),n=this.node.style.getDirection4Value("margin-"+i),o=this.node.tree.style.getMobileScaled("layout","connection-minimum-out-pixels"),r=this.node.tree.style.get("layout","connection-minimum-out-pixel-rate");return Math.max(n*r,o)}getMirrorPoint(t,e){let i=this.node.getLocalShapeContainerBox();return N.isHorizontal(e)?new A(i.right+i.left-t.x,t.y):N.isVertical(e)?new A(t.x,i.bottom+i.top-t.y):new A(i.right+i.left-t.x,i.bottom+i.top-t.y)}localConnectPointAt(t){let e;return e=t===R.Top?this.node.getLocalRenderBox():this.node.getLocalShapeContainerBox(),e.anchorPointAt(t)}marginedAnchorAt(t,e){e=e||this.localConnectPointAt(t);let i=this.node.style.getDirection4Object("margin"),n=this.node.tree.style.getMobileScaled("layout","partition-margin");return ts.makeAnchorFromPoint(e,t,i,n)}getFinalTranslateFromParent(){return this.translateFromParent.add(this.additionalTranslate)}setBasicTranslateFromParent(t){this.translateFromParent=t}getAdditionalTranslate(){return this.additionalTranslate}resetAdditionalTranslate(){this.additionalTranslate=new P(0,0)}setAdditionalTranslate(t){this.additionalTranslate=t}toParentOrigin(t){return t.translate(this.translateFromParent.x+this.additionalTranslate.x,this.translateFromParent.y+this.additionalTranslate.y)}getRenderBoxInParentOrigin(){return this.toParentOrigin(this.node.getLocalRenderBox())}}function xs(t,e){let i=N.toVector(e),n=new Map;return t.forEach((t=>{let e=t.toParentOrigin(t.getLocalOutPoint()).round().asVector().dot(i);n.set(t,e)})),t.sort(((t,e)=>{let i=n.get(t)-n.get(e);if(0!==i)return i;let o=t.computedEndIndex-t.computedStartIndex-(e.computedEndIndex-e.computedStartIndex);return 0===o?t.computedStartIndex-e.computedStartIndex:o})),vs(t)}function ws(t){return t.sort(((t,e)=>{let i=t.computedEndIndex-t.computedStartIndex-(e.computedEndIndex-e.computedStartIndex);return 0===i?t.computedStartIndex-e.computedStartIndex:i})),vs(t)}function vs(t){let e=new Set(t),i=[],n=Math.max(...t.map((t=>t.computedEndIndex)));for(;e.size>0;){let t=new Array(n);for(let e=0;e<n;e++)t[e]=!1;let o=[];for(;e.size>0;){let i=null;for(let n of e){let e=!0;for(let i=n.computedStartIndex;i<n.computedEndIndex;i++)if(t[i]){e=!1;break}if(e){for(let e=n.computedStartIndex;e<n.computedEndIndex;e++)t[e]=!0;i=n;break}}if(!i)break;o.push(i),e.delete(i)}o.sort(((t,e)=>t.computedStartIndex-e.computedStartIndex)),i.push(o)}return i}!function(t){function e(t,e,i,n=0){return{point:t,direction:e,margin:i=Math.max(i,n)}}t.makeAnchorFomBox=function(t,i,n,o){return e(t.anchorPointAt(i),i,n,o)},t.makeAnchorFromPoint=e,t.collapseSameDirectionAnchors=function(t,e){let i=N.toVector(t.direction),n=e.point.diff(t.point).dot(i)>=0?e.point:t.point,o=Math.max(t.margin,e.margin);return{point:n,direction:t.direction,margin:o}},t.getAligningTranslate=function(t,e){let i=t.point.diff(e.point),n=N.toVector(t.direction),o=Math.max(t.margin,e.margin);return i.add(n.multiplyScalar(o))}}(es||(es={}));class bs{constructor(t){this.margins={top:0,right:0,bottom:0,left:0},this.layouts=[],this.parentBranch=t}stack(t){if(this.layouts=t,0===t.length)return;let e=this.groupSummariesByDirection(t);for(let[t,i]of e.entries()){let e=new Map,n=xs(i,t),o=null,r=!1,s=!1;for(let i=0;i<n.length;i++){let a=n[i];if(r)for(let t of a)t.updateBoxesAndAligning();let l=this.avoidSameDeepthLayoutsOverlap(a);r=r||l,i>0&&(s=s||l);let h=this.alignSameDeepthLayouts(a,t,o);pn(h,e),o=h}if(s)for(let t of i)t.updateBoxesAndAligning();this.applyTranslates(e,t)}let i=E(...t.map((t=>t.jointMargins)));this.margins=i}groupSummariesByDirection(t){return St(t,(t=>[t.getInConnectDirection(),t]))}alignSameDeepthLayouts(t,e,i){let n=new Map,o=N.toVector(e);for(let r of t){let t;t=i?this.alignLayoutWithLastDeepth(r,e,i):new P(0,0),t.dot(o)<0&&(t=new P(0,0)),n.set(r,t)}return n}avoidSameDeepthLayoutsOverlap(t){let e=t[0].getChildExtendDirection(),i=0,n=0,o=!1;for(let r=0;r<t.length;r++){let s=t[r],a=t[r-1],l=0;r>0&&(l=this.makeSummaryBlockTranslateWithPrevious(a,s,e),l-=i);let h=r>0&&t[r-1].computedEndIndex===s.computedStartIndex,d=this.makeSummaryBlockTranslateWithPreviousBranch(s,e);h&&(d-=i);let c=Math.max(l,d,n);if(c>0){let t=N.toVector(e).multiplyScalar(c),i=this.parentBranch.branchStacker,n=s.getFirstInLayout();i.translateInLayoutFrom(n,t),o=!0}let u=this.makeNextBranchTranslateWithSummaryBlock(s,e),p=r<t.length-1&&t[r+1].computedStartIndex===s.computedEndIndex;if(!p&&u>0){let t=N.toVector(e).multiplyScalar(u),i=this.parentBranch.branchStacker,n=s.getNextOfLastInLayout();i.translateInLayoutFrom(n,t),o=!0}i=p?0:u,n=p?u:0}if(o){this.parentBranch.reAlignAfterChildrenTranslated();for(let e of t)e.updateBoxesAndAligning();this.parentBranch.reAlignAfterChildrenTranslated();for(let e of t)e.updateBoxesAndAligning()}return o}makeSummaryBlockTranslateWithPrevious(t,e,i){let n=N.getOpposite(i),o=N.toVector(i),r=Math.max(t.jointMargins[N.toStraightDirection4Key(i)],e.jointMargins[N.toStraightDirection4Key(n)]),s=t.getJointRenderBoxInParentOrigin().anchorPointAt(i),a=e.getJointRenderBoxInParentOrigin().anchorPointAt(n).diff(s).projectTo(o).minus(o.multiplyScalar(r));return a.dot(o)<0?a.getLength():0}makeSummaryBlockTranslateWithPreviousBranch(t,e){let i=N.getOpposite(e),n=N.toVector(e),o=t.jointMargins[N.toStraightDirection4Key(i)],r=0;for(let s of t.iterablePrevioisBeforeFirstInLayout()){let a=s.getJointRenderBoxInParentOrigin(),l=t.getJointRenderBoxInParentOrigin(),h=Math.max(s.jointMargins[N.toStraightDirection4Key(e)],o);if(!a.expand(h).intersectWith(l))continue;let d=a.anchorPointAt(e),c=l.anchorPointAt(i).diff(d).projectTo(n).minus(n.multiplyScalar(h));if(!(c.dot(n)<0))break;r=Math.max(r,c.getLength())}return r}makeNextBranchTranslateWithSummaryBlock(t,e){let i=N.getOpposite(e),n=N.toVector(e),o=t.jointMargins[N.toStraightDirection4Key(e)],r=0;for(let s of t.iterableNextAfterLastInLayout()){let a=s.getJointRenderBoxInParentOrigin(),l=t.getJointRenderBoxInParentOrigin(),h=Math.max(o,s.jointMargins[N.toStraightDirection4Key(i)]);if(!l.expand(h).intersectWith(a))continue;let d=l.anchorPointAt(e),c=a.anchorPointAt(i).diff(d).projectTo(n).minus(n.multiplyScalar(h));if(!(c.dot(n)<0))break;r=Math.max(r,c.getLength())}return r}alignLayoutWithLastDeepth(t,e,i){let n=this.makeMarginedAnchor(t,N.getOpposite(e)),o=null;for(let n of this.iterateInteractedLayoutsWith(t,i.keys())){let t=i.get(n),r=this.makeMarginedAnchor(n,e,t);o=o?es.collapseSameDirectionAnchors(o,r):r}return es.getAligningTranslate(o,n)}makeMarginedAnchor(t,e,i){let n=N.toStraightDirection4Key(e),o=t.getJointRenderBoxInParentOrigin(),r=t.node.tree.style.get("layout","summary-minimum-margin");i&&(o=o.translate(i.x,i.y));let s=t.jointMargins[n];return es.makeAnchorFomBox(o,e,s,r)}*iterateInteractedLayoutsWith(t,e){for(let i of e)Math.max(i.computedStartIndex,t.computedStartIndex)<Math.min(i.computedEndIndex,t.computedEndIndex)&&(yield i)}applyTranslates(t,e){for(let[i,n]of t.entries())N.isHorizontal(e)?i.setAdditionalTranslate(new P(n.x,0)):i.setAdditionalTranslate(new P(0,n.y))}getJointRenderBoxInParentOrigin(){let t=[];for(let e of this.layouts){let i=e.getJointRenderBoxInParentOrigin();t.push(i)}return _.fromUnion(...t)}getMargins(){return 0===this.layouts.length?null:this.margins}}class ks{constructor(t){this.margins={top:0,right:0,bottom:0,left:0},this.layouts=[],this.parentBranch=t}stack(t){if(this.layouts=t,0===t.length)return;let e=this.groupBoundariesByDirection(t);for(let[,t]of e.entries()){let e=this.makeEmptyBranchPaddings(t[0]),i=ws(t),n=[];for(let t=0;t<i.length;t++){let o=i[t];for(let t of o)this.expandBranchPaddings(t,e),this.applyStackedPaddings(t,e);n.unshift(...o)}this.orderActionAreas(n),this.applyExtendingTranslatesFromPaddings(t[0],e)}this.parentBranch.reAlignAfterChildrenTranslated()}groupBoundariesByDirection(t){return St(t,(t=>[t.getFirstInLayout().getInConnectDirection(),t]))}makeEmptyBranchPaddings(t){let e=t.getSameSideSiblings(),i=[];for(let t=0;t<e.length;t++)i.push({top:0,right:0,bottom:0,left:0});return i}orderActionAreas(t){let e=t.map((t=>t.node.findContent(ir)));for(let i=t.length-2;i>=0;i--)e[i].k.nextNode!==e[i+1].k&&e[i+1].k.before(e[i].k)}expandBranchPaddings(t,e){let i=t.getInLayouts(),n=t.getBasePaddings(),o=N.getStraightPreferVertical(t.getChildExtendDirection()),r=N.toStraightDirection4Key(o),s=N.toStraightDirection4Key(N.getOpposite(o)),a=D.filter((t=>t!==r&&t!==s)),l=t.computedSameSideStartIndex,h=t.computedSameSideEndIndex;e[l][s]+=n[s],e[h-1][r]+=n[r];for(let t=0;t<i.length;t++){let i=l+t;for(let t of a)e[i][t]+=n[t]}}applyStackedPaddings(t,e){let i=t.getInLayouts(),n=t.computedSameSideStartIndex,o=[],r=[];for(let t=0;t<i.length;t++){let s=t+n,a=i[t].getRenderBoxInParentOrigin(),l=e[s];o.push(a),r.push(a.expandWithObject(l))}let s=_.fromUnion(...o),a=_.fromUnion(...r),l={left:s.left-a.left,top:s.top-a.top,right:a.right-s.right,bottom:a.bottom-s.bottom};t.setStackedPaddings(l)}applyExtendingTranslatesFromPaddings(t,e){let i=t.getSameSideSiblings(),n=N.getStraightPreferVertical(t.getChildExtendDirection()),o=N.toVector(n),r=N.toStraightDirection4Key(n),s=N.toStraightDirection4Key(N.getOpposite(n));for(let t=1;t<e.length;t++){let n=e[t][s];n+=e[t-1][r],this.parentBranch.branchStacker.translateInLayoutFrom(i[t],o.multiplyScalar(n))}}getJointRenderBoxInParentOrigin(){let t=[];for(let e of this.layouts){let i=e.getRenderBoxInParentOrigin();t.push(i)}return _.fromUnion(...t)}getMargins(){return 0===this.layouts.length?null:this.margins}}class Cs extends ys{constructor(t){super(t),this.summaryOutPoint=new A(0,0),this.summaryOutDirection=R.Right,this.jointRenderBox=_.empty(),this.cachedLayoutName="",this.branchStacker=null,this.alignment=null,this.node=t,this.boundaryStacker=new ks(this),this.summaryStacker=new bs(this)}get branchChildren(){return this.node.branchChildren.map((t=>Fo.get(t)))}get summaryChildren(){return this.node.summaryChildren.map((t=>Fo.get(t)))}get boundaryChildren(){return this.node.boundaryChildren.map((t=>Fo.get(t)))}get rangedBoundaryChildren(){return this.node.boundaryChildren.filter((t=>!t.ownData.containingAttached)).map((t=>Fo.get(t)))}get unRangedBoundaryChildren(){return this.node.boundaryChildren.filter((t=>t.ownData.containingAttached)).map((t=>Fo.get(t)))}get connectionLayout(){return Fo.get(this.node.connectionNode)}get sameSideSiblings(){return this.parent?this.parent.getBranchLayout().getStackedSiblingsOf(this):[this]}get previousSameSideSibling(){let t=this.sameSideSiblings,e=t.indexOf(this);return e>0?t[e-1]:null}get nextSameSideSibling(){let t=this.sameSideSiblings,e=t.indexOf(this);return-1!==e&&e<t.length-1?t[e+1]:null}getLocalOutPoint(t=R.Center){let e=this.getOutConnectDirection(t),i=this.localConnectPointAt(e);if(this.getBranchLayout().alignment.adjustOutToAlignBetter){let e=this.getBranchLayout().branchStacker.alignDirection;if(N.isPerpendicular(t,e)&&N.isStraight(e)){let t=this.node.getLocalContentBox(),n=N.toVector(e),o=new P(t.width/2,t.height/2).multiply(n).getLength();i=i.add(n.multiplyScalar(o-2))}}return i}getBranchLayout(){return this}getMainSideInLayouts(){return this.branchStacker.getMainSideChildList()}getAllSidesInLayouts(){return this.branchStacker.getAllSidesChildList()}setMatrixInPaperOriginDeeply(t){super.setMatrixInPaperOriginDeeply(t);for(let e of this.branchChildren){let i=e.getFinalTranslateFromParent(),n=t.translate(i.x,i.y);e.setMatrixInPaperOriginDeeply(n)}for(let e of this.boundaryChildren){let i=e.getTranslateFromParent(),n=t.translate(i.x,i.y);e.setMatrixInPaperOriginDeeply(n)}for(let e of this.summaryChildren){let i=e.getFinalTranslateFromParent(),n=t.translate(i.x,i.y);e.setMatrixInPaperOriginDeeply(n)}}*walkBranchsAndSummaries(){yield this;for(let t of this.branchChildren)yield*t.walkBranchsAndSummaries();for(let t of this.summaryChildren)yield*t.walkBranchsAndSummaries()}*walkBranches(){yield this;for(let t of this.branchChildren)yield*t.walkBranches()}doLayout(){this.resetAdditionalTranslate();for(let t of this.branchChildren)t.doLayout();this.doSummaryAndBoundaryLayout(),this.doSelfLayout(),this.doUnRangedBoundaryLayout(),mi((()=>this.updateConnectionLayout()))}doSummaryAndBoundaryLayout(){this.ensureBranchAlignment(),this.cleanBoundaryProperties(),this.alignment.doStacking(),this.alignment.doAlignment(),this.doBoundaryLayout(),this.updateRangedBoundaryBoxes(),this.reAlignAfterBoundaryBoxDetermined(),this.doSummaryLayout(),this.summaryChildren.length>0&&(this.updateRangedBoundaryBoxes(),this.reAlignAfterBoundaryBoxDetermined())}cleanBoundaryProperties(){this.branchStacker.setBoundaryBoxInParentOrigin(null),this.branchStacker.setBoundaryExtendedBoxesInParentOrigin([])}reAlignAfterChildrenTranslated(){this.branchStacker.reStackAfterItemsTranslated(),this.alignment.doAlignment()}ensureBranchAlignment(){let t=this.node.style.get("layout");t!==this.cachedLayoutName&&(this.alignment=jo.create(t,this),this.cachedLayoutName=t,this.branchStacker=this.alignment.stacker)}doBoundaryLayout(){let t=this.rangedBoundaryChildren;for(let e of t)e.doLayout();this.boundaryStacker.stack(t)}doSummaryLayout(){let t=this.summaryChildren;for(let e of t)e.doLayout();this.summaryStacker.stack(t)}updateRangedBoundaryBoxes(){for(let t of this.rangedBoundaryChildren)t.updateAndApplyBoxes();this.setBranchExtendedBoxesAfterBoundaryBoxDetermined()}setBranchExtendedBoxesAfterBoundaryBoxDetermined(){let t=this.rangedBoundaryChildren;if(t.length>0){let e=this.branchChildren,i=N.getStraightPreferVertical(this.branchStacker.getNormalExtendDirection()),n=N.isVertical(i)?"horizontal":"vertical",o=[];for(let t of e){let e=t.getJointRenderBoxInParentOrigin();o.push(e)}for(let r of t){let t=r.getRenderBoxInParentOrigin(),s=r.getAllInLayouts();for(let a of s){let s=e.indexOf(a);o[s]=o[s].unionAtHVDirection(t,n),s===r.computedStartIndex&&(o[s]=o[s].unionAtDirection(t,N.getOpposite(i))),s===r.computedEndIndex-1&&(o[s]=o[s].unionAtDirection(t,i))}}this.branchStacker.setBoundaryExtendedBoxesInParentOrigin(o)}else this.branchStacker.setBoundaryExtendedBoxesInParentOrigin([])}reAlignAfterBoundaryBoxDetermined(){let t=this.boundaryStacker.getJointRenderBoxInParentOrigin();t?(this.branchStacker.setBoundaryBoxInParentOrigin(t),this.alignment.doAlignment(),this.updateRangedBoundaryBoxes()):this.branchStacker.setBoundaryBoxInParentOrigin(t)}doSelfLayout(){this.makeJointMargins();let t=[this.getLocalExpandedBox(),this.branchStacker.getJointRenderBoxInParentOrigin(),this.boundaryStacker.getJointRenderBoxInParentOrigin(),this.summaryStacker.getJointRenderBoxInParentOrigin()].filter((t=>t)),e=_.fromUnion(...t);this.jointRenderBox=e}doUnRangedBoundaryLayout(){for(let t of this.unRangedBoundaryChildren)t.doLayout(),t.updateAndApplyBoxes()}makeJointMargins(){let t=this.node.style.getDirection4Object("margin"),e=this.branchStacker.getMargins(),i=this.summaryStacker.getMargins(),n=this.boundaryStacker.getMargins();if(e&&"Branch"===this.node.type){let e=this.node.tree.style.get("layout","margin-from-siblings-when-have-children"),i=this.branchStacker.connectDirection,n=N.StraightDirections.filter((t=>!N.isCloseWith(t,i))).map((t=>N.toStraightDirection4Key(t)));for(let i of n)t[i]+=e}if(this.node.tree.style.get("layout","broadcast-margins")&&"Branch"===this.node.type){let o=[t,e,n,i].filter((t=>t));this.jointMargins=E(...o)}else{let o=t;e&&(o=L(o,e,N.getOpposite(this.branchStacker.connectDirection))),n&&(o=L(o,n,N.getOpposite(this.branchStacker.connectDirection))),i&&(o=L(o,i,N.getOpposite(this.branchStacker.alignDirection))),this.jointMargins=o}}getLocalExpandedBox(){let t=super.getLocalExpandedBox(),e=this.getExpanderMargins();return e&&(t=t.union(super.getLocalRenderBox().expandWithObject(e))),t}getExpanderMargins(){let t={top:0,right:0,bottom:0,left:0};if(!or.willRender(this.node))return null;let e=this.getOutConnectDirection(),i=N.toDirection4Keys(e),n=this.node.tree.style.getMobileScaled("layout","partition-margin");for(let e of i)t[e]=n;return t}updateConnectionLayout(){Fo.get(this.node.connectionNode).doLayout()}toTopLeftOrigin(t){let{x:e,y:i}=this.jointRenderBox;return t.translate(-e,-i)}getJointRenderBoxInParentOrigin(){return this.toParentOrigin(this.jointRenderBox)}getJointRenderBoxInPaperOrigin(){return this.toPaperOrigin(this.jointRenderBox)}getJointConnectPoint(t){return this.jointRenderBox.expand(-this.node.style.get("stroke-width")/2).anchorPointAt(t)}getStackerRenderBoxInPaperOrigin(){let t=this.branchStacker.getJointRenderBoxInParentOrigin();return t?this.toPaperOrigin(t):null}getOneSideRenderBoxInPaperOrigin(t){let e=this.branchStacker.getOneSideRenderBoxInParentOrigin(t);return this.toPaperOrigin(e)}getOneSideRenderBoxPreferDirectionInPaperOrigin(t){let e=this.branchStacker.getOneSideRenderBoxPreferDirectionInParentOrigin(t);return this.toPaperOrigin(e)}getJointMarginBoxInPaperOrigin(){return this.toPaperOrigin(this.jointRenderBox.expandWithObject(this.jointMargins))}getStackedSiblingsOf(t){return this.ensureBranchAlignment(),this.branchStacker.getStackedSiblingsOf(t)}getStackedList(){return this.branchStacker.getStackedChildList()}getNormalOutConnectDirectionTo(t=null){let e=this.outConnectDirection;if(!t)return e;let i=t.getInConnectDirection();return N.isCompatible(e,N.getOpposite(i))?e:N.getOpposite(e)}}Fo.register("branch",Cs);class Ss{constructor(t,e,i=e){this.inLayouts=[],this.jointRenderBox=_.empty(),this.margins={top:0,right:0,bottom:0,left:0},this.toParentOriginTranslate=new P(0,0),this.boundaryBoxInParentOrigin=null,this.boundaryBoxesInParentOrigin=null,this.outLayout=t,this.connectDirection=e,this.alignDirection=i}getMinimumMargin(){return this.outLayout.node.tree.style.getMobileScaled("layout","partition-margin")}updateInLayouts(t=this.outLayout.branchChildren){this.inLayouts=t}setChildrenInDirection(t,e){for(let i of this.inLayouts)i.setIn(t,e)}acceptFlexLayout(t){this.totalDisplay=t,this.childDisplays=t.childrenInUnitOrder,this.margins=this.makeExpandedMarginsFrom(t.margins),this.updateJointRenderBox()}updateJointRenderBox(){let t=this.outLayout.node.tree.style.get("layout","avoid-overlay"),e=N.isOblique(this.alignDirection)||!t;this.jointRenderBox=e?_.fromUnion(...this.childDisplays.map((t=>t.toRenderBoxInParentOrigin())))||new _(0,0,0,0):this.totalDisplay.toLocalRenderBox()}translateInLayoutFrom(t,e){let i=this.inLayouts.indexOf(t);if(i>-1)for(let t=i;t<this.childDisplays.length;t++)this.childDisplays[t].x+=e.x,this.childDisplays[t].y+=e.y}reStackAfterItemsTranslated(){this.totalDisplay.expandToFitContent(),this.acceptFlexLayout(this.totalDisplay)}setBoundaryBoxInParentOrigin(t){this.boundaryBoxInParentOrigin=t}getBoundaryRenderBox(){let t=this.jointRenderBox;if(this.boundaryBoxInParentOrigin){let e=this.boundaryBoxInParentOrigin.translate(-this.toParentOriginTranslate.x,-this.toParentOriginTranslate.y);t=t.union(e)}return t}setBoundaryExtendedBoxesInParentOrigin(t){this.boundaryBoxesInParentOrigin=t}getRangedBoundaryExtendedBoxInParentOrigin(t,e){var i;let n=[];for(let o=t;o<e;o++)n.push((null===(i=this.boundaryBoxesInParentOrigin)||void 0===i?void 0:i[o])||this.inLayouts[o].getJointRenderBoxInParentOrigin());return _.fromUnion(...n)}getChildInPointAtIndex(t){let e=this.childDisplays[t];return this.getChildDisplayInPoint(e)}getChildDisplayInPoint(t){let e=t.unit.data;return e.toTopLeftOrigin(e.getLocalInPoint()).translate(t.x,t.y)}getConnectAnchor(t=this.connectDirection){let e=this.getMinimumMargin(),i=this.totalDisplay.toLocalRenderBox();if(this.boundaryBoxInParentOrigin){let e=this.boundaryBoxInParentOrigin.translate(-this.toParentOriginTranslate.x,-this.toParentOriginTranslate.y);i=N.isStraight(t)?i.unionAtHVDirection(e,N.isHorizontal(t)?"horizontal":"vertical"):i.union(e)}return ts.makeAnchorFomBox(i,t,this.margins,e)}makeExpandedMarginsFrom(t){let e=this.getMinimumMargin(),i=this.connectDirection,n=N.getOpposite(i),o=N.toDirection4Keys(n);for(let i of o)a=e,(r=t)[s=i]=Mi(r[s],a);var r,s,a;return t}getJointRenderBoxInParentOrigin(){return 0===this.inLayouts.length?null:this.jointRenderBox.translate(this.toParentOriginTranslate.x,this.toParentOriginTranslate.y)}getOneSideRenderBoxInParentOrigin(t){return this.jointRenderBox.translate(this.toParentOriginTranslate.x,this.toParentOriginTranslate.y)}getOneSideRenderBoxPreferDirectionInParentOrigin(t){return this.getOneSideRenderBoxInParentOrigin(null)}getMargins(){return 0===this.inLayouts.length?null:this.margins}getConnectDirectionOf(t){return this.connectDirection}getAlignDirectionOf(t){return this.alignDirection}getExtendDirectionOf(t){return this.getNormalExtendDirection()}getNormalExtendDirection(){let t;return t=N.isStraight(this.alignDirection)?N.getPerpendicularPositive(this.alignDirection):N.getVerticalMirror(this.alignDirection),N.isCloseWith(t,this.connectDirection)&&(t=N.getOpposite(t)),t}getChildStackerBoxInParentOrigin(t){return this.getJointRenderBoxInParentOrigin()}getStackedSiblingsOf(t){return this.inLayouts}getStackedChildList(){return[this.inLayouts]}getMainSideChildList(){return this.inLayouts}getAllSidesChildList(){return[this.inLayouts].filter((t=>t.length>0))}getStackedChildGroup(){return[{children:this.inLayouts,connectDirection:this.connectDirection,alignDirection:this.alignDirection,extendDirection:this.getNormalExtendDirection(),startIndex:0}]}}class Ts extends Ss{constructor(){super(...arguments),this.additionalTranslates=[]}stack(){let t=this.doFlexDisplay();this.acceptFlexLayout(t)}doFlexDisplay(){let t=this.makeFlexUnit().doDisplay();return N.isOblique(this.alignDirection)&&t.children.length>0&&this.handleSkew(t),t}makeFlexUnit(){let t=this.makeFlexRootUnit();for(let e of this.inLayouts){let i=this.makeChildUnit(e);t.append(i)}return t}makeChildUnit(t){let e=new Ii;return e.data=t,e.width=t.jointRenderBox.width,e.height=t.jointRenderBox.height,e.margin=B(t.jointMargins),e}makeFlexRootUnit(){let t=new Ii;return N.isHorizontal(this.alignDirection)&&(N.isCloseWith(this.connectDirection,R.Bottom)?t.direction="column-reverse":t.direction="column",t.alignItems=this.alignDirection===R.Left?"start":"end"),N.isVertical(this.alignDirection)?(N.isCloseWith(this.connectDirection,R.Right)?t.direction="row-reverse":t.direction="row",t.alignItems=this.alignDirection===R.Top?"start":"end"):(N.isCloseWith(this.connectDirection,R.Bottom)?t.direction="column-reverse":t.direction="column",t.alignItems=N.isCloseWith(this.alignDirection,R.Left)?"start":"end"),t}applyOffset(t){let e=t.children;if(0===e.length)return;if(!e.some((t=>t.unit.data.node.ownData.layoutOffset)))return void(this.additionalTranslates=null);let i=e[0].unit.data,n=i.getInConnectDirection(),o=N.getOpposite(N.getStraightPreferHorizontal(n)),r=N.toVector(o),s=this.getExtendDirectionOf(i),a=N.toVector(s),l=o===s;this.additionalTranslates=new Array(e.length);let h=e.map((t=>{var e;return(null===(e=t.unit.data.node.ownData.layoutOffset)||void 0===e?void 0:e.y)||0})),d=this.outLayout.node.tree.style.get("layout","avoid-overlay");d&&(h=function(t){let e=vt(t,(t=>Math.abs(t))),i=[...t];for(let e=1;e<t.length;e++){let n=Math.max(0,t[e]-t[e-1]);i[e]=i[e-1]+n}let n=t[e]-i[e];if(0!==n)for(let e=0;e<t.length;e++)i[e]+=n;return i}(h));for(let t=0;t<e.length;t++){let i=e[t],n=i.unit.data.node.ownData.layoutOffset,o=Math.max((null==n?void 0:n.x)||0,0),s=h[t];if(l&&(o=0),o>0||0!==s){let e=r.multiplyScalar(o).add(a.multiplyScalar(s));i.x+=e.x,i.y+=e.y,this.additionalTranslates[t]=e}}d&&t.fitContent()}handleSkew(t){this.alignDirection===R.TopLeft||this.alignDirection===R.BottomRight?this.skewBasedOnBottomLeft(t):this.alignDirection!==R.BottomLeft&&this.alignDirection!==R.TopRight||this.skewBasedOnTopLeft(t)}skewBasedOnBottomLeft(t){let e=this.outLayout.node.tree.style.getSkewAspectRatio(),i=t.height,n=t.children,o=N.getVerticalPart(this.alignDirection),r=N.getHorizontalPart(this.alignDirection),s=n.map((t=>{let n=this.getChildDisplayInPoint(t),s=(i-n.y)*e,a=this.getSkewChildStackerPointAtDirection(t,o,r);if(a){let t=(i-a.y)*e-(a.x-n.x);return r===R.Right?Math.min(s,t):Math.max(s,t)}return s}));for(let t=0;t<n.length;t++){let e=n[t],i=s[t];e.x+=i}t.width+=i*e}skewBasedOnTopLeft(t){let e=this.outLayout.node.tree.style.getSkewAspectRatio(),i=t.height,n=t.children,o=N.getVerticalPart(this.alignDirection),r=N.getHorizontalPart(this.alignDirection),s=n.map((t=>{let i=this.getChildDisplayInPoint(t),n=i.y*e,s=this.getSkewChildStackerPointAtDirection(t,o,r);if(s){let t=s.y*e-(s.x-i.x);return r===R.Right?Math.min(n,t):Math.max(n,t)}return n}));for(let t=0;t<n.length;t++){let e=n[t],i=s[t];e.x+=i}t.width+=i*e}getSkewChildStackerPointAtDirection(t,e,i){let n=t.unit.data,o=n.branchStacker.getJointRenderBoxInParentOrigin();if(!o)return null;let r=N.joinDirections(e,i),s=n.toTopLeftOrigin(o).anchorPointAt(r);s=s.translate(t.x,t.y);let a=n.jointMargins[N.toStraightDirection4Key(i)];return s=s.add(N.toVector(i).multiplyScalar(a)),s}getConnectAnchor(t=this.connectDirection){let e=super.getConnectAnchor(t);if(this.inLayouts.length>0)if(N.isStraight(t)){let i=this.adjustConnectPointByChildInPoints(t);i&&(e.point=i)}else(t===this.alignDirection||N.isOpposite(t,this.alignDirection))&&this.adjustConnectPointAtObtuseAngle(e);return e}adjustConnectPointByChildInPoints(t){let e=null;if(t!==this.alignDirection||this.outLayout.connectionLayout.isConnectOnlyToTails())t===this.alignDirection||t===this.connectDirection&&(e=this.getChildInPointAtIndex(0));else{let i=this.getUnTranslatedChildInPointAtIndex(0),n=this.getUnTranslatedChildInPointAtIndex(this.inLayouts.length-1);e=i.mix(n,.5),this.inLayouts.length>2&&(e=this.fixChildInPointLittle(e,t))}if(e){let i=new Pt(e,N.toVector(t));return Pt.getClosestIntersectPointWithBox(this.getBoundaryRenderBox(),i)||e}return null}fixChildInPointLittle(t,e){let i=this.outLayout.node.tree.style.get("layout","connect-max-aligning-position-fixing");if(0===i)return t;let n=N.toVector(N.getPerpendicularPositive(e)),o=1/0,r=null;for(let e=1;e<this.inLayouts.length-1;e++){let i=this.getUnTranslatedChildInPointAtIndex(e),s=Math.abs(i.diff(t).dot(n));if(!(s<o))break;o=s,r=i}let s=1/0,a=null;for(let e=0;e<this.inLayouts.length-1;e++){let i=this.getUnTranslatedChildInPointAtIndex(e),o=this.getUnTranslatedChildInPointAtIndex(e+1),r=i.mix(o,.5),l=Math.abs(r.diff(t).dot(n));if(!(l<s))break;s=l,a=r}let l=Math.min(o,s);return l<i?o===l?r:a:t}getUnTranslatedChildInPointAtIndex(t){let e=this.getChildInPointAtIndex(t),i=this.additionalTranslates?this.additionalTranslates[t]:null;return i&&(e=e.minus(i)),e}adjustConnectPointAtObtuseAngle(t){let e=this.outLayout.node.tree.style.getSkewAspectRatio(),i=t.point,n=-N.toVector(N.getHorizontalPart(this.alignDirection)).x;if(this.alignDirection===R.TopLeft||this.alignDirection===R.TopRight){let t=this.totalDisplay.height;i.x+=(t-i.y)*e*n}else i.x+=i.y*e*n;t.marginX=0}alignAnchorPoints(t,e=this.getConnectAnchor()){let i=ts.getAligningTranslate(t,e);for(let t=0;t<this.inLayouts.length;t++){let e=this.inLayouts[t],n=this.childDisplays[t],o=this.additionalTranslates?this.additionalTranslates[t]:void 0,r=n.x+i.x,s=n.y+i.y;r-=e.jointRenderBox.x,s-=e.jointRenderBox.y,o&&(r-=o.x,s-=o.y),e.setBasicTranslateFromParent(new P(r,s)),o&&e.setAdditionalTranslate(o)}this.toParentOriginTranslate=i}}class Ms extends Ts{constructor(t,e,i){if(super(t,e,i),this.timelineMargin=0,!N.isStraight(e))throw new Error("Only support straight directions!")}doFlexDisplay(){let t=this.makeFlexUnit().doDisplay();return this.applyOffset(t),this.adjustAligningInTimeLine(t),t}makeChildUnit(t){let e=super.makeChildUnit(t);return N.isHorizontal(this.connectDirection)?e.margin=[0,this.timelineMargin]:e.margin=[this.timelineMargin,0],e}adjustAligningInTimeLine(t){0!==t.children.length&&(N.isHorizontal(this.connectDirection)?this.adjustHorizontalAligningInTimeline(t):this.adjustVerticalAligningInTimeline(t),t.expandToFitContent())}adjustHorizontalAligningInTimeline(t){let e=this.getChildDisplayInPoint(t.children[0]).y;for(let i=0;i<t.children.length;i++){let n=t.children[i],o=e-this.getChildDisplayInPoint(n).y;n.y+=o}}adjustVerticalAligningInTimeline(t){let e=this.getChildDisplayInPoint(t.children[0]).x;for(let i=0;i<t.children.length;i++){let n=t.children[i],o=e-this.getChildDisplayInPoint(n).x;n.x+=o}}}class As extends ys{constructor(t){super(t),this.summaried=[],this.hasAnyBranch=!1,this.contentAnchor=null,this.contentBoxInParentOrigin=_.empty(),this.boundaryExtendedContentBoxInParentOrigin=_.empty(),this.jointRenderBox=_.empty(),this.computedStartIndex=0,this.computedEndIndex=0,this.branchLayout=new Cs(t)}get connectionLayout(){return Fo.get(this.node.summaryConnectionNode)}get summaryChildren(){return this.node.summaryChildren.map((t=>Fo.get(t)))}get boundaryChildren(){return this.node.boundaryChildren.map((t=>Fo.get(t)))}get rangedBoundaryChildren(){return this.node.boundaryChildren.filter((t=>!t.ownData.containingAttached)).map((t=>Fo.get(t)))}get unRangedBoundaryChildren(){return this.node.boundaryChildren.filter((t=>t.ownData.containingAttached)).map((t=>Fo.get(t)))}get sameSideSiblings(){if(!this.parent)return[this];let t=this.getOutConnectDirection();return this.parent.summaryChildren.filter((e=>e.getOutConnectDirection()===t))}get previousSibling(){let t=this.sameSideSiblings,e=t.indexOf(this);return e>0?t[e-1]:null}get nextSibling(){let t=this.sameSideSiblings,e=t.indexOf(this);return-1!==e&&e<t.length-1?t[e+1]:null}hasSummariedAnyBranches(){return this.hasAnyBranch}getBranchLayout(){return this.branchLayout}getChildExtendDirection(){let t=this.parent.getBranchLayout().branchStacker,e=this.summaried[0];return t.getExtendDirectionOf(e)}*walkBranchsAndSummaries(){yield this;for(let t of this.getBranchLayout().branchChildren)yield*t.walkBranchsAndSummaries();for(let t of this.summaryChildren)yield*t.walkBranchsAndSummaries()}setMatrixInPaperOriginDeeply(t){super.setMatrixInPaperOriginDeeply(t),this.branchLayout.setMatrixInPaperOriginDeeply(t)}getMainSideInLayouts(){return this.summaried.length>1?[this.summaried[0],this.summaried[this.summaried.length-1]]:this.summaried}getAllSidesInLayouts(){return[this.getMainSideInLayouts()]}getFirstInLayout(){return this.summaried[0]}getLastInLayout(){return this.summaried[this.summaried.length-1]}getAllInLayouts(){return this.summaried}getPrevioisOfFirstInLayout(){return this.getFirstInLayout().previousSameSideSibling}getNextOfLastInLayout(){return this.getLastInLayout().nextSameSideSibling}*iterablePrevioisBeforeFirstInLayout(){let t=this.getFirstInLayout(),e=t.sameSideSiblings;for(let i=e.indexOf(t)-1;i>=0;i--)yield e[i]}*iterableNextAfterLastInLayout(){let t=this.getLastInLayout(),e=t.sameSideSiblings,i=e.indexOf(t);if(-1!==i)for(let t=i+1;t<e.length;t++)yield e[t]}doLayout(){this.resetAdditionalTranslate(),this.branchLayout.doLayout(),this.doSelfLayout(),mi((()=>this.updateConnectionLayout()))}doSelfLayout(){this.makeBranchChildren(),this.makeSummaryLayoutProperties(),this.updateBoxesAndAligning()}makeBranchChildren(){let t=this.parent.getBranchLayout().branchChildren,e=t;if(t.length>0){let{startIndex:i,endIndex:n}=this.node.ownData;i=Math.min(Math.max(0,null!=i?i:0),t.length-1),n=Math.min(Math.max(null!=n?n:0,i+1),t.length);let o=t[i],r=t[n-1],s=o.sameSideSiblings;s.includes(r)||(n=i+s.length-s.indexOf(o)),e=t.slice(i,n).filter((t=>s.includes(t))),this.computedStartIndex=i,this.computedEndIndex=n}e.length>0?(this.summaried=e,this.hasAnyBranch=!0):(this.summaried=[this.parent.getBranchLayout()],this.hasAnyBranch=!1)}makeSummaryLayoutProperties(){let t=this.parent.getBranchLayout().branchStacker,e=this.hasAnyBranch?t.getAlignDirectionOf(this.summaried[0]):N.getOpposite(this.parent.getOutConnectDirection());if(e===R.Center){let t=this.parent.parent;for(;t&&e===R.Center;)e=t.getOutConnectDirection()}e=N.getStraightPreferHorizontal(e),this.hasAnyBranch&&t instanceof Ms&&this.summaried[0].getOutConnectDirection()===e&&(e=N.getOpposite(e)),this.setOut(e),this.setIn(e)}updateBoxesAndAligning(){this.makeChildrenAnchorAndContentBox();let t=this.branchLayout.jointRenderBox;for(let e of this.boundaryChildren)t=t.union(e.getRenderBoxInParentOrigin());this.jointRenderBox=t,this.jointMargins=this.branchLayout.jointMargins,this.alignSummaryAnchorPoints()}makeChildrenAnchorAndContentBox(){let t=this.parent.getBranchLayout().branchStacker,e=this.summaried[0],i=this.summaried[this.summaried.length-1],n=this.inConnectDirection,o=t.getExtendDirectionOf(e),r=N.joinDirections(n,N.getOpposite(o)),s=N.joinDirections(n,o),a=e.getJointConnectPoint(r),l=i.getJointConnectPoint(s);this.hasAnyBranch&&(a=e.toParentOrigin(a),l=i.toParentOrigin(l));let h=a.mix(l,.5),d=this.getNormalContentBoundaryExtendedBox(),c=N.toVector(n),u=new Pt(h,c),p=Pt.getClosestIntersectPointWithBoxExtended(d,u),m=this.node.tree.style.get("layout","summary-minimum-margin"),g=ts.makeAnchorFromPoint(p,n,this.jointMargins,m);this.contentAnchor=g,this.boundaryExtendedContentBoxInParentOrigin=d,this.contentBoxInParentOrigin=this.getNormalContentBox()}getNormalContentBoundaryExtendedBox(){return this.hasAnyBranch?this.parent.getBranchLayout().branchStacker.getRangedBoundaryExtendedBoxInParentOrigin(this.computedStartIndex,this.computedEndIndex):this.parent.getLocalRenderBox()}getNormalContentBox(){if(this.hasAnyBranch){let t=this.summaried.map((t=>t.getJointRenderBoxInParentOrigin()));return _.fromUnion(...t)}return this.parent.getLocalRenderBox()}alignSummaryAnchorPoints(){let t=this.marginedAnchorAt(this.outConnectDirection),e=this.contentAnchor,i=ts.getAligningTranslate(e,t);this.setBasicTranslateFromParent(i)}marginedAnchorAt(t){let e=super.marginedAnchorAt(t),i=this.boundaryChildren;if(i.length>0){let t=i[0].node.style.get("boundary-padding");e.point=e.point.add(N.toVector(e.direction).multiplyScalar(t))}return e}localConnectPointAt(t){let e=super.localConnectPointAt(t),i=this.boundaryChildren;if(i.length>0){let n=i[0].node.style.get("boundary-padding");e=e.add(N.toVector(t).multiplyScalar(n))}return e}updateConnectionLayout(){Fo.get(this.node.summaryConnectionNode).doLayout()}getJointRenderBoxInParentOrigin(){return this.toParentOrigin(this.jointRenderBox)}getJointRenderBoxInPaperOrigin(){return this.toPaperOrigin(this.jointRenderBox)}getContentBoxInPaperOrigin(){return this.parent.toPaperOrigin(this.contentBoxInParentOrigin)}getBoundaryExtendedContentBoxInPaperOrigin(){return this.parent.toPaperOrigin(this.boundaryExtendedContentBoxInParentOrigin)}getDirectionalMinimumContentBoxInPaperOrigin(t){if(1===this.summaried.length)return this.summaried[0].getJointRenderBoxInPaperOrigin();{let e;return e=t===this.parent.branchStacker.getExtendDirectionOf(this.summaried[0])?this.summaried[this.summaried.length-1]:this.summaried[0],e.getJointRenderBoxInPaperOrigin()}}getMaxContentBoxInPaperOrigin(){if(this.hasAnyBranch){let t=this.parent.branchStacker.getChildStackerBoxInParentOrigin(this.summaried[0]);return this.parent.toPaperOrigin(t)}return this.parent.getJointRenderBoxInPaperOrigin()}getStackedSiblingsOf(){return this.summaried}getStackedList(){return[this.summaried]}getNormalOutConnectDirectionTo(t=null){return this.outConnectDirection}}Fo.register("summary",As);class Ps{constructor(t,e){this.dropBoxes=[],this.willTestDropBoxes=!1,this.makeWideMindLayoutDropAreas=!0,this.paper=t,this.draggingLayouts=e,this.partitionMargin=t.style.get("layout","partition-margin"),this.previewSize=new P(2*this.partitionMargin,.5*this.partitionMargin),this.initDropBoxes(),this.querier=new Ds(this.dropBoxes),this.willTestDropBoxes&&this.testDropDoxes()}shouldExclude(t){return!(t instanceof As)&&this.draggingLayouts.includes(t)}initDropBoxes(){for(let{layout:t,excluded:e}of this.walkLayouts()){for(let{children:i,alignDirection:n,extendDirection:o,connectDirection:r,startIndex:s}of t.getBranchLayout().branchStacker.getStackedChildGroup()){let a=this.dropBoxes.length;if(N.isOpposite(r,o)&&(n=R.Center),0===i.length?this.makeDropBoxWhenNoChildrenExist(t,e,n,o,s):this.makeSiblingDropBoxes(i,t,e,n,o,r),this.makeWideMindLayoutDropAreas&&"mind"===t.node.style.get("layout")){let e=this.dropBoxes.slice(a);e.some((t=>t.excluded))||this.makeMindLayoutDropAreasWide(t,e,n,o)}}e||this.makeSelfDropBoxForChildren(t)}}*walkLayouts(){for(let t of this.paper.treeLayout.rootChildren){let e=this.shouldExclude(t);yield{layout:t,excluded:e},yield*this.walkChildLayouts(t,e)}}*walkChildLayouts(t,e){let i=t.getBranchLayout();for(let t of[...i.branchChildren,...i.summaryChildren]){let i=e||this.shouldExclude(t);yield{layout:t,excluded:i},yield*this.walkChildLayouts(t,i)}}testDropDoxes(){let t=[];for(let e of this.dropBoxes){let i=new Ve;i.x=e.box.x,i.y=e.box.y,i.width=e.box.width,i.height=e.box.height,i.setStyle("fill","#000"),i.setStyle("fill-opacity",e.excluded?"0":"0.1"),i.setStyle("stroke","#888"),i.setStyle("pointer-events","none"),i.element.dataset.description=e.parent.id+" "+e.index,this.paper.k.appendShape(i),t.push(i)}Y.on(document,"mouseup",(()=>{for(let e of t)e.remove()}))}makeSiblingDropBoxes(t,e,i,n,o,r){let s=t[0],a=t[t.length-1],l=i||this.shouldExclude(s);N.isOpposite(o,r)?this.makeDropBoxBetweens(e,s,e,l,n,o):this.makeDropBoxAtEdge(s,e,l,!0,n,o);for(let r=1;r<t.length;r++){let s=t[r-1],a=t[r],l=i||this.shouldExclude(s)||this.shouldExclude(a);this.makeDropBoxBetweens(s,a,e,l,n,o)}let h=i||this.shouldExclude(a);this.makeDropBoxAtEdge(a,e,h,!1,n,o)}makeDropBoxWhenNoChildrenExist(t,e,i,n,o){let r=N.getStraightPreferHorizontal(i),s=N.toVector(r),a=N.getStraightPreferVertical(n),l=N.toVector(a),h=t.getRenderBoxInPaperOrigin(),d=t.getOutConnectDirection(N.getOpposite(r)),c=N.toVector(d),u=N.splitToOrthogonalDirections(d),p=t.getOutVectorDirection(),m=this.getMarginToChildAtDirection(t,N.getStraightPreferVertical(d),r),g=h.anchorPointAt(u[0]),f=h.anchorPointAt(u[1]),y=c.multiplyScalar(m),x=this.previewSize.multiply(c).add(y.multiplyScalar(2)),w=g.add(x),v=f.add(x),b=_.fromPoints(g,f,w,v),k=new P(h.width,h.height),C=c.multiply(k),S=g.add(C),T=f.add(C),M=b.expandToContain(S).expandToContain(T),A=b;b=this.expandBoxWithPerpendicularMargins(t,b);let D=A.anchorPointAt(r),I=h.anchorPointAt(d);D=I.add(D.diff(I).projectTo(l)),D=this.unProjectPointToDirection(D,I,p),D=D.add(s.multiplyScalar(-this.partitionMargin));let E=N.getOpposite(r),L=r,O=-1;"mind"===t.getBranchLayout().node.style.get("layout")&&i===R.Right&&(O=-2),this.dropBoxes.push({parent:t.node,index:o,neighborIndex:O,box:M,boxArea:M.area,outPoint:null,inPoint:D,interestPoint:D,inVectorDirection:E,inConnectDirection:L,excluded:e})}getMarginToChildAtDirection(t,e,i){let n=this.getMarginAtDirection(t,e);return N.isCloseWith(N.getOpposite(e),i)&&(n=Math.max(n,this.partitionMargin)),n}getMarginAtDirection(t,e){var i;let n=N.toStraightDirection4Key(e);if(null===n)return 0;let o=(null===(i=t.getBranchLayout().getExpanderMargins())||void 0===i?void 0:i[n])||0,r=t.node.style.getDirection4Object("margin")[n];return r=Math.min(r,this.partitionMargin/2),Math.max(r,o)}expandBoxWithPerpendicularMargins(t,e){let i=t.parent?t.parent.getBranchLayout().branchStacker.getAlignDirectionOf(t):t.getBranchLayout().branchStacker.getAlignDirectionOf(t),n=N.getStraightPreferHorizontal(i),o=t.node.style.getDirection4Object("margin"),r=N.splitToBackDirections(n),s=function(t,e){let{top:i,right:n,bottom:o,left:r}=t;return i=e.includes("top")?i:0,n=e.includes("right")?n:0,o=e.includes("bottom")?o:0,r=e.includes("left")?r:0,{top:i,right:n,bottom:o,left:r}}(o,[N.toStraightDirection4Key(r[0]),N.toStraightDirection4Key(r[1])]);return e.expandWithObject(s)}unProjectPointToDirection(t,e,i){let n=t.diff(e),o=N.toVector(i),r=n.unProjectTo(o);return e.add(r)}makeDropBoxAtEdge(t,e,i,n,o,r){let s=N.getStraightPreferHorizontal(o),a=n?N.getOpposite(r):r,l=N.getStraightPreferVertical(a),h=N.toVector(l),d=t.getRenderBoxInPaperOrigin(),c=N.splitToBackDirections(l);N.isCloseWith(s,c[1])&&(c=c.reverse());let u=d.anchorPointAt(c[0]),p=d.anchorPointAt(c[1]),m=N.splitToOrthogonalDirections(l),g=d.anchorPointAt(m[0]),f=d.anchorPointAt(m[1]),y=this.previewSize.multiply(h),x=this.getMarginAtDirection(t,l),w=h.multiplyScalar(2*x).add(y),v=new P(d.width,d.height).multiply(h),b=w.add(v.multiplyScalar(.5)),k=g.add(b),C=f.add(b),S=_.fromPoints(u,p,k,C),T=e.getBranchLayout().connectionLayout.getAdjustedOutPoint(t),M=S.anchorPointAt(s),A=t.toPaperOrigin(t.getLocalInPoint());M=this.unProjectPointToDirection(M,A,a);let D=M.add(v.multiplyScalar(-.5)),I=t.getInVectorDirection(),E=o===R.Center?o:t.getInConnectDirection(),L=t.node.getSameTypeIndex(),O=n?L:L+1;this.dropBoxes.push({parent:e.node,index:O,neighborIndex:L,box:S,boxArea:S.area,outPoint:T,inPoint:M,interestPoint:D,inVectorDirection:I,inConnectDirection:E,excluded:i})}makeDropBoxBetweens(t,e,i,n,o,r){let s=N.getStraightPreferHorizontal(o),a=N.getStraightPreferVertical(r),l=N.toVector(a),h=t.getRenderBoxInPaperOrigin(),d=e.getRenderBoxInPaperOrigin(),c=N.splitToBackDirections(a);N.isCloseWith(s,c[1])&&(c=c.reverse());let u=h.anchorPointAt(c[0]),p=h.anchorPointAt(c[1]),m=d.anchorPointAt(c[0]),g=d.anchorPointAt(c[1]),f=u.add(m.diff(u).projectTo(l).multiplyScalar(.5)),y=p.add(g.diff(p).projectTo(l).multiplyScalar(.5)),x=m.add(u.diff(m).projectTo(l).multiplyScalar(.5)),w=g.add(p.diff(g).projectTo(l).multiplyScalar(.5)),v=_.fromPoints(u,p,f,y),b=_.fromPoints(m,g,x,w),k=N.joinDirections(a,s),C=N.joinDirections(N.getOpposite(a),s),S=h.anchorPointAt(k),T=d.anchorPointAt(C),M=i.getBranchLayout().connectionLayout.getAdjustedOutPoint(t),A=i.getBranchLayout().connectionLayout.getAdjustedOutPoint(e),P=M.mix(A,.5),D=S.mix(T,.5),I=e.getInVectorDirection(),E=o===R.Center?o:e.getInConnectDirection(),L=t.node.getSameTypeIndex(),O=e.node.getSameTypeIndex();this.dropBoxes.push({parent:i.node,index:O,neighborIndex:L,box:v,boxArea:v.area,outPoint:P,inPoint:D,interestPoint:D,inVectorDirection:I,inConnectDirection:E,excluded:n}),this.dropBoxes.push({parent:i.node,index:O,neighborIndex:O,box:b,boxArea:b.area,outPoint:P,inPoint:D,interestPoint:D,inVectorDirection:I,inConnectDirection:E,excluded:n})}makeSelfDropBoxForChildren(t){let e=this.dropBoxes[this.dropBoxes.length-1],i=t.getRenderBoxInPaperOrigin();this.dropBoxes.push({...e,box:i,boxArea:i.area,interestPoint:i.center})}makeMindLayoutDropAreasWide(t,e,i,n){let o=t.getRenderBoxInPaperOrigin().center,r=N.toVector(i),s=N.toVector(n),a=N.joinDirections(n,i),l=N.joinDirections(N.getOpposite(n),i);for(let t of e){let e=t.box,i=e.center.add(o.diff(e.center).projectTo(r));e=e.expandToContain(i);let n=e.center.add(r.multiplyScalar(-1e5));e=e.expandToContain(n),t.box=e}for(let t=0;t<e.length;t++){let i=e[t],n=i.box,o=t>0?e[t-1].box:null,r=t<e.length-1?e[t+1].box:null;if(o){let t=o.anchorPointAt(a),e=n.anchorPointAt(l),i=t.mix(e,.5);n=n.expandToContain(i)}else{let t=n.anchorPointAt(a).add(s.multiplyScalar(-1e5));n=n.expandToContain(t)}if(r){let t=n.anchorPointAt(a),e=r.anchorPointAt(l).mix(t,.5);n=n.expandToContain(e)}else{let t=n.anchorPointAt(l).add(s.multiplyScalar(1e5));n=n.expandToContain(t)}i.box=n,i.boxArea=1e6}}makeCustomDropBox(t){var e;let i=null===(e=t.parent)||void 0===e?void 0:e.getBranchLayout();if(!i)return null;let n=t.getRenderBoxInPaperOrigin(),o=i.connectionLayout.getAdjustedOutPoint(t),r=t.toPaperOrigin(t.getLocalInPoint()),s=t.node.getSameTypeIndex(),a=t.getInVectorDirection(),l=t.getInConnectDirection();return{parent:i.node,index:s,neighborIndex:-1,box:n,boxArea:n.area,outPoint:o,inPoint:r,interestPoint:r,inVectorDirection:a,inConnectDirection:l,excluded:!1}}queryAt(t){return this.querier.query(t)}}class Ds{constructor(t,e=200){this.dropBoxes=[],this.cachedPoint=null,this.cachedIndices=null,this.dropBoxes=t,this.cacheDistance=e}query(t){this.isCacheValid(t)||this.makeCache(t);let e=[];for(let i of this.cachedIndices){let n=this.dropBoxes[i],{box:o}=n;this.queryABox(t,o)&&e.push(n)}return e.length>0?bt(e,(e=>e.interestPoint.diff(t).getLength()*e.boxArea)):null}isCacheValid(t){if(!this.cachedPoint)return!1;let e=t.diff(this.cachedPoint);return Math.abs(e.x)<=this.cacheDistance&&Math.abs(e.y)<=this.cacheDistance}makeCache(t){this.cachedIndices=[];for(let e=0;e<this.dropBoxes.length;e++){let{box:i}=this.dropBoxes[e];this.queryABoxWithDistance(t,i)&&this.cachedIndices.push(e)}this.cachedPoint=t}queryABox(t,e){return e.containsPoint(t)}queryABoxWithDistance(t,e){return e.expand(this.cacheDistance).containsPoint(t)}}class Is{constructor(t){this.pointMap=new Map,this.connectionLayout=t,this.outLayout=t.outLayout}update(){this.pointMap.clear();for(let t of this.outLayout.getStackedList())0!==t.length&&this.makeLocalAdjustedOutPoint(t)}getLocalAdjustedOutPoint(t){return this.pointMap.has(t)?this.pointMap.get(t):this.outLayout.getLocalRenderBox().center}makeLocalAdjustedOutPoint(t){let e=t[0].getInConnectDirection(),i=this.outLayout.getOutConnectDirection(e),n=this.outLayout.getLocalRenderBox(),o=n.center,r=this.outLayout.getOutVectorDirection(e),s=N.toVector(r),a=this.connectionLayout.computedConnectStartWidth,l=N.isHorizontal(i),h=this.makeSiblingRates(t,l),d=a/2,c=(l?n.width:n.height)/2-d;for(let e=0;e<t.length;e++){let i=t[e],n=h[e],r=2;n=Math.log((r-1)*n+1)/Math.log(r);let a=c*n,l=o.add(s.multiplyScalar(-a));this.pointMap.set(i,l)}}makeSiblingRates(t,e){var i,n;let o=St(t.map(((t,i)=>({translate:e?t.getFinalTranslateFromParent().y:t.getFinalTranslateFromParent().x,index:i}))),(t=>[this.getFlag(t.translate),t])),r=o.get(-1)||[],s=o.get(1)||[];r.forEach((t=>t.translate=Math.abs(t.translate))),s.forEach((t=>t.translate=Math.abs(t.translate))),r.sort(((t,e)=>t.translate-e.translate)),s.sort(((t,e)=>t.translate-e.translate));let a=((null===(i=r[0])||void 0===i?void 0:i.translate)||0)+1e-6,l=((null===(n=s[0])||void 0===n?void 0:n.translate)||0)+1e-6,h=(a-l)/(a+l)/2,d=r.length+h+1+.5,c=s.length-h+1+.5,u=new Array(t.length);for(let t=0;t<r.length;t++){let{index:e}=r[t],i=(r.length-1-t+.5)/d;u[e]=i}for(let t=0;t<s.length;t++){let{index:e}=s[t],i=(s.length-1-t+.5)/c;u[e]=i}return u}getFlag(t){return t>=0?1:-1}}class Es{constructor(t){this.computedConnectStartWidth=0,this.outK=null,this.inKs=[],this.inLayouts=[],this.processor=null,this.processorType="",this.eventlyAdjustment=null,this.node=t,this.initOut()}initOut(){this.outNode=this.node.outNode,this.outLayout=this.node.getOutLayout()}doLayout(){this.doSelfLayout()}doSelfLayout(){this.ensureProcessor(),this.computeMayTaperedConnectStartWidth(),this.updateEventlyAdjustment();let t=this.makeNormalInLayouts();this.updateOut(t.length>0),this.updateIns(t),t.length>0&&this.processor.updateLayouts()}updateEventlyAdjustment(){"evenly"===this.node.style.get("connect-out-adjust")?(this.eventlyAdjustment||(this.eventlyAdjustment=new Is(this)),this.eventlyAdjustment.update()):this.eventlyAdjustment&&(this.eventlyAdjustment=null)}isConnectOnlyToTails(){var t;return this.ensureProcessor(),this.node instanceof Zr||!!(null===(t=this.processor)||void 0===t?void 0:t.connectOnlyToTails)}isConnectWithoutStroking(){return this.isConnectOnlyToTails()||"transparent"===this.node.style.get("stroke-color")}computeMayTaperedConnectStartWidth(){let t;t=this.node.style.get("connect-tapered")&&this.outNode.isRoot?this.node.style.get("connect-tapered-start-width"):this.node.style.get("connect-width"),this.computedConnectStartWidth=t}makeNormalInLayouts(){let t=this.outLayout.getAllSidesInLayouts();return this.isConnectOnlyToTails()?t.map((t=>t.length>=1?[t[0],t[t.length-1]]:t.flat())).flat():t.flat()}updateOut(t){this.updateOutK(t),this.updateOutStyle()}updateOutK(t){t&&this.processor.willRenderIndepentOutPart?this.outK||(this.outK=new te,this.node.k.append(this.outK)):this.outK&&(this.outK.remove(),this.outK=null)}updateOutStyle(){if(!this.outK)return;let t=this.node.getOutConnectColor(),e=(this.node.getOutConnectDasharray()||[]).map((t=>t*this.computedConnectStartWidth));this.outK.setAttribute("fill","none"),this.outK.setAttribute("stroke",t),this.outK.setAttribute("stroke-width",this.computedConnectStartWidth),this.outK.setAttribute("stroke-dasharray",e.join(" ")||null)}updateIns(t){for(let e=this.inKs.length-1;e>=t.length;e--)this.inKs[e].remove(),this.inKs.pop();for(let e=this.inKs.length;e<t.length;e++)this.inKs[e]=new te,this.outK?this.outK.before(this.inKs[e]):this.node.k.append(this.inKs[e]);this.inLayouts=t;for(let e=0;e<t.length;e++)this.updateInStyle(t[e].node,this.inKs[e])}updateInStyle(t,e){let i=this.isConnectOnlyToTails(),n=i?this.node.getOutConnectWidth():this.node.getInConnectWidth(t),o=((i?this.node.getOutConnectDasharray():this.node.getInConnectDasharray(t))||[]).map((t=>t*n)),r=this.node.style.get("connect-tapered")&&!i;e.setAttribute("stroke-dasharray",r?null:o.join(" ")||null)}willConnectWithInNodeStroke(){return!this.isConnectOnlyToTails()}ensureProcessor(){let t=this.node.getConnect();t!==this.processorType&&(this.processor=Ho.create(t,this),this.processorType=t)}getAdjustedOutInPoints(t){return[this.getAdjustedOutPoint(t),this.getAdjustedInPoint(t)]}getAdjustedInPoint(t){return t.toPaperOrigin(t.getLocalFoldedInPoint())}getAdjustedOutPoint(t){let e,i=this.outLayout.getNormalOutConnectDirectionTo(t),n=this.node.style.get("connect-out-adjust"),o=this.processor.connectOnlyToTails;return e="evenly"!==n||o?"center"!==n||o?this.outLayout.getLocalFoldedOutPoint(i):this.outLayout.localConnectPointAt(R.Center):this.eventlyAdjustment.getLocalAdjustedOutPoint(t),e=this.outLayout.toPaperOrigin(e),e}getOutInDirections(t){let e=this.outLayout.getNormalOutConnectDirectionTo(t);if(this.isConnectOnlyToTails()){let t=this.outLayout.getOutVectorDirection(e);return[t,t]}return[this.outLayout.getOutVectorDirection(e),t.getInVectorDirection()]}getOutInDirectionVectors(t){let[e,i]=this.getOutInDirections(t),n=N.toVector(e),o=N.toVector(i);return N.isOblique(e)&&(n.x*=this.outLayout.node.tree.style.getSkewAspectRatio()),N.isOblique(i)&&(o.x*=this.outLayout.node.tree.style.getSkewAspectRatio()),[n,o]}getExpanderPoint(t=null){let e=this.outLayout.getNormalOutConnectDirectionTo(t),i=this.outLayout.toPaperOrigin(this.outLayout.getLocalOutPoint(e)),n=this.getOutToExpanderVector(t);return i.add(n)}getOutToExpanderVector(t=null){return this.isConnectOnlyToTails()?this.getExpanderCentralVector(t):this.getNormalExpanderVector(t)}getExpanderCentralVector(t=null){let e=this.outLayout.getNormalOutConnectDirectionTo(t),i=this.outLayout.toPaperOrigin(this.outLayout.getLocalOutPoint(e)),n=this.getShrinkedStackerBoxInPaperOriginOf(t),o=N.getOpposite(e),r=N.toVector(o),s=new Pt(i,r),a=Pt.getClosestIntersectPointWithBoxExtended(n,s);if(this.outLayout instanceof As){let t=this.outLayout.getAdditionalTranslate();a=a.add(t)}let l=N.toVector(e);return a.diff(i).projectTo(l).multiplyScalar(.5)}getNormalExpanderVector(t=null){let e=this.outLayout.getNormalOutConnectDirectionTo(t),i=this.outLayout.getOutVector(e),n=this.outLayout.getNormalOutPixels();return n=Math.max(n,this.computedConnectStartWidth),i.multiplyScalar(n)}shouldRenderOutUntilExpander(){let t=!0;return["none",void 0].includes(this.node.style.get("connect-out-adjust"))||(t=!1),t&&!this.isOutInDirectionsClose()&&(t=!1),t}isOutInDirectionsClose(){if(this.inLayouts.length>0){let[t,e]=this.getOutInDirections(this.inLayouts[0]);return N.isCloseWith(t,e)}return!0}getShrinkedStackerBoxInPaperOriginOf(t){let e=this.outLayout instanceof As?this.outLayout.getBoundaryExtendedContentBoxInPaperOrigin():this.outLayout.getOneSideRenderBoxInPaperOrigin(t);return t&&(e=e.expand(-t.node.style.get("stroke-width")/2)),e}getBundledLinePathData(){let t="";this.outK&&(t+=this.outK.getNormalPathD());for(let e of this.inKs)t+=e.getNormalPathD();return t}remove(){var t;null===(t=this.outK)||void 0===t||t.remove();for(let t of this.inKs)t.remove()}}Fo.register("connection",Es);class Ls extends Es{constructor(){super(...arguments),this.inNode=null,this.index=0,this.outPoint=null}initOut(){}setOutNode(t){this.outNode=t,this.outLayout=Fo.get(this.outNode).getBranchLayout()}setOutPoint(t){this.outPoint=t}setIndex(t){this.index=t}setInNode(t){this.inNode=t}getAdjustedOutPoint(t){var e;if(this.outPoint)return this.outPoint;let i=super.getAdjustedOutPoint(t);return(null===(e=this.processor)||void 0===e?void 0:e.connectSiblings)&&this.index>0&&(i=this.getPreviousLayoutInPointOpposite()),i}getShrinkedStackerBoxInPaperOriginOf(t){if(!t)return super.getShrinkedStackerBoxInPaperOriginOf(t);let e=t.getRenderBoxInPaperOrigin().center.diff(this.outLayout.getRenderBoxInPaperOrigin().center),i=N.fromVector(e),n=this.outLayout.getOneSideRenderBoxPreferDirectionInPaperOrigin(i);return t&&(n=n.expand(-t.node.style.get("stroke-width")/2)),n}getPreviousLayoutInPointOpposite(){if(0===this.index)return null;let t=this.outLayout.branchChildren[this.index-1],e=N.getOpposite(t.getInConnectDirection()),i=t.localConnectPointAt(e);return t.toPaperOrigin(i)}makeNormalInLayouts(){let t=Fo.get(this.inNode);return this.isConnectOnlyToTails()?[t,t]:[t]}}class Os extends qr{get outNode(){return this.cachedOutNode}setOutNode(t){this.cachedOutNode=t}getOutConnectColor(){return this.tree.style.get("content","outline-color")}getInConnectColor(){return this.tree.style.get("content","outline-color")}}!function(t){function e(t){return Ki.cloneDataItemDeeply(t,["commentCount"])}t.makePasteData=function(t){var e;let i=[],n=[...new Set(t.map((t=>t.parent)).filter((t=>t instanceof Hr)))];for(let o of n)if(o.data.summaries&&o.data.children&&o.data.children.length>0)for(let n of o.data.summaries){let r=[];for(let t=n.data.startIndex||0;t<n.data.endIndex;t++){let i=null===(e=o.data.children[t])||void 0===e?void 0:e.data.id;i&&r.push(i)}if(r.length>0){let e=1/0,s=-1;if(!r.every((e=>t.some((t=>t.id===e)))))continue;for(let i of t){let t=r.indexOf(i.id);t>-1&&(e=Math.min(e,t),s=Math.max(s,t))}s>-1&&i.push({parentId:o.id,fromIndex:e,toIndex:s+1,data:oe(n)})}}return i},t.cloneDataItemData=e,t.pasteDatasToNode=function(t,i,n,o){for(let r of t){if(r.parentId===i.id)continue;let t=o?e(r.data):r.data;t.data.startIndex=n+r.fromIndex,t.data.endIndex=n+r.toIndex,i.tree.dataManager.dataModifier.addTypedChild(t,i.id,-1,"Summary")}}}(is||(is={}));class Bs{constructor(t,e,i,n,o,r){this.draggingNodePrimary=null,this.draggingNodes=null,this.draggingPreviewGroupK=null,this.previewInFloatMode=!1,this.dropBoxQuerier=null,this.dropBox=null,this.dropIndicatorNode=null,this.dropIndicatorConnect=null,this.atLeastMoveToBecomeFloat=300,this.dragStartFromHold=!1,this.canOnlyDragToMovePosition=!1,this.untilDropIndicatorReady=Promise.resolve(),this.canOnlyMoveNode=!1,this.summarieDataItems=null,this.paper=t,this.selections=e,this.settings=i,this.commands=n,this.history=o,this.status=r,this.dragger=new mr(t,void 0,{holdToStart:!0}),this.initEvents()}initEvents(){this.dragger.on("will-start",this.willStartDragging,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("end",this.onDragEnd,this)}willStartDragging(t,e){if(!this.status.isReadWrite())return void e();let i=zo.fromClosestElement(t.target);i&&"Branch"===i.type&&"branch-root"!==i.classify||e()}onDragStart(t,e){var i;this.dragStartFromHold=e,this.canOnlyMoveNode=t.originalEvent.shiftKey,e&&(null===(i=navigator.vibrate)||void 0===i||i.call(navigator,60)),this.draggingNodePrimary=zo.fromClosestElement(t.target),t.originalEvent instanceof MouseEvent?this.selections.branch.select(this.draggingNodePrimary):this.selections.branch.selectOnly(this.draggingNodePrimary);let n=this.selections.branch.getSelected();n=this.paper.excludeDescendants(n),this.paper.sortNodes(n),this.draggingNodes=n,this.summarieDataItems=is.makePasteData(n),this.updateCanOnlyDragToMovePosition();for(let t of this.draggingNodes){t.k.setStyle("opacity","0.5");for(let e of t.walkDescendants())e.k.setStyle("opacity","0")}if(!this.canOnlyMoveNode){let t=this.draggingNodes.map((t=>Fo.get(t)));this.dropBoxQuerier=new Ps(this.paper,t)}"static"===this.settings.get("dragConnectPreviewMode")?this.makeDraggingPreviewK():this.showDropIndicator()}updateCanOnlyDragToMovePosition(){let t=this.draggingNodes.every((t=>"branch-float-root"===t.classify)),e=!this.paper.settings.get("canDragToggleFloatAndNormal"),i=t&&e;this.canOnlyDragToMovePosition=i}makeDraggingPreviewK(){this.draggingPreviewGroupK=new Kt;for(let t of this.draggingNodes){let e=this.cloneNodeForPreviewing(t);e.setStyle("opacity","0.5");let i=e.element.querySelector("[id^=node-content-shape-container]");if(i){let t=i.getAttribute("fill");"transparent"===t&&(t=this.paper.style.get("map","background-color"),i.setAttribute("fill",t))}this.draggingPreviewGroupK.append(e)}this.paper.appendInteractKnode(this.draggingPreviewGroupK)}cloneNodeForPreviewing(t){var e;let i=Fo.get(t).getRenderBoxInPaperOrigin(),n=t.k.clone();if(this.dragStartFromHold){let e=t.k.transform.matrix;new Qe(this.paper.style.get("common","transition-duration"),"ease-out",(t=>{let o=e.translate(-i.centerX,-i.centerY).scale(t).translate(i.centerX,i.centerY);n.transform.setMatrix(o)})).playBetween(1,1.025)}return null===(e=n.element.querySelector("[id^=node-content-expander]"))||void 0===e||e.remove(),n}onDragMove(t,e){e=this.paper.toPaperOrigin(e);let i=this.makeDropBox(t);this.updatePreviewingInFloatMode(e,i),this.canOnlyMoveNode||this.updateDropBox(i),this.updateDragPosition(e)}makeDropBox(t){let e=t?t.getPaperPosition():null;return e?this.dropBoxQuerier.queryAt(e):null}updateDropBox(t){"static"===this.settings.get("dragConnectPreviewMode")?this.canOnlyDragToMovePosition||re(t,this.dropBox)||(t&&!t.excluded?this.showDropIndicator(t):this.hideDropIndicator()):(t=(null==t?void 0:t.excluded)?null:t,this.updateDropIndicatorPosition(t)),this.dropBox=t}updatePreviewingInFloatMode(t,e){var i;let n=this.paper.settings.get("canDragToggleFloatAndNormal")&&t.getLength()>=this.atLeastMoveToBecomeFloat&&!e;if(this.previewInFloatMode!==n){if(n||(null===(i=this.draggingPreviewGroupK)||void 0===i||i.remove(),"static"===this.settings.get("dragConnectPreviewMode")&&this.makeDraggingPreviewK()),n&&"static"===this.settings.get("dragConnectPreviewMode")){let t=this.paper.style.get("floatRoot","fill-color"),e=this.paper.style.get("floatRoot","stroke-color"),i=this.paper.style.get("floatRoot","stroke-width"),n=this.paper.style.get("floatRoot","color");for(let o of this.draggingPreviewGroupK.element.children)if(!o.matches("[id^=branch-float-root-node]")){for(let n of o.querySelectorAll("[id^=node-content-shape-container]"))n.setAttribute("fill",t),n.setAttribute("stroke",e),n.setAttribute("stroke-width",String(i));for(let t of o.querySelectorAll("[id^=node-content-text] > div"))t.style.color=n}}this.previewInFloatMode=n}}updateDragPosition(t){let e=lt.I().translate(t.x,t.y);"static"===this.settings.get("dragConnectPreviewMode")?this.draggingPreviewGroupK.transform.setMatrix(e):(e=e.multiply(this.draggingNodePrimary.k.transform.matrix),Fo.get(this.dropIndicatorNode).setMatrixInPaperOriginDeeply(e))}showDropIndicator(t){this.dropIndicatorNode||this.createDropIndicator(),this.dropIndicatorNode&&t&&gi().then((()=>{this.updateDropIndicatorPosition(t)}))}createDropIndicator(){let t=this.paper.style.get("content","outline-color"),e=this.paper.style.get("layout","partition-margin"),i=new P(e,.5*e),n={data:{...Ki.generateOwnBaseData(),text:""},style:{"font-size":i.y,"line-height":1.3,padding:[0,i.x/2],"fill-color":t,"stroke-width":0,shape:"rect",radius:3}};this.dropIndicatorNode=this.paper.createNode("branch",n),this.dropIndicatorNode.k.setStyle("pointer-events","none"),this.dropIndicatorNode.willUpdate();let o={data:Ki.generateOwnBaseData()};this.dropIndicatorConnect=this.paper.createNodeOf(o,Os),this.dropIndicatorConnect.willUpdate(),Fo.getOf(this.dropIndicatorConnect,Ls).setInNode(this.dropIndicatorNode),this.paper.append(this.dropIndicatorNode),this.paper.append(this.dropIndicatorConnect),this.paper.appendInteractKnode(this.dropIndicatorConnect.k),this.paper.appendInteractKnode(this.dropIndicatorNode.k),this.untilDropIndicatorReady=gi()}async updateDropIndicatorPosition(t){if(await this.untilDropIndicatorReady,!this.dropIndicatorNode)return;let e=Fo.get(this.dropIndicatorNode),i=Fo.getOf(this.dropIndicatorConnect,Ls);if("static"===this.settings.get("dragConnectPreviewMode")){if(!t)return;e.setIn(t.inVectorDirection,t.inConnectDirection);let n=t.inPoint,o=e.getLocalRenderBox().anchorPointAt(t.inConnectDirection),r=n.diff(o),s=lt.I().translate(r.x,r.y);e.doLayout(),e.setMatrixInPaperOriginDeeply(s),this.dropIndicatorConnect.setOutNode(t.parent),i.setOutNode(t.parent),i.setOutPoint(t.outPoint),i.setIndex(t.index)}else{if(this.previewInFloatMode)return void this.dropIndicatorConnect.k.setStyle("opacity","0");if(!(t=t||this.dropBoxQuerier.makeCustomDropBox(Fo.get(this.draggingNodePrimary))))return;this.dropIndicatorConnect.k.setStyle("opacity",""),e.setIn(t.inVectorDirection,t.inConnectDirection),this.dropIndicatorConnect.setOutNode(t.parent),i.setOutNode(t.parent),i.setOutPoint(t.outPoint),i.setIndex(t.index)}i.doLayout()}hideDropIndicator(){this.dropIndicatorNode&&(this.dropIndicatorNode.remove(),this.dropIndicatorNode=null,this.dropIndicatorConnect.remove(),this.dropIndicatorConnect=null)}onDragFinish(t,e){e=this.paper.toPaperOrigin(e),!this.dropBox||this.dropBox.excluded||this.canOnlyDragToMovePosition?(this.handleMovingNode(e),this.draggingNodePrimary&&this.paper.pinNodeInDirection(this.draggingNodePrimary,R.Center,e)):(this.handleDraggingNode(),this.dropBox.parent&&this.paper.pinNodeInDirection(this.dropBox.parent,R.Center))}onDragEnd(){var t;for(let t of this.draggingNodes)for(let e of t.walkMeAndDescendants())e.k.setStyle("opacity","");null===(t=this.draggingPreviewGroupK)||void 0===t||t.remove(),this.draggingPreviewGroupK=null,this.draggingNodes=null,this.draggingNodePrimary=null,this.dropBox=null,this.dropBoxQuerier=null,this.hideDropIndicator()}handleDraggingNode(){let t=this.dropBox,e=this.draggingNodes;!this.paper.settings.get("canDragToggleFloatAndNormal")&&(e=e.filter((t=>"branch-float-root"!==t.classify)));let i=e.map((t=>t.id));this.history.recordExecution((()=>{this.commands.execWithIds("BranchMove",i,t.parent.id,t.index,t.neighborIndex),is.pasteDatasToNode(this.summarieDataItems,t.parent,t.index,!0),this.commands.exec("BranchLayoutOffsetReset")}))}handleMovingNode(t){this.history.recordExecution((()=>{this.willHandlMoveAsFloatNodes(t)&&this.adjustAsFloatNodesPosition(t)}))}willHandlMoveAsFloatNodes(t){let e=this.draggingNodes[0],i=this.dropBox;return e instanceof Yr||!i&&t.getLength()>=this.atLeastMoveToBecomeFloat&&this.paper.settings.get("canDragToggleFloatAndNormal")}adjustAsFloatNodesPosition(t){for(let e of this.draggingNodes)if(e instanceof Yr){let i=Fo.get(e).getRenderBoxInPaperOrigin().center.add(t);e.modifyOwnData("position",i)}else if(this.paper.settings.get("canDragToggleFloatAndNormal")){let i=Fo.get(e).getRenderBoxInPaperOrigin().center.add(t);this.commands.exec("BranchMove",this.paper.id,-1,-1),e.modifyOwnData("layoutOffset",void 0),e.modifyOwnData("position",i)}}}class Rs extends k{constructor(t,e,i){super(),this.textContentScaling=1,this.cachedAreaBox=_.empty(),this.cachedEditorSize=null,this.cachedCursorBox=null,this.cachedPaperPadding=null,this.editorPadding=[0],this.expandedPadding=[0],this.maxEditorWidth=1/0,this.enqueuedFeedbackEditorSize=!1,this.inputAreaExpanded=0,this.textarea=t,this.selection=e,this.settings=i}startLayout(){Y.on(this.textarea,"input",this.onInput,this)}setPaddings(t){this.inputAreaExpanded=u||"mac"===h?100:0,this.editorPadding=t,this.expandedPadding=t.map((t=>t+this.inputAreaExpanded)),this.textarea.style.padding=this.expandedPadding.map((t=>t+"px")).join(" ")}getUnExpandedInputArea(){return _.fromRect(this.textarea.getBoundingClientRect()).round().expand(-this.inputAreaExpanded*this.textContentScaling)}onInput(){this.willFeedbackEditorSize()}willFeedbackEditorSize(){this.enqueuedFeedbackEditorSize||(this.enqueuedFeedbackEditorSize=!0,requestAnimationFrame((()=>{this.feedbackEditorSize(),this.enqueuedFeedbackEditorSize=!1})))}feedbackEditorSize(){this.textarea.scrollWidth>this.textarea.clientWidth&&(this.textarea.style.maxWidth=this.textarea.scrollWidth+"px");let t=O(this.expandedPadding),e=this.textarea.getBoundingClientRect(),i={width:e.width/this.textContentScaling-t.left-t.right,height:e.height/this.textContentScaling-t.top-t.bottom};re(i,this.cachedEditorSize)||(this.fire("feedback-size",i),this.cachedEditorSize=i)}feedbackCursorBox(){let t=this.selection.getCursorBox();t&&(this.cachedCursorBox&&t.y===this.cachedCursorBox.y&&t.height===this.cachedCursorBox.height&&!re(this.cachedPaperPadding,this.settings.get("paperPadding"))||(this.fire("feedback-cursor-box",t),this.cachedCursorBox=t,this.cachedPaperPadding=this.settings.get("paperPadding")))}setMaxWidth(t,e){t||(t=1/0);let i=this.convertContentSizeToEditorSize({width:t,height:0},e).width;this.maxEditorWidth=i,this.textarea.style.maxWidth=i+"px"}setMinContentSize(t,e,i){let n=this.convertContentSizeToEditorSize(t,e),o=O(this.editorPadding),r=n.height;r-o.top-o.bottom<=0&&(r=i+o.top+o.bottom),this.textarea.style.minWidth=n.width+"px",this.textarea.style.minHeight=r+"px"}convertContentSizeToEditorSize(t,e){let i=O(this.expandedPadding),n=O(this.settings.get("paperPadding")),o=t.width+i.left+i.right,r=t.height+i.top+i.bottom;return o=Math.min(o,(document.documentElement.clientWidth-n.left-n.right)/e),{width:o,height:r}}setTextContentBoxInScreenOrigin(t,e,i,n){let o=O(this.expandedPadding);0===t.height&&(t.height=i*e,t.y-=t.height/2),this.textContentScaling=e;let r=t.left-o.left*e,s=t.top-o.top*e,a=t.width/e+o.left+o.right,l=Math.max(t.height/e,i)+o.left+o.right;a=Math.min(a,this.maxEditorWidth),this.textarea.style.transform=`scale(${e})`,this.textarea.style.left=r+"px",this.textarea.style.top=s+"px",this.textarea.style.width=n?a+"px":"max-content";let h=new _(r,s,a*e,l*e).expand(-this.inputAreaExpanded*e);h.equals(this.cachedAreaBox)||(this.cachedAreaBox=h,this.fire("editor-area-updated",h))}setTextAlign(t){this.textarea.style.textAlign=t}endLayout(){this.cachedEditorSize=null,this.cachedCursorBox=null,Y.off(this.textarea,"input",this.onInput,this)}}class Ns{constructor(t,e){this.cachedHash=null,this.cachedSelectionCommonStyle=null,this.textarea=t,this.selection=e}getAllTextCommonStyle(){return An(this.textarea)}clearCachedCommonStyle(){this.cachedSelectionCommonStyle=null,this.cachedHash=null}getSelectionCommonStyle(){let t=this.selection.getSelectionHash();return(!this.cachedHash||!this.selection.compareSelectionHashs(this.cachedHash,t))&&(this.cachedSelectionCommonStyle=this.gettingSelectionCommonStyle(),this.cachedHash=t),this.cachedSelectionCommonStyle}gettingSelectionCommonStyle(){let t=this.selection.makeStartPosition(),e=this.selection.makeEndPosition();return t&&e?On(t.node,e.node,this.textarea):{}}validateBinaryStyle(t){let e=this.getAllTextCommonStyle(),i={};return t["text-underline"]&&!e["text-underline"]&&(i["text-underline"]=!0),t["text-line-through"]&&!e["text-line-through"]&&(i["text-line-through"]=!0),i}}class _s{constructor(t,e){this.inputStyle={},this.textarea=t,this.selection=e,this.commonStyle=new Ns(t,e)}setInputStyle(t){this.inputStyle=t,this.applyStyle()}getHeightOfLine(){return(this.inputStyle["font-size"]||14)*(this.inputStyle["line-height"]||1.2)}applyStyle(){let t=this.inputStyle["fill-color"],e=this.inputStyle.color;!function(t,e){let i=e["font-size"]||14,n=e["line-height"]||1.2;t.style.color=e.color,t.style.fontFamily=ge(e["font-family"]||""),t.style.fontSize=i?i+"px":"",t.style.lineHeight=String(n),t.style.fontWeight=e["font-weight"]||"normal",t.style.fontStyle=e["font-style"]||"normal"}(this.textarea,this.inputStyle),this.textarea.style.backgroundColor=t,this.textarea.style.color=e,this.applyBinaryStyle()}applyBinaryStyle(){let t=this.commonStyle.validateBinaryStyle(this.inputStyle);Object.keys(t).length>0&&(this.selection.selectAll(),this.inputStyle["text-underline"]&&this.selection.execCommand("underline"),this.inputStyle["text-line-through"]&&this.selection.execCommand("strikeThrough"))}updateSelectionStyleForcely(){this.commonStyle.clearCachedCommonStyle()}getSelectionStyle(){return this.commonStyle.getSelectionCommonStyle()}getAllTextCommonStyle(){return this.commonStyle.getAllTextCommonStyle()}}function*zs(t){for(let e of t.childNodes)e instanceof Text?yield e:e instanceof Element&&(yield*zs(e))}function Fs(t){return t instanceof Text||t instanceof HTMLBRElement}function Ws(t,e){return t.node instanceof Element?t.offset<t.node.childNodes.length?t.node.childNodes[t.offset]:t.node===e?null:Tn(t.node.nextSibling||t.node.parentNode,e):t.node instanceof Text?t.offset<t.node.textContent.length?t.node:Tn(t.node,e):null}function $s(t,e){return t.node instanceof Element?0===t.offset?Sn(t.node,e):function(t){for(;t instanceof Element&&t.lastChild;)t=t.lastChild;return t}(t.node.childNodes[t.offset-1]):t.node instanceof Text?0===t.offset?Sn(t.node,e):t.node:null}function*Vs(t,e){let i=function(t,e){let i=$s(t,e);for(i===t.node&&(i=Sn(i,e));i;){if(Fs(i))return i;i=Sn(i,e)}return null}(t,e);for(;i;)Fs(i)&&(yield i),i=Sn(i,e)}function*js(t,e){let i=function(t,e){let i=Ws(t,e);for(i===t.node&&(i=Tn(i,e));i;){if(Fs(i))return i;i=Tn(i,e)}return null}(t,e);for(;i;)Fs(i)&&(yield i),i=Tn(i,e)}function Hs(t,e){if((t=Ks(t,e)).node instanceof Text&&t.offset>0)return{node:t.node,offset:t.offset-1};for(let i of Vs(t,e)){if(!(i instanceof Text))return{node:i,offset:0};{let e=i.textContent.length,n=t.node instanceof HTMLBRElement?e:e-1;if(e>0)return{node:i,offset:n}}}return null}function Us(t,e){if((t=qs(t,e)).node instanceof Text&&t.offset<t.node.textContent.length)return{node:t.node,offset:t.offset+1};for(let i of js(t,e)){if(!(i instanceof Text))return{node:i,offset:0};if(i.textContent.length>0)return{node:i,offset:1}}return null}function Ks(t,e){if(t.node instanceof Text)return t;if(t.node instanceof HTMLBRElement)return t;if(t.node instanceof Element&&t.offset<t.node.childNodes.length){let e=t.node.childNodes[t.offset];if(e instanceof HTMLBRElement)return{node:e,offset:0}}for(let i of Vs(t,e)){if(!(i instanceof Text))return{node:i,offset:0};{let t=i.textContent.length;if(t>0)return{node:i,offset:t}}}return t}function qs(t,e){if(t.node instanceof Text)return t;if(t.node instanceof HTMLBRElement)return t;if(t.node instanceof Element&&t.offset<t.node.childNodes.length){let e=t.node.childNodes[t.offset];if(e instanceof HTMLBRElement)return{node:e,offset:0}}for(let i of js(t,e)){if(!(i instanceof Text))return t.node===e&&0===t.offset?{node:i,offset:0}:t;if(i.textContent.length>0)return{node:i,offset:0}}return t}class Zs{constructor(t){this.node=null,this.fragment=document.createDocumentFragment(),this.node=t,this.fragment.append(t)}add(t){let e=this.node;if(t.type===bn.Parent)if(e.parentElement)this.node=e.parentElement;else{let i=t.node.cloneNode();e.after(i),i.append(e),this.node=i}else{let i=t.node.cloneNode();t.type===bn.FirstChild?e.prepend(i):t.type===bn.LastChild?e.append(i):t.type===bn.NextSibling?e.after(i):t.type===bn.PreviousSibling&&e.before(i),this.node=i}}}!function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End",t[t.Middle=3]="Middle"}(ns||(ns={}));class Gs{constructor(t){this.textarea=t}validate(t){return t&&!this.textarea.contains(t)?null:t}makePosition(t,e,i){let n={node:t,offset:e};return i?qs(n,this.textarea):Ks(n,this.textarea)}makeAfterStartPosition(t){return qs(this.makePosition(t,0,!0),this.textarea)}makeBeforeEndPosition(t){let e;return e=t instanceof Text?{node:t,offset:t.textContent.length}:{node:t,offset:t.childNodes.length},Ks(e,this.textarea)}makeBeforeStartPosition(t){return Ks({node:t.parentNode,offset:fn(t)},this.textarea)}makeAfterEndPosition(t){return qs({node:t.parentNode,offset:fn(t)+1},this.textarea)}getPreviousPosition(t){return Hs(t,this.textarea)}getNextPosition(t){return Us(t,this.textarea)}getPreviousTextChar(t){return function(t,e){if(t.node instanceof Text&&t.offset>0)return t.node.textContent.slice(t.offset-1,t.offset);let i=Hs(t,e);return i&&i.node instanceof Text&&i.offset<i.node.textContent.length?i.node.textContent.slice(i.offset,i.offset+1):null}(t,this.textarea)}getNextTextChar(t){return function(t,e){if(t.node instanceof Text&&t.offset<t.node.textContent.length)return t.node.textContent.slice(t.offset,t.offset+1);let i=Us(t,e);return i&&i.node instanceof Text&&i.offset>0?i.node.textContent.slice(i.offset-1,i.offset):null}(t,this.textarea)}cloneContentsBetweenPositions(t,e){return function(t,e,i){let n=Ws(t,i),o=$s(e,i);if(!n||!o||gn(n,o))return null;if(n===o)return function(t,e,i){let n;if(t instanceof Text){let o=t.textContent,r=0,s=o.length;e.node===t&&(r=e.offset),i.node===t&&(s=i.offset),o=o.slice(r,s),n=new Text(o)}else n=t.cloneNode(!0);let o=document.createDocumentFragment();return o.append(n),o}(n,t,e);{let r=n.cloneNode();t.node===n&&n instanceof Text&&t.offset>0&&(r.textContent=n.textContent.slice(t.offset));let s=new Zs(r);for(let t of Cn(n,i))if(s.add(t),t.node===o){e.node===o&&o instanceof Text&&e.offset<o.textContent.length&&(s.node.textContent=o.textContent.slice(0,e.offset));break}return s.fragment}}(t,e,this.textarea)}comparePositions(t,e){if(!t||!e)return null;if(t.node===e.node)return this.compareOffset(t.offset,e.offset);if(mn(t.node,e.node)){let i=this.getNextPosition(t);return null===i?0:mn(i.node,e.node)?-1:i.node===e.node?this.compareOffset(i.offset-1,e.offset):0}{let i=this.getNextPosition(e);return null===i?0:mn(i.node,t.node)?1:i.node===t.node?-this.compareOffset(i.offset-1,t.offset):0}}compareOffset(t,e){return t<e?-1:t>e?1:0}getPositionHashState(t){return t?t.node instanceof Text?0===t.offset?ns.Start:t.offset>=t.node.textContent.length?ns.End:ns.Middle:t.offset:ns.None}}class Ys extends Gs{constructor(t){super(t),this.selection=getSelection()}getSelection(){return this.selection}hasAnyCharSelected(){var t;return!!this.isCursorIn()&&!(null===(t=this.selection.getRangeAt(0))||void 0===t?void 0:t.collapsed)}makeStartPosition(){let{startNode:t,startOffset:e}=this.getStartEndNodeAndOffset();return t=this.validate(t),t?this.makePosition(t,e,!0):null}makeEndPosition(){let{endNode:t,endOffset:e}=this.getStartEndNodeAndOffset();return t=this.validate(t),t?this.makePosition(t,e,!1):null}getStartEndNodeAndOffset(){let{anchorNode:t,anchorOffset:e,focusNode:i,focusOffset:n}=this.selection;if(t=this.validate(t),!t||!i)return{startNode:null,startOffset:-1,endNode:null,endOffset:-1};let o=t.compareDocumentPosition(i);return o&t.DOCUMENT_POSITION_PRECEDING||0===o&&e>n?{startNode:i,startOffset:n,endNode:t,endOffset:e}:{startNode:t,startOffset:e,endNode:i,endOffset:n}}isCursorIn(){return 0!==this.selection.rangeCount&&!!this.validate(this.selection.anchorNode)&&!!this.validate(this.selection.focusNode)}fullyContains(t){if(!this.validate(t))return!1;let e=this.makeBeforeStartPosition(t),i=this.makeStartPosition(),n=this.comparePositions(e,i);if(null===n||-1===n)return!1;let o=this.makeAfterEndPosition(t),r=this.makeStartPosition(),s=this.comparePositions(o,r);return null!==s&&1!==s}containsPosition(t){let e=this.makeStartPosition(),i=this.comparePositions(t,e);if(null===i||-1===i)return!1;let n=this.makeStartPosition(),o=this.comparePositions(t,n);return null!==o&&1!==o}moveCursorToPosition(t){return this.moveCursorToNodeAndOffset(t.node,t.offset)}moveCursorToNodeAndOffset(t,e){if(!this.validate(t))return!1;let i=document.createRange();return i.setEnd(t,e),i.collapse(),this.selection.removeAllRanges(),this.selection.addRange(i),!0}moveCursorBetweenPositions(t,e){return this.moveCursorBetweenNodesAndOffsets(t.node,t.offset,e.node,e.offset)}moveCursorBetweenNodesAndOffsets(t,e,i,n){if(!this.validate(t)||!this.validate(i))return!1;let o=document.createRange();return o.setStart(t,e),o.setEnd(i,n),this.selection.removeAllRanges(),this.selection.addRange(o),!0}selectContents(t){let e=this.makeAfterStartPosition(t),i=this.makeBeforeEndPosition(t);return this.moveCursorBetweenPositions(e,i)}selectWhole(t){let e=this.makeBeforeStartPosition(t),i=this.makeAfterEndPosition(t);return this.moveCursorBetweenPositions(e,i)}cursorToBeforeStartOf(t){let e=this.makeBeforeStartPosition(t);return this.moveCursorToPosition(e)}cursorToAfterEndOf(t){let e=this.makeAfterEndPosition(t);return this.moveCursorToPosition(e)}cursorToAfterStartOf(t){let e=this.makeAfterStartPosition(t);return this.moveCursorToPosition(e)}cursorToBeforeEndOf(t){let e=this.makeBeforeEndPosition(t);return this.moveCursorToPosition(e)}selectAll(){return this.selectContents(this.textarea)}cursorToTheEnd(){return this.cursorToBeforeEndOf(this.textarea)}getSelectionHash(){let t=this.makeStartPosition(),e=this.makeEndPosition();return{startNode:(null==t?void 0:t.node)||null,startState:this.getPositionHashState(t),endNode:(null==e?void 0:e.node)||null,endState:this.getPositionHashState(e)}}compareSelectionHashs(t,e){return t.startNode===e.startNode&&t.startState===e.startState&&t.endState===e.endState&&t.endState===e.endState}}class Js extends Ys{constructor(){super(...arguments),this.savedRange=null,this.preventSelectionChange=!1}preventingSelectionChange(){return this.preventSelectionChange}save(){return!!this.isCursorIn()&&(this.savedRange={anchor:this.makeStartPosition(),focus:this.makeEndPosition()},this.selection.getRangeAt(0).cloneRange(),!0)}canRestore(){return!!this.savedRange}restore(){let t=!1;if(this.savedRange){this.selection.removeAllRanges();let e=new Range;e.setStart(this.savedRange.anchor.node,this.savedRange.anchor.offset),e.setEnd(this.savedRange.focus.node,this.savedRange.focus.offset),this.selection.addRange(e),this.savedRange=null,t=!0}return t}execCommand(t,e){if(!this.isCursorIn())return!1;if("insertHTML"===t)this.hasAnyCharSelected()&&document.execCommand("delete",!1),this.insertHTMLWhenCursorIn(e);else if("foreColor"===t||"fontName"===t)document.execCommand("styleWithCSS",!1,!0),document.execCommand(t,!1,e),document.execCommand("styleWithCSS",!1,!1);else if("fontSize"===t){document.execCommand("styleWithCSS",!1,!0),document.execCommand(t,!1,"7"),document.execCommand("styleWithCSS",!1,!1);let i=[...this.textarea.querySelectorAll('[style*="font-size: -webkit-xxx-large"], [style*="font-size: xxx-large"], font[size]')];for(let t of i)"font"===t.localName&&t.removeAttribute("size"),t.style.fontSize=e}else document.execCommand(t,!1,e);return!0}insertHTMLWhenCursorIn(t){if(!t)return;let e=function(t){let e=document.createElement("template");return e.innerHTML=t,e.content}(t),i=e.lastChild;if(!i)return;let n=this.makeEndPosition(),{node:o,offset:r}=n;if(o instanceof Text||o instanceof HTMLBRElement)if(0===r)o.before(e);else if(r===o.textContent.length)o.after(e);else{let t=o.textContent.slice(r);o.textContent=o.textContent.slice(0,r);let i=new Text(t);o.after(i),o.after(e)}else r<o.childNodes.length?o.childNodes[r].before(e):o.appendChild(e);this.cursorToAfterEndOf(i)}cloneContents(){let t=this.makeStartPosition(),e=this.makeEndPosition();return t&&e?this.cloneContentsBetweenPositions(t,e):null}getCursorBox(){if(!this.isCursorIn())return null;let t=this.selection.getRangeAt(0),e=_.fromRect(t.getBoundingClientRect());return 0===e.width&&0===e.height&&0===e.left&&0===e.top&&t.endContainer instanceof Element&&(e=_.fromRect(t.endContainer.getBoundingClientRect())),0===e.width&&0===e.height&&0===e.left&&0===e.top&&(e=this.complexGettingCursorBoxByInsertingSpans()),e}complexGettingCursorBoxByInsertingSpans(){this.preventSelectionChange=!0,this.save();let t=this.insertSpanToNodeAtOffset(this.makeEndPosition(),!1),e=this.insertSpanToNodeAtOffset(this.makeStartPosition(),!1),i=_.fromUnion(_.fromRect(e.span.getBoundingClientRect()),_.fromRect(t.span.getBoundingClientRect()));return e.redo(),t.redo(),this.restore(),requestAnimationFrame((()=>{this.preventSelectionChange=!1})),i}insertSpanToNodeAtOffset(t,e){let{node:i,offset:n}=t,o=document.createElement("span"),r=()=>{o.remove()};if(i instanceof Element)i.childNodes.length>n?e?i.childNodes[n].after(o):i.childNodes[n].before(o):i.append(o);else if(i instanceof Text){let t=i.textContent,e=new Text(t.slice(n));i.textContent=t.slice(0,n),i.after(o),i.after(e),r=()=>{i.textContent=t,o.remove(),e.remove()}}else e?i.after(o):i.before(o);return{span:o,redo:r}}}class Xs extends Js{getClosestKatexElement(t){return vn(t,this.textarea,".katex")}getKatexElementAtCursor(){let t=this.makeEndPosition();return t?this.getKatexElementAtPosition(t):null}getKatexElementAtPosition(t){return vn(t.node,this.textarea,".katex")}isCursorInKatexForward(){return!!this.getKatexElementAtCursorForward()}selectWholeKatexAtCursorForward(){let t=this.getKatexElementAtCursorForward();if(t){let e=this.makeBeforeStartPosition(t),i=this.makeAfterEndPosition(t);return"\ufeff"===this.getPreviousTextChar(e)&&(e=this.getPreviousPosition(e)),"\ufeff"===this.getNextTextChar(i)&&(i=this.getNextPosition(i)),this.moveCursorBetweenPositions(e,i),!0}return!1}deleteWholeKatexAtCursorForward(){this.selectWholeKatexAtCursorForward()&&this.execCommand("delete")}getKatexElementAtCursorForward(){let t=this.makeEndPosition();return t&&"\ufeff"===this.getPreviousTextChar(t)&&(t=this.getPreviousPosition(t)),t=t?this.getPreviousPosition(t):null,t?this.getKatexElementAtPosition(t):null}moveCursorAfterOfKatex(t){let e=t.nextSibling;e||(e=new Text("\ufeff"),t.after(e)),this.moveCursorBetweenNodesAndOffsets(e,0,e,0)}getSourceElement(){let t=this.textarea.cloneNode(!0);return this.getSourceElementOf(t)}getSourceElementOf(t){!function(t){var e,i;for(let i of t.querySelectorAll("p"))(null===(e=i.textContent)||void 0===e?void 0:e.length)||0!==i.childNodes.length||i.remove();t.lastChild&&t.lastChild instanceof HTMLParagraphElement&&!(null===(i=t.lastChild.textContent)||void 0===i?void 0:i.length)&&[...t.children].every((t=>"br"===t.localName))&&t.lastChild.remove()}(t);let e=[...t.querySelectorAll(".katex")],i=new Set;for(let t of e){let e=$n(t),n=new Text(`$$${e}$$`);i.add(n),t.replaceWith(n)}for(let e of zs(t))i.has(e)||(e.textContent=Vn(e.textContent));return t}}function Qs(t){var e;let i=null===(e=t.match(/\bhttps?:\/\/[\u0000-\u00ff]+/))||void 0===e?void 0:e[0];return i?(i=i.replace(/[\s'"].*/,""),i):null}async function ta(t){let e=await vr(t),i={width:e.naturalWidth,height:e.naturalHeight};return{...await Hi.uploadImage(t,i),naturalSize:i}}async function ea(t,e){let i=await async function(t){let e=t.querySelector("img");if(!e)return null;let i=e.src;try{let e=await ta(i);for(let e of[...t.querySelectorAll("img")])e.remove();return e}catch(t){return null}}(t),n=t.innerHTML,{html:o,restore:r}=function(t){let e=[],i=0;return{html:t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,n)=>(e[i]=Xi(n),`$$${i++}$$`))),restore:t=>t.replace(/\$\$(\d+)\$\$/g,((t,i)=>{let n=e[Number(i)];return n?`$$${n}$$`:""}))}}(n);o=tn(o),o=Qi(o),o=function(t,e){return"bold"===e["font-weight"]&&(t=on(t)),"italic"===e["font-style"]&&(t=rn(t)),e["text-underline"]&&(t=sn(t)),e["text-line-through"]&&(t=an(t)),e.color&&(t=ln(t)),e["font-family"]&&(t=function(t){return hn(t,[],"font-family")}(t)),e["font-size"]&&(t=function(t){return hn(t,[],"font-size")}(t)),t}(o,e),n=r(o);let s=r(Zi(o));return{html:n,text:s,imageSource:i,hyperlink:Qs(s)}}class ia{constructor(t){this.preventInputtingEnter=!1,this.el=t,Y.on(t,"touchstart",this.onTouchStart,this),Y.on(t,"input",this.onInput,this)}onTouchStart(t){this.timeout&&clearTimeout(this.timeout),Y.fromPencil(t)&&(this.preventInputtingEnter=!0,this.timeout=setTimeout((()=>{this.preventInputtingEnter=!1,this.timeout=null}),200))}onInput(t){let e=document.getSelection();e&&this.preventInputtingEnter&&e.anchorNode===e.focusNode&&e.anchorNode instanceof HTMLParagraphElement&&1===e.anchorNode.childNodes.length&&e.anchorNode.childNodes[0]instanceof HTMLBRElement&&e.anchorNode.remove()}remove(){Y.off(this.el,"input",this.onInput,this)}}class na extends k{constructor(t){super(),this.inEditing=!1,this.textareaAlive=!1,this.locked=!1,this.mutationObserver=null,this.enqueuedSelectionChange=!1,this.pencilWritingProtection=null,this.settings=t,this.initTextArea(),this.selection=new Xs(this.textarea),this.layout=new Rs(this.textarea,this.selection,t),this.style=new _s(this.textarea,this.selection),this.initEvents()}initTextArea(){this.textarea=document.createElement("div"),this.textarea.setAttribute("contenteditable","true"),this.textarea.style.position="absolute",this.textarea.style.transformOrigin="top left",this.textarea.style.wordBreak="break-word",this.textarea.style.backgroundClip="content-box",this.textarea.style.width="max-content",this.textarea.className="mm-editor",this.textarea.style.zIndex="10"}initEvents(){this.layout.broadcastTo(this),Y.on(this.textarea,"paste",this.onPaste,this),Y.on(this.textarea,"keydown",this.onKeyDown,this),Y.on(this.textarea,"click",this.onClickOrTap,this),zt.on(this.textarea,"tap",this.onClickOrTap,this),Y.on(this.textarea,"contextmenu",this.onContextmenu,this)}onPaste(t){if(!this.inEditing)return void t.preventDefault();let e=!this.settings.get("clearPastedTextStyle"),i=t.clipboardData;if(i.files.length>0&&i.files[0]&&i.files[0].type.startsWith("image/")){let e=i.files[0],n=URL.createObjectURL(e);if(this.fire("paste-image",t,n),!t.defaultPrevented){let e=`<img src=${n} />`;this.selection.execCommand("insertHTML",e);let i=this.textarea.querySelector("img");i&&(i.onload=()=>{this.layout.willFeedbackEditorSize()}),t.preventDefault()}}else if(e&&i.getData("text/html")){let e=t.clipboardData.getData("text/html");e=Qi(e),this.selection.execCommand("insertHTML",e),t.preventDefault()}else if(i.getData("text/plain")){let e=i.getData("text/plain");this.selection.execCommand("insertText",e),t.preventDefault()}this.triggersSelectionChange(),this.layout.willFeedbackEditorSize()}onKeyDown(t){if(this.inEditing){let e=H(t);"Escape"===e?this.cancelEditing():"Ctrl+Enter"===e?this.selection.execCommand("insertParagraph"):"Enter"===e?(this.commitEditing(this.settings.get("preserveTextEditorAliveAfterEnter")),t.stopPropagation()):!this.selection.isCursorInKatexForward()||t.isComposing||"Delete"!==e&&"Backspace"!==e||this.selection.hasAnyCharSelected()||(this.selection.deleteWholeKatexAtCursorForward(),t.preventDefault())}else this.settings.get("alwaysKeepsTextEditorAlive")||t.preventDefault()}onClickOrTap(t){let e=this.selection.getClosestKatexElement(t.target);if(e){let t=$n(e);this.selection.moveCursorAfterOfKatex(e),this.selection.save(),this.fire("editor-katex-focus",e,t)}else e||this.fire("editor-katex-blur")}onContextmenu(){this.isInEditing()&&this.fire("editor-contextmenu",this.textarea)}getTextarea(){return this.textarea}isInEditing(){return this.inEditing}preFocus(){this.inEditing||(this.makeTextareaUnVisible(),this.textarea.focus())}startEditing(){this.inEditing||(this.makeTextareaVisible(),this.textarea.focus(),this.listenEvents(),this.inEditing=!0,this.layout.startLayout(),this.fire("editor-enter",this.textarea))}exitEditing(t=!1){this.inEditing&&(t?this.makeTextareaUnVisible():(this.removeTextarea(),this.unlistenEvent()),this.inEditing=!1,this.layout.endLayout(),this.fire("editor-exit"))}makeTextareaUnVisible(){this.textarea.parentNode||document.body.append(this.textarea),this.textarea.style.zIndex="-1",this.textarea.style.opacity="0",this.textareaAlive=!0}makeTextareaVisible(){this.textarea.parentNode||document.body.append(this.textarea),this.textarea.style.zIndex="",this.textarea.style.opacity="",this.textareaAlive=!0}removeTextarea(){this.textarea.parentNode&&this.textarea.remove(),this.textareaAlive=!1}listenEvents(){this.mutationObserver=new MutationObserver(this.onEditorTreeChange.bind(this)),this.pencilWritingProtection=new ia(this.textarea),this.mutationObserver.observe(this.textarea,{attributes:!0,subtree:!0,childList:!0}),Y.on(document,"mousedown",this.onDomMouseDown,this),Y.on(document,"selectionchange",this.onDocumentSelectionChange,this)}unlistenEvent(){var t,e;null===(t=this.mutationObserver)||void 0===t||t.disconnect(),this.mutationObserver=null,null===(e=this.pencilWritingProtection)||void 0===e||e.remove(),this.pencilWritingProtection=null,Y.off(document,"mousedown",this.onDomMouseDown,this),Y.off(document,"selectionchange",this.onDocumentSelectionChange,this)}async onDomMouseDown(t){if(this.inEditing){let e=this.layout.getUnExpandedInputArea(),i=new A(t.clientX,t.clientY),n=this.textarea.contains(t.target)&&e.containsPoint(i),o=this.textarea.contains(t.target)&&!e.containsPoint(i);n||await this.commitEditing(),o&&this.reFireMouseDownEvent(t)}else this.textareaAlive&&(this.removeTextarea(),this.unlistenEvent())}reFireMouseDownEvent(t){let e=document.elementFromPoint(t.clientX,t.clientY);if(!e)return;let i=new MouseEvent("mousedown",{button:t.button,buttons:t.buttons,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,screenX:t.screenX,screenY:t.screenY});Object.defineProperty(i,"target",{get:()=>e});for(let t of[...wn(e),document])t.dispatchEvent(i)}onDocumentSelectionChange(){this.selection.preventingSelectionChange()||this.enqueuedSelectionChange||(this.enqueuedSelectionChange=!0,requestAnimationFrame((()=>{this.fire("editor-update-selection",this.selection.hasAnyCharSelected()),this.layout.feedbackCursorBox(),this.enqueuedSelectionChange=!1})))}triggersSelectionChange(){this.onDocumentSelectionChange()}onEditorTreeChange(){this.selection.preventingSelectionChange()||(this.style.updateSelectionStyleForcely(),this.layout.willFeedbackEditorSize(),this.fire("editor-update-selection",this.selection.hasAnyCharSelected()))}setHTML(t){t!==this.textarea.innerHTML&&(this.textarea.innerHTML=t)}setStyle(t){this.style.setInputStyle(t)}async commitEditing(t){if(!this.inEditing)return;if(this.selection.save(),this.locked)return;let e=this.selection.getSourceElement(),i=this.style.getAllTextCommonStyle(),n=await ea(e,i);this.fire("editor-commit",n,i),this.exitEditing(t)}cancelEditing(){this.inEditing&&(this.selection.save(),this.locked||(this.fire("editor-cancel"),this.exitEditing()))}setKatex(t){let e=zn(t);this.selection.isCursorIn()?this.selection.selectWholeKatexAtCursorForward():this.selection.cursorToTheEnd(),this.selection.execCommand("insertHTML",e)}lock(){this.locked||(this.locked=!0)}unlock(){this.locked&&(this.locked=!1)}remove(){this.cancelEditing(),this.removeTextarea()}}class oa extends k{constructor(t,e,i,n,o,r,s,a,l,h){super(),this.latestEditingNode=null,this.editingTextContent=null,this.updateAligningInterval=null,this.paper=t,this.selections=e,this.settings=i,this.viewer=n,this.keyReceiver=o,this.status=a,this.history=r,this.dataModifier=s,this.theme=l,this.minder=h,this.editor=new na(i),this.editor.broadcastTo(this,["editor-enter","editor-commit","editor-cancel","editor-exit","editor-update-selection","editor-area-updated","editor-katex-focus","editor-katex-blur","editor-contextmenu"]),this.initEvents()}initEvents(){this.editor.on("editor-enter",this.onEditorEnter,this),this.editor.on("editor-commit",this.onEditorCommit,this),this.editor.on("paste-image",this.onPasteImage,this),this.editor.on("editor-exit",this.onEditorExit,this),this.editor.on("feedback-size",this.onEditorFeedbackSize,this),this.editor.on("feedback-cursor-box",this.onEditorFeedbackCursorBox,this),this.paper.k.on(["dblclick","double-tap"],this.onPaperDblClick,this),this.theme.on("color-theme-change",this.updateEditorStyle,this),this.keyReceiver.on("keydown",this.onKeyDown,this),this.keyReceiver.on("compositionstart",this.onCompositeStart,this),this.editor.on("editor-enter",(()=>{var t;this.status.setInputing(!0),this.status.setEditingNode(this.getEditingNode()),null===(t=this.getEditingNode())||void 0===t||t.willUpdateSelf()})),this.editor.on("editor-exit",(()=>{var t;this.status.setInputing(!1),this.status.setEditingNode(this.getEditingNode()),null===(t=this.getEditingNode())||void 0===t||t.willUpdateSelf()})),this.selections.on("selection-change",this.onSelectionChange,this),this.dataModifier.on("data-edit-from-outside",(async()=>{await yi(),this.alignEditor()}),this)}getEditingNode(){return this.editor.isInEditing()?this.latestEditingNode:null}onEditorEnter(){this.paper.on("paper-view-transform-update",this.alignEditor,this),this.settings.get("mobileMode")&&(this.updateAligningInterval=setInterval((()=>this.alignEditor()),50))}onEditorCommit(t,e){let{html:i,text:n,imageSource:o,hyperlink:r}=t,s=this.isTextTrulyEditted(i,n);this.history.recordExecution((()=>{s&&(this.latestEditingNode.modifyOwnData("html",i),this.latestEditingNode.modifyOwnData("text",void 0)),o&&this.paper.commands.execWithIds("Image",[this.latestEditingNode.id],o),r&&this.maySetHyperlink(r);let t=this.latestEditingNode.data.style||{},n={...t,...e};this.excludeInheritableStyle(n),re(t,n)||this.latestEditingNode.style.modifyTotal(n)}))}isTextTrulyEditted(t,e){let i=this.latestEditingNode.getHTML(),n=this.latestEditingNode.getText();return t!==i&&(void 0!==n||e!==this.latestEditingNode.getDefaultText()||hn(t,["p"])!==e)}maySetHyperlink(t){this.latestEditingNode instanceof $r&&void 0===this.latestEditingNode.ownData.hyperlink&&this.latestEditingNode.modifyOwnData("hyperlink",t)}excludeInheritableStyle(t){for(let e of["font-family","font-size","color","font-weight","font-style"]){let i=t[e],n=this.latestEditingNode.style.getNonOwn(e);(i===n||"color"===e&&f.stringEquals(i,n))&&delete t[e]}}async onPasteImage(t,e){t.preventDefault();let i=this.latestEditingNode.id,n=this.paper.dataManager.getTotalImageCount()+1;if(!$o.willAddImage(n))return;let o=await ta(e);o&&(this.paper.commands.execWithIds("Image",[i],o),await yi(),this.alignEditor())}async onEditorExit(){this.latestEditingNode.off("detach",this.cancelEditing,this),this.editingTextContent.forceVirtualSizeTo(null),this.paper.off("paper-view-transform-update",this.alignEditor,this),this.updateAligningInterval&&clearInterval(this.updateAligningInterval),this.latestEditingNode.willUpdate(),this.editingTextContent=null,await yi(),this.viewer.mayMoveToMakeNodeCompletelyVisible(this.latestEditingNode)}onEditorFeedbackSize(t){this.setTextContentSize(t),mi((async()=>{if(this.latestEditingNode&&this.editingTextContent){let t=this.editingTextContent.getContentBoxInPaperOrigin().expand(...this.latestEditingNode.style.get("padding"));await this.viewer.mayMoveToMakeBoxCompletelyVisible(t),this.alignEditor()}}))}onEditorFeedbackCursorBox(t){if(0===t.width&&0===t.height)return;let e=this.paper.toPaperOrigin(t);this.viewer.mayMoveToMakeBoxCompletelyVisible(e)}setTextContentSize(t){this.editingTextContent&&this.editingTextContent.forceVirtualSizeTo(t)}onPaperDblClick(t){if(!this.status.isReadWrite())return;let e=zo.fromClosestElement(t.target);if(!e)return;let i=e.getClosestContentType(t.target);"text"!==i&&"shape-container"!==i&&null!==i||this.startEditing(e,this.settings.get("dblclickCursorControl"))}onKeyDown(t){if(this.status.isReadonly()||this.status.isInInputing())return;let e=this.paper.selections.textable.getFirstSelected();var i;e&&(" "===t.getShortCutKey()?(this.startEditing(e,this.settings.get("spaceCursorControl")),t.preventDefault()):this.settings.get("alwaysKeepsTextEditorAlive")&&1===(i=t.originalEvent).key.length&&!function(t){return t.ctrlKey||t.metaKey}(i)&&this.startEditing(e,void 0,"reset"))}onCompositeStart(){if(!this.status.isReadWrite()||this.status.isInInputing())return;let t=this.paper.selections.textable.getFirstSelected();t&&this.settings.get("alwaysKeepsTextEditorAlive")&&this.startEditing(t,void 0,"reset")}onSelectionChange(){this.settings.get("alwaysKeepsTextEditorAlive")&&this.selections.textable.hasAnySelected()&&this.preFocus(),this.editor.isInEditing()&&this.latestEditingNode&&!this.selections.hasSelected(this.latestEditingNode)&&this.commitEditing()}preFocus(){var t;if(this.editor.isInEditing())return;this.editor.preFocus();let e=this.selections.textable.getLatestSelected();if(e){let t=e.findContent(Ir);this.alignEditorWith(t)}e&&e.id===(null===(t=this.latestEditingNode)||void 0===t?void 0:t.id)||(this.editor.setHTML(""),this.editor.setStyle({}))}async startEditing(t,e="user-end-default-all",i="read"){if(this.editor.isInEditing())return;if(this.dataModifier.dataLocker.hasLockedByOthers(t.id))return void this.minder.cooperateController.fire("coop-edit-locked-denied",t.id);t.bringToFront(),this.latestEditingNode=t,this.editingTextContent=t.findContent(Ir),t.on("detach",this.cancelEditing,this),t.on("de",this.cancelEditing,this),this.updateEditorPaddings(t);let n="read"===i?this.getNodeHTML(t):"reset"===i?"":null;if(this.editor.startEditing(),null!==n&&this.editor.setHTML(n),this.editor.setStyle(this.getNodeStyle(t)),this.editor.layout.setMaxWidth(this.editingTextContent.getMaxAvailableWidth(),this.viewer.getZoom()),this.editor.layout.setMinContentSize(this.editingTextContent.localBox,this.viewer.getZoom(),this.editor.style.getHeightOfLine()),this.editor.layout.setTextAlign(t.style.get("text-align")),this.editingTextContent.hasSpecifiedMaxAvailableWidth()){let t=this.editingTextContent.getMaxAvailableSize();this.setTextContentSize(t)}n&&Nn(n)&&this.reloadAfterKatexLoaded(),"end"===e?this.moveCursorToTheEnd():"all"===e?this.selectAllText():"user-end-default-all"===e?t.getFinalText()===t.getDefaultText()?this.selectAllText():this.moveCursorToTheEnd():"latest"===e&&this.editor.selection.restore(),this.alignEditor(),this.editor.layout.willFeedbackEditorSize(),this.editor.layout.feedbackCursorBox()}updateEditorPaddings(t){let e=t.style.getAdaptivePadding();this.editor.layout.setPaddings(e)}async updateEditorStyle(){this.editor.isInEditing()&&this.editor.setStyle(this.getNodeStyle(this.latestEditingNode))}reloadAfterKatexLoaded(){Hi.ensureKatexResourcesLoaded().then((()=>{if(!this.editor.isInEditing())return;let t=this.getNodeHTML(this.latestEditingNode);this.editor.setHTML(t),this.editor.setStyle(this.getNodeStyle(this.latestEditingNode)),this.editor.layout.setMaxWidth(this.editingTextContent.getMaxAvailableWidth(),this.viewer.getZoom())}))}selectAllText(){this.settings.get("delaySelectingAllText")?this.selectAllTextWithDelay():this.editor.selection.selectAll()}selectAllTextWithDelay(){this.editor.selection.cursorToTheEnd(),setTimeout((()=>{this.editor.selection.selectAll()}),400)}moveCursorToTheEnd(){this.settings.get("delayMovingCursorToTheEnd")?this.moveCursorToTheEndWithDelay():this.editor.selection.cursorToTheEnd()}moveCursorToTheEndWithDelay(){setTimeout((()=>{this.editor.selection.cursorToTheEnd()}),100)}commitEditing(t){this.editor.commitEditing(t)}cancelEditing(){this.editor.cancelEditing()}getNodeHTML(t){let e=t.getFinalHTML()||"";return e=function(t){let e,i=/<p>[\s\S]*?<\/p>/gi,n=0,o="";for(;e=i.exec(t);){let i=t.slice(n,e.index);i.length>0&&(o+=`<p>${i}</p>`),o+=e[0],n=e.index+e[0].length}let r=t.slice(n);return r.length>0&&(o+=`<p>${r}</p>`),o}(e),e=_n(e),e}getNodeStyle(t){let e=t instanceof $r?t.style.get("fill-color"):t instanceof us?t.style.get("stroke-color"):"";return dn({...t.getTextStyle(),"fill-color":e})}alignEditor(){this.editingTextContent&&this.alignEditorWith(this.editingTextContent)}alignEditorWith(t){let e=this.editor.style.getHeightOfLine(),i=t.getContentBoxInPaperOrigin(),n=t.hasSpecifiedMaxAvailableWidth(),o=this.paper.getViewTransformMatrix().a,r=document.documentElement.scrollTop,s=document.documentElement.scrollLeft;0===i.height&&(i.height=e);let a=this.paper.toScreenOrigin(i);a.x+=s,a.y+=r,this.editor.layout.setTextContentBoxInScreenOrigin(a,o,e,n)}getSelectionStyle(){return this.editor.style.getSelectionStyle()}getTextEditorElement(){return this.editor.getTextarea()}execCommand(t,e){return!!this.canRestoreEditing()&&(this.mayRestoreEditing(),this.editor.selection.execCommand(t,e),this.editor.triggersSelectionChange(),!0)}canRestoreEditing(){return!!this.latestEditingNode}mayRestoreEditing(){this.editor.isInEditing()?this.editor.selection.isCursorIn()||this.editor.selection.restore():this.canRestoreEditing()&&this.startEditing(this.latestEditingNode,"latest","leave")}setKatex(t){this.canRestoreEditing()&&(this.mayRestoreEditing(),this.editor.setKatex(t))}lock(){this.editor.lock()}unlock(){this.editor.unlock()}clearStyle(){var t;this.execCommand("removeFormat")&&(null===(t=this.latestEditingNode)||void 0===t||t.style.clearTextStyle(),this.updateEditorStyle())}remove(){this.editor.remove()}}function ra(t,e=0){return t.map((t=>sa(t,e))).join("")}function sa(t,e=0){let i="\t".repeat(e)+function(t){return function(t){const e={"\\":"\\\\","\n":"\\n"};return t.replace(/[\\\n]/g,(t=>e[t])).replace(/\r/g,"")}(t.data.text||"")}(t)+"\n";if(t.children)for(let n of t.children)i+=sa(n,e+1);return i}function aa(t){const e={"\\\\":"\\","\\n":"\n"};return t.replace(/\\[\\\n]/g,(t=>e[t]))}function la(t){for(let e=0;e<t.length;e++)if("\t"!==t[e])return e;return t.length}const ha={fileDescription:"Text Format",fileExtension:".txt",toDataTypes:["text"],mimeType:"text/plain",encodeDataItems:ra,decodeToDataItems:function(t){let e=t.split("\n"),i=[],n={data:{data:{id:"",html:""},children:[]},deepth:-1},o=n;for(let t of e){if(!t.trim())continue;let e=la(t),n=aa(t.slice(e));if(!n.trim())continue;let r={data:{data:{id:"",text:n}},deepth:e};if(r.deepth>o.deepth)i.push(o),o.data.children||(o.data.children=[]),o.data.children.push(r.data);else for(let t=i.length-1;t>=0;t--){let e=i[t];if(!(e.deepth>=r.deepth)){e.data.children||(e.data.children=[]),e.data.children.push(r.data);break}i.pop()}o=r}return n.data.children},encodeMinder:async(t,e)=>{let i=t.dataManager.export(e);return{data:ra([i.root,...i.floatRoots]),width:NaN,height:NaN}}};function da(t){return new Promise(((e,i)=>{let n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=t=>{i(t)},n.readAsText(t)}))}async function ca(t){try{await ua("write");let e={};for(let[i,n]of Object.entries(t))e[i]=new Blob([n],{type:i});let i=new ClipboardItem(e);return await navigator.clipboard.write([i]),!0}catch(t){return!1}}async function ua(t){let e=await navigator.permissions.query({name:"clipboard-"+t});if("granted"!=e.state&&"prompt"!=e.state)throw new Error(e.state)}Ni.register("text",ha);class pa{constructor(){this.systemTimestamp=0,this.customTimestamp=0,this.customData=null,this.initEvents()}initEvents(){Y.on(document,"copy",this.onCopyOrCut,this),Y.on(document,"cut",this.onCopyOrCut,this)}onCopyOrCut(){this.systemTimestamp=(new Date).getTime()}hasCustomData(){return null!==this.customData}async setData(t,e){if(e)!function(t,e){var i;for(let[n,o]of Object.entries(e))null===(i=t.clipboardData)||void 0===i||i.setData(n,o)}(e,t),e.preventDefault(),await this.writeClipboardData(t);else{let e=(new Date).getTime();this.customData=t,this.customTimestamp=e,await this.writeClipboardData(t)}Si.set("mindmap-clipboard",t,2592e3)}async writeClipboardData(t){await ca(t)?this.systemTimestamp=(new Date).getTime():(t=Object.fromEntries(Object.entries(t).filter((([t])=>!t.startsWith("web ")))),await ca(t))}async getData(t){let e=await async function(){try{await ua("read");let t=await navigator.clipboard.read(),e={};if(t&&t.length>0)for(let i of t)for(let t of i.types)t.includes("text/")&&(e[t]=await da(await i.getType(t)));return e}catch(t){return null}}()||(t?await async function(t){let e=null;if(t.clipboardData){e={};for(let i of t.clipboardData.items)"string"===i.kind&&(e[i.type]=await new Promise((t=>i.getAsString(t))))}return e}(t):null),i=await Si.get("mindmap-clipboard");if(i&&(!e||!e["text/plain"]||String(e["text/plain"]).replace(/\r\n/g,"\n")===i["text/plain"]))try{e={...i,...e||{}}}catch(t){}return e||this.customData}getCustomData(){return this.customData}clearCustomData(){this.customData=null,this.customTimestamp=0}isCustomDataFirst(t){return!t||!!(this.hasCustomData()&&this.customTimestamp>this.systemTimestamp)}clean(){Y.off(document,"copy",this.onCopyOrCut,this),Y.off(document,"cut",this.onCopyOrCut,this)}}class ma{constructor(t,e,i,n,o,r,s,a,l){this.mixedClipboardData=new pa,this.paper=t,this.selections=e,this.settings=i,this.commands=n,this.viewer=o,this.dataManager=r,this.keyReceiver=s,this.history=a,this.status=l,this.initEvents()}initEvents(){this.keyReceiver.on("copy",this.onCopy,this),this.keyReceiver.on("cut",this.onCut,this),this.keyReceiver.on("paste",this.onPaste,this)}onCopy(t){if(this.status.isInInputing())return;let e=getSelection();e&&!e.isCollapsed||(this.setClipboardData(t),this.copyNodesToInner(this.selections.contentable.getSelected().filter((t=>this.canCopyNode(t))),t))}onCut(t){if(this.status.isInInputing())return;let e=getSelection();e&&!e.isCollapsed||(this.setClipboardData(t),this.status.isReadWrite()&&this.cutNodesToInner(this.selections.contentable.getSelected().filter((t=>this.canCutNode(t))),t))}setClipboardData(t){if(this.status.isInInputing())return;let e=this.makeMultiPasteDatas();if(!e)return;let i=t.originalEvent.clipboardData;i&&(i.setData("web text/mindmap",e.mindmap),i.setData("text/plain",e.text)),t.preventDefault()}makeMultiPasteDatas(t){let e=this.makePasteData(t);if(!e)return null;let i=JSON.stringify(e),n=e.dataItems.map((t=>t.data));return{mindmap:i,text:ha.encodeDataItems(n)}}makePasteData(t=this.selections.contentable.getSelected()){return t=this.paper.excludeDescendants(t),this.paper.sortNodes(t),0===t.length?null:{dataItems:t.map((t=>this.makePasteDataItemOfNode(t))),summaries:is.makePasteData(t)}}makePasteDataItemOfNode(t){let e=oe(t.data);return{type:t.type,classify:t.classify,data:e}}async onPaste(t){if(!this.status.isReadWrite()||this.status.isInInputing())return;let e=this.selections.contentable.getSelected();e=this.paper.excludeDescendants(e);let i=this.mixedClipboardData.isCustomDataFirst(t.originalEvent.clipboardData),n=e.filter((t=>this.canPasteToNodeWithInnerData(t)));n.length>0&&i?this.pasteInnerDataToNodes(e):this.canPasteImageByEvent(t.originalEvent)?(this.pasteImageToSelectedNode(t.originalEvent),t.originalEvent.clipboardData.clearData()):this.canPasteByEvent(t.originalEvent)?(this.pasteMultiStringToNodes(await this.getMultiPasteStringFromEvent(t.originalEvent),e),t.originalEvent.clipboardData.clearData()):n.length>0&&this.mixedClipboardData.hasCustomData()&&this.pasteInnerDataToNodes(e)}canCopyNode(t){return t instanceof Hr}canCutNode(t){return t instanceof Hr&&"branch-root"!==t.classify}copyNodesToInner(t,e){let i=this.makeMultiPasteDatas(t);i&&this.mixedClipboardData.setData({"web text/mindmap":i.mindmap,"text/plain":i.text},null==e?void 0:e.originalEvent)}cutNodesToInner(t,e){this.copyNodesToInner(t,e),this.commands.execWithIds("NodeRemove",t.map((t=>t.id)))}canPasteToNodeWithInnerData(t){return t instanceof Hr&&this.mixedClipboardData.hasCustomData()}canPasteImageByEvent(t){var e;return(null===(e=t.clipboardData)||void 0===e?void 0:e.files)&&t.clipboardData.files.length>0&&t.clipboardData.files[0].type.includes("image/")&&this.selections.contentable.hasAnySelected()}canPasteByEvent(t){var e,i;return this.selections.contentable.hasAnySelected()&&((null===(e=t.clipboardData)||void 0===e?void 0:e.getData("web text/mindmap"))||(null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text/plain")))}async pasteImageToSelectedNode(t){let e=t.clipboardData.files[0],i=URL.createObjectURL(e),n=this.dataManager.getTotalImageCount()+1;if(!$o.willAddImage(n))return;let o=this.selections.contentable.getFirstSelected(),r=await vr(i),s={width:r.naturalWidth,height:r.naturalHeight},a=Hi.uploadImage(i,s),l=new Promise((t=>{setTimeout(t,100)})),h=null,d={image:o.ownData.image,imageNaturalSize:o.ownData.imageNaturalSize},c=!1;this.settings.get("showLocalImageBeforeUploaded")&&l.then((()=>{null===h&&(o.modifyOwnData("image",i),o.modifyOwnData("imageNaturalSize",s),c=!0)})),a.then((t=>{o.ownData.image=d.image,o.ownData.imageNaturalSize=d.imageNaturalSize,this.paper.commands.execWithIds("Image",[o.id],{url:t.url||void 0,title:e.name||void 0,naturalSize:t.naturalSize||s,others:t.others}),o.willUpdateSelf(),h=!0}),(()=>{c&&(o.modifyOwnData("image",d.image),o.modifyOwnData("imageNaturalSize",d.imageNaturalSize)),h=!1}))}async pasteInnerDataToNodes(t,e=!0,i=!0){let n=await this.mixedClipboardData.getData();if(!n)return;let o={mindmap:n["web text/mindmap"],text:n["text/plain"]};this.pasteMultiStringToNodes(o,t,e,i)}pastePaintTextToNodes(t,e,i=!0){let n={text:t};this.pasteMultiStringToNodes(n,e,i)}async getMultiPasteStringFromEvent(t){let e=await this.mixedClipboardData.getData(t);return{mindmap:(null==e?void 0:e["web text/mindmap"])||"",text:(null==e?void 0:e["text/plain"])||""}}pasteMultiStringToNodes(t,e,i=!0,n=!0){let o=t.mindmap,r=t.text,s=null;if(o)s=JSON.parse(o);else if(r){let t=ha.decodeToDataItems(r).map((t=>({type:"Branch",classify:"branch",data:t})));s={dataItems:t,summaries:[]}}if(s){for(let t of[...s.dataItems,...s.summaries])for(let e of Ki.walkMeAndDescendants(t.data))this.processEachDataItem(e,n);for(let t of s.dataItems)for(let e of Ki.walkMeAndDescendants(t.data))e.children&&(e.data.expanded=!0);this.history.recordExecution((()=>{this.pasteDatasToNodes(s,e,i)}))}}processEachDataItem(t,e){if((t.data.html||t.data.text)&&void 0===t.data.hyperlink){let e=Qs(void 0!==t.data.html?Zi(t.data.html):t.data.text);e&&(t.data.hyperlink=e)}e&&delete t.style}pasteDatasToNodes(t,e,i){var n;e=this.paper.excludeDescendants(e);let o=0,r=0;for(let e of[...t.dataItems,...t.summaries])for(let t of Ki.walkMeAndDescendants(e.data))o+=1,t.data.image&&r++;let s=[];for(let i of e){if(!this.canAppendMoreNodes(o,r))break;let e=this.clonePasteData(t),a=e.dataItems.filter((t=>"Branch"===t.type)),l=e.dataItems.filter((t=>"Summary"===t.type)),h=i instanceof Hr&&(null===(n=i.data.children)||void 0===n?void 0:n.length)||0;for(let t of a)this.dataManager.dataModifier.addTypedChild(t.data,i.id,-1,"Branch");if(i instanceof Gr)for(let t of l){let e=t.data;delete e.data.startIndex,delete e.data.endIndex,this.dataManager.dataModifier.addTypedChild(e,i.id,-1,"Branch")}else{let t=i.parent;if(t instanceof Hr)for(let e of l){let n=i.getSameTypeIndex(),o=e.data;o.data.startIndex=n,o.data.endIndex=n+1,this.dataManager.dataModifier.addTypedChild(e.data,t.id,-1,"Summary")}}i instanceof Hr&&i.setExpanded(!0),is.pasteDatasToNode(e.summaries,i,h,!1),s.push(...e.dataItems.map((t=>t.data.data.id)))}i&&(this.selections.branch.clear(),this.selectOnlyNodesByIdsAfterLayout(s)),r>0&&this.dataManager.dataModifier.fire("countof-image-changed",this.dataManager.getTotalImageCount())}canAppendMoreNodes(t,e){let i=this.dataManager.getTotalBranchNodeCount()+t;if(!$o.willCreateNode(i))return!1;if(e>0){let t=this.dataManager.getTotalImageCount()+e;if(!$o.willAddImage(t))return!1}return!0}clonePasteData(t){let e=oe(t);for(let t of e.dataItems)t.data=Ki.cloneDataItemDeeply(t.data,["layoutOffset","commentCount"]);for(let t of e.summaries)t.data=Ki.cloneDataItemDeeply(t.data,["commentCount"]);return e}selectOnlyNodesByIdsAfterLayout(t){fi((()=>{let e=t.map((t=>this.paper.getNodeById(t))).filter((t=>t));e.length>0&&(this.selections.selectOnly(...e),this.viewer.moveByPassiveSelectedNode(e[0],!0))}))}remove(){this.mixedClipboardData.clean()}}function ga(t,e){let i,n,o=t.getRenderBoxInPaperOrigin(),r=e.getRenderBoxInPaperOrigin(),s=o.distanceVectorToBox(r);if(Math.abs(s.x)>=150)i=N.getHorizontalPart(N.fromVector(r.center.diff(o.center))),n=N.getOpposite(i);else{let t=r.center.diff(o.center),e=N.fromVector(t),a=N.getHorizontalPart(e);a===R.Center&&(a=R.Right),i=a,n=N.getOpposite(a),s=o.anchorPointAt(i).diff(r.anchorPointAt(n))}return{fromDirection:i,toDirection:n,controlLength:Math.max(s.getLength()/3,75)}}class fa extends fs{constructor(){super(...arguments),this.computedProperties=null}applyFinalKMatrix(t){super.applyFinalKMatrix(t),this.node.balanceLinesContainerTransform(t)}getComputedProperties(){return this.computedProperties||this.makeComputedProperties(),this.computedProperties}doSelfLayout(){this.makeComputedProperties(),this.node.applyLayoutProperties(this.getComputedProperties()),this.doContentLayout(),this.node.applyLayoutPropertiesToClipPath(this.getComputedProperties())}doContentLayout(){let t=this.node.getLineCentralPosition(),e=lt.I().translate(t.x,t.y);this.setMatrixInPaperOriginDeeply(e)}makeComputedProperties(){let[t,e]=this.makeFromToAngles(),i=this.makeFromPoint(t),n=this.makeToPoint(e);i||(i=n),n||(n=i);let[o,r]=this.makeControlVectors(i,n);this.computedProperties={fromPoint:i,toPoint:n,fromAngle:t,toAngle:e,controlVector1:o,controlVector2:r}}makeFromToAngles(){let t=this.node.ownData.fromAngle,e=this.node.ownData.toAngle;if(void 0===t||void 0===e){let i,n,o=this.node.ownData.relativeControl1,r=this.node.ownData.relativeControl2;o&&r?(i=P.fromCoord(o).angleInDegree(),n=P.fromCoord(r).angleInDegree()):[i,n]=this.makeFromToAnglesBetweenPoints(),t=null!=t?t:i,e=null!=e?e:n}return[t,e]}makeFromToAnglesBetweenPoints(){let t=this.getFromCentralPoint(),e=this.getToCentralPoint().diff(t);return[e.angleInDegree(),e.negative().angleInDegree()]}makeFromPoint(t){let e=this.node.fromNode;return this.calcRadialLineIntersectionPoint(e,t)}makeToPoint(t){let e=this.node.toNode;return this.calcRadialLineIntersectionPoint(e,t)}calcRadialLineIntersectionPoint(t,e){let i=t.getShapeContainerPath(),n=Fo.get(t),o=n.getLocalRenderBox().center,r=Pt.fromPointAndDegree(o,e),s=Pt.intersectWithPath(i,r);return n.toPaperOrigin(s)}getFromCentralPoint(){let t=this.node.fromNode,e=Fo.get(t),i=e.getLocalRenderBox().center;return e.toPaperOrigin(i)}getToCentralPoint(){let t=this.node.toNode,e=Fo.get(t),i=e.getLocalRenderBox().center;return e.toPaperOrigin(i)}getFromContainerCentralPoint(){let t=this.node.fromNode,e=Fo.get(t),i=t.getLocalShapeContainerBox().center;return e.toPaperOrigin(i)}getToContainerCentralPoint(){let t=this.node.toNode,e=Fo.get(t),i=t.getLocalShapeContainerBox().center;return e.toPaperOrigin(i)}makeControlVectors(t,e){let i=this.node.style.get("line-type"),n=this.node.ownData.relativeControl1,o=this.node.ownData.relativeControl2,r=n?P.fromCoord(n):void 0,s=o?P.fromCoord(o):void 0;return[r,s]="bezier"===i?this.makeBezierControlVectors(t,e,r,s):"polygon"===i?this.makePolygonControlVectors(t,e,r,s):"hv-line"===i?this.makeHVLineControlVectors(t,e,r,s):this.makeStraightLineControlVectors(t,e),[r,s]}makeBezierControlVectors(t,e,i,n){let o=e.diff(t);return i||(i=(i=o.multiplyScalar(1/3)).rotateInDegree(15)),n||(n=(n=o.multiplyScalar(-1/3)).rotateInDegree(15)),[i,n]}makePolygonControlVectors(t,e,i,n){let o=e.diff(t);return i||(i=o.multiplyScalar(1/3)),n||(n=o.multiplyScalar(-1/3)),[i,n]}makeHVLineControlVectors(t,e,i,n){let o=e.diff(t);if(i){let t=N.straightFromVector(i),e=N.toVector(t),r=o.projectTo(e);n=(i=i.projectTo(e)).minus(r)}else if(n){let t=N.straightFromVector(n),e=N.toVector(t),r=o.projectTo(e);i=(n=n.projectTo(e)).add(r)}else{let t=N.straightFromVector(o),e=N.toVector(t),r=o.projectTo(e);i=r.multiplyScalar(.5),n=r.multiplyScalar(-.5)}return[P.fromCoord(i),P.fromCoord(n)]}makeStraightLineControlVectors(t,e){let i=e.diff(t);return[i.multiplyScalar(1/3),i.multiplyScalar(-1/3)]}getJointRenderBoxInPaperOrigin(t){if(t){let t=this.getComputedProperties(),{fromPoint:e,toPoint:i,controlVector1:n,controlVector2:o}=t,r=e.add(n),s=i.add(o),a=this.getLocalRenderBox();a=a.expandToContain(e),a=a.expandToContain(i),a=a.expandToContain(r),a=a.expandToContain(s);let l=this.node.tree.style.get("content","interact-normal-size");return a=a.expand(l/2),this.toPaperOrigin(a)}return this.node.getCurveBoxInPaperOrigin()}}Fo.register("rel-line",fa);class ya extends fa{constructor(){super(...arguments),this.interactiveFromPoint=null,this.interactiveToPoint=null}makeFromPoint(t){return this.node.ownData.fromId?super.makeFromPoint(t):this.interactiveFromPoint}makeToPoint(t){return this.node.ownData.toId?super.makeToPoint(t):this.interactiveToPoint}makeFromToAnglesBetweenPoints(){let t=this.interactiveFromPoint||this.getFromCentralPoint(),e=(this.interactiveToPoint||(this.node.toNode?this.getToCentralPoint():t)).diff(t);return[e.angleInDegree(),e.negative().angleInDegree()]}setInteractiveFromPoint(t){this.interactiveFromPoint=t,this.updateFromAngle()}setInteractiveToPoint(t){this.interactiveToPoint=t,this.updateToAngle()}updateFromAngle(){if(this.node.ownData.fromId){let t=this.interactiveFromPoint.clone();Vo.isShapeBeLine(this.node.fromNode.style.get("shape"))&&(t.y=this.getFromContainerCentralPoint().y);let e=t.diff(this.getFromCentralPoint()).angleInDegree();this.node.ownData.fromAngle=e}else delete this.node.ownData.fromAngle}updateToAngle(){if(this.node.ownData.toId){let t=this.interactiveToPoint.clone();Vo.isShapeBeLine(this.node.toNode.style.get("shape"))&&(t.y=this.getToContainerCentralPoint().y);let e=t.diff(this.getToCentralPoint()).angleInDegree();this.node.ownData.toAngle=e}else delete this.node.ownData.toAngle}toggleFromId(t){t!==this.node.ownData.fromId&&(this.node.ownData.fromId=t,this.updateFromAngle())}toggleToId(t){t!==this.node.ownData.toId&&(this.node.ownData.toId=t,this.updateToAngle())}newlySetToId(t){t!==this.node.ownData.toId&&(this.node.ownData.toId=t,this.updateToAngleAfterNewlySetToId())}updateToAngleAfterNewlySetToId(){if(this.node.ownData.toId){let t=this.node.toNode,e=Fo.get(t),i=ga(Fo.get(this.node.fromNode),e),n=N.toVector(i.fromDirection),o=N.toVector(i.toDirection);this.node.ownData.fromAngle=n.angleInDegree(),this.node.ownData.toAngle=o.angleInDegree(),this.node.ownData.relativeControl1=n.multiplyScalar(i.controlLength),this.node.ownData.relativeControl2=o.multiplyScalar(i.controlLength)}else delete this.node.ownData.toAngle}setRelativeControlPoint1(t){this.node.ownData.relativeControl1=t,"hv-line"===this.node.style.get("line-type")&&(this.node.ownData.relativeControl2=void 0)}setRelativeControlPoint2(t){this.node.ownData.relativeControl2=t,"hv-line"===this.node.style.get("line-type")&&(this.node.ownData.relativeControl1=void 0)}}Fo.register("rel-line",ya);class xa{constructor(t){this.querier=new wa(this.makeBoxItems(t))}makeBoxItems(t){let e=[];for(let i of t.treeLayout.walkBranchsAndSummaries())e.push({box:i.getRenderBoxInPaperOrigin(),data:i.node});return e}query(t){let{data:e,distance:i}=this.querier.query(t);return{node:e,distance:i}}}class wa{constructor(t){this.boxItems=[],this.cachedSafeDistance=0,this.cachedPoint=null,this.cachedBoxItem=null,this.boxItems=t}query(t){return this.isCacheValid(t)||this.makeCache(t),{data:this.cachedBoxItem.data,distance:this.cachedBoxItem.box.distanceToPoint(t)}}isCacheValid(t){return!!this.cachedPoint&&t.diff(this.cachedPoint).getLength()<=this.cachedSafeDistance}makeCache(t){let e=[];for(let i=0;i<this.boxItems.length;i++){let n=this.boxItems[i],o=n.box.distanceToPoint(t);e.push({distance:o,boxItem:n})}e.sort(((t,e)=>t.distance-e.distance)),this.cachedPoint=t,this.cachedBoxItem=e[0].boxItem,this.cachedSafeDistance=e.length>1?(e[1].distance-e[0].distance)/2:1/0}}class va extends gr{constructor(t,e){super(t.tree),this.startOwnData=null,this.startProperties=null,this.closestBoxQuerier=null,this.node=t,this.layout=Fo.getOf(this.node,ya),this.history=e}init(){return super.init(),this.update(),this.appendToPaper(),this}setNonPointerable(){this.k.setStyle("pointer-events","none")}setPointerable(){this.k.setStyle("pointer-events","")}initKs(){this.k=new Kt,this.k.setId(de("rel-line-composite-dragger")),this.initControlLines(),this.initEdgePoints(),this.initControlPoints()}initControlLines(){this.controlLineK1=new ee,this.controlLineK1.setAttribute("stroke-width",2),this.controlLineK2=new ee,this.controlLineK2.setAttribute("stroke-width",2),this.k.append(this.controlLineK1),this.k.append(this.controlLineK2)}initControlPoints(){let t=this.paper.style.get("content","interact-fill-color");this.controlPointK1=new We,this.controlPointK1.setAttribute("fill",t),this.controlPointK1.setAttribute("stroke-width","2"),this.controlPointHitK1=new Ve,this.controlPointHitK1.setAttribute("fill","transparent"),this.controlPointHitK1.setStyle("cursor","grab"),this.controlPointK2=new We,this.controlPointK2.setAttribute("fill",t),this.controlPointK2.setAttribute("stroke-width","2"),this.controlPointHitK2=new Ve,this.controlPointHitK2.setAttribute("fill","transparent"),this.controlPointHitK2.setStyle("cursor","grab"),this.k.append(this.controlPointK1),this.k.append(this.controlPointK2),this.k.append(this.controlPointHitK1),this.k.append(this.controlPointHitK2)}initEdgePoints(){let t=this.paper.style.get("content","interact-fill-color");this.fromPointK=new Ve,this.fromPointK.setAttribute("fill",t),this.fromPointK.setAttribute("stroke-width",2),this.fromPointHitK=new Ve,this.fromPointHitK.setAttribute("fill","transparent"),this.fromPointHitK.setStyle("cursor","grab"),this.toPointK=new Ve,this.toPointK.setAttribute("fill",t),this.toPointK.setAttribute("stroke-width",2),this.toPointHitK=new Ve,this.toPointHitK.setAttribute("fill","transparent"),this.toPointHitK.setStyle("cursor","grab"),this.k.append(this.fromPointK),this.k.append(this.toPointK),this.k.append(this.fromPointHitK),this.k.append(this.toPointHitK)}initEvents(){this.initControlPointsDragEvents(),this.initEdgePointsDragEvents()}initControlPointsDragEvents(){this.controlDragger1=new mr(this.paper,this.controlPointHitK1),this.controlDragger1.on("start",this.onControlPointDragStart,this),this.controlDragger1.on("move",this.onControlDragMove1,this),this.controlDragger1.on("finish",this.onControlDragFinish,this),this.controlDragger1.on("cancel",this.onControlDragCancel,this),this.controlDragger1.on("end",this.onControlDragEnd,this),this.controlDragger2=new mr(this.paper,this.controlPointHitK2),this.controlDragger2.on("start",this.onControlPointDragStart,this),this.controlDragger2.on("move",this.onControlDragMove2,this),this.controlDragger2.on("finish",this.onControlDragFinish,this),this.controlDragger2.on("cancel",this.onControlDragCancel,this),this.controlDragger2.on("end",this.onControlDragEnd,this)}onControlPointDragStart(){this.startProperties=this.layout.getComputedProperties(),this.startOwnData={...this.node.ownData}}onControlDragMove1(t,e){e=this.paper.toPaperOrigin(e);let i=this.startProperties.controlVector1.add(e);if(this.layout.setRelativeControlPoint1(i),t&&t.originalEvent.shiftKey){let t=this.getMirrorMoves(i);this.layout.setRelativeControlPoint2(t)}this.layout.doSelfLayout(),this.updateLayout()}getMirrorMoves(t){let{fromPoint:e,toPoint:i}=this.startProperties,n=i.diff(e),o=t.projectTo(n);return t.minus(o).add(o.negative())}onControlDragMove2(t,e){e=this.paper.toPaperOrigin(e);let i=this.startProperties.controlVector2.add(e);if(this.layout.setRelativeControlPoint2(i),t&&t.originalEvent.shiftKey){let t=this.getMirrorMoves(i);this.layout.setRelativeControlPoint1(t)}this.layout.doSelfLayout(),this.updateLayout()}onControlDragFinish(){let{controlVector1:t,controlVector2:e}=this.layout.getComputedProperties();this.node.ownData.relativeControl1=this.startOwnData.relativeControl1,this.node.ownData.relativeControl2=this.startOwnData.relativeControl2,this.history.recordExecution((()=>{this.node.modifyOwnData("relativeControl1",t),this.node.modifyOwnData("relativeControl2",e)}))}onControlDragCancel(){this.node.ownData.relativeControl1=this.startOwnData.relativeControl1,this.node.ownData.relativeControl2=this.startOwnData.relativeControl2,this.layout.doSelfLayout(),this.updateLayout()}onControlDragEnd(){this.startProperties=null,this.startOwnData=null}initEdgePointsDragEvents(){this.fromPointDragger=new mr(this.paper,this.fromPointHitK),this.fromPointDragger.on("start",this.onEdgePointDragStart,this),this.fromPointDragger.on("move",this.onFromPointDragMove,this),this.fromPointDragger.on("finish",this.onFromPointDragFinish,this),this.fromPointDragger.on("cancel",this.onFromPointDragCancel,this),this.fromPointDragger.on("end",this.onFromPointDragEnd,this),this.toPointDragger=new mr(this.paper,this.toPointHitK),this.toPointDragger.on("start",this.onEdgePointDragStart,this),this.toPointDragger.on("move",this.onToPointDragMove,this),this.toPointDragger.on("finish",this.onToPointDragFinish,this),this.toPointDragger.on("cancel",this.onToPointDragCancel,this),this.toPointDragger.on("end",this.onToPointDragEnd,this)}onEdgePointDragStart(){this.startProperties=this.layout.getComputedProperties(),this.startOwnData={...this.node.ownData},this.closestBoxQuerier=new xa(this.paper)}onFromPointDragMove(t,e){e=this.paper.toPaperOrigin(e);let i=this.startProperties.fromPoint.add(e);if(this.layout.setInteractiveFromPoint(i),t&&t.originalEvent.shiftKey){let t=this.startProperties.toPoint.add(this.getMirrorMoves(e));this.layout.setInteractiveToPoint(t)}let{node:n,distance:o}=this.closestBoxQuerier.query(i);o>30&&(n=null),(null==n?void 0:n.id)!==this.node.ownData.toId&&(this.layout.toggleFromId(null==n?void 0:n.id),this.layout.doSelfLayout(),this.updateLayout())}onToPointDragMove(t,e){e=this.paper.toPaperOrigin(e);let i=this.startProperties.toPoint.add(e);if(this.layout.setInteractiveToPoint(i),t&&t.originalEvent.shiftKey){let t=this.startProperties.fromPoint.add(this.getMirrorMoves(e));this.layout.setInteractiveFromPoint(t)}let{node:n,distance:o}=this.closestBoxQuerier.query(i);o>30&&(n=null),(null==n?void 0:n.id)!==this.node.ownData.fromId&&(this.layout.toggleToId(null==n?void 0:n.id),this.layout.doSelfLayout(),this.updateLayout())}onFromPointDragFinish(){let t=this.node.ownData.fromId,e=this.layout.getComputedProperties().fromAngle;this.node.ownData.fromId=this.startOwnData.fromId,this.node.ownData.fromAngle=this.startOwnData.fromAngle,t?this.history.recordExecution((()=>{this.node.modifyOwnData("fromId",t),this.node.modifyOwnData("fromAngle",e)})):(this.layout.doSelfLayout(),this.updateLayout())}onFromPointDragCancel(){this.node.ownData.fromAngle=this.startOwnData.fromAngle,this.layout.doSelfLayout(),this.updateLayout()}onFromPointDragEnd(){this.startProperties=null,this.startOwnData=null,this.closestBoxQuerier=null}onToPointDragFinish(){let t=this.node.ownData.toId,e=this.layout.getComputedProperties().toAngle;this.node.ownData.toId=this.startOwnData.toId,this.node.ownData.toAngle=this.startOwnData.toAngle,t?this.history.recordExecution((()=>{this.node.modifyOwnData("toId",t),this.node.modifyOwnData("toAngle",e)})):(this.layout.doSelfLayout(),this.updateLayout())}onToPointDragCancel(){this.node.ownData.toAngle=this.startOwnData.toAngle,this.layout.doSelfLayout(),this.updateLayout()}onToPointDragEnd(){this.startProperties=null,this.startOwnData=null,this.closestBoxQuerier=null}updateStyle(){let t=this.node.tree.style.get("content","outline-color"),e=this.node.tree.style.getMobileScaled("content","interact-normal-size"),i=.4*e+this.node.style.get("line-width"),n=this.node.style.get("line-type"),o="line"!==n,r="bezier"===n;this.fromPointK.setAttribute("stroke",t),this.toPointK.setAttribute("stroke",t),this.fromPointK.width=i,this.fromPointK.height=i,this.toPointK.width=i,this.toPointK.height=i,this.fromPointHitK.width=e,this.fromPointHitK.height=e,this.toPointHitK.width=e,this.toPointHitK.height=e,this.controlLineK1.setVisible(r),this.controlLineK2.setVisible(r),this.controlPointK1.setVisible(o),this.controlPointK2.setVisible(o),this.controlPointK1.setAttribute("stroke",t),this.controlPointK2.setAttribute("stroke",t),this.controlPointK1.setAttribute("fill",t),this.controlPointK2.setAttribute("fill",t),this.controlPointK1.r=i/2,this.controlPointK2.r=i/2,this.controlPointHitK1.width=e,this.controlPointHitK1.height=e,this.controlPointHitK2.width=e,this.controlPointHitK2.height=e,this.controlLineK1.setAttribute("stroke",t),this.controlLineK2.setAttribute("stroke",t)}updateLayout(){let{fromPoint:t,toPoint:e,controlVector1:i,controlVector2:n}=this.layout.getComputedProperties(),o=t.add(i),r=e.add(n);this.fromPointK.x=t.x-this.fromPointK.width/2,this.fromPointK.y=t.y-this.fromPointK.height/2,this.toPointK.x=e.x-this.toPointK.width/2,this.toPointK.y=e.y-this.toPointK.height/2,this.fromPointHitK.x=t.x-this.fromPointHitK.width/2,this.fromPointHitK.y=t.y-this.fromPointHitK.height/2,this.toPointHitK.x=e.x-this.toPointHitK.width/2,this.toPointHitK.y=e.y-this.toPointHitK.height/2,this.controlPointK1.cx=o.x,this.controlPointK1.cy=o.y,this.controlPointK2.cx=r.x,this.controlPointK2.cy=r.y,this.controlPointHitK1.x=o.x-this.controlPointHitK1.width/2,this.controlPointHitK1.y=o.y-this.controlPointHitK1.height/2,this.controlPointHitK2.x=r.x-this.controlPointHitK2.width/2,this.controlPointHitK2.y=r.y-this.controlPointHitK2.height/2,this.controlLineK1.x1=t.x,this.controlLineK1.y1=t.y,this.controlLineK1.x2=o.x,this.controlLineK1.y2=o.y,this.controlLineK2.x1=e.x,this.controlLineK2.y1=e.y,this.controlLineK2.x2=r.x,this.controlLineK2.y2=r.y}remove(){super.remove(),Fo.remove(this.node)}}class ba{constructor(t,e,i,n){this.draggerMap=new Map,this.nodeDetachHandlers=new Map,this.paper=t,this.selections=e,this.history=i,this.status=n,this.initEvents()}initEvents(){this.selections.relLine.on("select",this.onSelectRelLine,this),this.selections.relLine.on("deselect",this.onDeselectRelLine,this),this.paper.on("node-data-change",(t=>{t instanceof Br&&this.draggerMap.has(t)&&fi((()=>{this.draggerMap.get(t).update()}))}))}onSelectRelLine(t){if(!this.status.isReadWrite())return;let e=new va(t,this.history).init();this.draggerMap.set(t,e),this.status.isMouseButtonPressing()&&(e.setNonPointerable(),this.status.once("mouse-press-end",(()=>{e.setPointerable()})));let i=this.onDeselectRelLine.bind(this,t);this.nodeDetachHandlers.set(t,i),t.on("detach",i,this)}onDeselectRelLine(t){var e;null===(e=this.draggerMap.get(t))||void 0===e||e.remove(),this.draggerMap.delete(t);let i=this.nodeDetachHandlers.get(t);t.off("detach",i,this),this.nodeDetachHandlers.delete(t)}}class ka extends mr{setViewerMoves(){return new P(0,0)}}class Ca{constructor(t=1800,e=15){this.lastTimestamp=0,this.speedLimitPerS=t,this.preferIntervalTime=e}getSpeed(t){let e=this.getDuration(),i=un(t);return Math.min(Math.abs(t),this.speedLimitPerS*e)*i}getSpeedVector(t){let e=this.getDuration(),i=un(t.x),n=un(t.y),o=Math.min(Math.abs(t.x),this.speedLimitPerS*e),r=Math.min(Math.abs(t.y),this.speedLimitPerS*e);return new P(o*i,r*n)}getDuration(){let t=performance.now(),e=(t-this.lastTimestamp)/1e3;return e=Math.min(e,1/this.preferIntervalTime),this.lastTimestamp=t,e}}class Sa{constructor(t,e,i){this.draggingStartPosition=null,this.wheelSpeedBump=new Ca,this.startViewMatrix=null,this.paper=t,this.viewer=this.paper.viewer,this.settings=e,this.status=i,this.dragger=new ka(t),this.initEvents()}initEvents(){this.paper.settings.get("rightMouseToDrag")&&this.paper.k.on("contextmenu",this.onContextMenu,this),this.viewer.on("view-update",this.onViewUpdate,this),this.status.on("can-interact",this.startInteracting,this),this.status.on("cant-interact",this.endInteracting,this)}onContextMenu(t){t.preventDefault()}startInteracting(){this.loadViewControl(),this.dragger.on("will-start",this.willStartDragging,this),this.dragger.on("start",this.onDragStart,this),this.dragger.on("move",this.onDragMove,this),this.dragger.on("finish",this.onDragFinish,this),this.dragger.on("end",this.onDragEnd,this),this.paper.k.on("wheel",this.onMouseWheel,this),zt.on(this.paper.k.element,"pinch-non-scaling-zoom:start",this.onPinchZoomStart,this),zt.on(this.paper.k.element,"pinch-non-scaling-zoom:transform",this.onPinchZoomTransform,this),zt.on(this.paper.k.element,"pinch-non-scaling-zoom:end",this.onPinchZoomEnd,this)}endInteracting(){this.dragger.off("will-start",this.willStartDragging,this),this.dragger.off("start",this.onDragStart,this),this.dragger.off("move",this.onDragMove,this),this.dragger.off("finish",this.onDragFinish,this),this.paper.k.off("wheel",this.onMouseWheel,this),zt.off(this.paper.k.element,"pinch-zoom:start",this.onPinchZoomStart,this),zt.off(this.paper.k.element,"pinch-zoom:transform",this.onPinchZoomTransform,this),zt.off(this.paper.k.element,"pinch-zoom:end",this.onPinchZoomEnd,this)}willStartDragging(t,e){if(this.paper.status.isInInputing())e();else if(t.originalEvent instanceof MouseEvent)if(this.paper.settings.get("rightMouseToDrag"))2!==t.originalEvent.button&&e();else{if(2===t.originalEvent.button)return void e();let i=zo.fromClosestElement(t.target);(t.originalEvent.ctrlKey||t.originalEvent.metaKey||i&&"branch-root"!==i.classify)&&e()}}onDragStart(){this.draggingStartPosition=this.viewer.getFinalPosition()}onDragMove(t,e){this.setViewerMove(e)}setViewerMove(t){let e=this.draggingStartPosition.add(t);this.viewer.moveTo(e)}onDragFinish(t,e){this.setViewerMove(e)}onDragEnd(){this.draggingStartPosition=null}onMouseWheel(t){if(t.preventDefault(),this.status.isInDragging())return;let e=this.settings.get("wheelTo");if((t.originalEvent.ctrlKey||t.originalEvent.metaKey)&&(e="zoom"===e?"scrolling":"zoom"),"zoom"===e)t.originalEvent.deltaY<0?this.viewer.zoomInWithOrigin(t.getPaperPosition()):this.viewer.zoomOutWithOrigin(t.getPaperPosition());else{let e=new P(-t.originalEvent.deltaX,-t.originalEvent.deltaY);e=this.wheelSpeedBump.getSpeedVector(e),this.viewer.willMoveBy(e)}}onPinchZoomStart(){this.startViewMatrix=this.viewer.getFinalMatrix()}onPinchZoomTransform(t,e){let i=this.paper.k.getScreenCTM(),n=i.inverse().multiply(e).multiply(i).multiply(this.startViewMatrix);this.viewer.setMatrix(n)}onPinchZoomEnd(){this.startViewMatrix=null}onViewUpdate(){this.status.isInDragging()||this.saveViewToClientCache()}loadViewControl(){let t=this.settings.get("viewControl");if("client"===t)if(ki.has("mindmap_view_configuration")){let t=ki.get("mindmap_view_configuration",{})[this.paper.id];t?this.viewer.setProperties(new A(t.position.x,t.position.y),t.zoom):this.applyViewControl(this.settings.get("viewControlClientFallback"))}else this.applyViewControl(this.settings.get("viewControlClientFallback"));else this.applyViewControl(t)}applyViewControl(t){"center"===t?mi((()=>{this.viewer.moveToCenter()})):"center-root-visible"===t?mi((()=>{this.viewer.moveToCenter(),this.viewer.mayMoveToMakeNodeCompletelyVisible(this.paper.mainRoot)})):"root-center"===t?mi((()=>{this.viewer.moveToMakeNodeInCenter(this.paper.mainRoot)})):"birdeye"===t&&mi((()=>{this.viewer.toBirdEyeView()}))}saveViewToClientCache(){if("client"===this.settings.get("viewControl")){let t=ki.get("mindmap_view_configuration",{}),e=(new Date).getTime(),i=e-1e3*this.settings.get("cacheDataExpireSeconds");for(let e of Object.keys(t)){let n=t[e];"object"==typeof n&&n&&(n.timestamp>=i||delete t[e])}t[this.paper.id]={position:this.viewer.getFinalPosition(),zoom:this.viewer.getZoom(),timestamp:e},ki.set("mindmap_view_configuration",t)}}}class Ta{constructor(t,e,i){this.preventingClicking=!1,this.paper=t,this.selections=e,this.settings=i,this.initEvents()}initEvents(){this.paper.on(["node-mousedown","node-tap"],((t,e)=>{e.preventDefault(),t instanceof Uo?this.selections.hasSelected(t)||(t instanceof Hr?this.onClickBranchNode(t,e):t instanceof Gr?this.onClickSummaryNode(t,e):t instanceof Br?this.onClickRelLineNode(t,e):t instanceof us&&this.onClickBoundaryNode(t,e),this.preventClickingEventsForAWhile()):this.paper.isElementBeInteractContainer(e.target)||this.onClickPaperNonInteractArea(e)})),this.paper.on("node-click",((t,e)=>{this.preventingClicking||(t instanceof Gr?this.onClickSummaryNode(t,e):t instanceof Hr?this.onClickBranchNode(t,e):t instanceof Br&&this.onClickRelLineNode(t,e))})),this.selections.on(["select","deselect"],(t=>{t.willUpdateSelf()})),this.paper.on("node-detach",(t=>{this.selections.deselect(t)}))}preventClickingEventsForAWhile(){this.preventingClicking=!0,Y.once(document,"mouseup",(()=>{setTimeout((()=>{this.preventingClicking=!1}),100)}))}onClickBranchNode(t,e){if(e.originalEvent.ctrlKey||e.originalEvent.metaKey)this.selections.branch.toggleSelect(t);else if(e.originalEvent.shiftKey){let e=this.selections.branch.getLatestTouched();if(e&&e!==t&&e.parent===t.parent){let i=e.getSameTypeIndex(),n=t.getSameTypeIndex(),o=this.getNodesInRange(t.parent.branchChildren,i,n),r=o.every((t=>this.paper.selections.branch.hasSelected(t)));r?(this.paper.selections.branch.deselect(...o),this.paper.selections.branch.deselect(t)):(this.paper.selections.branch.select(...o),this.paper.selections.branch.select(t))}else this.selections.branch.select(t)}else this.selections.selectOnly(t);t.willUpdateSelf()}getNodesInRange(t,e,i){let n=Math.min(e,i),o=Math.max(e,i),r=[];for(let e=n;e<=o;e++){let i=t[e];i&&r.push(i)}return r}onClickSummaryNode(t,e){if(e.originalEvent.ctrlKey||e.originalEvent.metaKey)this.selections.summary.toggleSelect(t);else if(e.originalEvent.shiftKey){let e=this.selections.summary.getLatestTouched();if(e&&e.parent===t.parent){let i=e.getSameTypeIndex(),n=t.getSameTypeIndex(),o=Math.min(i,n),r=Math.max(i,n);for(let e=o;e<=r;e++){let i=t.parent.summaryChildAt(e);i&&this.selections.summary.select(i)}}else this.selections.summary.select(t)}else this.selections.selectOnly(t);t.willUpdateSelf()}onClickRelLineNode(t,e){e.originalEvent.ctrlKey||e.originalEvent.metaKey?this.selections.relLine.toggleSelect(t):this.selections.selectOnly(t),t.willUpdateSelf()}onClickBoundaryNode(t,e){e.originalEvent.ctrlKey||e.originalEvent.metaKey?this.selections.boundary.toggleSelect(t):this.selections.selectOnly(t),t.willUpdateSelf()}onClickPaperNonInteractArea(t){t.originalEvent.ctrlKey||t.originalEvent.metaKey||this.settings.get("alwaysSelectAnyNodes")||this.selections.clear()}}class Ma{constructor(t,e,i,n,o,r){this.paper=t,this.selections=e,this.dataManager=i,this.viewer=n,this.status=r,this.shortcutKeys=o,this.initEvents()}initEvents(){this.shortcutKeys.addShortcutKey("ArrowLeft",(()=>this.navigateInDirection(R.Left))),this.shortcutKeys.addShortcutKey("ArrowRight",(()=>this.navigateInDirection(R.Right))),this.shortcutKeys.addShortcutKey("ArrowUp",(()=>this.navigateInDirection(R.Top))),this.shortcutKeys.addShortcutKey("ArrowDown",(()=>this.navigateInDirection(R.Bottom)))}navigateInDirection(t){if(this.status.isInInputing())return;if(this.status.isInDragging())return;let e=this.selections.contentable.getFirstSelected();if(!e)return;let i,n=this.findNeighborNodeInDirection(e,t),o=this.findClosestNodeInDirectionNarrowly(e,this.getAllCandidateNodes(e),t);i=n&&o?n.distance<2*o.distance?n.node:o.node:(null==n?void 0:n.node)||(null==o?void 0:o.node)||null,i&&(this.selections.selectOnly(i),this.viewer.moveByPassiveSelectedNode(i,!0))}findNeighborNodeInDirection(t,e){let i=Fo.get(t),n=t.parent;if(n instanceof Hr&&!(t instanceof Gr)&&Fo.get(n).getBranchLayout().branchStacker.getAlignDirectionOf(i)===e)return{node:n,distance:0};let o=this.dataManager.dataModifier.getSameDeepthOfIds([t.id]).map((t=>this.paper.getNodeById(t))).filter((e=>e&&e!==t)).filter((t=>t instanceof Hr));return N.isCloseWith(i.getOutConnectDirection(),e)&&o.push(...t.branchChildren),this.findClosestNodeInDirection(t,o,e)}findClosestNodeInDirectionNarrowly(t,e,i){let n=Fo.get(t).getRenderBoxInPaperOrigin(),o=N.toVector(i).normalize(),r=Ct(e,(t=>{let e=Fo.get(t).getRenderBoxInPaperOrigin(),i=n.distanceVectorToBox(e),r=i.normalize().dot(o);return r>.707?i.getLength()*r**2:1/0}));return r.value===1/0?null:{node:r.item,distance:r.value}}findClosestNodeInDirection(t,e,i){let n=Fo.get(t).getRenderBoxInPaperOrigin(),o=Ct(e.filter((t=>{let e=Fo.get(t).getRenderBoxInPaperOrigin();return n.distanceDirectionToBoxLike(e,i)})),(t=>{let e=Fo.get(t).getRenderBoxInPaperOrigin();return n.distanceToBox(e)}));return o.value===1/0?null:{node:o.item,distance:o.value}}getAllCandidateNodes(t){let e=this.paper.treeLayout,i=Fo.get(t),n=[];for(let t of e.walkBranchsAndSummaries())t!==i&&n.push(t.node);return n}}class Aa extends gr{constructor(t){super(t.tree),this.node=t,this.layout=Fo.get(this.node)}init(){return super.init(),this.update(),this}initKs(){this.k=new Ve,this.k.setId(de("hover-outline")),this.k.setAttribute("stroke-opacity",.5),this.k.setAttribute("stroke-width",2),this.k.setAttribute("fill","none"),this.k.setStyle("pointer-events","none")}updateStyle(){let t=this.node.tree.style.get("content","outline-color");t=this.node.tree.style.contrastWithBackgroundColor(t);let e=this.layout instanceof As?this.layout.getMainSideInLayouts():this.layout.getInLayouts(),i=this.layout instanceof As?Math.min(...e.map((t=>t.node.style.getOutlineSmoothRadius()))):this.layout.node.style.get("radius");this.k.setAttribute("stroke",t),this.k.smoothRadius=i}updateLayout(){let t=this.layout.getContentBoxInPaperOrigin(),e=this.node.tree.style.get("content","outline-expanded");t=t.expand(e),this.k.x=t.x,this.k.y=t.y,this.k.width=t.width,this.k.height=t.height}}class Pa extends xr{constructor(t,e){super(t.tree,e?N.isVertical(Fo.get(t).getChildExtendDirection())?yr.VerticalSides:yr.HorizontalSides:yr.None),this.node=t,this.layout=Fo.get(this.node)}getContentBoxInPaperOrigin(){let t=this.layout.getContentBoxInPaperOrigin(),e=this.node.tree.style.get("content","outline-expanded");return t.expand(e)}initKs(){super.initKs(),this.k.setId(de("select-rect"))}updateStyle(){super.updateStyle();let t=this.layout instanceof As?this.layout.getMainSideInLayouts():this.layout.getInLayouts(),e=this.layout instanceof As?Math.min(...t.map((t=>t.node.style.getOutlineSmoothRadius()))):this.layout.node.style.get("radius");this.rect.smoothRadius=e}onDragStart(t){super.onDragStart(t);let e=this.node.tree.style.get("content","outline-expanded"),i=N.getOpposite(this.dragAtDirection);this.minBox=this.layout.getDirectionalMinimumContentBoxInPaperOrigin(i).expand(e),this.maxBox=this.layout.getMaxContentBoxInPaperOrigin().expand(e)}}class Da{constructor(t,e,i,n,o){this.hoverMap=new Map,this.selectMap=new Map,this.paperLayoutHoverHandlers=new Map,this.paperLayoutSelectHandlers=new Map,this.nodeType=t,this.paper=e,this.selections=i,this.history=n,this.status=o,this.initEvents()}initEvents(){this.paper.on("node-hover-in",(t=>{t.type===this.nodeType&&this.onHoverInNode(t)})),this.paper.on("node-hover-out",(t=>{t.type===this.nodeType&&this.onHoverOutNode(t)})),this.selections.on("select",(t=>{t.type===this.nodeType&&this.onSelectNode(t)})),this.selections.on("deselect",(t=>{t.type===this.nodeType&&this.onDeselectNode(t)})),this.paper.on("node-detach",(t=>{t.type===this.nodeType&&this.onDetachNode(t)}))}onHoverInNode(t){if(t.beSelected())return;let e=new Aa(t).init();e.appendToPaper(),this.hoverMap.set(t,e);let i=this.updateHoverOutlineLayout.bind(this,t);this.paperLayoutHoverHandlers.set(t,i),this.paper.on("paper-layout-complete",i,this)}updateHoverOutlineLayout(t){let e=this.hoverMap.get(t);e&&e.update()}onHoverOutNode(t){if(this.hoverMap.has(t)){this.hoverMap.get(t).remove(),this.hoverMap.delete(t);let e=this.paperLayoutHoverHandlers.get(t);this.paper.off("paper-layout-complete",e,this),this.paperLayoutHoverHandlers.delete(t)}}onSelectNode(t){this.onHoverOutNode(t);let e=Fo.get(t),i=this.status.isReadWrite()&&(!(e instanceof As)||e.hasSummariedAnyBranches()),n=new Pa(t,i).init();n.appendToPaper(),this.selectMap.set(t,n),n.on("update-box",this.onUpdateContentBox.bind(this,t),this),n.on("end",this.onUpdateBoxEnd.bind(this,t),this);let o=this.updateSelectRectLayout.bind(this,t);this.paperLayoutSelectHandlers.set(t,o),this.paper.on("paper-layout-complete",o,this)}onUpdateContentBox(t,e){let i=[];for(let n of t.parent.branchChildren){let t=Fo.get(n),o=t.getRenderBoxInPaperOrigin();e.leastIntersectWith(o,.5)&&i.push(t.node)}let n=i.map((t=>t.getSameTypeIndex())),o=Math.min(...n),r=Math.max(...n)+1;this.history.recordExecution((()=>{t.modifyOwnData("startIndex",o),t.modifyOwnData("endIndex",r)}))}onUpdateBoxEnd(t){this.updateSelectRectLayout(t)}updateSelectRectLayout(t){if(!t.attached)return;let e=this.selectMap.get(t);e&&e.updateBoxFromContent()}onDeselectNode(t){if(this.selectMap.has(t)){this.selectMap.get(t).remove(),this.selectMap.delete(t);let e=this.paperLayoutHoverHandlers.get(t);this.paper.off("paper-layout-complete",e,this),this.paperLayoutHoverHandlers.delete(t)}}onDetachNode(t){this.onHoverOutNode(t),this.onDeselectNode(t)}}class Ia{constructor(t,e,i,n,o){this.paper=t,this.selections=i,this.viewer=e,this.history=n,this.dataModifier=o,this.initEvents()}initEvents(){this.history.on(["history-undo","history-redo"],this.makeViewSteady,this),this.dataModifier.on(["data-edit-from-outside"],this.makeViewSteady,this)}makeViewSteady(){let[t,e]=this.findCandidateNodes();di((()=>{let i=null;for(let e of t)if(e.attached){i=e;break}if(!i)for(let t of e)if(t.attached){i=t;break}i&&this.paper.pinNodeInDirection(i,R.Left)}))}findCandidateNodes(){let t=this.viewer.getViewBoxInPaperOrigin().center,e=this.paper.treeLayout,i=[],n=[];for(let o of e.walkBranchsAndSummaries()){let e=o.getRenderBoxInPaperOrigin(),r=o.node,s=e.center.diff(t).getLength();this.selections.hasSelected(o.node)?i.push({node:r,distance:s}):n.push({node:r,distance:s})}return i.sort(((t,e)=>t.distance-e.distance)),n.sort(((t,e)=>t.distance-e.distance)),[i.map((t=>t.node)),n.map((t=>t.node))]}}class Ea{constructor(t,e){this.dataManager=t,this.settings=e,this.initEvents()}initEvents(){this.dataManager.dataModifier.on("data-change-bundled",this.willSave,this)}willSave(){if(this.saveTimeout)return;if(!this.settings.get("willCacheData"))return;let t=1e3*this.settings.get("cacheDataIntervalSeconds");this.saveTimeout=setTimeout((()=>{this.saveTimeout=null,this.save()}),t)}async save(){this.clearSaveTimeout();let t=this.dataManager.export(),e=t.id,i=this.settings.get("cacheDataExpireSeconds");await Si.set("data_"+e,t,i)}clearSaveTimeout(){this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null)}async isSupported(){return await Si.isSupported()}async hasCache(t){return await Si.has("data_"+t)}async hasCacheAfter(t,e,i){if(!await Si.has("data_"+t))return!1;let n=await Si.get("data_"+t);return n.modified>e&&(void 0===i||i>(n.autoIncrementId||0))}async getCache(t){return await Si.get("data_"+t)}async deleteCache(t){this.clearSaveTimeout(),await Si.delete("data_"+t)}async clearExpired(t=86400){await Si.throttledClearExpired(t)}}const La={requestTimeoutSeconds:30,retryTimeoutSeconds:10,heartbeatTimeoutSeconds:10,heartbeatMessage:"p"};var Oa,Ba,Ra;!function(t){t[t.NotStarted=0]="NotStarted",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected",t[t.Disconnecting=3]="Disconnecting",t[t.Disconnected=4]="Disconnected"}(Oa||(Oa={}));class Na extends k{constructor(t){super(),this.state=Oa.NotStarted,this.ws=null,this.nextHeartbeatTimeout=null,this.heartbeatNoResponseCount=0,this.heartbeatNoResponseTimeout=null,this.options={...La,...t}}connect(t){this.destroyWSIf(),this.ws=new WebSocket(t),this.ws.onopen=this.onWSOpen.bind(this),this.ws.onmessage=this.onWSMessage.bind(this),this.ws.onclose=t=>this.onWSClose(t.wasClean),this.ws.onerror=this.onWSError.bind(this),this.state=Oa.Connecting}destroyWSIf(){this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null,this.ws.close())}bePositive(){return this.state===Oa.Connecting||this.state===Oa.Connected}beNegative(){return!this.bePositive()}async untilConnected(){if(this.beNegative())throw new Error("Already in disconnecting or disconnected, or in pending!");if(this.state!==Oa.Connected)return new Promise(((t,e)=>{this.once("connected",t),this.once("disconnected",(()=>e("Disconnected"))),setTimeout((()=>e("Timeout")),1e3*this.options.heartbeatTimeoutSeconds)}))}async untilDisconnected(){if(this.state!==Oa.Disconnected)return new Promise((t=>{this.once("disconnected",t)}))}onWSOpen(){this.state===Oa.Connecting&&(this.state=Oa.Connected,this.fire("connected"),this.sendHeartbeatMessageLater(),xe.log("Websocket connected"))}onWSMessage(t){let e=t.data;this.onHeartbeatResponse(),"p"!==e&&this.fire("message",e),xe.verbose("Got Websocket message: "+e)}onHeartbeatResponse(){clearTimeout(this.heartbeatNoResponseTimeout),this.heartbeatNoResponseCount=0}onWSError(t){this.clearHeartbeatTimeout(),this.state!==Oa.Disconnected&&(this.state=Oa.Disconnected,this.fire("disconnected",!1)),xe.warn("Websocket error: "+t.message)}onWSClose(t){this.clearHeartbeatTimeout(),this.state!==Oa.Disconnected&&(this.state=Oa.Disconnected,this.fire("disconnected",t),t||xe.warn("Websocket closed unexpectedly"))}sendHeartbeatMessageLater(){this.clearHeartbeatTimeout(),this.nextHeartbeatTimeout=setTimeout(this.sendHeartbeatMessage.bind(this),1e3*this.options.heartbeatTimeoutSeconds)}clearHeartbeatTimeout(){this.nextHeartbeatTimeout&&clearTimeout(this.nextHeartbeatTimeout)}sendHeartbeatMessage(){this.nextHeartbeatTimeout=null,this.sendWSMessage(this.options.heartbeatMessage),this.heartbeatNoResponseTimeout=setTimeout((()=>{this.heartbeatNoResponseCount++,this.heartbeatNoResponseCount>=3&&this.onLongNoResponse()}))}onLongNoResponse(){this.disconnect(!1,"Haven't received any message after 30 seconds")}disconnect(t,e){this.destroyWSIf(),this.bePositive()&&(t?xe.log("Close Websocket connection manually"):xe.warn("Close Websocket connection accidentally: "+e),this.state=Oa.Disconnecting),this.onWSClose(t)}async sendWSMessage(t){await this.untilConnected(),this.ws.send(t),this.sendHeartbeatMessageLater(),xe.verbose("Send Websocket message: "+t)}}class _a extends Na{constructor(t){super(t),this.requestIdSeed=1,this.responseHandlers=new Map,this.initEvents()}initEvents(){this.on("message",this.processMessage,this),this.on("disconnected",this.onDisconnected,this)}onDisconnected(){for(let{reject:t}of this.responseHandlers.values())t("Disconnect");this.responseHandlers=new Map}async sendBack(t,e){e.action=t,await this.sendWSMessage(JSON.stringify(e))}async request(t,e){let i=String(this.requestIdSeed++);return e.action=t,e.options=e.options||{},e.options.req_id=i,await this.sendWSMessage(JSON.stringify(e)),new Promise(((t,e)=>{this.responseHandlers.set(i,{resolve:t,reject:e}),setTimeout((()=>e("Timeout")),1e3*this.options.requestTimeoutSeconds)})).finally((()=>{this.responseHandlers.delete(i)}))}processMessage(t){var e,i,n;if(this.beNegative())return;let o=JSON.parse(t);if(null===(e=o.options)||void 0===e?void 0:e.req_id){let t=this.responseHandlers.get(null===(i=o.options)||void 0===i?void 0:i.req_id);if(!t)throw new Error(`Didn't find any response handlers with id ${null===(n=o.options)||void 0===n?void 0:n.req_id}!`);200===o.status?t.resolve(o):t.reject(o.status)}else this.fire("broadcast",o.action,o)}}class za{constructor(){this.background=new f(255,255,255,1)}updateBackground(t){this.background=f.fromString(t)||new f(255,255,255,1)}makeColor(t){let e=y.RGBA2HSLA(this.background),i=this.makeSampleList(12,0,1,-1),n=this.makeSampleList(6,.2,.8,-1),o=this.makeSampleList(8,.2,1,e.l/100),[r,s,a]=(l=t,[Fa(43758.5453123*Math.sin(127.1*l)),Fa(43758.5453123*Math.sin(269.5*l)),Fa(43758.5453123*Math.sin(419.2*l))]);var l;let h=i[Math.floor(r*i.length)],d=n[Math.floor(s*n.length)],c=o[Math.floor(a*o.length)];return f.fromHSL(360*h,100*d,100*c).toRGB()}makeSampleList(t,e,i,n){let o=[];for(let r=e;r<=i;r+=1/t-1e-6)Math.abs(r-n)<1.5/t||o.push(r);return o}}function Fa(t){return t-Math.floor(t)}class Wa extends k{constructor(){super(),this.currentVersion=-1,this.currentUserId=-1,this.currentConnectionId=-1,this.userMap=new Map,this.nodeLockMap=new Map,this.userNodeLockMap=new le,this.modifies=[],this.colorGenerator=new za}updateBackgroundColor(t){this.colorGenerator.updateBackground(t);for(let t of this.userMap.values())t.color=this.colorGenerator.makeColor(t.id)}setCurrentVersion(t){this.currentVersion=t}getCurrentVersion(){return this.currentVersion}print(){console.log(this.currentUserId,this.currentConnectionId),console.log([...this.userMap.values()]),console.log([...this.nodeLockMap.values()])}setCurrentUser(t,e){this.currentUserId=t,this.currentConnectionId=e}getCurrentUserId(){return this.currentUserId}getCurrentConnectionId(){return this.currentConnectionId}addUsers(t){for(let e of t){let t=this.colorGenerator.makeColor(e.id),i={...e,color:t};this.userMap.set(e.id,i),this.fire("user-add",i)}}getAllUsers(){return this.userMap.values()}getUserInfo(t){return this.userMap.get(t)}removeUsers(t){for(let e of t){let t=this.userMap.get(e);t&&(this.userMap.delete(e),this.fire("user-remove",t))}let e=[];for(let i of this.nodeLockMap.values())t.includes(i.user_id)&&e.push(i);e.length>0&&this.deleteLock(...e)}hasLock(t){return this.nodeLockMap.has(t)}hasLockedByOthers(t){let e=this.nodeLockMap.get(t);return!!e&&e.user_id!==this.currentUserId}getLockInfo(t){return this.nodeLockMap.get(t)}getUserLocked(t){let e=this.nodeLockMap.get(t);if(e)return this.getUserInfo(e.user_id)}addLock(...t){for(let e of t){let t=e.user_id+"_"+e.fd;if(this.userNodeLockMap.hasLeft(t)){let e=this.nodeLockMap.get(this.userNodeLockMap.getFromLeft(t));e&&this.deleteLock(e)}this.nodeLockMap.set(e.node_id,e),this.userNodeLockMap.add(t,e.node_id),this.fire("lock-add",e)}}deleteLock(...t){for(let e of t)this.nodeLockMap.delete(e.node_id),this.userNodeLockMap.deleteFromRight(e.node_id),this.fire("lock-delete",e)}validateNextVersion(t){return t===this.currentVersion+1}addModifies(t,e,i,n){this.modifies.push({userId:t,version:e,records:i}),this.setCurrentVersion(e),n||this.fire("other-one-modifies",i)}clear(){this.currentVersion=-1,this.currentUserId=-1,this.userMap=new Map,this.nodeLockMap=new Map,this.modifies=[]}}!function(t){t[t.GetUsers=102]="GetUsers",t[t.GetModifies=110]="GetModifies",t[t.GetNodeLocks=120]="GetNodeLocks",t[t.LockNode=121]="LockNode",t[t.UnLockNode=122]="UnLockNode",t[t.Modifies=130]="Modifies"}(Ba||(Ba={})),function(t){t[t.Connect=100]="Connect",t[t.Disconnect=101]="Disconnect",t[t.Locks=121]="Locks",t[t.UnLocks=122]="UnLocks",t[t.Modifies=130]="Modifies",t[t.DocRollback=131]="DocRollback",t[t.QueryVersion=140]="QueryVersion",t[t.ToSave=141]="ToSave",t[t.Saved=142]="Saved",t[t.DocDeleted=150]="DocDeleted",t[t.DocCoopClosed=151]="DocCoopClosed",t[t.DocBecomeReadonly=152]="DocBecomeReadonly",t[t.DocBecomeReadWrite=153]="DocBecomeReadWrite"}(Ra||(Ra={}));const $a={syncEventLongDelaySeconds:20};var Va,ja;!function(t){t[t.Pending=0]="Pending",t[t.Retrying=1]="Retrying",t[t.BeforeSyncing=2]="BeforeSyncing",t[t.Synced=3]="Synced",t[t.Closed=4]="Closed"}(Va||(Va={})),function(t){t[t.Initial=0]="Initial",t[t.Waiting=1]="Waiting",t[t.Fired=2]="Fired"}(ja||(ja={}));class Ha extends k{constructor(t={}){super(),this.state=Va.BeforeSyncing,this.serveData=null,this.fetchModifiesPromise=null,this.fetchingUsers=!1,this.retryCount=0,this.waitToLockNodeId=null,this.longRetryingState=ja.Initial,this.longRetryingTimeout=null,this.options={...$a,...t},this.socket=new _a(t),this.store=new Wa,this.initEvents()}initEvents(){this.socket.on("broadcast",this.onBroadcast,this),this.socket.on("disconnected",this.onSocketClose,this),Y.on(window,"beforeunload",this.onBeforeUnload,this)}onBroadcast(t,e){t===Ra.Connect?this.processConnect(e):t===Ra.Disconnect?this.processDisconnect(e):t===Ra.Locks?this.processLocks(e):t===Ra.UnLocks?this.processUnLocks(e):t===Ra.Modifies?this.processModifies(e):t===Ra.QueryVersion?this.processQueryVersion(e):t===Ra.ToSave?this.processToSave(e):t===Ra.Saved?this.processSaved(e):t===Ra.DocDeleted?this.processDocumentStateChange("deleted"):t===Ra.DocCoopClosed?this.processDocumentStateChange("coop-closed"):t===Ra.DocBecomeReadonly?this.processDocumentStateChange("become-readonly"):t===Ra.DocBecomeReadWrite?this.processDocumentStateChange("become-readwrite"):t===Ra.DocRollback?this.processDocumentStateChange("rollback"):this.fire("coop-broadcast-others",t,e)}async processConnect(t){var e;(null===(e=t.options)||void 0===e?void 0:e.from)&&this.store.setCurrentUser(t.options.from,t.options.fd),t.data&&this.store.addUsers(t.data)}processDisconnect(t){this.store.removeUsers(t.data)}async processLocks(t){this.addLockAndValidateUser(t.data)}processUnLocks(t){this.store.deleteLock(...t.data)}async processModifies(t){this.fetchModifiesPromise&&await this.fetchModifiesPromise;let e=t.options.msg_id;this.store.validateNextVersion(e)?this.store.addModifies(t.options.from,e,t.data,!1):(xe.warn(`Modifies missed, expect "${this.store.getCurrentVersion()+1}", got "${e}", refetching all modifies...`),this.fetchModifies())}processQueryVersion(t){this.socket.sendBack(Ra.QueryVersion,{options:{msg_id:this.store.getCurrentVersion()}})}processToSave(t){let e=this.store.getCurrentVersion(),i=!1;this.fire("coop-to-save",(t=>{i||(i=!0,t&&this.socket.sendBack(Ra.ToSave,{options:{msg_id:e}}))}))}processSaved(t){this.fire("coop-saved",t.options.from,t.options.from===this.store.getCurrentUserId(),t.data.saved_at)}processDocumentStateChange(t){this.fire("coop-document-state-change",t)}async onSocketClose(){this.retryToConnect(),this.markLatestConnectionId()}onBeforeUnload(){this.state===Va.Synced&&this.markLatestConnectionId()}markLatestConnectionId(){this.store.getCurrentConnectionId()&&ki.set("latest_cooperate_connection_id",this.store.getCurrentConnectionId())}async retryToConnect(){if(this.state===Va.Closed||this.state===Va.Retrying)return;this.state=Va.Retrying,0===this.retryCount&&this.fireRetryingEvent();let t=new Promise((t=>{let e=1e3*this.socket.options.retryTimeoutSeconds*(Math.random()+.5);setTimeout(t,e)})),e=new Promise((t=>{window.addEventListener("online",t,!1)}));await Promise.any([t,e]),this.state!==Va.Closed&&(this.retryCount++,this.doStarting())}fireRetryingEvent(){this.fire("coop-retrying"),this.longRetryingTimeout=setTimeout((()=>{this.fire("coop-retrying-for-long"),this.longRetryingState=ja.Fired}),1e3*this.options.syncEventLongDelaySeconds),this.longRetryingState=ja.Waiting}async start(t){this.serveData=t,this.store.setCurrentVersion(t.version),await this.doStarting()}async doStarting(){try{let t=this.serveData,e=`wss://${t.endpoint}/ws?identity_token=${t.identityToken}&group_id=${t.documentId}`;t.restURLParameters&&(e+="&"+t.restURLParameters);let i=ki.get("latest_cooperate_connection_id",null);i&&(e+="&prev_fd="+i),this.state=Va.BeforeSyncing,this.socket.connect(e),await this.socket.untilConnected(),i&&ki.delete("latest_cooperate_connection_id");let n=[this.fetchModifies(),this.fetchNodeLocks()];await Promise.all(n),this.state=Va.Synced,this.retryCount=0,this.fireSyncedEvent()}catch(t){this.retryToConnect()}}fireSyncedEvent(){this.fire("coop-synced"),this.longRetryingState===ja.Waiting?(clearTimeout(this.longRetryingTimeout),this.longRetryingTimeout=null):this.longRetryingState===ja.Fired&&this.fire("coop-synced-after-long"),this.longRetryingState=ja.Initial}async fetchUsersIf(){if(!this.fetchingUsers){this.fetchingUsers=!0;try{let t=await this.socket.request(Ba.GetUsers,{});this.store.addUsers(t.data)}catch(t){}this.fetchingUsers=!1}}async fetchModifies(){this.fetchModifiesPromise&&await this.fetchModifiesPromise,this.fetchModifiesPromise=this.fetchingModifies();try{await this.fetchModifiesPromise}catch(t){}this.fetchModifiesPromise=null}async fetchingModifies(){var t;let e=this.store.getCurrentVersion(),i=await this.socket.request(Ba.GetModifies,{options:{msg_id:e}});if(this.state!==Va.Closed&&i.data.length>0){let e=null===(t=i.data[0])||void 0===t?void 0:t.msg_id,n=ki.get("latest_coop_lost_doc_id")===this.serveData.documentId;if(ki.delete("latest_coop_lost_doc_id"),this.store.validateNextVersion(e))for(let t of i.data)this.store.addModifies(t.user_id,t.msg_id,t.body,!1),t.user_id&&!this.store.getUserInfo(t.user_id)&&(xe.warn(`User "${t.user_id}" missed, refetching all users...`),this.fetchUsersIf());else if(n){xe.warn(`Modifies still missed after refeching, expect "${this.store.getCurrentVersion()+1}", got "${e}".`);for(let t of i.data)this.store.addModifies(t.user_id,t.msg_id,t.body,!1),t.user_id&&!this.store.getUserInfo(t.user_id)&&(xe.warn(`User "${t.user_id}" missed, refetching all users...`),this.fetchUsersIf());xe.warn(`Have reloaded document before, so force load modifies, new version is ${this.store.getCurrentVersion()}!`)}else this.fire("coop-lost"),ki.set("latest_coop_lost_doc_id",this.serveData.documentId,600),xe.warn(`Modifies still missed after refeching, expect "${this.store.getCurrentVersion()+1}", got "${e}".`),xe.warn("Cooperation lost, must reload document!"),this.close()}}async fetchNodeLocks(){let t=await this.socket.request(Ba.GetNodeLocks,{});this.addLockAndValidateUser(t.data)}addLockAndValidateUser(t){this.store.addLock(...t);for(let e of t)e.user_id&&!this.store.getUserInfo(e.user_id)&&(xe.warn(`User "${e.user_id}" missed, refetching all users...`),this.fetchUsersIf())}async untilSynced(){if(this.state===Va.Pending||this.state===Va.BeforeSyncing)return new Promise(((t,e)=>{this.once("coop-synced",t),this.socket.once("disconnected",(()=>e("Disconnected")))}));if(this.state===Va.Closed)throw new Error("Cooperate service was been closed!")}async lockNode(t){this.waitToLockNodeId=t;try{if(await this.untilSynced(),this.waitToLockNodeId){t=this.waitToLockNodeId,this.waitToLockNodeId=null;let e=await this.socket.request(Ba.LockNode,{data:{node_id:t}});return 200===e.status&&(this.store.addLock(...e.data),!0)}}catch(t){return!0}return!0}async unlockNode(t){if(this.waitToLockNodeId===t)return this.waitToLockNodeId=null,!0;try{await this.untilSynced();let e=await this.socket.request(Ba.UnLockNode,{data:{node_id:t}});if(200===e.status)return this.store.deleteLock(...e.data),!0}catch(t){return!1}return!1}async commitModifies(t){try{await this.untilSynced();let e=await this.socket.request(Ba.Modifies,{data:t});if(200===e.status)return this.store.addModifies(this.store.getCurrentUserId(),e.options.msg_id,t,!0),!0}catch(t){}return!1}close(){this.state!==Va.Closed&&(this.state=Va.Closed,this.fire("coop-closed"),this.socket.disconnect(!0),this.store.clear(),this.retryCount=0,this.fetchModifiesPromise=null,this.fetchingUsers=!1,Y.off(window,"beforeunload",this.onBeforeUnload,this))}}class Ua{constructor(t){this.dataId=null,this.dataToSave=null,this.settings=t}willSave(t,e){if(!this.settings.get("willCacheData"))return;this.dataId=t,this.dataToSave=[...e],this.clearSaveTimeout();let i=1e3*this.settings.get("cacheDataIntervalSeconds");this.saveTimeout=setTimeout((()=>{this.saveTimeout=null,this.save()}),i)}async save(){let t=this.dataId,e=this.dataToSave,i=this.settings.get("cacheDataExpireSeconds");await Si.set("coop_modifies_"+t,e,i)}clearSaveTimeout(){this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null,this.dataId=null,this.dataToSave=null)}async isSupported(){return await Si.isSupported()}async hasCache(t){return await Si.has("coop_modifies_"+t)}async getCache(t){return await Si.get("coop_modifies_"+t)}async deleteCache(t){this.clearSaveTimeout(),await Si.delete("coop_modifies_"+t)}async clearExpired(t=86400){await Si.throttledClearExpired(t)}}class Ka extends k{constructor(t,e,i,n,o,r,s,a){super(),this.serve=null,this.waitToCommitRecords=[],this.commitingRecords=[],this.documentId=null,this.commitingModifiesPromise=null,this.dataManager=t,this.dataModifier=e,this.history=i,this.textEditorController=n,this.dataCacher=new Ua(o),this.selections=r,this.style=s,this.status=a,this.initEvents()}initEvents(){this.history.on("history-edit",this.onHistoryEdit,this),this.textEditorController.on("editor-enter",this.lockEditingNode,this),this.textEditorController.on("editor-exit",this.unlockEditingNode,this),this.selections.relLine.on("select",this.lockEditingNode,this),this.selections.relLine.on("deselect",this.unlockEditingNode,this),this.on("coop-synced",this.onCoopSynced,this),this.on("coop-lost",this.onCoopLost,this),this.on("coop-document-state-change",this.onCoopDocumentStateChange,this),this.style.on("tree-style-background-change",this.updateColorGeneratorBackground,this),this.dataModifier.dataLocker.on("need-lock",this.doLockingNode,this),this.dataModifier.dataLocker.on("need-unlock",this.doUnlockingNode,this)}async onHistoryEdit(t){this.waitToCommitRecords.push(t),this.mayCommitLocalModifies()}async lockEditingNode(){let t=this.textEditorController.getEditingNode();t&&this.dataModifier.dataLocker.lockUnique(t.id)}async doLockingNode(t){var e;this.serve&&(await this.serve.lockNode(t)||(null===(e=this.textEditorController.getEditingNode())||void 0===e?void 0:e.id)===t&&(this.textEditorController.cancelEditing(),this.fire("coop-edit-locked-denied",t)))}unlockEditingNode(){this.dataModifier.dataLocker.unlockUnique()}async doUnlockingNode(t){var e;await(null===(e=this.serve)||void 0===e?void 0:e.unlockNode(t))}onCoopSynced(){this.dataModifier.dataLocker.getLockedUnique()&&this.doLockingNode(this.dataModifier.dataLocker.getLockedUnique()),this.waitToCommitRecords.length>0&&this.mayCommitLocalModifies()}onCoopLost(){this.status.setReadonly()}onCoopDocumentStateChange(t){"rollback"===t&&this.dataCacher.deleteCache(this.documentId)}updateColorGeneratorBackground(){var t;let e=this.style.get("map","background-color");null===(t=this.serve)||void 0===t||t.store.updateBackgroundColor(e)}getUserInfo(t){var e;return null===(e=this.serve)||void 0===e?void 0:e.store.getUserInfo(t)}getAllUsers(){var t;return(null===(t=this.serve)||void 0===t?void 0:t.store.getAllUsers())||[]}getCurrentVersion(){var t;return null===(t=this.serve)||void 0===t?void 0:t.store.getCurrentVersion()}async start(t){this.removeServeIf(),this.initServeIf(),this.documentId=t.documentId,this.dataModifier.dataLocker.setStore(this.serve.store),await this.dataManager.untilImported(),this.updateColorGeneratorBackground(),await this.serve.start(t),this.checkCache()}removeServeIf(){this.serve&&(this.serve.unBroadcastTo(this),this.serve.store.unBroadcastTo(this),this.serve.close(),this.waitToCommitRecords=[],this.commitingRecords=[],this.serve=null)}initServeIf(){this.serve||(this.serve=new Ha,this.serve.broadcastTo(this),this.serve.store.broadcastTo(this,{"user-add":"coop-user-add","user-remove":"coop-user-remove"}),this.serve.store.on("other-one-modifies",this.onOtherOneModifies,this))}onOtherOneModifies(t){this.dataModifier.editFromOutside(t.flat())}async checkCache(){if(await this.dataCacher.clearExpired(),await this.dataCacher.hasCache(this.documentId)){if(await this.fireCoopCacheDetectedEvent()){let t=await this.dataCacher.getCache(this.documentId);t&&this.history.recordExecution((()=>{this.dataModifier.modifyByRecords(t.flat())}))}this.dataCacher.deleteCache(this.documentId)}}fireCoopCacheDetectedEvent(){return new Promise((t=>{this.fire("coop-cache-detected",t)}))}async mayCommitLocalModifies(){if(this.commitingModifiesPromise&&await this.commitingModifiesPromise,this.serve&&0!==this.waitToCommitRecords.length){this.commitingModifiesPromise=this.commitingModifies();try{await this.commitingModifiesPromise}catch(t){}this.commitingModifiesPromise=null}}async commitingModifies(){this.dataCacher.willSave(this.documentId,this.waitToCommitRecords);let t=this.serve.commitModifies(this.waitToCommitRecords);this.commitingRecords=this.waitToCommitRecords,this.waitToCommitRecords=[];try{await t?this.onCommitSuccessfully():this.onCommitFailed()}catch(t){this.onCommitFailed()}}onCommitSuccessfully(){this.commitingRecords=[],this.dataCacher.deleteCache(this.documentId)}onCommitFailed(){this.waitToCommitRecords.unshift(...this.commitingRecords),this.commitingRecords=[]}filterOutLockedIds(t,e){let i=[],n=[];for(let e of t)this.dataModifier.hasLockedInDirectly(e)?i.push(e):n.push(e);return i.length>0&&this.fire(`coop-${e}-locked-denied`,i),n}filterOutLockedNodes(t,e){let i=t.map((t=>t.id)),n=new Set(this.filterOutLockedIds(i,e));return t.filter((t=>n.has(t.id)))}filterOutLockedDataItems(t,e){let i=t.map((t=>t.data.id)),n=new Set(this.filterOutLockedIds(i,e));return t.filter((t=>n.has(t.data.id)))}remove(){this.removeServeIf()}}class qa{constructor(t){this.presentation=t,this.initEvents()}initEvents(){Y.on(document,"keydown",this.onKeyDown,this),zt.on(document,"slide",this.onSlide,this)}onKeyDown(t){let e=H(t);["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End","PageUp","PageDown","Escape"].indexOf(e)>-1&&this.presentation.paper.onKeyDown(t),"ArrowLeft"===e||"ArrowUp"===e?this.presentation.paper.navigateToPrevious():"ArrowRight"===e||"ArrowDown"===e?this.presentation.paper.navigateToNext():"Home"===e?this.presentation.paper.navigateToFirst():"End"===e?this.presentation.paper.navigateToLast():"PageUp"===e?this.presentation.paper.navigateToPrevious():"PageDown"===e?this.presentation.paper.navigateToNext():"Escape"===e&&this.presentation.end()}onSlide(t,e){t.preventDefault(),[R.Left,R.Top,R.Right,R.Bottom].indexOf(e)>-1&&this.presentation.paper.onSlide(t),e===R.Left||e===R.Top?this.presentation.paper.navigateToPrevious():(e===R.Right||e===R.Bottom)&&this.presentation.paper.navigateToNext()}remove(){Y.off(document,"keydown",this.onKeyDown,this)}}class Za extends k{constructor(t){super(),this.current={type:"first",item:null},this.setTreeData(t)}setTreeData(t){this.rootData=t,this.store=new ao,this.store.addItem(t)}getRootPageData(){return this.rootData}setCurrentPageData(t){let e=this.current;this.current=t,this.fire("turn",t,e)}getCurrentPageData(){return this.current}getPageDataOfId(t){let e=this.store.getItem(t);return e?{type:"normal",item:e}:null}getPreviousSiblingPageData(){if(!this.current.item)return null;let t=this.store.getPreviousSibling(this.current.item.data.id);return t?{type:"normal",item:t}:null}getNextSiblingPageData(){if(!this.current.item)return null;let t=this.store.getNextSibling(this.current.item.data.id);return t?{type:"normal",item:t}:null}getParentPageData(){if(!this.current.item)return null;let t=this.store.getParent(this.current.item.data.id);return t?{type:"normal",item:t}:null}getParentItemOf(t){return this.store.getParent(t)||null}getPreviousPageData(){var t;if(!this.current.item){if("last"===this.current.type){if(null===(t=this.rootData.children)||void 0===t?void 0:t.length){let t=this.store.getFinalDescentant(this.rootData.data.id);return t?{type:"normal",item:t}:null}return{type:"first",item:null}}return null}let e=this.store.getPrevious(this.current.item.data.id);return e?e.data.id===this.rootData.data.id?{type:"menu",item:e}:{type:"normal",item:e}:{type:"first",item:null}}getNextPageData(){var t;if(!this.current.item)return"first"===this.current.type?(null===(t=this.rootData.children)||void 0===t?void 0:t.length)?{type:"menu",item:this.rootData}:{type:"last",item:null}:null;let e=this.store.getNext(this.current.item.data.id);return e?{type:"normal",item:e}:{type:"last",item:null}}comparePageData(t,e){return this.getPageDataIndex(t)-this.getPageDataIndex(e)}getPageDataIndex(t){return t?"first"===t.type?0:"menu"===t.type?1:"last"===t.type?1/0:this.getGlobalItemIndexOf(t.item.data.id):-1}getGlobalItemIndexOf(t){let e,i=0;for(;e=this.store.getPrevious(t);)t=e.data.id,i++;return i}}class Ga{constructor(t){this.version=0,this.currentPage=null,this.previousPage=null,this.playingTransitions=[],this.paper=t}async updateCurrentPage(t){this.previousPage&&this.previousPage.remove(),this.previousPage=this.currentPage,this.currentPage=t}async playStartTransitions(){this.endAllTransitions(),this.version++;let t=this.paper.style.get("transition","enter-duration"),e=this.paper.style.get("transition","easing");await new Qe(t,e,(t=>{this.paper.k.setAttribute("opacity",t)})).playBetween(0,1)}async playTransitions(){let t=this.previousPage;await this.doPlayingTransitions(),null==t||t.remove()}async doPlayingTransitions(){this.endAllTransitions(),this.version++;let t=this.version;if(await new Promise((t=>{requestAnimationFrame(t)})),!this.previousPage||!this.currentPage)return;if(t!==this.version)return;let e=this.previousPage.getTransitionParts(),i=this.currentPage.getTransitionParts();0===e.length||0===i.length?await this.doPlayingGlobalTransitions():await this.doPlayingPageTransitions(e,i)}matchParts(t,e){let i=t.map((t=>({prev:t,curr:e.find((e=>e.id===t.id))}))).filter((t=>t.prev&&t.curr));return{matches:i,prev:t.filter((t=>!i.find((e=>e.prev===t)))),curr:e.filter((t=>!i.find((e=>e.curr===t))))}}async doPlayingGlobalTransitions(){let t=this.version,e=this.paper.style.get("transition","enter-duration"),i=this.paper.style.get("transition","leave-duration"),n=this.paper.style.get("transition","easing"),o=this.previousPage,r=this.currentPage;r.k.setAttribute("opacity",0);let s=new Qe(i,n,(t=>{o.k.setAttribute("opacity",1-t)}));this.playingTransitions=[s],await s.playBetween(0,1),t===this.version&&(s=new Qe(e,n,(t=>{r.k.setAttribute("opacity",t)})),this.playingTransitions=[s],await s.playBetween(0,1))}async doPlayingPageTransitions(t,e){let i=this.version,n=this.matchParts(t,e),o=null,r=[],s=this.paper.style.get("transition","enter-duration"),a=this.paper.style.get("transition","leave-duration");for(let t of n.matches)if(o=this.calcTitleTranslateMatrix(t.prev,t.curr),null!==o)break;for(let t of n.matches)r.push(this.doPlayingMatchedTransition(t.prev,t.curr,o));for(let t of n.prev)r.push(this.doPlayingPrevTransition(t,o,a));for(let t of n.curr)this.doHiddingCurrParts(t);if(null!==o){for(let t of n.curr)"title"===t.type&&r.push(this.doPlayingCurrTransition(t,o,a));n.curr=n.curr.filter((t=>"title"!==t.type))}if(await Promise.all(r),i===this.version){r=[];for(let t of n.curr)r.push(this.doPlayingCurrTransition(t,o,s));await Promise.all(r)}}async doPlayingMatchedTransition(t,e,i){var n,o;let r=t.k,s=e.k;if(i&&i.equals(lt.I())&&"title"===t.type&&"title"===e.type&&r.getAttribute("fill")===s.getAttribute("fill")&&(null!==(n=r.getAttribute("opacity"))&&void 0!==n?n:1)===(null!==(o=s.getAttribute("opacity"))&&void 0!==o?o:1))return void r.setAttribute("opacity",0);if(!(r instanceof _e&&s instanceof _e))return;let a=this.paper.style.get("transition","leave-duration"),l=this.paper.style.get("transition","easing"),h=new ti(r,s,a,l);this.playingTransitions.push(h),await h.play()}calcTitleTranslateMatrix(t,e){if("title"!==t.type||"title"!==e.type)return null;let i=e.k instanceof Kt?e.k.transform.matrix.e:e.k.x,n=e.k instanceof Kt?e.k.transform.matrix.f:e.k.x,o=t.k instanceof Kt?t.k.transform.matrix.e:t.k.x,r=t.k instanceof Kt?t.k.transform.matrix.f:t.k.y,s=new _(i,n,e.k.getComputedWidth(),e.k.getComputedHeight()),a=new _(o,r,t.k.getComputedWidth(),t.k.getComputedHeight());return lt.fromBoxPair(a,s)}async doPlayingPrevTransition(t,e,i){let n=this.paper.style.get("transition","easing"),o=new Qe(i,n,(i=>{t.k.setAttribute("opacity",1-i),"title"===t.type&&e&&t.k.transform.setMatrix(e.interpolate(i))}));this.playingTransitions.push(o),await o.playBetween(0,1)}doHiddingCurrParts(t){t.k.setAttribute("opacity",0)}async doPlayingCurrTransition(t,e,i){let n=this.paper.style.get("transition","easing"),o=null==e?void 0:e.inverse(),r=new Qe(i,n,(i=>{if(t.k.setAttribute("opacity",i),"title"===t.type&&e){let n=e.interpolate(i).multiply(o);t.k.transform.setMatrix(n)}}));this.playingTransitions.push(r),await r.playBetween(0,1)}endAllTransitions(){for(let t of this.playingTransitions)t.cancel();this.playingTransitions=[]}}class Ya{constructor(t,e){this.needsUpdate=!1,this.playingTransitions=[],this.pageData=t,this.paper=e}init(){return this.initKs(),this.initEvents(),this.willUpdate(),this}initKs(){this.k=new Kt,this.k.setId(de("presentation-page"))}initEvents(){}updateBaseTextStyle(t,e){t.fontFamily=this.paper.style.get(e,"font-family"),t.fontSize=this.paper.style.get(e,"font-size"),t.fontWeight=this.paper.style.get(e,"font-weight"),t.italic="italic"===this.paper.style.get(e,"font-style"),t.lineHeight=this.paper.style.get(e,"line-height"),t.setAttribute("fill",this.paper.style.get(e,"color"));let i=(n=t.content,/[\u4e00-\u9fa5]/.test(n));var n;t.letterSpacingRate=this.paper.style.get(e,i?"letter-spacing-rate-zh":"letter-spacing-rate")}willUpdate(){this.needsUpdate=!0,ot(this)}update(){}endAllTransitions(){for(let t of this.playingTransitions)t.cancel();this.playingTransitions=[]}getTransitionParts(){return[]}canNavigateToNext(){return!1}canNavigateToPrevious(){return!1}navigateToNext(){}navigateToPrevious(){}remove(){this.k.remove()}}const Ja={color:"#000","font-family":"Open Sans","font-weight":"normal","font-style":"normal","line-height":1.5,"letter-spacing-rate":0,"letter-spacing-rate-zh":.1},Xa={paper:{"background-color":"#fff"},header:{...Ja,"font-size":180},header_stat:{...Ja,"font-size":40,"font-weight":600},menu:{...Ja,"font-size":50},title:{...Ja,"font-size":50,"sub-title-opacity":.5},content:{...Ja,"font-size":100},transition:{"leave-duration":750,"enter-duration":750,easing:"ease-out-cubic"}};class Qa{constructor(){this.themeData={}}updateThemeData(t){this.themeData=t}getBackgroundStyle(){let t=this.get("paper","background-image"),e=this.get("paper","background-color"),i=!!t;if(_i.getBackgroundURL(t)&&i){const i=m?"cover":"100% 100%";return`url(${_i.getBackgroundURL(t)}) left bottom / ${i} ${e}`.trim()}return e}get(t,e){var i;return null!==(i=this.getInTheme(t,e))&&void 0!==i?i:this.getDefault(t,e)}getInTheme(t,e){var i;return null===(i=this.themeData[t])||void 0===i?void 0:i[e]}getDefault(t,e){return Xa[t][e]}}var tl;!function(t){t.Themes={},t.register=function(e,i){t.Themes[e]=i},t.has=function(e){return!!t.Themes[e]},t.get=function(e){return t.Themes[e]}}(tl||(tl={}));class el extends k{constructor(){super(...arguments),this.name=""}setThemeName(t){t&&!tl.has(t)&&(console.error(`Color Theme "${t}" is not exist!`),t=""),t!==this.name&&(this.name=t,this.fire("theme-change",t))}getThemeData(){return tl.get(this.name)}}tl.register("dark",{paper:{"background-color":"#000","background-image":"dark"},header:{color:"#fff"},header_stat:{color:"rgba(255, 255, 255, 0.5)"},menu:{color:"#fff"},title:{color:"#fff"},content:{color:"#fff"}}),tl.register("sea",{paper:{"background-color":"#000","background-image":"sea"},header:{color:"#fff"},header_stat:{color:"#fff"},menu:{color:"#fff"},title:{color:"#fff"},content:{color:"#fff"}}),tl.register("technology_1",{paper:{"background-color":"#000","background-image":"technology_1"},header:{color:"#fff"},header_stat:{color:"#fff"},menu:{color:"#fff"},title:{color:"#fff"},content:{color:"#fff"}}),tl.register("technology_2",{paper:{"background-color":"#000","background-image":"technology_2"},header:{color:"#fff"},header_stat:{color:"#fff"},menu:{color:"#fff"},title:{color:"#fff"},content:{color:"#fff"}}),tl.register("oil_painting",{paper:{"background-color":"#fff","background-image":"oil_painting"},header:{color:"#000"},header_stat:{color:"#000"},menu:{color:"#000"},title:{color:"#000"},content:{color:"#000"}}),tl.register("water_painting",{paper:{"background-color":"#fff","background-image":"water_painting"},header:{color:"#000"},header_stat:{color:"#000"},menu:{color:"#000"},title:{color:"#000"},content:{color:"#000"}}),tl.register("annual_meeting",{paper:{"background-color":"#fff","background-image":"annual_meeting"},header:{color:"#fff"},header_stat:{color:"#fff"},menu:{color:"#fff"},title:{color:"#fff"},content:{color:"#fff"}}),tl.register("dispersion",{paper:{"background-color":"#fff","background-image":"dispersion"},header:{color:"#000"},header_stat:{color:"#000"},menu:{color:"#000"},title:{color:"#000"},content:{color:"#000"}}),tl.register("gilding",{paper:{"background-color":"#fff","background-image":"gilding"},header:{color:"#000"},header_stat:{color:"#000"},menu:{color:"#000"},title:{color:"#000"},content:{color:"#000"}}),tl.register("spring",{paper:{"background-color":"#fff","background-image":"spring"},header:{color:"#000"},header_stat:{color:"#000"},menu:{color:"#000"},title:{color:"#000"},content:{color:"#000"}});class il extends Ya{constructor(t,e){super(t,e),this.playedTransition=!1,this.data=e.dataManager.getRootPageData()}initKs(){super.initKs(),this.content=new _e,this.author=new _e,this.date=new _e,this.k.append(this.content),this.k.append(this.author),this.k.append(this.date)}async update(){this.updateContent(),this.updateStyle(),await rt(),this.updateLayout(),this.playedTransition||(this.playTransition(),this.playedTransition=!0)}updateContent(){this.content.content=this.data.data.text,this.author.content=(_i.trans("author")||"Author")+": "+this.data.author,this.date.content=fe(new Date,"yyyy / MM / dd")}updateStyle(){this.updateBaseTextStyle(this.content,"header"),this.content.maxLineCount=2,this.content.adaptFontSize=!0,this.content.minFontSize=Math.floor(.556*this.content.fontSize),this.content.width=.84*this.paper.size.width,this.content.maxHeight=this.content.fontSize*this.content.lineHeight*1.5,this.content.textAlign="center",this.updateBaseTextStyle(this.author,"header_stat"),this.author.maxLineCount=1,this.updateBaseTextStyle(this.date,"header_stat"),this.date.maxLineCount=1}updateLayout(){let t=new Ii;t.width=this.paper.size.width,t.height=this.paper.size.height,t.direction="column";let e=new Ii(this.content);e.width=this.content.getComputedWidth(),e.height=this.content.getComputedHeight(),e.margin=[30];let i=new Ii(this.author);i.width=this.author.getComputedWidth(),i.height=this.author.getComputedHeight(),i.margin=[80];let n=new Ii(this.date);n.width=this.date.getComputedWidth(),n.height=this.date.getComputedHeight(),n.margin=[80];let o=new Ii;o.direction="row",o.append(i),o.append(n),t.append(e),t.append(o),t.doDisplay();for(let{unit:e,x:i,y:n}of t.walkWithPositions())e.data&&(e.data.x=i,e.data.y=n)}async playTransition(){this.author.setAttribute("opacity",0),this.date.setAttribute("opacity",0);let t=this.paper.style.get("transition","enter-duration"),e=this.paper.style.get("transition","leave-duration"),i=this.paper.style.get("transition","easing");await function(t=0){return new Promise((e=>setTimeout(e,t)))}(e),new Qe(t,i,(t=>{this.author.setAttribute("opacity",t),this.date.setAttribute("opacity",t)})).playBetween(0,1)}}class nl extends Ya{initKs(){super.initKs(),this.content=new _e,this.k.append(this.content)}async update(){this.updateContent(),this.updateStyle(),await rt(),this.updateLayout()}updateContent(){this.content.content=_i.trans("endPresentation")||"Thanks for your listening!"}updateStyle(){this.updateBaseTextStyle(this.content,"header"),this.content.maxLineCount=2,this.content.adaptFontSize=!0,this.content.minFontSize=Math.floor(.556*this.content.fontSize),this.content.width=.84*this.paper.size.width,this.content.maxHeight=this.content.fontSize*this.content.lineHeight*1.5,this.content.textAlign="center"}updateLayout(){let t=new Ii;t.width=this.paper.size.width,t.height=this.paper.size.height,t.direction="column";let e=new Ii(this.content);e.width=this.content.getComputedWidth(),e.height=this.content.getComputedHeight(),t.append(e),t.doDisplay();for(let{unit:e,x:i,y:n}of t.walkWithPositions())e.data&&(e.data.x=i,e.data.y=n)}}class ol extends Ya{constructor(t,e){super(t,e),this.items=[],this.columnMode="short",this.dataItems=[],this.data=e.dataManager.getRootPageData()}async update(){this.updateMenuItems(12),this.updateStyle(),await rt(),await this.updateColumnMode(),this.updateLayout()}updateMenuItems(t){let e=this.data.children;e.length>t&&(e=e.slice(0,t-1),e.push({data:{id:"",text:"..."}}));for(let t=0;t<e.length;t++){let i=e[t],n=this.items[t];n||(n=this.items[t]=new ze,n.on("click",(t=>this.navigateToItem(t,i))),this.k.append(n)),n.content=i.data.text}for(let t=this.items.length;t>e.length;t--)this.items.pop().remove();this.dataItems=e}navigateToItem(t,e){t.stopPropagation(),this.paper.navigateById(e.data.id)}updateStyle(){for(let t of this.items)this.updateBaseTextStyle(t,"menu"),t.maxLineCount=1,t.adaptFontSize=!1,t.width=.181*this.paper.size.width,t.textAlign="center"}updateToMultiLinesStyle(){for(let t of this.items)t.maxLineCount=2,t.adaptFontSize=!1,t.fontSize=Math.floor(.8*t.fontSize),t.width=.2344*this.paper.size.width,t.textAlign="left"}updateToMultiLinesAlignCenter(){for(let t of this.items)t.textAlign="center"}async updateColumnMode(){this.items.some((t=>t.computed.ellipsisInEnd))&&(this.columnMode="long",this.updateMenuItems(9),this.updateToMultiLinesStyle(),await rt(),this.items.some((t=>t.computed.lineCount>1))||(this.updateToMultiLinesAlignCenter(),await rt()))}updateLayout(){let t=new Ii;t.width=this.paper.size.width,t.height=this.paper.size.height,t.direction="column";let e="long"===this.columnMode?3:4,i=Math.ceil(this.items.length/e);for(let n=0;n<i;n++){let i=new Ii;i.alignItems="long"===this.columnMode?"start":"center";for(let t=n*e;t<(n+1)*e&&t<this.items.length;t++){let e=this.items[t],n=new Ii(e);n.width=e.getComputedWidth(),n.height=e.getComputedHeight(),n.margin=[88,.037*this.paper.size.width],i.append(n)}t.append(i)}t.doDisplay();for(let{unit:e,x:i,y:n}of t.walkWithPositions())e.data&&(e.data.x=i,e.data.y=n)}getTransitionParts(){return this.items.map(((t,e)=>({type:"content",id:this.dataItems[e].data.id,k:t})))}}class rl extends Ya{constructor(t,e,i){super(t,i),this.previousImageBox=null,this.currentImageBox=null,this.titleItems=[null,null],this.data=t.item,this.hasImage=!!this.data.data.image,this.hasText=!!this.data.data.text,this.hasBoth=this.hasImage&&this.hasText,this.showingText=this.hasBoth?e:this.hasText;const n=this.data.data.hyperlink||"";this.hasReccloudLink=/(reccloud.cn|reccloud.com|dev-reccloud-cn.aoscdn.com|dev-reccloud-com.aoscdn.com)\/u\/[0-9a-zA-Z]{7}$/.test(n),this.showingVideo=!1}initKs(){super.initKs(),this.title1=new ze,this.title2=new ze,this.titleSpliter=new Ve,this.image=new Zt,this.content=new ze,this.videoIcon=Wt.fromCode('\n\t\t\t<g>\n\t\t\t\t<circle style="opacity:0;fill:#FFFFFF;" cx="37" cy="37" r="25.4"/>\n\t\t\t\t<path style="fill:#C2C2C2;" d="M37,6.9C20.4,6.9,6.9,20.4,6.9,37S20.4,67.1,37,67.1S67.1,53.6,67.1,37S53.6,6.9,37,6.9z M37,62.4C23,62.4,11.6,51,11.6,37S23,11.6,37,11.6S62.4,23,62.4,37S51,62.4,37,62.4z"/>\n\t\t\t\t<path style="fill:#C2C2C2;" d="M50.4,40.6L34.1,51.5c-1.8,1.2-4-0.3-4-2.7V27c0-2.4,2.2-3.9,4-2.7l16.3,10.9C52.2,36.4,52.2,39.4,50.4,40.6z"/>\n\t\t\t</g>\n\t\t\t'),this.videoIcon.setAttribute("opacity",0),this.videoIcon.setAttribute("cursor","pointer"),this.k.append(this.title1),this.k.append(this.titleSpliter),this.k.append(this.title2),this.k.append(this.image),this.k.append(this.content),this.k.append(this.videoIcon)}async update(){this.updateContent(),this.updateStyle(),this.updateImageSize(),await rt(),await this.updateTitleSize(),this.updateLayout()}canNavigateToNext(){return this.hasBoth&&!this.showingText||this.hasReccloudLink&&!this.showingVideo}canNavigateToPrevious(){return this.hasBoth&&this.showingText}navigateToNext(){if(!this.hasReccloudLink||this.showingVideo||!this.showingText&&(this.hasBoth||this.showingText))this.showingText=!0,this.updateContentLayout(),this.playTransitions();else{this.showingVideo=!0;const t=this.data.data.hyperlink||"";this.paper.clickVideoIcon(t)}}navigateToPrevious(){this.showingText=!1,this.showingVideo=!1,this.updateContentLayout(),this.playTransitions()}updateContent(){var t,e;this.titleItems=this.getTitleItems(),this.title1.content=(null===(t=this.titleItems[0])||void 0===t?void 0:t.data.text)||"",this.title2.content=(null===(e=this.titleItems[1])||void 0===e?void 0:e.data.text)||"",this.hasImage&&(this.image.url=this.data.data.image),this.content.content=this.data.data.text,this.videoIcon.on("click",this.onClickVideoIcon,this)}onClickVideoIcon(t){t.preventDefault();const e=this.data.data.hyperlink||"";this.paper.clickVideoIcon(e,t),t.stopPropagation(),this.showingVideo=!0}getTitleItems(){let t=this.paper.dataManager.getParentItemOf(this.data.data.id),e=this.paper.dataManager.getRootPageData().data.id;t&&t.data.id===e&&(t=null);let i=null;return t&&(i=this.paper.dataManager.getParentItemOf(t.data.id),i&&i.data.id===e&&(i=null)),[i,t]}updateStyle(){this.updateBaseTextStyle(this.title1,"title"),this.title1.maxLineCount=1,this.title1.maxWidth=this.paper.size.width*(this.title2.content?.25:.5);let t=f.fromString(this.paper.style.get("title","color"));t.a=this.paper.style.get("title","sub-title-opacity"),this.title1.setAttribute("fill",t.toString()),this.updateBaseTextStyle(this.title2,"title"),this.title2.maxLineCount=1,this.title2.maxWidth=this.paper.size.width*(this.title1.content?.25:.5),this.titleSpliter.setAttribute("fill",this.paper.style.get("title","color")),this.titleSpliter.width=this.titleItems[0]&&this.titleItems[1]?4:0,this.titleSpliter.height=.8*this.title1.fontSize,this.updateBaseTextStyle(this.content,"content"),this.content.adaptFontSize=!0,this.content.minFontSize=Math.floor(.4*this.content.fontSize),this.content.maxWidth=this.paper.size.width*(this.hasImage?.50625:.893),this.content.maxHeight=Math.max(this.paper.size.height-400,this.content.fontSize*this.content.lineHeight*2.4),this.content.textAlign=this.hasImage?"left":"center",this.content.fontSizePerLineDecreasingRate=.8,this.content.textAlignForMultiLines=this.hasImage?null:[3,"left"],this.content.lineHeightForMultiLines=[3,1.133*this.content.lineHeight]}async updateTitleSize(){if(![this.title1,this.title2].some((t=>t.computed.ellipsisInEnd)))return;let t=.8*this.paper.style.get("title","font-size");this.title1.fontSize=t,this.title2.fontSize=t,this.titleSpliter.height=.8*t,await rt()}updateLayout(){let t=new Ii;t.width=this.paper.size.width,t.height=this.paper.size.height,t.direction="column",t.justifyContent="start",t.collapseChildMargins=!1;let e=.0731*this.paper.size.height,i=.0411*this.paper.size.width,n=new Ii(this.title1);n.width=this.title1.getComputedWidth(),n.height=this.title1.getComputedHeight();let o=new Ii(this.title2);o.width=this.title2.getComputedWidth(),o.height=this.title2.getComputedHeight();let r=new Ii(this.titleSpliter);r.width=this.titleSpliter.width,r.height=this.titleSpliter.height,r.margin=[0,this.title1.fontSize];let s=new Ii;s.alignSelf="start",s.margin=[e,i],s.append(n),s.append(r),s.append(o),t.append(s),t.doDisplay();for(let{unit:e,x:i,y:n}of t.walkWithPositions())e.data&&(e.data.x=i,e.data.y=n);this.updateContentLayout()}updateContentLayout(){this.updateImageSize();let t=new Ii;t.width=this.paper.size.width,t.height=this.paper.size.height,t.collapseChildMargins=!1;let e=new Ii;if(e.direction="row",this.hasImage){e.margin=this.showingText?[0,.0411*this.paper.size.width,0,.0411*this.paper.size.width]:[0];let t=new Ii(this.image);t.width=this.image.width,t.height=this.image.height,t.margin=this.showingText?[0,.0411*this.paper.size.width,0,0]:[0],e.append(t)}if(this.showingText){let t=new Ii(this.content);t.width=this.content.getComputedWidth(),t.height=this.content.getComputedHeight(),e.append(t),this.content.setAttribute("opacity",1)}else this.content.setAttribute("opacity",0);if(this.hasReccloudLink){let t=new Ii(this.videoIcon);t.width=60,t.height=60,e.append(t),this.videoIcon.setAttribute("opacity",1)}else this.videoIcon.setAttribute("opacity",0);t.append(e),t.doDisplay();for(let{unit:e,x:i,y:n}of t.walkWithPositions())e.data&&(e.data instanceof _e||e.data instanceof Zt?(e.data.x=i,e.data.y=n+((this.title2.content||this.title1.content)&&this.hasImage?.0731*this.paper.size.height:0)):e.data.transform.setTranslate(i+30,n+((this.title2.content||this.title1.content)&&this.hasImage?.0731*this.paper.size.height:0)));this.rememberImageBox()}updateImageSize(){if(this.hasImage){let t=this.data.data.imageNaturalSize||{width:100,height:100},e=this.paper.size.width*(this.showingText?.3292:.75),i=.75*this.paper.size.height,n=Math.min(e/t.width,i/t.height),o=Math.round(t.width*n),r=Math.round(t.height*n);this.image.width=o,this.image.height=r}}rememberImageBox(){this.previousImageBox=this.currentImageBox,this.hasImage&&(this.currentImageBox=new _(this.image.x,this.image.y,this.image.width,this.image.height))}async playTransitions(){this.endAllTransitions();let t=this.paper.style.get("transition","enter-duration"),e=this.paper.style.get("transition","leave-duration"),i=Math.max(t,e),n=this.paper.style.get("transition","easing"),o=this.previousImageBox,r=this.currentImageBox;if(this.hasBoth&&o&&r){let t=lt.fromBoxPair(o,r),e=t.inverse();if(this.showingText){let o=new Qe(i,n,(i=>{this.content.setAttribute("opacity",i),this.content.transform.setMatrix(t.interpolate(i).multiply(e))}));o.playBetween(0,1),this.playingTransitions=[o]}else{let e=new Qe(i,n,(e=>{this.content.setAttribute("opacity",1-e),this.content.transform.setMatrix(t.interpolate(e))}));e.playBetween(0,1),this.playingTransitions=[e]}let s=new Qe(i,n,(t=>{let i=e.interpolate(1-t);this.image.transform.setMatrix(i)}));this.playingTransitions.push(s),await s.playBetween(0,1)}}getTransitionParts(){let t=[];return this.titleItems[0]&&t.push({type:"title",id:this.titleItems[0].data.id,k:this.title1}),this.titleItems[0]&&this.titleItems[1]&&t.push({type:"title",id:this.titleItems[0].data.id+"_"+this.titleItems[0].data.id,k:this.titleSpliter}),this.titleItems[1]&&t.push({type:"title",id:this.titleItems[1].data.id,k:this.title2}),this.showingText&&t.push({type:"content",id:this.data.data.id,k:this.content}),this.hasImage&&t.push({type:"content",id:this.data.data.id+"_image",k:this.image}),this.hasReccloudLink&&t.push({type:"content",id:this.data.data.id+"_video_icon",k:this.videoIcon}),t}}class sl extends k{constructor(t,e,i){super(),this.needsUpdate=!1,this.playing=!1,this.container=null,this.size={width:0,height:0},this.watchContainerObserver=null,this.currentPage=null,this.dataManager=t,this.style=e,this.transitions=new Ga(this),this.initKs(),this.initEvents(),this.controller=i}initKs(){this.k=new ei,this.k.setId(de("minder")),this.k.setStyle("position","fixed"),this.k.setStyle("z-index","9999"),this.k.setStyle("left","0"),this.k.setStyle("top","0"),this.k.setStyle("user-select","none")}initEvents(){this.initPageViewEvent(),this.initDataEvents(),this.initNodeEvents()}initPageViewEvent(){Y.on(document,"pageview",this.onPageView,this)}onPageView(){this.willUpdate()}initDataEvents(){this.dataManager.on("turn",this.onTurnPages,this)}initNodeEvents(){this.k.on("contextmenu",this.fireContextMenuEvent,this),this.k.on("click",this.onClickPaper,this)}fireContextMenuEvent(t){this.fire("contextmenu",t)}onClickPaper(){this.navigateToNext()}play(t){this.playing=!0,this.willUpdate(),t&&this.navigateById(t)}willUpdate(){this.playing&&(this.needsUpdate=!0,ot(this))}update(){this.updateBackgroundStyle(),this.currentPage?this.currentPage.willUpdate():(this.makeCurrentPage(),this.transitions.playStartTransitions())}updateBackgroundStyle(){this.k.setStyle("background",this.style.getBackgroundStyle())}async onTurnPages(){this.makeCurrentPage(),this.preloadNextPage(),await this.transitions.playTransitions()}makeCurrentPage(){let t=this.currentPage,e=this.dataManager.getCurrentPageData(),i=this.dataManager.comparePageData(e,(null==t?void 0:t.pageData)||null)<0;"first"===e.type?this.currentPage=new il(e,this):"last"===e.type?this.currentPage=new nl(e,this):"menu"===e.type?this.currentPage=new ol(e,this):this.currentPage=new rl(e,i,this),this.currentPage.init(),this.k.appendShape(this.currentPage.k),this.transitions.updateCurrentPage(this.currentPage)}preloadNextPage(){var t;let e=this.dataManager.getNextPageData();e&&"normal"===e.type&&(null===(t=e.item)||void 0===t?void 0:t.data.image)&&vr(e.item.data.image)}appendTo(t){this.k.appendTo(t),this.container=t,this.k.element.focus(),t.classList.add("mm-presentation-container"),this.syncWithContainerSize(),this.watchContainerSize()}watchContainerSize(){"function"==typeof window.ResizeObserver?(this.watchContainerObserver=new ResizeObserver(this.syncWithContainerSize.bind(this)),this.watchContainerObserver.observe(this.container)):Y.on(document,"resize",this.syncWithContainerSize,this)}unwatchContainerSize(){var t,e;"function"==typeof window.ResizeObserver?(null===(t=this.watchContainerObserver)||void 0===t||t.unobserve(this.k.element),null===(e=this.watchContainerObserver)||void 0===e||e.disconnect()):Y.off(document,"resize",this.syncWithContainerSize,this)}syncWithContainerSize(){this.k.setAttribute("width",this.container.clientWidth),this.k.setAttribute("height",this.container.clientHeight);let t=this.container.clientWidth,e=this.container.clientHeight;t===this.size.width&&e===this.size.height||(this.size={width:t,height:e},this.willUpdate())}navigateById(t){let e=this.dataManager.getPageDataOfId(t);e&&this.dataManager.setCurrentPageData(e)}canNavigateToPrevious(){var t;return(null===(t=this.currentPage)||void 0===t?void 0:t.canNavigateToPrevious())||!!this.dataManager.getPreviousPageData()}navigateToPrevious(){var t;if(null===(t=this.currentPage)||void 0===t?void 0:t.canNavigateToPrevious())this.currentPage.navigateToPrevious();else{let t=this.dataManager.getPreviousPageData();t&&this.dataManager.setCurrentPageData(t)}}canNavigateToNext(){var t;return(null===(t=this.currentPage)||void 0===t?void 0:t.canNavigateToNext())||!!this.dataManager.getNextPageData()}navigateToNext(){var t;if(null===(t=this.currentPage)||void 0===t?void 0:t.canNavigateToNext())this.currentPage.navigateToNext();else{let t=this.dataManager.getNextPageData();t&&this.dataManager.setCurrentPageData(t)}}canNavigateToPreviousSibling(){return!!this.dataManager.getPreviousSiblingPageData()}navigateToPreviousSibling(){let t=this.dataManager.getPreviousSiblingPageData();t&&this.dataManager.setCurrentPageData(t)}canNavigateToNextSibling(){return!!this.dataManager.getNextSiblingPageData()}navigateToNextSibling(){let t=this.dataManager.getNextSiblingPageData();t&&this.dataManager.setCurrentPageData(t)}navigateToFirst(){this.dataManager.setCurrentPageData({type:"first",item:null})}navigateToLast(){this.dataManager.setCurrentPageData({type:"last",item:null})}remove(){this.k.remove(),this.unwatchContainerSize()}clickVideoIcon(t,e){this.controller.clickVideoIcon(t,e)}onKeyDown(t){this.controller.onKeyDown(t)}onSlide(t){this.controller.onSlide(t)}}const al={themeName:"dark",enterFullscreen:!0};class ll extends k{constructor(t,e={},i,n){super(),this.ended=!1;const o=i.data.presentation||{};this.options={...al,...e,...o},this.dataManager=new Za(t),this.style=new Qa,this.paper=new sl(this.dataManager,this.style,n),this.paper.broadcastTo(this),this.theme=new el,this.paper.appendTo(document.body),this.initControllers(),this.initEvents(),this.options.themeName&&this.theme.setThemeName(this.options.themeName),this.paper.play(this.options.fromId)}initControllers(){this.keyNavigationController=new qa(this)}initEvents(){this.dataManager.broadcastTo(this),this.initThemeEvents(),this.initFullscreenEvents()}initThemeEvents(){this.theme.broadcastTo(this),this.theme.on("theme-change",(()=>{this.style.updateThemeData(this.theme.getThemeData()),this.paper.willUpdate()}))}initFullscreenEvents(){this.options.enterFullscreen&&async function(t=document.body){try{if(t.requestFullscreen)t.requestFullscreen();else if("webkitRequestFullscreen"in t)t.webkitRequestFullscreen();else if("mozRequestFullScreen"in t)t.mozRequestFullScreen();else{if(!("msRequestFullscreen"in t))throw new Error("Fullscreen API is not supported");t.msRequestFullscreen()}return await me()}catch(t){return!1}}(document.body).then((async()=>{await async function(){pe()&&await me()}(),this.end()}))}end(){this.ended||(this.paper.onKeyDown(),this.paper.remove(),this.keyNavigationController.remove(),this.options.enterFullscreen&&async function(){try{if(pe()){if(document.exitFullscreen)document.exitFullscreen();else if("webkitExitFullscreen"in document)document.webkitExitFullscreen();else if("mozCancelFullScreen"in document)document.mozCancelFullScreen();else{if(!("msExitFullscreen"in document))throw new Error("Fullscreen API is not supported");document.msExitFullscreen()}return!await me()}return!0}catch(t){return!1}}(),this.ended=!0,this.fire("end"))}}class hl extends k{constructor(t){super(),this.presentation=null,this.dataManager=t}get started(){return!!this.presentation}start(t,e={}){var i,n;if(this.presentation)return;let o=this.dataManager.export({fillDefaultText:!0,fillText:!0,expandAll:!0});o.root.children=o.root.children||[],o.root.children.push(...o.floatRoots);for(let t of Ki.walkMeAndDescendants(o.root))t.data.sticker&&!t.data.image?(t.data.image=null===(i=Hi.getStickerResource(t.data.sticker))||void 0===i?void 0:i.url,t.data.imageSize=t.data.stickerSize||(null===(n=Hi.getStickerResource(t.data.sticker))||void 0===n?void 0:n.size)):t.data.image&&(t.data.image=Hi.getOriginalImageURL(t.data.image,t.data.imageOthers)||t.data.image),t.data.text=(t.data.text||"").replace(/\$\$([\s\S]+?)\$\$/g,"");let r=o.root;r={...r,...t},this.presentation=new ll(r,e,this.dataManager,this),this.presentation.once("end",this.onEnd,this),this.presentation.broadcastTo(this,{contextmenu:"presentation-contextmenu"}),this.fire("presentation-start")}canNavigateToPrevious(){return this.presentation.paper.canNavigateToPrevious()}navigateToPrevious(){this.presentation.paper.navigateToPrevious()}canNavigateToNext(){return this.presentation.paper.canNavigateToNext()}navigateToNext(){this.presentation.paper.navigateToNext()}navigateToFirst(){this.presentation.paper.navigateToFirst()}navigateToLast(){this.presentation.paper.navigateToLast()}end(){this.presentation&&this.presentation.end()}onEnd(){this.presentation&&(this.presentation.off("end",this.onEnd,this),this.presentation=null,this.fire("presentation-end"))}getThemeName(){var t;return null===(t=this.presentation)||void 0===t?void 0:t.theme.name}setThemeName(t){var e;null===(e=this.presentation)||void 0===e||e.theme.setThemeName(t)}setDefaultThemeName(t){this.dataManager.dataModifier.modify(this.dataManager.id,["data","presentation"],{themeName:t})}clickVideoIcon(t,e){this.fire("presentation-video-icon-click",t,e)}onKeyDown(t){this.fire("presentation-keydown",t)}onSlide(t){this.fire("presentation-slide",t)}}var dl,cl;!function(t){t[t.None=0]="None",t[t.Head1=1]="Head1",t[t.Head2=2]="Head2",t[t.Head3=3]="Head3",t[t.Head4=4]="Head4",t[t.Head5=5]="Head5",t[t.Head6=6]="Head6",t[t.Start=7]="Start",t[t.Paragraph=8]="Paragraph",t[t.OrderedList=9]="OrderedList",t[t.UnOrderedList=10]="UnOrderedList",t[t.Continue=11]="Continue"}(dl||(dl={})),function(t){t.parseLine=function(t){if(t=t.trimStart(),/^(?:#{1,5}|\d+|\*)$/.test(t)||""===t)return{identify:dl.Continue,content:t};let e,i,n=/^(?:#{1,6}|\+|-|\*(?!\*)|\d+\.)/,o=t.match(n);for(o?"+"===o[0]||"-"===o[0]||"*"===o[0]?(e=dl.UnOrderedList,i=t.slice(1).trim()):"#"===o[0][0]?(e=o[0].length,i=t.slice(o[0].length).trim()):(e=dl.OrderedList,i=t.slice(o[0].length).trim()):(e=dl.None,i=t);n.test(i);)i=i.replace(n,"").trim();return{identify:e,content:i}}}(cl||(cl={}));const ul={viewControl:"none",ignoreH1Content:!0};class pl extends k{constructor(t,e,i){super(),this.fullOptions=ul,this.recorder=null,this.textStream=null,this.paper=t,this.history=e,this.status=i}start(t,e={}){if(this.recorder)throw new Error("Already in streaming!");if(this.status.isReadonly())throw new Error("Document is readonly recently!");this.fullOptions={...ul,...e},this.textStream=new fl(t,this.fullOptions.ignoreH1Content),this.recorder=this.history.startCustomRecording(),this.recorder.start(),this.recorder.pause()}pushText(t){if(!this.recorder)throw new Error("Text steam is already ended.");this.recorder.resume();let e=this.textStream.add(t);for(let t of e)if(t.type===ml.NewLine){if(!this.paper.dataModifier.hasItem(t.toId))return void this.fire("miss",t.toId);let e={data:{id:t.id,text:t.content}};this.paper.dataModifier.addTypedChild(e,t.toId,-1,"Branch"),this.paper.dataModifier.modify(t.toId,["data","expanded"],!0),fi((()=>{let e=this.paper.getNodeById(t.id);e&&("center"===this.fullOptions.viewControl?this.paper.viewer.moveToMakeNodeInCenter(e,!0):"visible"===this.fullOptions.viewControl&&this.paper.viewer.mayMoveToMakeNodeCompletelyVisible(e,!0))}))}else{if(!this.paper.dataModifier.hasItem(t.id))return void this.fire("miss",t.id);let e=qi(t.content).replace(/```?\w*([\s\S]+?)```?/g,((t,e)=>`<code>${e.replace(/<\/p><p>/g,"<br>").replace(/ /g,"&nbsp;")}</code>`)).replace(/\*\*(.*?)\*\*/g,"<b>$1</b>");this.paper.dataModifier.modify(t.id,["data","html"],e)}this.recorder.pause()}end(){this.recorder.end(),this.recorder=null,this.textStream=null}}var ml,gl;!function(t){t[t.Root=0]="Root",t[t.NewLine=1]="NewLine",t[t.ModifyText=2]="ModifyText"}(ml||(ml={}));class fl{constructor(t,e){this.stack=[],this.startFlag=!0,this.newLineFlag=1,this.codeFlag=!1,this.newLineText="",this.ignoreH1Content=!0,this.current={type:ml.Root,toId:"",id:t,content:"",spaceCount:-1,identify:dl.Head1},this.ignoreH1Content=e}add(t){let e=[];for(let i of t){let t=this.addChar(i);t&&e.push(t)}return e}addChar(t){if("\n"===t&&!this.codeFlag){if(this.newLineFlag++,this.newLineText="",this.codeFlag||!/```?/.test(this.current.content)||/```?[\s\S]*?```?/.test(this.current.content))return null;this.codeFlag=!0,this.newLineFlag=0}this.codeFlag?(this.current.content+=t,t=this.current.content):this.newLineFlag?t=this.newLineText+t:(this.current.content+=t,t=this.current.content);let e=cl.parseLine(t);if(this.startFlag?(e.identify===dl.None&&(e.identify=dl.Start),this.startFlag=!1):this.newLineFlag>1&&e.identify===dl.None?e.identify=dl.Paragraph:this.newLineFlag&&e.identify===dl.None&&(this.current.content+="\n"+t,t=this.current.content,e=cl.parseLine(t),this.newLineFlag=0),this.newLineFlag&&e.identify===dl.Continue)return this.newLineText=t,null;let i=this.makeModify(t,e.content,this.newLineFlag,e.identify);return this.newLineFlag=0,this.newLineText="",this.codeFlag&&/```?[\s\S]*?```?/.test(this.current.content)&&(this.codeFlag=!1),i}makeModify(t,e,i,n){if(n===dl.Head1)return this.stack.length>0&&(this.current=this.stack[0],this.stack=[]),this.current.content=e,null;if(this.ignoreH1Content&&!i&&this.current.identify===dl.Head1)return null;if(i){let i={type:ml.NewLine,toId:"",id:ue(),content:e,spaceCount:this.getStartSpaceCount(t),identify:n};return this.setCurrent(i),{type:ml.NewLine,content:e,toId:i.toId,id:i.id}}return{type:ml.ModifyText,content:e,toId:this.current.toId,id:this.current.id}}getStartSpaceCount(t){let e=0;for(let i=0;i<t.length&&" "===t[i];i++)e++;return e}setCurrent(t){this.stack.push(this.current);for(let e=this.stack.length-1;e>=0;e--){let i=this.stack[e];if(this.canBeChildOf(t,i))break;this.stack.pop()}for(let e=this.stack.length-1;e>=0;e--){let i=this.stack[e];if(t.identify===dl.Paragraph)break;if(this.isSameLevel(t,i)){this.stack.splice(e,this.stack.length-e);break}}let e=this.stack[this.stack.length-1];t.toId=e.id,this.current=t}canBeChildOf(t,e){return t.spaceCount>e.spaceCount||!(t.spaceCount<e.spaceCount)&&!this.isSameLevel(t,e)}isSameLevel(t,e){return t.spaceCount===e.spaceCount&&this.isIdentifiesCompatible(t.identify,e.identify)}isIdentifiesCompatible(t,e){return t===e}}class yl extends k{constructor(t,e,i,n){super(),this.previewContainerData=null,this.renderBox=null,this.paper=t,this.dataManager=i,this.settings=e,this.style=n,Y.on(window,"resize",function(t,e=200){let i,n,o;return function(...r){n=this,o=r,clearTimeout(i),i=setTimeout((function(){t.call(n,...o)}),e)}}((()=>this.onPaperResized())))}get id(){var t;return null===(t=this.dataManager.data.watermark)||void 0===t?void 0:t.id}get defaultWatermarkConfig(){return{text:Hi.trans("watermarkDefaultText")||"Watermark Text",lineSpacing:100,textSpacing:80,angle:-30,textStyle:{color:"#999999",opacity:.2,fontSize:14}}}get config(){var t;return(null===(t=this.dataManager.data.watermark)||void 0===t?void 0:t.config)||this.defaultWatermarkConfig}hasWatermark(){var t;return!!(null===(t=this.dataManager.data.watermark)||void 0===t?void 0:t.show)}async willUpdate(){await yi(),this.dataManager.data&&this.settings.get("willRenderWatermark")&&(this.id&&this.id===this.dataManager.id?this.updateWatermark():this.doModifying(!0,!1))}toggleStatus(t,e,i){this.previewContainerData=e,this.renderBox=i,t?this.append():this.remove()}append(){this.doModifying(!1,!0),this.settings.get("previewMode")||this.fire("watermark-appended")}getConfig(){var t;return(null===(t=this.dataManager.data.watermark)||void 0===t?void 0:t.config)||this.defaultWatermarkConfig}doModifying(t=!1,e,i){this.dataManager.dataModifier.modify(this.dataManager.id,["data","watermark"],{id:this.dataManager.id,show:!t&&e,config:t?this.defaultWatermarkConfig:i||this.config})}updateConfig(t){this.doModifying(!1,!0,t)}onPaperResized(){this.settings.get("previewMode")||this.updateWatermark()}updateWatermark(){if(this.fire("watermark-change"),!this.hasWatermark())return void this.hideWatermark();const t=!!this.p,e=!!this.textInstance;t||this.generateWatermarkPattern(),e||(this.createTextElement(),this.p.append(this.textInstance)),this.updateTextContentAndStyle(),this.updatePatternSize(),t||this.paper.k.appendResource(this.p),this.generateWatermarkContainer()}createTextElement(){return this.textInstance||(this.textInstance=new ne),this.textInstance}updateTextContentAndStyle(){this.textInstance.content=this.config.text,this.setTextStyle(this.textInstance)}setTextStyle(t){if(this.config.textStyle){const{color:e,opacity:i,fontSize:n}=this.config.textStyle;if(t.setId("text_mark"),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("user-select","none"),t.setAttribute("pointer-events","none"),t.setAttribute("font-family","Arial"),void 0!==n&&t.setAttribute("font-size",n),void 0!==i&&t.setAttribute("opacity",i),void 0!==e){let i=this.style.get("map","background-color");const n=f.improveContrast(e,i,15);t.setAttribute("fill",n)}t.setAttribute("transform",`rotate(${this.config.angle})`)}}generateWatermarkContainer(){const t=this.settings.get("previewMode"),e=t?this.previewContainerData:this.paper.element.getBoundingClientRect();if(this.k)return this.k.setAttribute("width",(null==e?void 0:e.width)||"100%"),void this.k.setAttribute("height",(null==e?void 0:e.height)||"100%");this.k=new Kt("rect"),this.k.setId("rect_mark"),this.k.setAttribute("x",t?this.renderBox.x:0),this.k.setAttribute("y",t?this.renderBox.y:0),this.k.setAttribute("width",(null==e?void 0:e.width)||"100%"),this.k.setAttribute("height",(null==e?void 0:e.height)||"100%"),this.k.setAttribute("fill","url(#pattern_mark)"),this.k.setAttribute("pointer-events","none"),this.k.setAttribute("user-select","none"),this.paper.k.prepend(this.k)}generateWatermarkPattern(){return this.p||(this.p=new Kt("pattern"),this.p.setId("pattern_mark"),this.p.setAttribute("width","300"),this.p.setAttribute("height","200"),this.p.setAttribute("patternUnits","userSpaceOnUse")),this.p}updatePatternSize(){const t=this.textInstance.element;let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width","0"),e.setAttribute("height","0"),e.style.position="absolute",e.style.visibility="hidden",document.body.appendChild(e);let i=t.cloneNode(!0);e.appendChild(i);let n=i.getBBox();e.removeChild(i),document.body.removeChild(e);const o=n.width*Math.cos(S(Math.abs(this.config.angle)))+n.height*Math.sin(S(Math.abs(this.config.angle))),r=n.width*Math.sin(S(Math.abs(this.config.angle)))+n.height*Math.cos(S(Math.abs(this.config.angle)));this.p.setAttribute("width",o+this.config.textSpacing),this.p.setAttribute("height",r+this.config.lineSpacing),this.textInstance.setAttribute("x",this.config.textSpacing/2),this.textInstance.setAttribute("y",(this.config.lineSpacing+r)/2),this.textInstance.setAttribute("transform",`rotate(${this.config.angle}, ${(o+this.config.textSpacing)/2}, ${(r+this.config.lineSpacing)/2})`)}hideWatermark(){this.textInstance&&(this.textInstance.content="")}togglePatternElementStatus(){this.p.element.style.display="none",window.requestAnimationFrame((()=>{this.p.element.style.display="block"}))}remove(){this.hideWatermark(),this.doModifying(!1,!1),this.fire("watermark-remove")}}class xl extends k{constructor(t={},e={},i={}){super(),this.settings=new To(t),this.dataModifier=new po(this.settings),this.dataManager=new Un(this.dataModifier,this),this.history=new fo(this.dataModifier),this.status=new Go,this.style=new vo(this.dataManager,this.settings,e,i),this.theme=new Co(this.style),this.selections=new tr,this.commands=new qo(this),this.keyReceiver=new Ao(this.status,this.settings),this.shortcutKeys=new Zo(this.keyReceiver,this.commands),this.paper=this.initPaper(),this.viewer=this.paper.viewer,this.watermark=new yl(this.paper,this.settings,this.dataManager,this.style),this.broadcastEvents(),this.initEvents(),this.settings.get("previewMode")?this.minimumToBody():this.initControllers()}minimumToBody(){this.status.setReadonly(),this.paper.k.setStyle("visibility","hidden"),this.paper.k.setStyle("width","0"),this.paper.k.setStyle("height","0"),this.paper.appendTo(document.body)}initPaper(){return new ps(this.dataManager,this.dataModifier,this.selections,this.style,this.commands,this.settings,this.shortcutKeys,this.status,this.history).init()}broadcastEvents(){this.history.broadcastTo(this),this.dataModifier.broadcastTo(this),this.dataManager.broadcastTo(this),this.style.broadcastTo(this),this.watermark.broadcastTo(this),this.theme.broadcastTo(this),this.selections.broadcastTo(this),this.paper.broadcastTo(this),this.status.broadcastTo(this)}initControllers(){this.viewController=new Sa(this.paper,this.settings,this.status),this.textEditorController=new oa(this.paper,this.selections,this.settings,this.viewer,this.keyReceiver,this.history,this.dataModifier,this.status,this.theme,this),this.nodeSelectionController=new Ta(this.paper,this.selections,this.settings),this.keyNavigationController=new Ma(this.paper,this.selections,this.dataManager,this.viewer,this.shortcutKeys,this.status),this.rectSelectionController=new gs(this.paper,this.selections),this.nodeClipboardController=new ma(this.paper,this.selections,this.settings,this.commands,this.viewer,this.dataManager,this.keyReceiver,this.history,this.status),this.summaryHoverSelectionController=new Da("Summary",this.paper,this.selections,this.history,this.status),this.boundaryHoverSelectionController=new Da("Boundary",this.paper,this.selections,this.history,this.status),this.relLineController=new ba(this.paper,this.selections,this.history,this.status),this.nodeDragDropController=new Bs(this.paper,this.selections,this.settings,this.commands,this.history,this.status),this.viewSteadyController=new Ia(this.paper,this.viewer,this.selections,this.history,this.dataModifier),this.dataCacher=new Ea(this.dataManager,this.settings),this.cooperateController=new Ka(this.dataManager,this.dataModifier,this.history,this.textEditorController,this.settings,this.selections,this.style,this.status),this.presentationController=new hl(this.dataManager),this.textStreamController=new pl(this.paper,this.history,this.status),this.textEditorController.broadcastTo(this),this.cooperateController.broadcastTo(this),this.presentationController.broadcastTo(this)}initEvents(){this.initImportEvents(),this.initModifierEvents(),this.initStatusEvents(),this.initThemeStyleEvents(),this.initAddFloatRootEvents()}initImportEvents(){this.on("import",(()=>{mi((()=>{this.status.setCanInteract(!0)})),fi((()=>{this.paper.settings.get("autoSelectUniqueRoot")&&1===this.dataManager.getTotalNodeCount()&&this.selections.select(this.paper.mainRoot)}))}))}initModifierEvents(){this.dataModifier.on("data-change",this.afterDataChange,this)}afterDataChange(t){t===this.dataManager.id&&this.willUpdate()}willUpdate(){ri(this),this.paper.willUpdate(),this.watermark.willUpdate()}__update(){this.theme.updateThemeNames()}willUpdateSelf(){this.paper.willUpdateSelf()}initStatusEvents(){this.paper.on("paper-focus",(()=>{this.status.setFocused(!0)})),this.paper.on("paper-blur",(()=>{this.status.setFocused(!1)})),this.selections.on("selection-change",(()=>{if(this.status.hasActiveComment()){let t=this.selections.getLatestTouched(),e=null;t&&this.selections.hasSelected(t)&&(e=t.findContent(nr)),this.status.setActiveComment(e)}}))}initThemeStyleEvents(){this.theme.on(["color-theme-change","struct-theme-change"],(()=>{this.style.updateThemeData(this.theme.getThemeStyle()),this.paper.updateBackgroundStyle(this.style.getBackgroundStyle())})),this.style.on("tree-style-background-change",(()=>{this.paper.updateBackgroundStyle(this.style.getBackgroundStyle())}),this)}initAddFloatRootEvents(){this.paper.k.on("dblclick",(t=>{this.settings.get("canDblClickToAddFloat")&&this.addFloatRoot(t)}),this),this.paper.k.on("hold:start",(t=>{var e;this.settings.get("canDblClickToAddFloat")&&(null===(e=navigator.vibrate)||void 0===e||e.call(navigator,60),this.addFloatRoot(t))}),this)}addFloatRoot(t){if(zo.fromClosestElement(t.target))return;let e=t.getPaperPosition();this.commands.exec("AddFloatRoot",e)}remove(){this.status.setCanInteract(!1),this.paper.remove(),this.textEditorController.cancelEditing(),this.nodeClipboardController.remove(),this.cooperateController.remove()}}!function(t){t.requestMinder=async function(){let t=new wl({previewMode:!0,showDefaultText:!1,expandedStateMode:"sync"});return await t.dataManager.createNew(),t.style.modifyTotal({content:{"minimum-aspect-ratio":3,"use-adaptive-padding":!1},layout:{"connection-minimum-out-pixel-rate":.5}}),t},t.releaseMinder=async function(t){t.paper.remove()}}(gl||(gl={}));class wl extends xl{initPaper(){return new vl(this.dataManager,this.dataModifier,this.selections,this.style,this.commands,this.settings,this.shortcutKeys,this.status,this.history).init()}broadcastEvents(){}initControllers(){}}class vl extends ps{__update(){this.updateBackgroundStyle(this.style.getBackgroundStyle())}detachingNode(t){this.idNodeMap.delete(t.id),"Branch"!==t.type&&"Summary"!==t.type||this.relLineUpdator.willUpdate()}}const bl={width:40,height:20,viewportPadding:[1],shape:"rect",radius:2,"stroke-color":"#333","stroke-width":2,"fill-color":"none"};var kl;!function(t){function e(t,e,i,n,o={}){let r,{x:s,y:a,width:l,height:h}=t.round(),d=O(n),c=e-d.left-d.right,u=i-d.top-d.bottom;r=o.width||o.height?o.width?o.width/e:o.height/i:Math.max(l/c,h/u);let p=lt.I();p=p.translate(-d.left-c/2,-d.top-u/2),p=p.scale(r),p=p.translate(s+l/2,a+h/2);let m=new _(0,0,e,i),{x:g,y:f,width:y,height:x}=p.transferBox(m).round();return{x:g,y:f,width:y,height:x,scaling:r}}function i(t,e){if(1!==e){let i=[...t.element.querySelectorAll("path")].map((t=>Wt.fromElement(t)));for(let t of i){let i=Number(t.getAttribute("stroke-width"))||0;i&&t.setAttribute("stroke-width",String(i*e))}}}function n(t){let e=t.element.querySelectorAll("g");for(let t of e)0===t.children.length&&t.remove()}t.extractBranchNode=function(t,o,r,s,a={},l=!1){let h=function(t){return Fo.get(t).getJointRenderBoxInPaperOrigin()}(t),d=new ei,{x:c,y:u,width:p,height:m,scaling:g}=e(h,o,r,s,a);d.setViewBox(c,u,p,m);for(let e of function(t){let e=[];for(let i of t.walkMeAndDescendants())e.push(i.k);return e.sort(((t,e)=>4===t.element.compareDocumentPosition(e.element)?-1:1)),e}(t))d.appendShape(e);return l&&i(d,g),n(d),d},t.extractConnectionNode=function(t,o,r,s){let a=function(t){let e=Fo.get(t),i=e.outLayout.toPaperOrigin(e.outLayout.getLocalOutPoint()),n=e.inLayouts.map((t=>t.toPaperOrigin(t.getLocalInPoint())));return _.fromPoints(i,...n)}(t),l=new ei,{x:h,y:d,width:c,height:u,scaling:p}=e(a,o,r,s,{width:o});return l.setViewBox(h,d,c,u),l.appendShape(t.k),i(t.k,p),n(l),l}}(kl||(kl={}));const Cl={width:200,height:120,viewportPadding:[16],fixedViewportWidth:500,mainNodeCount:2,subNodeCount:0,style:{root:{},main:{},sub:{}}};var Sl;!function(t){t.renderPriority=function(t,e){let i=new Ge;i.priority=t,i.r=e/2,i.color=ji.priorityColors[t-1];let n=new ei;return n.setViewBox(-e/2,-e/2,e,e),n.appendShape(i),n},t.renderProgress=function(t,e){let i=new Ye;i.progress=t,i.r=e/2;let n=new ei;return n.setViewBox(-e/2,-e/2,e,e),n.appendShape(i),n}}(Sl||(Sl={}));const Tl={width:20,height:12,viewportPadding:[2],"line-width":2,"line-color":"#333","fill-color":"#fff"};var Ml;!function(t){function e(t,e,i){let n={...Tl,...i},o=n.width,r=n.height,s=O(n.viewportPadding),a=(r-s.top-s.bottom)/8;o<r&&(o=r);let l=o-r,h=Sr[e].d,d=new te;d.setAttribute("d",h),d.setAttribute("fill",n["fill-color"]);let c=new te,u="line"===e?2:0,p=-l-2;c.setAttribute("d",`M${u} 0 H${p}`),c.setAttribute("stroke",n["line-color"]),c.setAttribute("stroke-width",n["line-width"]),t||(d.setAttribute("transform",`matrix(${a} 0 0 ${a} ${-l} 0)`),c.setAttribute("transform",`matrix(${a} 0 0 ${a} ${"line"===e?0:2} 0)`));let m=new ei,g=-(o-r/2),f=-r/2;return m.setViewBox(g,f,o,r),m.appendShape(d),m.appendShape(c),m}t.renderStartSVG=function(t,i={}){return e(!1,t,i)},t.renderEndSVG=function(t,i={}){return e(!0,t,i)}}(Ml||(Ml={}));const Al={width:36,height:36,viewportPadding:[6],"line-width":2,"line-color":"#333"};var Pl,Dl;!function(t){t.renderSVG=function(t,e){let i={...Al,...e},n=i.width,o=i.height,r=O(i.viewportPadding),s=(n-r.left-r.right)/2,a=(o-r.top-r.bottom)/2,l=new te;l.setAttribute("fill","none"),l.setAttribute("stroke",i["line-color"]),l.setAttribute("stroke-width",i["line-width"]),"bezier"===t?(a*=.9,l.moveTo(-s,0),l.qBezierTo(-s,-a,.6*-s,-a),l.qBezierTo(.35*-s,-a,0,0),l.qBezierTo(.35*s,a,.6*s,a),l.qBezierTo(s,a,s,0)):"line"===t?(l.moveTo(-s,0),l.lineTo(s,0)):"hv-line"===t?(a*=.8,l.moveTo(-s,-a),l.lineTo(0,-a),l.lineTo(0,a),l.lineTo(s,a)):"polygon"===t&&(l.moveTo(-s,0),l.lineTo(-s/2,-a),l.lineTo(s/2,a),l.lineTo(s,0)),l.update();let h=new ei;return h.setViewBox(-n/2,-o/2,n,o),h.appendShape(l),h}}(Pl||(Pl={}));class Il extends k{constructor(t){super(),this.triggersDragging=!1,this.triggerK=t,this.initEvents()}initEvents(){this.triggerK.on("mousedown",this.onMouseDown,this),this.triggerK.on("touchstart",this.onTouchStart,this,!0)}onMouseDown(t){0!==t.originalEvent.button&&2!==t.originalEvent.button||(this.onDragStart(t.originalEvent),Y.on(document,"mousemove",this.onMouseOrTouchMove,this),Y.on(document,"mouseup",this.onMouseUp,this))}onTouchStart(t){this.onDragStart(t.originalEvent),Y.on(document,"touchmove",this.onMouseOrTouchMove,this),Y.on(document,"touchend",this.onTouchEnd,this)}onDragStart(t){this.triggerK.setStyle("cursor","grabbing"),document.body.style.pointerEvents="none",this.triggersDragging=!0,this.fire("start",t)}onMouseOrTouchMove(t){this.fire("move",t)}onMouseUp(t){Y.off(document,"mousemove",this.onMouseOrTouchMove,this),Y.off(document,"mouseup",this.onMouseUp,this),this.endDragging(t)}onTouchEnd(t){Y.off(document,"touchmove",this.onMouseOrTouchMove,this),Y.off(document,"touchend",this.onTouchEnd,this),this.endDragging(t)}endDragging(t){this.triggersDragging&&(this.triggerK.setStyle("cursor",""),document.body.style.pointerEvents="",this.fire("end",t),this.triggersDragging=!1)}}!function(t){t[t.Contentable=0]="Contentable",t[t.Connection=1]="Connection"}(Dl||(Dl={}));class El{constructor(t){this.paper=t}walk(){let t=new Map;for(let e of this.paper.walkDescendants())if(e instanceof $r){let i=this.getContentableNodePath(e);t.set(i.id,i)}else if(e instanceof qr){let i=this.getConnectionNodePath(e);t.set(i.id,i)}return t}getContentableNodePath(t){let e=t.id+"-birdeye-preview",i=t.getShapeContainerPath(),n=i instanceof ee,o=i.getAttribute("d"),r=n?"none":t.style.get("fill-color"),s=n?t.style.get("stroke-color"):"none",a=n?t.style.get("stroke-width"):0,l=t.k.transform.matrix;return{type:Dl.Contentable,id:e,d:o,fill:r,stroke:s,strokeWidth:a,matrix:l}}getConnectionNodePath(t){let e=t.id+"-birdeye-preview",i=t.getBundledLinePathData(),n=t.getOutConnectColor(),o=t.style.get("connect-width"),r=t.k.transform.matrix;return{type:Dl.Connection,id:e,d:i,fill:"none",stroke:n,strokeWidth:o,matrix:r}}}const Ll={size:{width:240,height:150}};class Ol{constructor(t,e={}){this.pathMap=new Map,this.inSyncing=!1,this.enqueuedSyncing=!1,this.paperToPreviewMatrix=lt.I(),this.contrastedBackgroundColor="",this.minder=t,this.options={...Ll,...e},this.walker=new El(t.paper),this.initKs(),this.initEvents()}initKs(){this.svg=new ei,this.paperContentContainer=new Kt,this.svg.appendShape(this.paperContentContainer),this.connectionContainer=new Kt,this.paperContentContainer.append(this.connectionContainer),this.contentableContainer=new Kt,this.paperContentContainer.append(this.contentableContainer),this.viewRect=new Ve,this.viewRect.setAttribute("stroke-width","1"),this.viewRect.setAttribute("fill-opacity","0.1"),this.svg.appendShape(this.viewRect)}initEvents(){this.dragger=new Il(this.svg),this.dragger.on("start",this.setViewPositionByMouseEvent,this),this.dragger.on("move",this.setViewPositionByMouseEvent,this)}appendTo(t){t.append(this.svg.element),this.startSyncing()}remove(){this.svg.remove(),this.endSyncing()}startSyncing(){this.inSyncing||(this.inSyncing=!0,this.willSync(),this.minder.on(["data-change","import"],this.willSync,this),this.minder.on("paper-view-transform-update",this.updateViewRect,this),Y.on(window,"resize",this.updateViewRect,this))}endSyncing(){this.inSyncing&&(this.minder.off(["data-change","import"],this.willSync,this),this.minder.off("paper-view-transform-update",this.updateViewRect,this),Y.off(window,"resize",this.updateViewRect,this),this.inSyncing=!1)}async willSync(){this.minder.dataManager.data&&(this.enqueuedSyncing||(this.enqueuedSyncing=!0,await yi(),this.doSyncing(),this.enqueuedSyncing=!1))}doSyncing(){this.prepareProperties(),this.updateStyle(),this.updatePreviewMatrix(),this.updatePaths(),this.paperContentContainer.transform.setMatrix(this.paperToPreviewMatrix),this.updateViewRect()}prepareProperties(){let t=this.minder.paper.style.get("map","background-color"),e=ji.defaultStyleData.map["background-color"],i=(f.fromString(t)||f.fromString(e)).getAverageGray();i>=127.5?i-=.001:i+=.001;let n=f.fromRGB(i,i,i),o=this.minder.paper.style.contrastWithBackgroundColor(n.toString(),8);this.contrastedBackgroundColor=o}updateStyle(){let t=this.minder.paper.style.get("content","outline-color"),e=this.minder.paper.style.get("map","background-color");this.viewRect.setAttribute("stroke",t),this.viewRect.setAttribute("fill",t),this.svg.setStyle("background-color",e)}updatePreviewMatrix(){let t=this.minder.paper.treeLayout.getJointMarginBoxInPaperOrigin(),e=Math.min(this.options.size.width/t.width,this.options.size.height/t.height),i=lt.I();i=i.translate(-t.centerX,-t.centerY),i=i.scale(e),i=i.translate(this.options.size.width/2,this.options.size.height/2),this.paperToPreviewMatrix=i}updatePaths(){let t=this.walker.walk();for(let[e,i]of this.pathMap.entries())t.has(e)||(i.remove(),this.pathMap.delete(e));for(let[e,i]of t.entries()){let t=this.pathMap.get(e);t||(t=new te,t.setId(e),this.pathMap.set(e,t),i.type===Dl.Connection?this.connectionContainer.append(t):this.contentableContainer.append(t)),this.updatePathProperties(t,i)}}updatePathProperties(t,e){t.setAttribute("d",e.d),t.transform.setMatrix(e.matrix);let i=e.fill;e.type===Dl.Contentable&&(i="none"===i||"transparent"===i?this.contrastedBackgroundColor:this.minder.paper.style.contrastWithBackgroundColor(i,10));let n=e.stroke,o=1/this.paperToPreviewMatrix.a;t.setAttribute("fill",i),t.setAttribute("stroke",n);let r=e.strokeWidth;r*=Math.max(1,Math.sqrt(o)),t.setAttribute("stroke-width",r)}updateViewRect(){let t=this.minder.viewer.getFinalMatrix(),e=this.minder.paper.k.getComputedSize(),i=this.paperToPreviewMatrix.multiply(t.inverse()).transferBox(new _(0,0,e.width,e.height)).roundToHalf();this.viewRect.x=i.x,this.viewRect.y=i.y,this.viewRect.width=i.width,this.viewRect.height=i.height}setViewPositionByMouseEvent(t){let e=this.svg.element.getBoundingClientRect(),i=Y.getSingle(t),n=new A(i.clientX-e.x,i.clientY-e.y),o=this.minder.viewer.getFinalMatrix(),r=this.paperToPreviewMatrix,s=this.minder.paper.k.getComputedSize(),a=r.inverse().transferPoint(n),l=new A(s.width/2,s.height/2).diff(o.transferPoint(a)),h="mousedown"===t.type;this.minder.viewer.willMoveBy(l,h)}}const Bl={width:36,height:36,viewportPadding:[6],layout:"right","connect-width":2,"connect-color":"#333"};class Rl extends Es{isConnectOnlyToTails(){return!1}}const Nl={width:100,height:60,fixedViewportWidth:480,viewportPadding:[0],mainNodeCount:2,subNodeCount:2,style:{root:{},main:{},sub:{}}},_l={width:200,height:120,fixedViewportWidth:600,viewportPadding:[0],mainNodeCount:2,subNodeCount:0,style:{root:{},main:{},sub:{}}};class zl{constructor(t){this.localBox=_.empty(),this.node=t,this.initK(),this.k.setId(de("node-content-shape-container"))}get nodeStyle(){return this.node.style}getKs(){return[this.k]}updateStyle(){let t=this.nodeStyle.get("fill-color"),e=this.getStokingColor(),i=this.getStokingWidth(),n=this.nodeStyle.get("stroke-dasharray"),o=Array.isArray(n)?n.map((t=>t*i)):null;this.k.setAttribute("fill",t),this.k.setAttribute("stroke",e),this.k.setAttribute("stroke-width",i),this.k.setAttribute("stroke-dasharray",o?o.join(","):null),this.k.smoothRadius=this.nodeStyle.get("radius")}getStokingColor(){return this.node.tree.dataModifier.dataLocker.hasLockedByOthers(this.node.id)?this.node.tree.style.contrastWithBackgroundColor("#ece9ec",10):this.nodeStyle.get("stroke-color")}getStokingWidth(){return this.node.tree.dataModifier.dataLocker.hasLockedByOthers(this.node.id)?2:this.nodeStyle.get("stroke-width")}updateFromBoxes(t,e){let i,n=this.updateContentSize(t,e);i=n instanceof _?n:new _(-n.width/2,-n.height/2,n.width,n.height),this.localBox=i}readContainerBoundary(){let t=this.k.getBoundaryBoxInPaper(),e=this.localBox;if(t.width>0&&t.height>0){let i=t.width-e.width,n=t.height-e.height;e=e.expand(n/2,i/2)}let i=this.nodeStyle.get("stroke-width")/2;this.localBox=e.expand(i)}getShrinkedSize(t,e,i=1){let{width:n,height:o}=t,r=(t.width-e.width)/2;return n-=(t.height-e.height)/2*Math.min(1,1/i),o-=r*Math.min(1,i),{width:n,height:o}}remove(){this.k.remove()}replaceWith(t){this.k.before(...t.getKs()),this.remove()}}Vo.register("rect",class extends zl{initK(){this.k=new Ve}updateContentSize(t,e){let{width:i,height:n}=t;return this.k.x=-i/2,this.k.y=-n/2,this.k.width=i,this.k.height=n,this.k.smoothRadius=this.nodeStyle.get("radius"),{width:i,height:n}}updateSize(t,e){this.k.x=-t/2,this.k.y=-e/2,this.k.setSize(t,e)}}),Vo.register("arc-roof-rect",class extends zl{initK(){this.k=new Ke}updateContentSize(t,e){let i=e.height/e.width,n=t.width,{height:o}=this.getShrinkedSize(t,e,.5*i);return this.k.cx=0,this.k.cy=0,this.k.smoothRadius=this.nodeStyle.get("radius"),this.k.setContentSize(n,o),{width:this.k.width,height:this.k.height}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("arc-sides-rect",class extends zl{initK(){this.k=new qe}updateContentSize(t,e){let{width:i}=this.getShrinkedSize(t,e,2),n=t.height;return this.k.cx=0,this.k.cy=0,this.k.smoothRadius=this.nodeStyle.get("radius"),this.k.setContentSize(i,n),{width:this.k.width,height:this.k.height}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("flat-hexagon",class extends zl{initK(){this.k=new He}updateContentSize(t,e){let{width:i}=this.getShrinkedSize(t,e,2.5),n=t.height;return this.k.cx=0,this.k.cy=0,this.k.smoothRadius=this.nodeStyle.get("radius"),this.k.setContentSize(i,n),{width:this.k.width,height:this.k.height}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("roof-hexagon",class extends zl{initK(){this.k=new Ue}updateContentSize(t,e){let i=e.height/e.width,{width:n}=t,{height:o}=this.getShrinkedSize(t,e,.5*i);return this.k.cx=0,this.k.cy=0,this.k.smoothRadius=this.nodeStyle.get("radius"),this.k.setContentSize(n,o),{width:this.k.width,height:this.k.height}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("underline",class extends zl{initK(){this.placeholder=new Ve,this.placeholder.setAttribute("stroke","none"),this.placeholder.setAttribute("fill","transparent"),this.k=new ee}getKs(){return[this.placeholder,this.k]}updateStyle(){let t=this.nodeStyle.get("fill-color"),e=this.getStokingColor(),i=this.getStokingWidth(),n=this.nodeStyle.get("stroke-dasharray"),o=Array.isArray(n)?n.map((t=>t*i)):null;this.placeholder.setAttribute("fill",t),this.k.setAttribute("stroke",e),this.k.setAttribute("stroke-width",i),this.k.setAttribute("stroke-dasharray",Array.isArray(o)?o.join(","):null),this.placeholder.smoothRadius=this.nodeStyle.get("radius")}updateContentSize(t,e){let{width:i,height:n}=t;return this.k.x1=-i/2,this.k.y1=n/2,this.k.x2=i/2,this.k.y2=n/2,this.placeholder.x=-i/2,this.placeholder.y=-n/2,this.placeholder.width=i,this.placeholder.height=n,new _(-i/2,n/2,i,0)}updateSize(t,e){this.k.x1=-t/2,this.k.x2=t/2,this.k.y1=e/2,this.k.y2=e/2}remove(){super.remove(),this.placeholder.remove()}}),Vo.register("circle",class extends zl{initK(){this.k=new We}updateContentSize(t,e){let i=e.height/e.width,{width:n,height:o}=this.getShrinkedSize(t,e,1/i);return this.k.cx=0,this.k.cy=0,this.k.setContentSize(n,o),{width:2*this.k.r,height:2*this.k.r}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("ellipse",class extends zl{initK(){this.k=new $e}updateContentSize(t,e){let i=e.height/e.width,{width:n,height:o}=this.getShrinkedSize(t,e,i);return this.k.cx=0,this.k.cy=0,this.k.setContentSize(n,o),{width:2*this.k.rx,height:2*this.k.ry}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("diamond",class extends zl{initK(){this.k=new je}updateContentSize(t,e){let i=e.height/e.width,{width:n,height:o}=this.getShrinkedSize(t,e,i);return this.k.cx=0,this.k.cy=0,this.k.smoothRadius=this.nodeStyle.get("radius"),this.k.setContentSize(n,o),{width:this.k.width,height:this.k.height}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}}),Vo.register("y-oblique-rhomboid",class extends zl{initK(){this.k=new Ze}updateContentSize(t,e){let{width:i}=this.getShrinkedSize(t,e,2),{height:n}=t;return this.k.cx=0,this.k.cy=0,this.k.smoothRadius=this.nodeStyle.get("radius"),this.k.setContentSize(i,n),{width:this.k.width,height:this.k.height}}updateSize(t,e){this.k.cx=0,this.k.cy=0,this.k.setSize(t,e)}});class Fl{static matchOutNode(t){return!0}constructor(t){this.willRenderIndepentOutPart=!1,this.connectOnlyToTails=!1,this.connectSiblings=!1,this.haveSharedStart=!0,this.connectSizeRate=.5,this.layout=t}updateLayouts(){if(this.layout.outK&&this.updateOutLayout(this.layout.outK),this.layout.isConnectOnlyToTails())for(let t=0;t<this.layout.inLayouts.length;t+=2)this.updateInLayoutsToTails(this.layout.inLayouts[t],this.layout.inLayouts[t+1],this.layout.inKs[t],this.layout.inKs[t+1]);else this.updateNormalInLayouts()}updateOutLayout(t){}updateInLayoutsToTails(t,e,i,n){let[o]=this.layout.getOutInDirections(t),r=this.layout.getAdjustedOutPoint(t),s=this.layout.getAdjustedInPoint(t),a=this.layout.getAdjustedInPoint(e),l=a.diff(s).add(N.toVector(o).rotateInDegree(90)).restAfterProjectTo(N.toVector(o)),h=N.fromVector(l),d=this.layout.getShrinkedStackerBoxInPaperOriginOf(t),c=N.getOpposite(o),u=N.toVector(c),p=N.joinDirections(c,N.getOpposite(h)),m=N.joinDirections(c,h);s=t.toPaperOrigin(t.getJointConnectPoint(p)),a=e.toPaperOrigin(e.getJointConnectPoint(m));let g=new Pt(s,u),f=new Pt(a,u);if(s=Pt.getClosestIntersectPointWithBoxExtended(d,g),a=Pt.getClosestIntersectPointWithBoxExtended(d,f),this.layout.outLayout instanceof As){let t=this.layout.outLayout.getAdditionalTranslate();s=s.add(t),a=a.add(t)}let y=this.layout.getExpanderPoint(t),x=y.diff(r);r=r.mix(y,1-this.connectSizeRate);let w=x.multiplyScalar(this.connectSizeRate-1);s=s.add(w),a=a.add(w);let v=s.diff(r).projectTo(l),b=a.diff(r).projectTo(l);v.dot(b)>0&&(v.getLength()>b.getLength()?a=s:s=a),this.updateInLayout(t,r,s,i,y),this.updateInLayout(e,r,a,n,y),this.updateInLineStrokeStyle(t,i,x),this.updateInLineStrokeStyle(e,n,x)}updateNormalInLayouts(){for(let t=0;t<this.layout.inLayouts.length;t++){let e=this.layout.inLayouts[t],i=this.layout.inKs[t],[n,o]=this.layout.getAdjustedOutInPoints(e),r=this.getCornerPoint(e,n,o)||n,s=r.diff(n);this.connectSiblings&&t>0&&(n=this.getLastLayoutInPointOpposite(t)),this.updateInLayout(e,n,o,i,r),this.updateInLineStrokeStyle(e,i,s)}}getCornerPoint(t,e,i){let[n,o]=this.layout.getOutInDirections(t),r=n!==o,s=e;if(this.layout.shouldRenderOutUntilExpander()&&this.haveSharedStart&&(s=this.layout.getExpanderPoint(t)),r){let t=N.toVector(n),e=N.toVector(o),r=this.layout.node.tree.style.get("layout","connection-maximum-gradient-rate"),a=t.mix(e,r),l=i.diff(s),{x:h}=l.decompressToFactors(t,a);h=Math.max(h,0),s=s.add(t.multiplyScalar(h))}return s}getLastLayoutInPointOpposite(t){let e=this.layout.inLayouts[t-1],i=N.getOpposite(e.getInConnectDirection()),n=e.localConnectPointAt(i);return e.toPaperOrigin(n)}updateInLineStrokeStyle(t,e,i){let n=this.connectOnlyToTails?this.layout.node.getOutConnectWidth():this.layout.node.getInConnectWidth(t.node),o=this.layout.node.getInConnectColor(t.node),r=this.getKeepingStartWidthLength(i.getLength()),s=!this.layout.willConnectWithInNodeStroke();o=this.layout.node.tree.style.contrastWithBackgroundColor(o,5),function(t,e,i,n,o,r,s){e.setDynamicStroke(function(t,e,i,n){let o=t.node.style.get("connect-tapered"),r=t.node.style.get("connect-dasharray"),s=e;if(o&&s!==i&&!r){let e=t.node.style.get("connect-tapered-power");return e=e<0?-1/(e-1):e+1,(t,o)=>function(t,e,i,n,o,r){let s=t*e;if(s<=i)return n;t=(s-i)/(e-i);let a=Math.pow(t,r);return n*(1-a)+o*a}(t,o,n,s,i,e)}return null}(t,i,n,r),n,void 0,o,s)}(this.layout.outLayout,e,this.layout.computedConnectStartWidth,n,o,r,s)}getKeepingStartWidthLength(t){return this.haveSharedStart?0===t||1===this.layout.inLayouts.length?0:(this.layout.isConnectOnlyToTails()?t/2:t)+this.layout.computedConnectStartWidth/2:0}}Fl.beStraight=!1,Ho.register("arc",class extends Fl{updateInLayout(t,e,i,n,o){let[,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(o),a=s.rotateFromInDegree(r)<0?1:0;n.clear(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),0===s.x||0===s.y?n.lineTo(i.x,i.y):n.ellipseTo(Math.abs(s.x),Math.abs(s.y),0,0,a,i.x,i.y),n.smoothRadius=0,n.smoothCornerIndices=null}}),Ho.register("bezier",class extends Fl{constructor(){super(...arguments),this.haveSharedStart=!1,this.startBendedRate=.7,this.endBendedRate=.5}updateInLayout(t,e,i,n,o){let[r,s]=this.layout.getOutInDirectionVectors(t),a=i.diff(o),l=o.add(a.projectTo(r).multiplyScalar(this.startBendedRate)),h=i.add(a.projectTo(s).multiplyScalar(-this.endBendedRate));n.clear(),n.moveTo(e.x,e.y),o.equals(e)||n.lineTo(o.x,o.y),n.bezierTo(l.x,l.y,h.x,h.y,i.x,i.y),n.smoothRadius=0,n.smoothCornerIndices=null}});class Wl extends Fl{updateInLayout(t,e,i,n,o){let[,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(o).restAfterProjectTo(r);n.clear(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),n.lineBy(s.x,s.y),n.lineTo(i.x,i.y),n.smoothRadius=0}}Wl.beStraight=!0,Ho.register("fork",Wl),Ho.register("fork-rounded",class extends Wl{updateInLayout(t,e,i,n,o){super.updateInLayout(t,e,i,n,o),n.smoothRadius=this.layout.outNode.tree.style.get("layout","connect-smooth-radius"),n.smoothCornerIndices=[2]}});class $l extends Fl{updateInLayout(t,e,i,n,o){let[,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(o).projectTo(r).multiplyScalar(.5),a=i.add(s.negative());n.clear(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),n.lineTo(a.x,a.y),n.lineTo(i.x,i.y),n.smoothRadius=0,n.smoothCornerIndices=null}}Ho.register("hayfork",$l),Ho.register("hayfork-rounded",class extends $l{updateInLayout(t,e,i,n,o){super.updateInLayout(t,e,i,n,o),n.smoothRadius=this.layout.outNode.tree.style.get("layout","connect-smooth-radius"),n.smoothCornerIndices=[2]}}),Ho.register("y",class extends Fl{updateInLayout(t,e,i,n,o){let[,r]=this.layout.getOutInDirectionVectors(t);if(n.clear(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),n.lineTo(i.x,i.y),!this.layout.isConnectWithoutStroking()){let e=t.node.style.get("stroke-width")/2,i=r.multiplyScalar(e);n.lineBy(i.x,i.y)}n.smoothRadius=0,n.smoothCornerIndices=null}}),Ho.register("parabola",class extends Fl{constructor(){super(...arguments),this.haveSharedStart=!1}updateInLayout(t,e,i,n,o){let[r,s]=this.layout.getOutInDirectionVectors(t),a=i.diff(o),l=a.projectTo(r),h=a.multiplyScalar(2).minus(a.projectTo(r)),d=o.add(l.multiplyScalar(1/3)),c=i.add(h.multiplyScalar(-1/3));if(n.clear(),n.moveTo(e.x,e.y),o.equals(e)||n.lineTo(o.x,o.y),n.bezierTo(d.x,d.y,c.x,c.y,i.x,i.y),!this.layout.isConnectWithoutStroking()){let e=t.node.style.get("stroke-width")/2,i=s.multiplyScalar(e);n.lineBy(i.x,i.y)}n.smoothRadius=0,n.smoothCornerIndices=null}});class Vl extends Fl{constructor(){super(...arguments),this.connectOnlyToTails=!0}static matchOutNode(t){return!(t instanceof Hr)||jo.isStraightlyFacedLayoutName(t.style.get("layout"))}updateInLayout(t,e,i,n,o){let[,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(e).restAfterProjectTo(r);n.clear(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),n.lineBy(s.x,s.y),n.smoothRadius=0,n.smoothCornerIndices=null}}Vl.beStraight=!0,Ho.register("t",Vl),Ho.register("bracket",class extends Vl{static matchOutNode(t){return!(t instanceof Hr)||jo.isStraightlyFacedLayoutName(t.style.get("layout"))}updateInLayout(t,e,i,n,o){let[,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(e),a=o.diff(e),l=s.restAfterProjectTo(r),h=.8*a.getLength();h=Math.round(h),n.clear(),n.moveTo(e.x,e.y),n.lineTo(o.x,o.y),n.lineBy(l.x,l.y),n.lineTo(i.x,i.y),n.smoothRadius=h,n.smoothCornerIndices=null}}),Ho.register("-timeline",class extends Fl{constructor(){super(...arguments),this.connectSiblings=!0,this.haveSharedStart=!1}static matchOutNode(t){return t instanceof Hr&&t.style.get("layout").startsWith("timeline-")}updateInLineStrokeStyle(t,e,i){if(t===this.layout.inLayouts[0])return void super.updateInLineStrokeStyle(t,e,i);let n=t.node,o=n.style.get("connect-width"),r=n.style.get("connect-color"),s=!this.layout.willConnectWithInNodeStroke();e.setDynamicStroke(null,o,void 0,r,s)}updateInLayout(t,e,i,n){n.clear(),n.moveTo(e.x,e.y),n.lineTo(i.x,i.y),n.smoothRadius=0,n.smoothCornerIndices=null}}),Ho.register("-fishbone-bended-line",class extends Fl{constructor(){super(...arguments),this.willRenderIndepentOutPart=!0,this.haveSharedStart=!1}static matchOutNode(t){return t instanceof Hr&&t.style.get("layout").startsWith("fishbone-")}updateOutLayout(t){let e=this.layout.getAdjustedOutPoint(this.layout.inLayouts[0]),i=this.getOutTailPoint();t.clear(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y)}getOutTailPoint(){let t=this.layout.inLayouts[this.layout.inLayouts.length-1],[e]=this.layout.getAdjustedOutInPoints(t),[i]=this.layout.getOutInDirections(t),n=N.toVector(i),o=this.layout.outLayout.getBranchLayout().branchStacker.getJointRenderBoxInParentOrigin();o=this.layout.outLayout.toPaperOrigin(o);let r=o.anchorPointAt(i).diff(e).projectTo(n);return e.add(r)}updateInLayout(t,e,i,n){let[o,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(e),[a]=s.decompress(o,r),l=e.add(a);n.clear(),n.moveTo(l.x,l.y),n.lineTo(i.x,i.y),n.smoothRadius=0,n.smoothCornerIndices=null}}),Ho.register("-fishbone-in-line",class extends Fl{constructor(){super(...arguments),this.haveSharedStart=!1}static matchOutNode(t){return t instanceof Hr&&t.style.get("layout").startsWith("-fishbone-")}updateInLayout(t,e,i,n){let[o,r]=this.layout.getOutInDirectionVectors(t),s=i.diff(e),[a]=s.decompress(o,r),l=e.add(a);n.clear(),this.layout.outLayout.node.parent instanceof Hr?n.moveTo(l.x,l.y):(n.moveTo(e.x,e.y),n.lineTo(l.x,l.y)),n.lineTo(i.x,i.y),n.smoothRadius=0,n.smoothCornerIndices=null}});class jl extends Cs{constructor(t){super(t)}getStartOffsetVector(){if(this.node instanceof Yr){let t=this.node.ownData.position;if(t)return P.fromCoord(t)}return new P(0,0)}applyMatrixInPaperOriginDeeply(t=new P(0,0)){let e=lt.I().translate(t.x,t.y);this.setMatrixInPaperOriginDeeply(e)}}Fo.register("branch-root",jl),Fo.register("branch-float-root",jl),Fo.register("boundary",class extends fs{constructor(t){super(t),this.translateFromParent=new P(0,0),this.contained=[],this.localRenderBox=_.empty(),this.localContainerBox=_.empty(),this.paddings={top:0,right:0,bottom:0,left:0},this.computedStartIndex=0,this.computedEndIndex=0,this.computedSameSideStartIndex=0,this.computedSameSideEndIndex=0,this.containingAttached=!1}get parent(){return this.node.parent instanceof Hr?Fo.get(this.node.parent).getBranchLayout():null}getChildExtendDirection(){let t=this.parent.getBranchLayout().branchStacker,e=this.contained[0];return t.getExtendDirectionOf(e)}getBasePaddings(){let t=O([this.node.style.get("boundary-padding")]);return t.top+=this.getTextHeight(),t}getTextHeight(){let t=0;if(this.node.getFinalText()){let e=O(this.node.style.get("padding"));t=this.node.getLocalContentBox().height+e.top+e.bottom}return t}setStackedPaddings(t){this.paddings=t}getInLayouts(){return this.contained}getFirstInLayout(){return this.contained[0]}getAllInLayouts(){return this.contained}getSameSideSiblings(){return this.getFirstInLayout().sameSideSiblings}getLastInLayout(){return this.contained[this.contained.length-1]}doLayout(){this.doSelfLayout()}doSelfLayout(){this.containingAttached=!!this.node.ownData.containingAttached,this.containingAttached?this.setStackedPaddings(this.getBasePaddings()):this.makeBranchChildren(),this.updateBoxes(),this.node.updateBoundaryTextWidth()}makeBranchChildren(){let t=this.parent.getBranchLayout().branchChildren,e=t;if(t.length>0){let{startIndex:i,endIndex:n}=this.node.ownData;i=Math.min(Math.max(0,null!=i?i:0),t.length-1),n=Math.min(Math.max(null!=n?n:0,i+1),t.length);let o=t[i],r=t[n-1],s=o.sameSideSiblings;s.includes(r)||(n=i+s.length-s.indexOf(o)),e=t.slice(i,n).filter((t=>s.includes(t))),this.computedStartIndex=i,this.computedEndIndex=n,this.computedSameSideStartIndex=s.indexOf(e[0]),this.computedSameSideEndIndex=s.indexOf(e[e.length-1])+1}this.contained=e}updateBoxes(){let t=this.getNormalContentBox().expandWithObject(this.paddings),e=t.expand(-this.getTextHeight(),0,0,0),i=e.center;this.translateFromParent=i.asVector();let n=t.translate(-this.translateFromParent.x,-this.translateFromParent.y),o=e.translate(-this.translateFromParent.x,-this.translateFromParent.y);this.localRenderBox=n,this.localContainerBox=o}updateAndApplyBoxes(){this.updateBoxes(),this.node.updateBoundaryBoxes(this.localRenderBox,this.localContainerBox)}getNormalContentBox(){if(this.containingAttached)return this.parent.jointRenderBox;{let t=this.contained.map((t=>t.getJointRenderBoxInParentOrigin()));return _.fromUnion(...t)||_.empty()}}getTranslateFromParent(){return this.translateFromParent}toParentOrigin(t){return t.translate(this.translateFromParent.x,this.translateFromParent.y)}getLocalRenderBox(){return this.localRenderBox}getLocalContainerBox(){return this.localContainerBox}getRenderBoxInParentOrigin(){return this.toParentOrigin(this.localRenderBox)}getContentBoxInPaperOrigin(){return this.toPaperOrigin(this.localContainerBox)}getDirectionalMinimumContentBoxInPaperOrigin(t){let e,i=this.node.style.get("boundary-padding");if(1===this.contained.length)e=this.contained[0].getJointRenderBoxInPaperOrigin();else{let i;i=t===this.parent.branchStacker.getExtendDirectionOf(this.contained[0])?this.contained[this.contained.length-1]:this.contained[0],e=i.getJointRenderBoxInPaperOrigin()}return e.expand(i)}getMaxContentBoxInPaperOrigin(){let t=this.parent.branchStacker.getChildStackerBoxInParentOrigin(this.contained[0]);return this.parent.toPaperOrigin(t).union(this.getContentBoxInPaperOrigin())}});class Hl{static getChildInDirection(t){return N.getOpposite(this.childAlignDirection)}static getLimitedChildLayoutNames(t){return null}static getLimitedConnectNames(){return null}constructor(t,e,i){this.adjustOutToAlignBetter=!1,this.layout=t,this.node=t.node,this.outDirection=e,this.childAlignDirection=i}init(){return this.initStacker(),this.updateStyle(),this}updateStyle(){}initStacker(){let t=N.getOpposite(this.outDirection);this.stacker=new Ts(this.layout,t)}}Hl.outDirection=R.None,Hl.childAlignDirection=R.None,Hl.possibleChildOutDirections=null,Hl.possibleChildInDirections=null;class Ul extends Hl{doStacking(){this.stacker.updateInLayouts(),this.layout.setOut(this.outDirection),this.stacker.setChildrenInDirection(this.outDirection),this.stacker.stack()}doAlignment(){let t=this.layout.marginedAnchorAt(this.outDirection);this.stacker.alignAnchorPoints(t)}}class Kl extends Ul{}Kl.outDirection=R.Right,Kl.childAlignDirection=R.Left;class ql extends Ul{}ql.outDirection=R.Left,ql.childAlignDirection=R.Right;class Zl extends Ul{}Zl.outDirection=R.Bottom,Zl.childAlignDirection=R.Top;class Gl extends Ul{}Gl.outDirection=R.Top,Gl.childAlignDirection=R.Bottom,jo.register("right",Kl),jo.register("left",ql),jo.register("bottom",Zl),jo.register("top",Gl);class Yl extends Hl{initStacker(){let t;t=this.childAlignDirection===R.Left?N.isCloseWith(this.outDirection,R.Bottom)?R.TopLeft:R.BottomLeft:N.isCloseWith(this.outDirection,R.Bottom)?R.TopRight:R.BottomRight,this.stacker=new Ts(this.layout,t,this.childAlignDirection)}doStacking(){this.stacker.updateInLayouts(),this.layout.setOut(this.outDirection),this.stacker.setChildrenInDirection(N.getOpposite(this.childAlignDirection)),this.stacker.stack()}doAlignment(){let t=this.layout.marginedAnchorAt(this.outDirection,this.layout.getLocalOutPoint());this.stacker.alignAnchorPoints(t)}}class Jl extends Yl{}Jl.outDirection=R.Bottom,Jl.childAlignDirection=R.Left,Jl.possibleChildInDirections=[R.Right];class Xl extends Yl{}Xl.outDirection=R.Bottom,Xl.childAlignDirection=R.Right,Xl.possibleChildInDirections=[R.Left];class Ql extends Yl{}Ql.outDirection=R.Top,Ql.childAlignDirection=R.Left,Ql.possibleChildInDirections=[R.Right];class th extends Yl{}th.outDirection=R.Top,th.childAlignDirection=R.Right,th.possibleChildInDirections=[R.Left],jo.register("file-tree-down-right",Jl),jo.register("file-tree-down-left",Xl),jo.register("file-tree-up-right",Ql),jo.register("file-tree-up-left",th);class eh extends Yl{constructor(){super(...arguments),this.adjustOutToAlignBetter=!0}}eh.outDirection=R.Bottom,eh.childAlignDirection=R.Left,eh.possibleChildInDirections=[R.Right];class ih extends Yl{constructor(){super(...arguments),this.adjustOutToAlignBetter=!0}}ih.outDirection=R.Bottom,ih.childAlignDirection=R.Right,ih.possibleChildInDirections=[R.Left];class nh extends Yl{constructor(){super(...arguments),this.adjustOutToAlignBetter=!0}}nh.outDirection=R.Top,nh.childAlignDirection=R.Left,nh.possibleChildInDirections=[R.Right];class oh extends Yl{constructor(){super(...arguments),this.adjustOutToAlignBetter=!0}}oh.outDirection=R.Top,oh.childAlignDirection=R.Right,oh.possibleChildInDirections=[R.Left],jo.register("file-tree-down-right-align-better",eh),jo.register("file-tree-down-left-align-better",ih),jo.register("file-tree-up-right-align-better",nh),jo.register("file-tree-up-left-align-better",oh);class rh extends Ss{stack(){this.stackers[0].stack(),this.stackers[1].stack();let t=this.stackers.map((t=>t.getMargins())).filter((t=>t));this.margins=E(...t)}translateInLayoutFrom(t,e){this.stackers[0].translateInLayoutFrom(t,e),this.stackers[1].translateInLayoutFrom(t,e)}reStackAfterItemsTranslated(){this.stackers[0].reStackAfterItemsTranslated(),this.stackers[1].reStackAfterItemsTranslated(),this.updateJointRenderBox()}getOneSideRenderBoxInParentOrigin(t){return(t&&this.findStackerContains(t)||this.stackers[0]).getOneSideRenderBoxInParentOrigin(t).translate(this.toParentOriginTranslate.x,this.toParentOriginTranslate.y)}getOneSideRenderBoxPreferDirectionInParentOrigin(t){let e=null;for(let i of this.stackers)if(!N.isCloseWith(i.connectDirection,t)){e=i;break}return e?e.getOneSideRenderBoxInParentOrigin(null).translate(this.toParentOriginTranslate.x,this.toParentOriginTranslate.y):this.getOneSideRenderBoxInParentOrigin(null)}getConnectDirectionOf(t){let e=this.findStackerContains(t);return e?e.getConnectDirectionOf(t):super.getConnectDirectionOf(t)}getAlignDirectionOf(t){let e=this.findStackerContains(t);return e?e.getAlignDirectionOf(t):super.getAlignDirectionOf(t)}getExtendDirectionOf(t){let e=this.findStackerContains(t);return e?e.getExtendDirectionOf(t):super.getExtendDirectionOf(t)}findStackerContains(t){for(let e of this.stackers)if(e.getStackedSiblingsOf(t).includes(t))return e;return null}getStackedSiblingsOf(t){for(let e of this.stackers){let i=e.getStackedSiblingsOf(t);if(i.includes(t))return i}return[]}getStackedChildList(){return Tt(this.stackers.map((t=>t.getStackedChildList())))}getStackedChildGroup(){let t=this.getStackedChildrenStartIndex();return Tt(this.stackers.map(((e,i)=>{let n=e.getStackedChildGroup();return n.forEach((e=>e.startIndex=t[i])),n})))}getStackedChildrenStartIndex(){return[0,0]}getChildStackerBoxInParentOrigin(t){let e=this.findStackerContains(t);return(null==e?void 0:e.getJointRenderBoxInParentOrigin())||null}}class sh extends rh{constructor(t,e){if(super(t,e),this.shiftingPixels=0,!N.isStraight(e))throw new Error("Only support straight directions!");this.initStackers()}initStackers(){let[t,e]=N.splitToOrthogonalDirections(this.connectDirection);this.connectDirection!==R.Left&&this.connectDirection!==R.Bottom||([t,e]=[e,t]);let i=N.getPerpendicularPositive(this.connectDirection);this.stackers=[new Ts(this.outLayout,t,i),new Ts(this.outLayout,e,N.getOpposite(i))]}updateInLayouts(t=this.outLayout.branchChildren){super.updateInLayouts(t);let e=t.filter(((t,e)=>e%2==1)),i=t.filter(((t,e)=>e%2==0));this.stackers[0].updateInLayouts(e),this.stackers[1].updateInLayouts(i)}setChildrenInDirection(){this.stackers[0].setChildrenInDirection(N.getOpposite(this.stackers[0].alignDirection)),this.stackers[1].setChildrenInDirection(N.getOpposite(this.stackers[1].alignDirection))}stack(){let t=this.doFlexDisplay();this.acceptFlexLayout(t)}doFlexDisplay(){let t=this.stackers[0],e=this.stackers[1],i=this.makeFlexUnit(),n=i.doSelfDisplay();return i.remove(this.wallDisplay.unit),n.updateChildren(),this.adjustBalancing(n),t.acceptFlexLayout(n.children[0]),e.acceptFlexLayout(n.children[1]),n}makeFlexUnit(){let t=this.makeRootUnit(),e=this.stackers[0],i=this.stackers[1],n=e.doFlexDisplay().unit,o=i.doFlexDisplay().unit;return this.makeWallDisplay(),t.append(n),t.append(this.wallDisplay.unit),t.append(o),t}makeRootUnit(){let t=new Ii;return this.connectDirection===R.Left?(t.direction="column",t.alignItems="start"):this.connectDirection===R.Right?(t.direction="column",t.alignItems="end"):this.connectDirection===R.Top?(t.direction="row",t.alignItems="start"):this.connectDirection===R.Bottom&&(t.direction="row",t.alignItems="end"),t}makeWallDisplay(){let t=new Ii,e=this.getMinimumMargin();t.margin=[e],t.alwaysSizable=!0,this.wallDisplay=t.doDisplay()}adjustBalancing(t){let e=t.children[0],i=t.children[1];N.isHorizontal(this.connectDirection)?this.adjustHorizontalBalancing(t):this.adjustVerticalBalancing(t),e.expandToFitContent(),i.expandToFitContent(),t.expandToFitContent()}adjustHorizontalBalancing(t){let e=0,i=0,n=this.connectDirection===R.Left?1:-1,o=0,r=0,s=this.getMinimumMargin(),a=this.shiftingPixels;for(let[l,h,d,c,u]of this.iterateChildrenPointsPair(t)){let p=d?d.x*n:-1/0,m=c?c.x*n:-1/0;-1===n&&(p+=t.width,m+=t.width),m-=a;let g=0===u?this.shiftingPixels-s:o+2*this.shiftingPixels,f=Math.max(p+e,m+i,g,r);e=f-p,i=f-m,this.translateChild(l,e*n,0),this.translateChild(h,i*n,0),o=f,r=this.getMaxPointInExtendDirection(l,h,s).x,-1===n&&(r=t.width-r)}}getMaxPointInExtendDirection(t,e,i){let n=this.getExtendDirectionOf((t||e).unit.data),o=null==t?void 0:t.toRenderBoxInParentOrigin(),r=null==e?void 0:e.toRenderBoxInParentOrigin();return _.fromUnion(...[o,r].filter((t=>t))).expand(i).anchorPointAt(n)}adjustVerticalBalancing(t){let e=0,i=0,n=this.connectDirection===R.Top?1:-1,o=0,r=0,s=this.shiftingPixels,a=this.getMinimumMargin();for(let[l,h,d,c,u]of this.iterateChildrenPointsPair(t)){let p=d?d.y*n:-1/0,m=c?c.y*n:-1/0;-1===n&&(p+=t.height,m+=t.height),p-=s;let g=0===u?this.shiftingPixels-a:o+2*this.shiftingPixels,f=Math.max(p+e,m+i,g,r);e=f-p,i=f-m,this.translateChild(l,0,e*n),this.translateChild(h,0,i*n),o=f,r=this.getMaxPointInExtendDirection(l,h,a).y,-1===n&&(r+=t.height)}}*iterateChildrenPointsPair(t){let e=t.children[0],i=t.children[1],n=this.stackers[0].alignDirection,o=this.stackers[1].alignDirection;for(let[r,s,a]of this.iterateChildrenPair(t)){let t=r?this.getDescendantDisplayAlignPoint(r,e,n):null,l=s?this.getDescendantDisplayAlignPoint(s,i,o):null;yield[r,s,t,l,a]}}*iterateChildrenPair(t){let e=t.children[0],i=t.children[1],n=e.childrenInUnitOrder,o=i.childrenInUnitOrder,r=Math.max(n.length,o.length);for(let t=0;t<r;t++){let e=n[t],i=o[t];yield[e,i,t]}}getDescendantDisplayAlignPoint(t,e,i){return this.getChildDisplayInPoint(t).translate(e.x,e.y)}translateChild(t,e,i){t&&(t.x+=e,t.y+=i)}getConnectAnchor(t=this.connectDirection){let e=this.getMinimumMargin(),i=ts.makeAnchorFomBox(this.jointRenderBox,t,this.margins,e);return t===this.connectDirection&&(N.isHorizontal(this.connectDirection)?i.point.y=this.wallDisplay.y:i.point.x=this.wallDisplay.x),i}alignAnchorPoints(t,e=this.getConnectAnchor()){for(let i=0;i<this.stackers.length;i++){let n=this.stackers[i],o=this.childDisplays[i],r=n.getConnectAnchor(),s=e.point.translate(-o.x,-o.y);r.point=s,r.marginX=0,r.marginY=0,n.alignAnchorPoints(t,r)}let i=ts.getAligningTranslate(t,e);this.toParentOriginTranslate=i}}class ah extends Hl{static getChildInDirection(t){return t.getSameTypeIndex()%2==0?R.Right:R.Left}initStacker(){let t=N.getOpposite(this.outDirection);this.stacker=new sh(this.layout,t)}updateStyle(){let t=this.node.tree.style.get("layout","layout-balanced-shifting");this.stacker.shiftingPixels=t}doStacking(){this.stacker.updateInLayouts(),this.layout.setOut(this.outDirection),this.stacker.setChildrenInDirection(),this.stacker.stack()}doAlignment(){let t=this.layout.marginedAnchorAt(this.outDirection);this.stacker.alignAnchorPoints(t)}}ah.possibleChildInDirections=[R.Right,R.Left];class lh extends ah{}lh.outDirection=R.Bottom;class hh extends ah{}hh.outDirection=R.Top,jo.register("file-tree-down-balanced",lh),jo.register("file-tree-up-balanced",hh);class dh extends Yl{initStacker(){let t;t=this.childAlignDirection===R.Top?this.outDirection===R.Right?R.TopLeft:R.TopRight:this.outDirection===R.Right?R.BottomLeft:R.BottomRight,this.stacker=new Ts(this.layout,t,this.childAlignDirection)}}class ch extends dh{}ch.outDirection=R.Right,ch.childAlignDirection=R.Bottom,ch.possibleChildInDirections=[R.Top];class uh extends dh{}uh.outDirection=R.Right,uh.childAlignDirection=R.Top,uh.possibleChildInDirections=[R.Bottom];class ph extends dh{}ph.outDirection=R.Left,ph.childAlignDirection=R.Bottom,ph.possibleChildInDirections=[R.Top];class mh extends dh{}mh.outDirection=R.Left,mh.childAlignDirection=R.Top,mh.possibleChildInDirections=[R.Bottom],jo.register("vine-right-up",ch),jo.register("vine-left-up",ph),jo.register("vine-right-down",uh),jo.register("vine-left-down",mh);class gh extends ah{static getChildInDirection(t){return t.getSameTypeIndex()%2==0?R.Top:R.Bottom}}gh.possibleChildInDirections=[R.Top,R.Bottom];class fh extends gh{}fh.outDirection=R.Right;class yh extends gh{}yh.outDirection=R.Left,jo.register("vine-right-balanced",fh),jo.register("vine-left-balanced",yh);class xh extends sh{setChildrenInDirection(){this.setEachStackerInDirection(this.stackers[0]),this.setEachStackerInDirection(this.stackers[1])}updateInLayouts(t=this.outLayout.branchChildren){super.updateInLayouts(t);let e=t.filter(((t,e)=>e%2==0)),i=t.filter(((t,e)=>e%2==1));this.stackers[0].updateInLayouts(e),this.stackers[1].updateInLayouts(i)}getStackedChildrenStartIndex(){return[0,1]}setEachStackerInDirection(t){let e=N.getOpposite(N.joinDirections(this.connectDirection,t.alignDirection)),i=t.alignDirection;t.setChildrenInDirection(e,i)}getDescendantDisplayAlignPoint(t,e,i){let n=super.getDescendantDisplayAlignPoint(t,e,i),o=this.outLayout.node.tree.style.getSkewAspectRatio();if(i===R.Bottom){let t=this.wallDisplay.y-n.y;n.x+=N.toVector(this.connectDirection).x*t*o,n.y+=t}else{let t=n.y-this.wallDisplay.y;n.x+=N.toVector(this.connectDirection).x*t*o,n.y-=t}return n}}class wh extends Hl{static getChildInDirection(t){return t.getSameTypeIndex()%2==0?R.Top:R.Bottom}static getLimitedChildLayoutNames(t){let e=t.getSameTypeIndex()%2==0;return this.outDirection===R.Right?[e?"-fish-bone-bone-right-up":"-fish-bone-bone-right-down"]:[e?"-fish-bone-bone-left-up":"-fish-bone-bone-left-down"]}static getLimitedConnectNames(){return["-fishbone-bended-line"]}initStacker(){let t=N.getOpposite(this.outDirection);this.stacker=new xh(this.layout,t)}updateStyle(){super.updateStyle();let t=this.node.tree.style.get("layout","layout-fishbone-shifting");this.stacker.shiftingPixels=t}doStacking(){this.stacker.updateInLayouts(),this.layout.setOut(this.outDirection),this.stacker.setChildrenInDirection(),this.stacker.stack()}doAlignment(){let t=this.layout.marginedAnchorAt(this.outDirection);this.stacker.alignAnchorPoints(t)}}wh.outDirection=R.Right;class vh extends wh{}vh.outDirection=R.Right;class bh extends wh{}bh.outDirection=R.Left,jo.register("fishbone-right",vh),jo.register("fishbone-left",bh);class kh extends Hl{static getLimitedConnectNames(){return["-fishbone-in-line"]}initStacker(){let t=N.getVerticalMirror(this.outDirection);this.stacker=new Ts(this.layout,t,this.childAlignDirection)}doStacking(){this.stacker.updateInLayouts();let t=N.getVerticalPart(this.outDirection);this.layout.setOut(this.outDirection,t);let e=N.getOpposite(N.getHorizontalPart(this.outDirection));this.stacker.setChildrenInDirection(e),this.stacker.stack()}doAlignment(){let t=N.getVerticalPart(this.outDirection),e=this.layout.marginedAnchorAt(t);this.stacker.alignAnchorPoints(e)}}class Ch extends kh{}Ch.outDirection=R.BottomLeft,Ch.childAlignDirection=R.TopLeft,Ch.possibleChildInDirections=[R.Right,R.Bottom];class Sh extends kh{}Sh.outDirection=R.TopLeft,Sh.childAlignDirection=R.BottomLeft,Sh.possibleChildInDirections=[R.Right,R.Top];class Th extends kh{}Th.outDirection=R.BottomRight,Th.childAlignDirection=R.TopRight,Th.possibleChildInDirections=[R.Left,R.Bottom];class Mh extends kh{}Mh.outDirection=R.TopRight,Mh.childAlignDirection=R.BottomRight,Mh.possibleChildInDirections=[R.Left,R.Top],jo.register("-fish-bone-bone-right-up",Ch),jo.register("-fish-bone-bone-right-down",Sh),jo.register("-fish-bone-bone-left-up",Th),jo.register("-fish-bone-bone-left-down",Mh);class Ah extends Hl{static getChildInDirection(){return this.outDirection}static getLimitedConnectNames(){return["-timeline"]}initStacker(){let t,e=N.getOpposite(this.outDirection);t=N.isHorizontal(this.outDirection)?R.Top:R.Left,this.stacker=new Ms(this.layout,e,t)}updateStyle(){super.updateStyle();let t=this.node.tree.style.get("layout","layout-timeline-margin");this.stacker.timelineMargin=t}doStacking(){this.stacker.updateInLayouts(),this.layout.setOut(this.outDirection),this.stacker.setChildrenInDirection(this.outDirection),this.stacker.stack()}doAlignment(){let t=this.layout.marginedAnchorAt(this.outDirection);this.stacker.alignAnchorPoints(t)}}class Ph extends Ah{}Ph.outDirection=R.Right,Ph.possibleChildOutDirections=[R.Top,R.Bottom],Ph.possibleChildInDirections=[R.Top,R.Bottom];class Dh extends Ah{}Dh.outDirection=R.Left,Dh.possibleChildOutDirections=[R.Top,R.Bottom],Dh.possibleChildInDirections=[R.Top,R.Bottom];class Ih extends Ah{}Ih.outDirection=R.Bottom,Ih.possibleChildOutDirections=[R.Left,R.Right],Ih.possibleChildInDirections=[R.Left,R.Right];class Eh extends Ah{}Eh.outDirection=R.Top,Eh.possibleChildOutDirections=[R.Left,R.Right],Eh.possibleChildInDirections=[R.Left,R.Right],jo.register("timeline-right",Ph),jo.register("timeline-left",Dh),jo.register("timeline-down",Ih),jo.register("timeline-up",Eh);class Lh extends rh{constructor(t){super(t,R.Center),this.willStackersAlign=!1,this.initStackers()}initStackers(){this.stackers=[new Ts(this.outLayout,R.Right),new Ts(this.outLayout,R.Left)]}updateInLayouts(t=this.outLayout.branchChildren){super.updateInLayouts(t);let e=this.outLayout.node.getMindLayoutSplitIndex(),i=t.slice(e),n=t.slice(0,e);this.stackers[0].updateInLayouts(i),this.stackers[1].updateInLayouts(n)}updateJointRenderBox(){this.jointRenderBox=_.fromUnion(...this.stackers.map((t=>t.getJointRenderBoxInParentOrigin())).filter((t=>t)))}getStackedChildrenStartIndex(){return[this.outLayout.node.getMindLayoutSplitIndex(),0]}getOneSideRenderBoxInParentOrigin(t){return(t&&this.findStackerContains(t)||this.stackers[1]).getOneSideRenderBoxInParentOrigin(t).translate(this.toParentOriginTranslate.x,this.toParentOriginTranslate.y)}getMainSideChildList(){return this.stackers[1].getMainSideChildList()}getAllSidesChildList(){return[...this.stackers[0].getAllSidesChildList(),...this.stackers[1].getAllSidesChildList()]}setChildrenInDirection(){this.stackers[0].setChildrenInDirection(N.getOpposite(this.stackers[0].alignDirection)),this.stackers[1].setChildrenInDirection(N.getOpposite(this.stackers[1].alignDirection))}alignAnchorPoints(t,e){this.stackers[0].alignAnchorPoints(t),this.stackers[1].alignAnchorPoints(e),this.updateJointRenderBox()}}class Oh extends Hl{static getChildInDirection(t){let e=t.parent.getMindLayoutSplitIndex();return t.getSameTypeIndex()<e?R.Right:R.Left}initStacker(){this.stacker=new Lh(this.layout)}doStacking(){this.stacker.updateInLayouts(),this.layout.setOut(R.Right),this.stacker.setChildrenInDirection(),this.stacker.stack()}doAlignment(){let t=this.layout.marginedAnchorAt(R.Left),e=this.layout.marginedAnchorAt(R.Right);this.stacker.alignAnchorPoints(t,e)}}Oh.outDirection=R.None,Oh.possibleChildInDirections=[R.Left,R.Right],jo.register("mind",Oh);const Bh={zoom:1,padding:30,embedImages:!1,imageQuality:1,expandAll:!1,noBackground:!1,showWatermark:!1,showProductSignature:!1};class Rh{constructor(t,e,i){this.renderBox=_.empty(),this.renderComplete=Promise.resolve(),this.minder=new xl({...e,previewMode:!0,expandedStateMode:"sync"}),t.watermark=t.watermark||{},t.watermark.show=!1,this.minder.dataManager.import(t),this.options={...Bh,...i},this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.renderComplete=this.doRendering()}getPaperSize(){return{width:this.renderBox.width,height:this.renderBox.height}}async doRendering(){await yi(),await async function(){if("loading"===document.fonts.status)return new Promise(((t,e)=>{document.fonts.addEventListener("loadingdone",(()=>{t()})),document.fonts.addEventListener("loadingerror",(()=>{e()}))}))}(),this.renderBox=this.minder.paper.treeLayout.getJointRenderBoxInPaperOrigin(Jr.RelLineCurve).round().expand(this.options.padding);let{width:t,height:e}=this.dealCanvasSize();this.canvas.width=t,this.canvas.height=e,this.options.showWatermark&&(this.minder.watermark.toggleStatus(!0,{width:t,height:e},this.renderBox),await this.untilWatermarkRendered())}async untilWatermarkRendered(){return new Promise((t=>{this.minder.watermark.once("watermark-change",(()=>{t()}))}))}dealCanvasSize(){let t=this.options.zoom,e=this.options.padding,i=this.renderBox.width*t,n=this.renderBox.height*t;if(this.options.width&&this.options.height){let t=Math.min((this.options.width-e/2)/i,(this.options.height-e/2)/n);i*=t,n*=t}let o=!1,r=this.getScalingFactor(i,n);return r<1&&(i*=r,i*=r,o=!0),i+=2*e,{width:i,height:n,scaled:o}}getScalingFactor(t,e){let i=this.options.padding,n=2*i,o=n*(t+e),r=(Math.sqrt(o*o-4*t*e*268435456)-n*(t+e))/(2*t*e);return Math.max((32767-2*i)/t,(32767-2*i)/e,r)}async encodeAsImageDataURI(t){return await this.drawImageAs(t),this.canvas.toDataURL(`image/${t}`,Bh.imageQuality)}async encodeAsImageBlob(t){return await this.drawImageAs(t),new Promise((e=>{this.canvas.toBlob((t=>{e(t)}),`image/${t}`)}))}async drawImageAs(t){await this.renderComplete,await this.drawBackground(t),await this.drawSVG(),this.options.showProductSignature&&await this.drawProductSignature()}async drawBackground(t){let e=this.options.noBackground,i=this.minder.style.getBackgroundStyle(),n=e?"":/url\((.+)\)/.exec(i),o=e?"transparent":f.fromString(i);if("jpeg"===t&&(this.context.save(),this.context.fillStyle="#fff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()),n){let t=await vr(n[1]),{width:e,height:i}=this.getCoveredBgSize(t);this.context.drawImage(t,0,0,e,i)}else this.context.save(),this.context.fillStyle=String(o),this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()}getCoveredBgSize(t){let e=Math.max(this.canvas.width/t.naturalWidth,this.canvas.height/t.naturalHeight);return{width:t.naturalWidth*e,height:t.naturalHeight*e}}async drawSVG(){let t=await this.encodeAsSVGDataURI(),e=await vr(t);this.context.drawImage(e,0,0,this.canvas.width,this.canvas.height)}async encodeAsSVGDataURI(){await this.renderComplete;let t=await this.getSVGCode();return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t)}async getSVGCode(){await this.renderComplete;let t=this.renderBox,e=this.minder.paper.k.element.cloneNode(!0),i=this.options.noBackground;e.style.width="",e.style.height="",e.style.visibility="",i&&(e.style.background=""),e.setAttribute("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height),e.setAttribute("width",String(t.width)),e.setAttribute("height",String(t.height)),e.insertAdjacentHTML("afterbegin","<style>*{margin:0;}</style>"),e.removeAttribute("class"),this.options.embedImages&&await this.embedImageSources(e);let n=document.createElement("div");n.append(e);let o=n.innerHTML;return o=this.cleanSVGCode(o),o=o.replace(/<br>/g,"<br/>"),o}async embedImageSources(t){let e=t.querySelectorAll("image");for(let t of e){let e=t.getAttributeNS("http://www.w3.org/1999/xlink","href");if(!e.startsWith("data:"))try{let i=await br(e);t.setAttributeNS("http://www.w3.org/1999/xlink","href",i)}catch(t){console.warn(t)}}}cleanSVGCode(t){return(t=(t=t.replace(/[\x00-\x09\x0B-\x1F\x7F-\x9F]/g,"")).replace(/&nbsp;/g,"")).replace(/NS\d+:title/gi,"xlink:title")}async drawProductSignature(){let t=this.options.watermark;if(!t)return;let e=t.url,i=await vr(e),n=i.naturalWidth*(t.scaling||1),o=i.naturalHeight*(t.scaling||1),r=t.margin||{x:0,y:0},s=n+r.x,a=o+r.y,l=Math.ceil(this.canvas.width/s),h=Math.ceil(this.canvas.height/a),d=(t.position||"bottom right").split(/\s+/),c=d[0],u=d[1]||c,p=.5*["left","center","right"].indexOf(c)*(this.canvas.width-n),m=.5*["top","center","bottom"].indexOf(u)*(this.canvas.height-o),g=t.offset||{x:0,y:0};p+=g.x,m+=g.y,p-=Math.ceil(p/s)*s,m-=Math.ceil(m/a)*a;for(let t=0;t<=l;t++)for(let e=0;e<=h;e++){let r=p+s*t,l=m+a*e;this.context.drawImage(i,r,l,n,o)}}remove(){this.minder.paper.remove()}}Ni.register("jpeg",{fileDescription:"JPEG Image",fileExtension:".jpg",mimeType:"image/jpeg",toDataTypes:["base64","blob"],encodeMinder:async(t,e)=>{let i,n=new Rh(t.dataManager.export(),t.settings.getOptions(),e);return i="base64"===e.toDataType?await n.encodeAsImageDataURI("jpeg"):await n.encodeAsImageBlob("jpeg"),n.remove(),{data:i,...n.getPaperSize()}}}),Ni.register("png",{fileDescription:"PNG Image",fileExtension:".png",mimeType:"image/png",toDataTypes:["base64","blob"],encodeMinder:async(t,e)=>{let i,n=new Rh(t.dataManager.export(e),t.settings.getOptions(),e);return i="base64"===e.toDataType?await n.encodeAsImageDataURI("png"):await n.encodeAsImageBlob("png"),n.remove(),{data:i,...n.getPaperSize()}}});const Nh={fileDescription:"MindMap JSON Format",fileExtension:".gm",toDataTypes:["text"],mimeType:"application/json",async encodeMinder(t,e){let i=JSON.stringify(t.dataManager.export(e)),n=t.paper.treeLayout.getJointMarginBoxInPaperOrigin().round().expand(e.padding||0);return{data:i,width:n.width,height:n.height}},encodeDataItems:t=>JSON.stringify(t),decodeToDataItems:t=>JSON.parse(t)};Ni.register("json",Nh),Ni.register("svg",{fileDescription:"SVG Image",fileExtension:".svg",mimeType:"image/svg+xml",toDataTypes:["base64","text"],encodeMinder:async(t,e)=>{let i,n=new Rh(t.dataManager.export(e),t.settings.getOptions(),e);return i="base64"===e.toDataType?await n.encodeAsSVGDataURI():await n.getSVGCode(),n.remove(),{data:i,...n.getPaperSize()}}}),qo.register({name:"BranchLayout",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e){for(let i of t)i.style.modify("layout",e),i.style.modify("connect-out-adjust","mind"===e?"evenly":void 0),i.style.modify("layout-alternate",e.startsWith("timeline")?"odd":void 0);this.minder.paper.pinNodeInDirection(t[0],R.Center)}queryValueWithNode(t){return t.style.get("layout")}}}),qo.register({name:"BranchLayoutOffsetReset",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t){let e=new Set;for(let i of t)for(let t of this.minder.dataModifier.walkMeAndDescendantsInType(i.data.id,"Branch"))e.add(t.data.id);for(let t of e)this.minder.dataModifier.modify(t,["data","layoutOffset"],void 0)}},shortcutKeys:"Ctrl+Shift+L"});class _h extends Ko{constructor(){super(...arguments),this.canExecWhenDisabled=!0}canExecWithDataItem(t,e){return("Branch"===e||"Summary"===e)&&!!t.children&&t.children.length>0}execWithDataItems(t,e){for(let i of t)this.minder.dataModifier.expandedStates.setExpanded(i.data.id,e);this.pinOneOfDataItems(t)}queryValueWithDataItems(t){return t.map((t=>this.queryValueWithDataItem(t))).every((t=>t))}queryValueWithDataItem(t){return this.minder.dataModifier.expandedStates.getExpanded(t.data.id)}}qo.register({name:"BranchExpand",class:_h}),qo.register({name:"BranchExpandToVisible",class:class extends Ko{constructor(){super(...arguments),this.canExecWhenDisabled=!0}canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e||"RelLine"===e}execWithDataItems(t){for(let e of t)for(let t of this.minder.dataModifier.walkAncestorsInType(e.data.id,"Branch"))this.minder.dataModifier.expandedStates.setExpanded(t.data.id,!0);this.pinOneOfDataItems(t)}}}),qo.register({name:"BranchToggleExpand",class:class extends _h{execWithDataItems(t){let e=!super.queryValueWithDataItems(t);super.execWithDataItems(t,e)}},shortcutKeys:"Ctrl+/"}),qo.register({name:"BranchToggleExpandDeeply",class:class extends _h{execWithDataItems(t){let e=!this.queryValueWithDataItems(t),i=new Set;for(let e of t)for(let t of this.minder.dataModifier.walkMeAndDescendants(e.data.id))i.add(t.data.id);for(let t of i)this.minder.dataModifier.expandedStates.setExpanded(t,e);this.pinOneOfDataItems(t)}},shortcutKeys:"Ctrl+Shift+/"}),qo.register({name:"BranchExpandAll",class:class extends Po{constructor(){super(...arguments),this.canExecWhenDisabled=!0}exec(t){for(let e of this.minder.dataModifier.walkDescendants(this.minder.dataManager.id))this.minder.dataModifier.expandedStates.setExpanded(e.data.id,t);t||this.minder.viewer.moveToMakeNodeInCenter(this.minder.paper.mainRoot)}queryValue(){return this.minder.paper.rootChildren.every((t=>t.getExpanded()))}}});class zh extends Do{adjustDataAfterAdded(t,e,i=-1){if(!(e instanceof ps)){if("mind"===e.style.get("layout")&&this.adjustMindLayoutSplitIndexAfterAdded(t,e,i),e.data.summaries)for(let i=0;i<e.data.summaries.length;i++){let n=e.data.summaries[i];this.adjustSummaryOrBoundaryIndexAfterAdded(n,t)}if(e.data.boundaries)for(let i=0;i<e.data.boundaries.length;i++){let n=e.data.boundaries[i];this.adjustSummaryOrBoundaryIndexAfterAdded(n,t)}}}adjustMindLayoutSplitIndexAfterAdded(t,e,i){var n;let o,r=e.getMindLayoutSplitIndex(),s=(null===(n=e.data.children)||void 0===n?void 0:n.length)||0;if(r=Math.min(r,s-1),-2===i)o=!1;else if(-1===i){let e=Math.ceil(s/2);o=t>=0&&t<r||t===r&&r<=e}else o=t>=0&&t<r||t===r&&i<t;o&&r++,e.setMindLayoutSplitIndex(r)}adjustSummaryOrBoundaryIndexAfterAdded(t,e){(t.data.startIndex||0)>=e&&this.minder.dataModifier.modify(t.data.id,["data","startIndex"],(t.data.startIndex||0)+1),(t.data.endIndex||0)>e&&this.minder.dataModifier.modify(t.data.id,["data","endIndex"],(t.data.endIndex||0)+1)}adjustDataAfterMovedOut(t,e){if(!(e instanceof ps)){if("mind"===e.style.get("layout")&&this.adjustMindLayoutSplitIndexAfterRemoved(e,t),e.data.summaries)for(let i=e.data.summaries.length-1;i>=0;i--){let n=e.data.summaries[i];this.adjustSummaryOrBoundaryIndexAfterRemoved(n,t,"SummaryRemove")}if(e.data.boundaries)for(let i=e.data.boundaries.length-1;i>=0;i--){let n=e.data.boundaries[i];this.adjustSummaryOrBoundaryIndexAfterRemoved(n,t,"BoundaryRemove")}}}adjustMindLayoutSplitIndexAfterRemoved(t,e){var i;let n=t.ownData.mindLayoutSplitIndex;void 0!==n&&(0===((null===(i=t.data.children)||void 0===i?void 0:i.length)||0)?t.setMindLayoutSplitIndex(void 0):e<n&&t.setMindLayoutSplitIndex(n-1))}adjustSummaryOrBoundaryIndexAfterRemoved(t,e,i){(t.data.startIndex||0)>e&&this.minder.dataModifier.modify(t.data.id,["data","startIndex"],(t.data.startIndex||0)-1),(t.data.endIndex||0)>e&&this.minder.dataModifier.modify(t.data.id,["data","endIndex"],(t.data.endIndex||0)-1),(t.data.endIndex||0)<=(t.data.startIndex||0)&&this.minder.commands.execWithIds(i,[t.data.id])}adjustDataAfterMovedInSiblings(t,e,i,n){this.adjustMindLayoutSplitIndexAfterMovedInSiblings(t,e,i,n),this.adjustSummaryOrBoundaryIndicesAfterMovedInSiblings(i.data.summaries,t,e),this.adjustSummaryOrBoundaryIndicesAfterMovedInSiblings(i.data.boundaries,t,e)}adjustMindLayoutSplitIndexAfterMovedInSiblings(t,e,i,n){if("mind"===i.style.get("layout")){let o=i.getMindLayoutSplitIndex(),r=e<o||e===o&&(n>-1&&n<e||-1===n);t<o!==r&&(r?o++:o--,i.setMindLayoutSplitIndex(o))}}adjustSummaryOrBoundaryIndicesAfterMovedInSiblings(t,e,i){if(e<i&&i--,t&&e!==i){let n=e>i?1:-1,o=e<i?e+1:e-1,r=Math.min(o,i),s=Math.max(o,i);for(let o=0;o<t.length;o++){let a=t[o],{startIndex:l,endIndex:h}=a.data;l=l||0,h=h||0;let d=l===e&&h===l+1,c=l<=e&&h>e;l>=r&&l<=s&&(l+=n),h-1>=r&&h-1<=s&&(h+=n),d?(l=i,h=l+1):c&&(l>i?l=i:h<i+1&&(h=i+1)),this.minder.dataModifier.modify(a.data.id,["data","startIndex"],l),this.minder.dataModifier.modify(a.data.id,["data","endIndex"],h)}}}selectOnlyNodesByIdsAfterLayout(t){fi((()=>{let e=t.map((t=>this.minder.paper.getNodeById(t))).filter((t=>t));e.length>0&&(this.minder.selections.selectOnly(...e),this.minder.viewer.moveByPassiveSelectedNode(e[0],!0))}))}}class Fh extends zh{canExecWithNode(t){return t instanceof Hr}endNodeEditing(){this.minder.status.isInInputing()&&this.minder.textEditorController.commitEditing()}canAppendMoreNode(){let t=this.minder.dataManager.getTotalBranchNodeCount()+1;return $o.willCreateNode(t)}makeNodeData(t={},e,i=null){var n,o,r,s;let a=Ki.cloneDataItemDeeply(t);a.style||(a.style={});let l=(null===(n=e.branchChildren[0])||void 0===n?void 0:n.id)||this.minder.dataModifier.getSameDeepthIdBelowSameRoot(this.minder.dataModifier.getRootIdOf(e.id),this.minder.dataModifier.getDeepth(e.id)+1,"Branch");if(l){let t=this.minder.dataModifier.getItemMust(l);for(let e of ko.SameDeepthInheritableKeysWhenInit){let i=null===(o=t.style)||void 0===o?void 0:o[e];void 0!==i&&(a.style[e]=i)}}if(i){let t=e.getChildLevel();if(i.getLevel()===t)for(let t of[...ko.InheritableKeysWhenInitFrom,...ko.CrossingLevelOwnInheritableKeys]){let e=null===(r=i.data.style)||void 0===r?void 0:r[t];void 0!==e&&(a.style[t]=e)}if(i.getDeepth()===e.getDeepth()+1){let t=null===(s=i.data.style)||void 0===s?void 0:s["custom-content-width"];void 0!==t&&(a.style["custom-content-width"]=t)}}return a}appendNewNodeAt(t,e,i){this.minder.dataModifier.addTypedChild(t,i.id,e,"Branch"),this.adjustDataAfterAdded(e,i),i.modifyOwnData("expanded",!0),i.setExpanded(!0)}willEditNodeById(t){this.minder.settings.get("mobileMode")&&this.minder.textEditorController.preFocus(),fi((()=>{let e=this.minder.paper.getNodeById(t);e&&this.minder.textEditorController.startEditing(e,"user-end-default-all")}))}}qo.register({name:"BranchAddChild",class:class extends Fh{constructor(){super(...arguments),this.acceptShortKeyWhenInputing=!0}execWithNodes(t,e={},i=-1,n=this.minder.settings.get("toEditAfterNewlyAdded"),o=!0,r=!0){var s;this.endNodeEditing();let a=[];for(let n of t){if(!this.canAppendMoreNode())break;if(i<0){let t=(null===(s=n.data.children)||void 0===s?void 0:s.length)||0;if("mind"===n.style.get("layout")&&r){let e=n.getMindLayoutSplitIndex();e<=t/2&&(i=e)}else i+=t+1}let t=this.makeNodeData(e,n,n);this.appendNewNodeAt(t,i,n),a.push(t.data.id)}this.minder.paper.pinNodeInDirection(t[0],R.Center),o&&this.selectOnlyNodesByIdsAfterLayout(a),n&&a.length>0&&this.willEditNodeById(a[0])}},shortcutKeys:["Tab","Insert"]});class Wh extends Fh{canExecWithNode(t){return"Branch"===t.type&&t.parent instanceof Hr}execWithNodes(t,e={},i=this.minder.settings.get("toEditAfterNewlyAdded"),n=!0){this.endNodeEditing();let o=this.appendSiblings(t,e);this.minder.paper.pinNodeInDirection(t[0],R.Center),n&&this.selectOnlyNodesByIdsAfterLayout(o),i&&o.length>0&&this.willEditNodeById(o[0])}appendSiblings(t,e){let i=[],n=t.map((t=>[t,t.getIndex()]));n.sort(((t,e)=>e[1]-t[1])),t=n.map((t=>t[0]));for(let n of t){if(!this.canAppendMoreNode())break;let t=n.getSameTypeIndex()+1,o=this.makeNodeData(e,n.parent,n);this.appendNewNodeAt(o,t,n.parent),i.push(o.data.id)}return i}}qo.register({name:"BranchAddSibling",class:Wh}),qo.register({name:"BranchAddSiblingOrDoToRoot",class:class extends Wh{canExecWithNode(t){return"Branch"===t.type}execWithNodes(t,e={},i=this.minder.settings.get("toEditAfterNewlyAdded"),n=!0){if(this.endNodeEditing(),1===t.length&&t[0].isRoot&&this.minder.settings.get("enterAtRootToAddChild"))return void this.minder.commands.exec("BranchAddChild");let o=(t=t.filter((t=>super.canExecWithNode(t)))).length>0?this.appendSiblings(t,e):[];0===o.length&&(o=this.minder.selections.branch.getSelected().map((t=>t.id))),this.minder.paper.pinNodeInDirection(t[0],R.Center),n&&this.selectOnlyNodesByIdsAfterLayout(o),i&&o.length>0&&this.willEditNodeById(o[0])}},shortcutKeys:["Enter","Shift+Enter"]}),qo.register({name:"BranchDuplicate",class:class extends Fh{canExecWithNode(t){return super.canExecWithNode(t)&&t.parent instanceof Hr}execWithNodes(t,e={},i=this.minder.settings.get("toEditAfterNewlyAdded"),n=!0){this.endNodeEditing();let o=[];for(let i of t){if(!this.canAppendMoreNode())break;let t=i.getSameTypeIndex()+1,n=Ki.cloneDataItemDeeply(i.data);se(n,e),this.appendNewNodeAt(n,t,i.parent),o.push(n.data.id)}this.minder.paper.pinNodeInDirection(t[0],R.Center),n&&this.selectOnlyNodesByIdsAfterLayout(o),i&&o.length>0&&this.willEditNodeById(o[0])}},shortcutKeys:"Ctrl+D"}),qo.register({name:"BranchAddParent",class:class extends Fh{canExecWithNode(t){var e;return"Branch"===t.type&&"Branch"===(null===(e=t.parent)||void 0===e?void 0:e.type)}execWithNodes(t,e={},i=this.minder.settings.get("toEditAfterNewlyAdded"),n=!0){this.endNodeEditing();let o=St(t,(t=>[t.parent,t])),r=[];for(let[t,i]of o.entries()){if(!this.canAppendMoreNode())break;let n=i[i.length-1].getSameTypeIndex()+1,o=this.makeNodeData(e,t);o.data.expanded=!0,this.minder.dataModifier.addTypedChild(o,t.id,n,"Branch"),t.modifyOwnData("expanded",!0),t.setExpanded(!0),r.push(o.data.id);for(let t of i)this.minder.dataModifier.moveChild(t.id,o.data.id,0)}this.minder.paper.pinNodeInDirection(t[0],R.Center),n&&this.selectOnlyNodesByIdsAfterLayout(r),i&&r.length>0&&this.willEditNodeById(r[0])}},shortcutKeys:["Shift+Tab","Shift+Insert"]});class $h extends zh{canExecWithNode(t){return"Branch"===t.type&&"branch-root"!==t.classify}adjustParentDataAfterReplaced(t,e){var i;void 0!==e.ownData.mindLayoutSplitIndex&&(0===((null===(i=e.data.children)||void 0===i?void 0:i.length)||0)?e.setMindLayoutSplitIndex(void 0):t<e.ownData.mindLayoutSplitIndex&&e.setMindLayoutSplitIndex(e.ownData.mindLayoutSplitIndex+1)),this.adjustSummaryOrBoundaryIndexAfterReplaced(e.data.summaries,t),this.adjustSummaryOrBoundaryIndexAfterReplaced(e.data.boundaries,t)}adjustSummaryOrBoundaryIndexAfterReplaced(t,e){if(t)for(let i=0;i<t.length;i++){let n=t[i];(n.data.startIndex||0)<=e&&(n.data.endIndex||0)>e?this.minder.dataModifier.modify(n.data.id,["data","endIndex"],(n.data.endIndex||0)+1):((n.data.startIndex||0)>=e&&this.minder.dataModifier.modify(n.data.id,["data","startIndex"],(n.data.startIndex||0)+1),(n.data.endIndex||0)>e&&this.minder.dataModifier.modify(n.data.id,["data","endIndex"],(n.data.endIndex||0)+1))}}adjustDataAfterRemoved(t,e,i){this.adjustDataAfterMovedOut(e,i);let n=this.minder.dataManager.relLines.filter((e=>e.data.fromId===t.id||e.data.toId===t.id));for(let t of n)this.minder.dataModifier.removeChild(t.data.id)}adjustSelectionAfterRemoved(t,e){if("none"===e)return;let i=[],n=[];for(let o of t){let t=o.parent,r=[];"previous"===e&&r.push(this.getStackedPreviousSibling(o)),"next"===e?r.push(o.firstBranchChild,this.getStackedNextSibling(o)):r.push(o.firstBranchChild,this.getStackedNextSibling(o),this.getStackedPreviousSibling(o)),i.push(...r.filter((t=>t))),"previous"!==e&&"auto"!==e||n.push(t)}di((()=>{let t=null;for(let e of i)if(e.attached){t=e;break}if(!t)for(let e of n)if(e.attached){t=e;break}t&&(this.minder.selections.select(t),this.minder.paper.pinNodeInDirection(t,R.Center),mi((()=>{this.minder.viewer.moveByPassiveSelectedNode(t,!0)})))}))}getStackedPreviousSibling(t){var e,i;if(!(t.parent instanceof Hr))return null;let n=Fo.get(t);return(null===(e=n.previousSameSideSibling)||void 0===e?void 0:e.node)||(null===(i=n.nextSameSideSibling)||void 0===i?void 0:i.node)||t.previousBranchSibling}getStackedNextSibling(t){var e,i;if(!(t.parent instanceof Hr))return null;let n=Fo.get(t);return(null===(e=n.nextSameSideSibling)||void 0===e?void 0:e.node)||(null===(i=n.previousSameSideSibling)||void 0===i?void 0:i.node)||t.nextBranchSibling}}qo.register({name:"BranchRemoveDeeply",class:class extends $h{execWithNodes(t,e="auto"){t=this.minder.cooperateController.filterOutLockedNodes(t,"delete"),(t=this.minder.paper.excludeDescendants(t)).sort(((t,e)=>e.getSameTypeIndex()-t.getSameTypeIndex()));for(let e of t){let t=e.getSameTypeIndex(),i=e.parent;this.minder.dataModifier.removeChild(e.id),this.adjustDataAfterRemoved(e,t,i)}this.adjustSelectionAfterRemoved(t,e)}}}),qo.register({name:"BranchRemoveSelf",class:class extends $h{canExecWithNode(t){return"Branch"===t.type&&!t.isRoot}execWithNodes(t,e="auto"){t=this.minder.cooperateController.filterOutLockedNodes(t,"delete");for(let e of t){let t=e.parent,i=e.getSameTypeIndex(),n=i;if(e.data.children)for(let i of[...e.data.children])this.minder.dataModifier.moveChild(i.data.id,t.id,n),this.adjustParentDataAfterReplaced(n,t),n++;this.copyOwnSummaryOrBoundaryToParent(e.data.summaries,t,i),this.copyOwnSummaryOrBoundaryToParent(e.data.boundaries,t,i),this.minder.dataModifier.removeChild(e.id),this.adjustDataAfterRemoved(e,n,t)}this.adjustSelectionAfterRemoved(t,e)}copyOwnSummaryOrBoundaryToParent(t,e,i){if(t)for(let n of[...t])this.minder.dataModifier.modify(n.data.id,["data","startIndex"],(n.data.startIndex||0)+i),this.minder.dataModifier.modify(n.data.id,["data","endIndex"],(n.data.endIndex||0)+i),this.minder.dataModifier.moveChild(n.data.id,e.id,-1)}},shortcutKeys:["Ctrl+Delete","Ctrl+Backspace"]});class Vh extends zh{canExecWithNode(t){return"Branch"===t.type&&"branch-root"!==t.classify}moveTo(t,e,i,n){e instanceof Hr&&(e.modifyOwnData("expanded",!0),e.setExpanded(!0));let o=[];for(let r of t.reverse()){let t=r.getSameTypeIndex();this.minder.dataModifier.moveChild(r.id,e.id,i),r.parent===e?this.adjustDataAfterMovedInSiblings(t,i,r.parent,n):(this.adjustDataAfterMovedOut(t,r.parent),this.adjustDataAfterAdded(i,e,n),this.minder.style.clearAllCache()),o.push(r.id)}return o}}function jh(t,e){let i=Fo.get(t),n=i.getRenderBoxInPaperOrigin().center,o=i.sameSideSiblings,r=o.indexOf(i),s=o[r+1],a=o[r-1],l=s?N.fromVector(s.getRenderBoxInPaperOrigin().center.diff(n)):R.None,h=a?N.fromVector(a.getRenderBoxInPaperOrigin().center.diff(n)):R.None;return N.isCloseWith(e,l)?s.node:N.isCloseWith(e,h)?a.node:null}qo.register({name:"BranchMove",class:class extends Vh{execWithNodes(t,e,i,n=-1){let o=e===this.minder.dataManager.id?this.minder.paper:this.minder.paper.getNodeById(e);if(!o||!(o instanceof ps||o instanceof Hr))return;let r=this.moveTo(t,o,i,n);this.selectOnlyNodesByIdsAfterLayout(r)}}}),qo.register({name:"BranchMoveAfterParent",class:class extends Vh{canExecWithNode(t){return t.parent instanceof Hr&&!t.parent.isRoot}execWithNodes(t){let e=[];for(let i of t){let t=i.parent,n=t.parent,o=t.getSameTypeIndex()+1;e.push(...this.moveTo([i],n,o,-1))}this.selectOnlyNodesByIdsAfterLayout(e)}}}),qo.register({name:"BranchMoveToPreviousSibling",class:class extends Vh{canExecWithNode(t){return"Branch"===t.type&&!!t.previousBranchSibling}execWithNodes(t){var e;let i=[];for(let n of t){let t=n.previousBranchSibling,o=(null===(e=t.data.children)||void 0===e?void 0:e.length)||0;i.push(...this.moveTo([n],t,o,-1))}this.selectOnlyNodesByIdsAfterLayout(i)}}});class Hh{constructor(){this.lMap=new Map,this.rMap=new Map}add(t,e){if(this.lMap.has(e)){let t=this.lMap.get(e);this.lMap.delete(e),this.rMap.delete(t),e=t}if(this.rMap.has(t)){let e=this.rMap.get(t);this.rMap.delete(t),this.lMap.delete(e),t=e}this.lMap.set(t,e),this.rMap.set(e,t)}iterate(){return this.lMap.entries()}}class Uh extends zh{canExecWithNode(t){return"Branch"===t.type&&!t.isRoot}execWithNodes(t){let e=new Hh;for(let i of t){let t=this.getNextSiblingInDirection(i);t&&e.add(i,t)}for(let[t,i]of e.iterate()){let e=i,n=t,o=e.getSameTypeIndex(),r=n.getSameTypeIndex(),s=r;o<r&&r++,this.minder.dataModifier.moveChild(e.id,n.parent.id,r),this.adjustDataAfterMovedInSiblings(o,r,n.parent,s)}let i=t.map((t=>t.id));this.selectOnlyNodesByIdsAfterLayout(i)}getNextSiblingInDirection(t){return jh(t,this.direction)}}qo.register({name:"BranchArrangeUp",class:class extends Uh{constructor(){super(...arguments),this.direction=R.Top}},shortcutKeys:"Alt+ArrowUp"}),qo.register({name:"BranchArrangeDown",class:class extends Uh{constructor(){super(...arguments),this.direction=R.Bottom}},shortcutKeys:"Alt+ArrowDown"}),qo.register({name:"BranchArrangeLeft",class:class extends Uh{constructor(){super(...arguments),this.direction=R.Left}},shortcutKeys:"Alt+ArrowLeft"}),qo.register({name:"BranchArrangeRight",class:class extends Uh{constructor(){super(...arguments),this.direction=R.Right}},shortcutKeys:"Alt+ArrowRight"}),qo.register({name:"BranchFloatRootBringToFront",class:class extends zh{canExecWithNode(t){return"branch-float-root"===t.classify}execWithNodes(t){this.minder.paper.sortNodes(t);for(let e of t)e.nextBranchSibling&&this.minder.dataModifier.moveChild(e.id,e.parent.id,-1)}}}),qo.register({name:"AddFloatRoot",class:class extends Po{exec(t){let e=this.getInitFalotRootData(t),i=this.minder.dataManager.children.length;this.minder.dataModifier.addTypedChild(e,this.minder.dataModifier.id,i,"Branch"),fi((()=>{let t=this.minder.paper.getNodeById(e.data.id);t&&(this.minder.selections.selectOnly(t),this.minder.viewer.moveByPassiveSelectedNode(t,!0))}))}getInitFalotRootData(t){return{data:{...Ki.generateOwnBaseData(),position:t}}}}}),qo.register({name:"NodeRemove",class:class extends Do{canExecWithNode(t){let e=t.id;return this.minder.commands.canExecWithIds("BranchRemoveDeeply",[e])||this.minder.commands.canExecWithIds("SummaryRemove",[e])||this.minder.commands.canExecWithIds("RelLineRemove",[e])||this.minder.commands.canExecWithIds("BoundaryRemove",[e])}execWithNodes(t){let e=t.map((t=>t.id));this.minder.commands.execWithIds("BranchRemoveDeeply",e),e=e.filter((t=>this.minder.dataModifier.hasItem(t))),this.minder.commands.execWithIds("BoundaryRemove",e),e=e.filter((t=>this.minder.dataModifier.hasItem(t))),this.minder.commands.execWithIds("SummaryRemove",e),e=e.filter((t=>this.minder.dataModifier.hasItem(t))),this.minder.commands.execWithIds("RelLineRemove",e)}},shortcutKeys:["Delete","Backspace"]}),qo.register({name:"NodeCopy",class:class extends Do{canExecWithNode(t){return this.minder.nodeClipboardController.canCopyNode(t)}execWithNodes(t){this.minder.nodeClipboardController.copyNodesToInner(t)}}}),qo.register({name:"NodeCut",class:class extends Do{canExecWithNode(t){return this.minder.nodeClipboardController.canCutNode(t)}execWithNodes(t){this.minder.nodeClipboardController.cutNodesToInner(t)}}}),qo.register({name:"NodePaste",class:class extends Do{canExecWithNode(t){return!0}execWithNodes(t,e=!0,i=!0){return this.minder.nodeClipboardController.pasteInnerDataToNodes(t,e,i)}}}),qo.register({name:"NodePasteText",class:class extends Do{canExecWithNode(t){return"Branch"===t.type}execWithNodes(t,e,i=!0){return this.minder.nodeClipboardController.pastePaintTextToNodes(e,t,i)}}}),qo.register({name:"Hyperlink",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e,i){for(let n of t)this.minder.dataModifier.modify(n.data.id,["data","hyperlink"],e),this.minder.dataModifier.modify(n.data.id,["data","hyperlinkTitle"],i)}queryValueWithDataItem(t){return{url:t.data.hyperlink,title:t.data.hyperlinkTitle}}}}),qo.register({name:"Note",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)this.minder.dataModifier.modify(i.data.id,["data","note"],e)}queryValueWithDataItem(t){return t.data.note}}}),qo.register({name:"Icon",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)this.minder.dataModifier.modify(i.data.id,["data","icons"],e)}queryValueWithDataItem(t){return t.data.icons}}}),qo.register({name:"AddIcon",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)(i.data.icons||[]).includes(e)||this.minder.dataModifier.arrayInsert(i.data.id,["data","icons"],-1,[e])}}}),qo.register({name:"RemoveIcon",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t){let t=i.data.icons;if(t&&t.includes(e)){let n=t.findIndex((t=>t===e));this.minder.dataModifier.arrayRemove(i.data.id,["data","icons"],n,[e])}}}}}),qo.register({name:"Priority",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)this.minder.dataModifier.modify(i.data.id,["data","priority"],e)}queryValueWithDataItem(t){return t.data.priority}}}),qo.register({name:"Progress",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)this.minder.dataModifier.modify(i.data.id,["data","progress"],e)}queryValueWithDataItem(t){return t.data.progress}}}),qo.register({name:"Image",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){var i;let n=(e.url?1:0)*t.length-t.filter((t=>t.data.image)).length;!e.naturalSize||e.naturalSize.width>0&&e.naturalSize.height>0||delete e.naturalSize,!e.size||e.size.width>0&&e.size.height>0||delete e.size;for(let n of t)this.minder.dataModifier.modify(n.data.id,["data","image"],e.url),this.minder.dataModifier.modify(n.data.id,["data","imageTitle"],e.title),this.minder.dataModifier.modify(n.data.id,["data","imageNaturalSize"],e.naturalSize),this.minder.dataModifier.modify(n.data.id,["data","imageSize"],e.size),this.minder.dataModifier.modify(n.data.id,["data","imageOthers"],e.others),(null===(i=n.style)||void 0===i?void 0:i["text-align"])||this.minder.dataModifier.modify(n.data.id,["style","text-align"],"center");n>0&&this.minder.dataModifier.fire("countof-image-changed",this.minder.dataManager.getTotalImageCount())}queryValueWithDataItem(t){return{url:t.data.image,title:t.data.imageTitle,naturalSize:t.data.imageNaturalSize,size:t.data.imageSize,others:t.data.imageOthers}}}}),qo.register({name:"ImagePartial",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)e.hasOwnProperty("url")&&this.minder.dataModifier.modify(i.data.id,["data","image"],e.url),e.hasOwnProperty("title")&&this.minder.dataModifier.modify(i.data.id,["data","imageTitle"],e.title),e.hasOwnProperty("naturalSize")&&this.minder.dataModifier.modify(i.data.id,["data","imageNaturalSize"],e.naturalSize),e.hasOwnProperty("size")&&this.minder.dataModifier.modify(i.data.id,["data","imageSize"],e.size),e.hasOwnProperty("others")&&this.minder.dataModifier.modify(i.data.id,["data","imageOthers"],e.others)}}}),qo.register({name:"Sticker",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t){let t=this.minder.dataModifier.observe(i);t.data.sticker=e.name,t.data.stickerSize=e.size}}queryValueWithDataItem(t){return{name:t.data.sticker,size:t.data.stickerSize}}}}),qo.register({name:"StickerPartial",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t){let t=this.minder.dataModifier.observe(i);e.hasOwnProperty("url")&&(t.data.sticker=e.name),e.hasOwnProperty("size")&&(t.data.stickerSize=e.size)}}}}),qo.register({name:"Text",class:class extends Ko{canExecWithDataItem(t,e){return!0}execWithDataItems(t,e,i=!1){i||(e=Vn(e)),t=this.minder.cooperateController.filterOutLockedDataItems(t,"edit");for(let i of t)this.minder.dataModifier.modify(i.data.id,["data","text"],e),this.minder.dataModifier.modify(i.data.id,["data","html"],void 0)}queryValueWithDataItem(t,e=!1){let i=t.data.html,n=void 0!==i?qi(i):t.data.text;if(e&&void 0===n){let e=t.data.id,i=this.minder.dataModifier.getClassify(e),o=this.minder.dataModifier.getDeepth(e),r=this.minder.dataModifier.getIndex(e);n=Ki.getDefaultText(i,o,r)}return n}}});class Kh extends Ko{canExecWithDataItem(t,e){return!0}execWithDataItems(t,e,i=!1){i||(e=Vn(e)),t=this.minder.cooperateController.filterOutLockedDataItems(t,"edit");for(let i of t)this.minder.dataModifier.modify(i.data.id,["data","html"],e),this.minder.dataModifier.modify(i.data.id,["data","text"],void 0)}queryValueWithDataItem(t,e=!1){let i=t.data.html;if(void 0===i&&void 0!==t.data.text&&(i=qi(t.data.text)),e&&void 0===i){let e=t.data.id,n=this.minder.dataModifier.getClassify(e),o=this.minder.dataModifier.getDeepth(e),r=this.minder.dataModifier.getIndex(e);i=qi(Ki.getDefaultText(n,o,r))}return i}}qo.register({name:"HTML",class:Kh}),qo.register({name:"CompositeHTML",class:class extends Kh{canExecWithDataItem(t,e){return!0}async execWithDataItems(t,e){t=this.minder.cooperateController.filterOutLockedDataItems(t,"edit");let i=document.createElement("div");i.innerHTML=e;let n=An(i),o=await ea(i,n),{html:r,imageSource:s,hyperlink:a}=o;this.minder.history.recordExecution((()=>{for(let e of t){this.minder.dataModifier.modify(e.data.id,["data","html"],r),this.minder.dataModifier.modify(e.data.id,["data","text"],void 0),s&&this.minder.commands.execWithIds("Image",[e.data.id],s),a&&void 0===e.data.hyperlink&&["Branch","Summary"].includes(this.minder.dataModifier.getType(e.data.id))&&!e.data.hyperlink&&this.minder.dataModifier.modify(e.data.id,["data","hyperlink"],a);let t={...e.style||{},...n};this.minder.dataModifier.modify(e.data.id,["style"],t)}}))}queryValueWithDataItem(t,e=!1){let i=super.queryValueWithDataItem(t,e);return i=i?_n(i):i,i}}}),qo.register({name:"CustomContentWidth",class:class extends Ko{canExecWithDataItem(t,e){return!0}async execWithDataItems(t,e){for(let i of t){if(this.minder.style.get("content","justify-same-deepth-width")){let t=this.minder.dataModifier.getRootIdOf(i.data.id);this.minder.style.setByBranchDeepth(t,this.minder.dataModifier.getDeepth(i.data.id),"custom-content-width",e)}i.style=i.style||{},this.minder.dataModifier.observe(i).style["custom-content-width"]=e}}queryValueWithDataItem(t){var e;return null===(e=t.style)||void 0===e?void 0:e["custom-content-width"]}}}),qo.register({name:"AppendKatex",class:class extends Kh{execWithDataItems(t,e){let i=`$$${e}$$`;for(let e of t){let t=e.data.html;void 0===t&&void 0!==e.data.text&&(t=qi(e.data.text)),t=t||"",t=t.replace(/(?:<br ?\/>)?<\/p>$|$/i,(t=>i+t)),this.minder.commands.execWithIds("HTML",[e.data.id],t,!0)}}}});class qh extends Do{canExecWithNode(t){return t instanceof Uo}}class Zh extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("font-weight",e),"bold"!==e&&i.ownData.html&&i.modifyOwnData("html",on(i.ownData.html))}queryValueWithNodes(t){let e=t.map((t=>this.queryValueWithNode(t)));if(0!==e.length)return e.every((t=>"bold"===t))?"bold":"normal"}queryValueWithNode(t){return t.style.get("font-weight")}}qo.register({name:"NodeTextBold",class:Zh});class Gh extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("font-style",e),"italic"!==e&&i.ownData.html&&i.modifyOwnData("html",rn(i.ownData.html))}queryValueWithNodes(t){let e=t.map((t=>this.queryValueWithNode(t)));if(0!==e.length)return e.every((t=>"italic"===t))?"italic":"normal"}queryValueWithNode(t){return t.style.get("font-style")}}qo.register({name:"NodeTextItalic",class:Gh});class Yh extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("text-underline",e),!e&&i.ownData.html&&i.modifyOwnData("html",sn(i.ownData.html))}queryValueWithNodes(t){let e=t.map((t=>this.queryValueWithNode(t)));if(0!==e.length)return e.every((t=>t))}queryValueWithNode(t){return t.style.get("text-underline")}}qo.register({name:"NodeTextUnderline",class:Yh});class Jh extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("text-line-through",e),!e&&i.ownData.html&&i.modifyOwnData("html",an(i.ownData.html))}queryValueWithNodes(t){let e=t.map((t=>this.queryValueWithNode(t)));if(0!==e.length)return e.every((t=>t))}queryValueWithNode(t){return t.style.get("text-line-through")}}qo.register({name:"NodeTextStrikeThrough",class:Jh}),qo.register({name:"NodeTextBoldToggle",class:class extends Zh{execWithNodes(t){let e="bold"===super.queryValueWithNodes(t)?"normal":"bold";super.execWithNodes(t,e)}},shortcutKeys:"Ctrl+B"}),qo.register({name:"NodeTextItalicToggle",class:class extends Gh{execWithNodes(t){let e="italic"===super.queryValueWithNodes(t)?"normal":"italic";super.execWithNodes(t,e)}},shortcutKeys:"Ctrl+I"}),qo.register({name:"NodeTextUnderlineToggle",class:class extends Yh{execWithNodes(t){let e=!super.queryValueWithNodes(t);super.execWithNodes(t,e)}},shortcutKeys:"Ctrl+U"}),qo.register({name:"NodeTextStrikeThroughToggle",class:class extends Jh{execWithNodes(t){let e=!super.queryValueWithNodes(t);super.execWithNodes(t,e)}},shortcutKeys:"Ctrl+["}),qo.register({name:"NodeTextAlign",class:class extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("text-align",e)}queryValueWithNode(t){return t.style.get("text-align")}}}),qo.register({name:"NodeTextVerticalAlign",class:class extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("text-vertical-align",e)}queryValueWithNode(t){return t.style.get("text-vertical-align")}}}),qo.register({name:"NodeTextColor",class:class extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("color",e)}queryValueWithNode(t){return t.style.get("color")}}}),qo.register({name:"NodeTextFontFamily",class:class extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("font-family",e)}queryValueWithNode(t){return t.style.get("font-family")}}}),qo.register({name:"NodeTextFontSize",class:class extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("font-size",e)}queryValueWithNode(t){return t.style.get("font-size")}}}),qo.register({name:"NodeTextLineHeight",class:class extends qh{execWithNodes(t,e){for(let i of t)i.style.modify("line-height",e)}queryValueWithNode(t){return t.style.get("line-height")}}}),qo.register({name:"NodeTextIncreaseFontSize",class:class extends qh{execWithNodes(t){for(let e of t)e.style.modify("font-size",e.style.get("font-size")+1)}},shortcutKeys:"Ctrl+Shift+."}),qo.register({name:"NodeTextDecreaseFontSize",class:class extends qh{execWithNodes(t){for(let e of t)e.style.modify("font-size",Math.max(9,e.style.get("font-size")-1))}},shortcutKeys:"Ctrl+Shift+,"}),qo.register({name:"NodeCopyStyle",class:class extends Do{canExecWithNode(t){return t instanceof Uo}execWithNodes(t,e=!0){let i=t[0];i&&(Xh.waitsForPastingNodeType=i.type,Xh.styleWaitsForPasting=this.copyStyleOfNode(i,e))}copyStyleOfNode(t,e){let i;if(e){i={};for(let e of ko.NodeInRangeKeys)i[e]=t.style.get(e)}else i=t.data.style;return i}},shortcutKeys:"Ctrl+Alt+C"});class Xh extends Ko{canExecWithDataItem(t,e){return!!Xh.waitsForPastingNodeType&&this.isSameGroupType(e,Xh.waitsForPastingNodeType)}isSameGroupType(t,e){if(t===e)return!0;for(let i of Xh.PastingNodeTypeGroup)if(i.includes(t)&&i.includes(e))return!0;return!1}execWithDataItems(t){for(let e of t)this.minder.dataModifier.observe(e).style=oe(Xh.styleWaitsForPasting)}}Xh.waitsForPastingNodeType=null,Xh.styleWaitsForPasting=null,Xh.PastingNodeTypeGroup=[["Branch","Summary"]],qo.register({name:"NodePasteStyle",class:Xh,shortcutKeys:"Ctrl+Alt+V"}),qo.register({name:"NodeClearStyle",class:class extends Do{canExecWithNode(t){return t instanceof Uo}execWithNodes(t){for(let e of t){e.style.modifyTotal(void 0);let t=void 0!==e.ownData.html?Zi(e.ownData.html):e.ownData.text;void 0!==t&&e.modifyOwnData("html",qi(t))}}queryValueWithNode(t){return t.style.hasAnyOwn()}},shortcutKeys:"Ctrl+Alt+0"}),qo.register({name:"NodeShape",class:class extends Do{canExecWithNode(t){return t instanceof $r||t instanceof us}execWithNodes(t,e){for(let i of t)i.style.modify("shape",e),Vo.isShapeNotFullyFilled(e)&&0===i.style.get("stroke-width")&&i.style.modify("stroke-width",i.style.get("connect-width"))}queryValueWithNode(t){return t.style.get("shape")}}}),qo.register({name:"NodeFillColor",class:class extends Do{canExecWithNode(t){return t instanceof $r||t instanceof us}execWithNodes(t,e){for(let i of t)i.style.modify("fill-color",e)}queryValueWithNode(t){return t.style.get("fill-color")}}}),qo.register({name:"NodeStrokeColor",class:class extends Do{canExecWithNode(t){return t instanceof $r||t instanceof us}execWithNodes(t,e){for(let i of t)i.style.modify("stroke-color",e)}queryValueWithNode(t){return t.style.get("stroke-color")}}}),qo.register({name:"NodeStrokeWidth",class:class extends Do{canExecWithNode(t){return t instanceof $r||t instanceof us}execWithNodes(t,e){for(let i of t)i.style.modify("stroke-width",e)}queryValueWithNode(t){return t.style.get("stroke-width")}}}),qo.register({name:"NodeStrokeDashArray",class:class extends Do{canExecWithNode(t){return t instanceof $r||t instanceof us}execWithNodes(t,e){for(let i of t)i.style.modify("stroke-dasharray",e)}queryValueWithNode(t){return t.style.get("stroke-dasharray")}}}),qo.register({name:"NodeRadius",class:class extends Do{canExecWithNode(t){return t instanceof $r||t instanceof us}execWithNodes(t,e){for(let i of t)i.style.modify("radius",e)}queryValueWithNode(t){return t.style.get("radius")}}}),qo.register({name:"ImageAlignment",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("image-alignment",e)}queryValueWithNode(t){return t.style.get("image-alignment")}}}),qo.register({name:"StickerAlignment",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("sticker-alignment",e)}queryValueWithNode(t){return t.style.get("sticker-alignment")}}}),qo.register({name:"NodeMargin",class:class extends Ko{canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e}execWithDataItems(t,e){for(let i of t)this.minder.dataModifier.modify(i.data.id,["style","margin"],e);this.pinOneOfDataItems(t)}queryValueWithDataItem(t){var e,i;let n=this.minder.paper.getNodeById(t.data.id);return null!==(e=null==n?void 0:n.style.get("margin"))&&void 0!==e?e:null===(i=t.style)||void 0===i?void 0:i.margin}}}),qo.register({name:"NodeMarginAll",class:class extends Po{exec(t){this.minder.paper.style.modify("root","margin",t),this.minder.paper.style.modify("floatRoot","margin",t),this.minder.paper.style.modify("main","margin",t),this.minder.paper.style.modify("sub","margin",t),this.minder.paper.style.modify("summary","margin",t);for(let t of this.minder.dataModifier.walkDescendants(this.minder.paper.dataModifier.id)){let e=this.minder.dataModifier.getType(t.data.id);"Branch"!==e&&"Summary"!==e||this.minder.paper.dataModifier.modify(t.data.id,["style","margin"],void 0)}}queryValue(){return this.minder.paper.style.getOwn("root","margin")}}}),qo.register({name:"NodeObviousMargin",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("margin",e);let i=[];for(let e of t)i.push(...this.getNeighborNodes(e));let n=O(e),o=this.makeNeighborNodesMap(t,i);for(let t of o.values()){let{node:e,directions:i,margins:o}=t,s=Tt(i.map((t=>N.toDirection4Keys(t)))),a=O(o);for(let t of s)a[(r=t,"top"===r?"bottom":"right"===r?"left":"bottom"===r?"top":"right")]=n[t];e.style.modify("margin",B(a))}var r;this.minder.paper.pinNodeInDirection(t[0],R.Center)}getNeighborNodes(t){let e=Fo.get(t),i=e.getBranchLayout(),n=[];for(let t of i.branchChildren){let e=N.getOpposite(i.branchStacker.getConnectDirectionOf(t));n.push({node:t.node,direction:e})}if(i.parent){let t=i.getBranchLayout().branchStacker.getExtendDirectionOf(i),e=i.previousSameSideSibling,o=i.nextSameSideSibling;e&&n.push({node:e.node,direction:N.getOpposite(t)}),o&&n.push({node:o.node,direction:t})}if(e.parent){let t=e.getInConnectDirection();n.push({node:e.parent.node,direction:e.parent.getOutConnectDirection(t)})}return n}makeNeighborNodesMap(t,e){let i=new Map,n=new Set(t);for(let t of e){if(n.has(t.node))continue;let e=i.get(t.node);e?e.directions.includes(t.direction)||e.directions.push(t.direction):(e={node:t.node,directions:[t.direction],margins:t.node.style.get("margin")},i.set(t.node,e))}return i}}}),qo.register({name:"NodeSelect",class:class extends Ko{constructor(){super(...arguments),this.canExecWhenDisabled=!0}canExecWithDataItem(t,e){return"Branch"===e||"Summary"===e||"RelLine"===e}async execWithDataItems(t,e=!1){await ci();let i=t.map((t=>this.minder.paper.getNodeById(t.data.id))).filter((t=>t instanceof Uo));i.length>0&&e?this.minder.selections.textable.selectOnly(...i):this.minder.selections.textable.select(...i)}}}),qo.register({name:"NodeSelectAll",class:class extends Po{constructor(){super(...arguments),this.canExecWhenDisabled=!0}async exec(){await ci();for(let t of this.minder.paper.walkDescendants())t instanceof $r&&this.minder.selections.contentable.select(t)}},shortcutKeys:"Ctrl+A"});class Qh extends Po{constructor(){super(...arguments),this.canExecWhenDisabled=!0}canExec(){return!!this.minder.selections.contentable.getLatestTouched()}exec(){let t=this.minder.selections.contentable.getLatestTouched(),e=this.getNextChildNodeIndexInDirection(t);if(e){let i=this.minder.selections.contentable.hasSelected(t),n=this.minder.selections.contentable.hasSelected(e);i&&n?this.minder.selections.contentable.deselect(t):i?this.minder.selections.contentable.select(e):n?this.minder.selections.contentable.deselect(e):this.minder.selections.contentable.select(t)}}getNextChildNodeIndexInDirection(t){return jh(t,this.direction)}}qo.register({name:"NodeSelectionShiftUp",class:class extends Qh{constructor(){super(...arguments),this.direction=R.Top}},shortcutKeys:"Shift+ArrowUp"}),qo.register({name:"NodeSelectionShiftDown",class:class extends Qh{constructor(){super(...arguments),this.direction=R.Bottom}},shortcutKeys:"Shift+ArrowDown"}),qo.register({name:"NodeSelectionShiftLeft",class:class extends Qh{constructor(){super(...arguments),this.direction=R.Left}},shortcutKeys:"Shift+ArrowLeft"}),qo.register({name:"NodeSelectionShiftRight",class:class extends Qh{constructor(){super(...arguments),this.direction=R.Right}},shortcutKeys:"Shift+ArrowRight"}),qo.register({name:"NodeSelectMainRoot",class:class extends Po{exec(t=!0){let e=this.minder.paper.mainRoot;this.minder.selections.selectOnly(e),this.minder.viewer.moveToMakeNodeInCenter(e,t)}},shortcutKeys:"Ctrl+Shift+R"}),qo.register({name:"NodeConnect",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("connect",e)}queryValueWithNode(t){return t.style.get("connect")}}}),qo.register({name:"NodeConnectWidth",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("connect-width",e)}queryValueWithNode(t){return t.style.get("connect-width")}}}),qo.register({name:"NodeConnectColor",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("connect-color",e)}queryValueWithNode(t){return t.style.get("connect-color")}}}),qo.register({name:"NodeConnectDashArray",class:class extends Do{canExecWithNode(t){return t instanceof $r}execWithNodes(t,e){for(let i of t)i.style.modify("connect-dasharray",e)}queryValueWithNode(t){return t.style.get("connect-dasharray")}}}),qo.register({name:"NodeConnectMultiColor",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e){for(let i of t)i.style.modify("connect-multicolor",e)}queryValueWithNode(t){return t.style.get("connect-multicolor")}}}),qo.register({name:"BranchTaperedLine",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e){for(let i of t)i.style.modify("connect-tapered",e)}queryValueWithNode(t){return t.style.get("connect-tapered")}}}),qo.register({name:"BranchTaperedLinePower",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e){for(let i of t)i.style.modify("connect-tapered-power",e)}queryValueWithNode(t){return t.style.get("connect-tapered-power")}}}),qo.register({name:"BranchTaperedLineStartWidth",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e){for(let i of t)i.style.modify("connect-tapered-start-width",e)}queryValueWithNode(t){return t.style.get("connect-tapered-start-width")}}}),qo.register({name:"BranchConnectOutAdjust",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e){for(let i of t)i.style.modify("connect-out-adjust",e)}queryValueWithNode(t){return t.style.get("connect-out-adjust")}}}),qo.register({name:"RootMultiConnectColor",class:class extends Po{exec(t){this.minder.paper.style.modify("root","connect-multicolor",t),this.minder.paper.style.modify("floatRoot","connect-multicolor",t);for(let t of this.minder.dataModifier.walkDescendantsInType(this.minder.paper.dataModifier.id,"Branch"))this.minder.paper.dataModifier.modify(t.data.id,["style","connect-color"],void 0)}queryValue(){return this.minder.paper.style.get("root","connect-multicolor")}}}),qo.register({name:"RootTaperedLine",class:class extends Po{exec(t){this.minder.paper.style.modify("root","connect-tapered",t),this.minder.paper.style.modify("floatRoot","connect-tapered",t)}queryValue(){return this.minder.paper.style.get("root","connect-tapered")}}}),qo.register({name:"RootTaperedLineStartWidth",class:class extends Po{exec(t){this.minder.paper.style.modify("root","connect-tapered-start-width",t),this.minder.paper.style.modify("floatRoot","connect-tapered-start-width",t)}queryValue(){return this.minder.paper.style.get("root","connect-tapered-start-width")}}}),qo.register({name:"RootTaperedLinePower",class:class extends Po{exec(t){this.minder.paper.style.modify("root","connect-tapered-power",t),this.minder.paper.style.modify("floatRoot","connect-tapered-power",t)}queryValue(){return this.minder.paper.style.get("root","connect-tapered-power")}}}),qo.register({name:"RootConnectOutAdjust",class:class extends Po{exec(t){this.minder.paper.style.modify("root","connect-out-adjust",t),this.minder.paper.style.modify("floatRoot","connect-out-adjust",t)}queryValue(){return this.minder.paper.style.get("root","connect-out-adjust")}}}),qo.register({name:"SummaryConnect",class:class extends Do{canExecWithNode(t){return t instanceof Gr}execWithNodes(t,e){for(let i of t)i.style.modify("summary-connect",e)}queryValueWithNode(t){return t.style.get("summary-connect")}}}),qo.register({name:"SummaryConnectWidth",class:class extends Do{canExecWithNode(t){return t instanceof Gr}execWithNodes(t,e){for(let i of t)i.style.modify("summary-connect-width",e)}queryValueWithNode(t){return t.style.get("summary-connect-width")}}}),qo.register({name:"SummaryConnectColor",class:class extends Do{canExecWithNode(t){return t instanceof Gr}execWithNodes(t,e){for(let i of t)i.style.modify("summary-connect-color",e)}queryValueWithNode(t){return t.style.get("summary-connect-color")}}}),qo.register({name:"SummaryConnectDashArray",class:class extends Do{canExecWithNode(t){return t instanceof Gr}execWithNodes(t,e){for(let i of t)i.style.modify("summary-connect-dasharray",e)}queryValueWithNode(t){return t.style.get("summary-connect-dasharray")}}}),qo.register({name:"SummaryAdd",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e=this.minder.settings.get("toEditAfterNewlyAdded")){let i=t.filter((t=>t.isRoot));(t=t.filter((t=>!t.isRoot))).push(...i.map((t=>t.branchChildren)).flat());let n=St(t=this.minder.paper.excludeDescendants(t),(t=>[t.parent,t])),o=[];for(let[t,e]of n.entries()){if(!this.canAppendMoreNode())break;let i=e.filter((t=>"Branch"===t.type)),n=e.filter((t=>"Summary"===t.type)),r=[...i.map((t=>t.getSameTypeIndex())),...Tt(n.map((t=>{let e=Fo.get(t);return[e.computedStartIndex,e.computedEndIndex-1]})))],s=Math.min(...r),a=Math.max(...r)+1,l=this.appendNewSummaryNodeAt(s,a,t);o.push(l.data.id)}this.selectOnlyNodeByIdAfterLayout(o,e),e&&o.length>0&&this.willEditNodeById(o[0])}canAppendMoreNode(){let t=this.minder.dataManager.getTotalBranchNodeCount()+1;return $o.willCreateNode(t)}appendNewSummaryNodeAt(t,e,i){let n=this.getInitNodeData(t,e,i);return this.minder.dataModifier.addTypedChild(n,i.id,-1,"Summary"),i.modifyOwnData("expanded",!0),i.setExpanded(!0),n}getInitNodeData(t,e,i){var n,o;let r={data:{...Ki.generateOwnBaseData(),startIndex:t,endIndex:e},style:{}},s=(null===(n=i.branchChildren[0])||void 0===n?void 0:n.id)||this.minder.dataModifier.getSameDeepthIdBelowSameRoot(this.minder.dataModifier.getRootIdOf(i.id),this.minder.dataModifier.getDeepth(i.id)+1,"Summary");if(s){let t=this.minder.dataModifier.getItemMust(s);for(let e of ko.SameDeepthInheritableKeysWhenInit){let i=null===(o=t.style)||void 0===o?void 0:o[e];void 0!==i&&(r.style[e]=i)}}return r}selectOnlyNodeByIdAfterLayout(t,e){fi((()=>{let i=t.map((t=>this.minder.paper.getNodeById(t))).filter((t=>t));i.length>0&&(this.minder.paper.selections.selectOnly(...i),e||this.minder.viewer.moveByPassiveSelectedNode(i[0],!0))}))}willEditNodeById(t){this.minder.settings.get("mobileMode")&&this.minder.textEditorController.preFocus(),fi((()=>{let e=this.minder.paper.getNodeById(t);e&&this.minder.textEditorController.startEditing(e,"user-end-default-all")}))}},shortcutKeys:"Ctrl+Alt+T"}),qo.register({name:"SummaryRemove",class:class extends Do{canExecWithNode(t){return t instanceof Gr}execWithNodes(t){t=this.minder.cooperateController.filterOutLockedNodes(t,"delete");for(let e of t)this.minder.dataModifier.removeChild(e.id),this.adjustDataAfterRemoved(e)}adjustDataAfterRemoved(t){let e=this.minder.dataManager.relLines.filter((e=>e.data.fromId===t.id||e.data.toId===t.id));for(let t of e)this.minder.dataModifier.removeChild(t.data.id)}}}),qo.register({name:"BoundaryAdd",class:class extends Do{canExecWithNode(t){return t instanceof Hr}execWithNodes(t,e=this.minder.settings.get("toEditAfterNewlyAdded")){let i=(t=this.minder.paper.excludeDescendants(t)).filter((t=>t.isRoot||"Summary"===t.type));t=t.filter((t=>!(t.isRoot||"Summary"===t.type)));let n=[];n.push(...this.addRangedBoundaries(t)),n.push(...this.addContainingSelfBoundaries(i)),this.selectOnlyNodeByIdAfterLayout(n,e),e&&n.length>0&&this.willEditNodeById(n[0])}addRangedBoundaries(t){let e=St(t,(t=>[t.parent,t])),i=[];for(let[t,n]of e.entries()){if(!this.canAppendMoreNode())break;let e=n.filter((t=>"Branch"===t.type)).map((t=>t.getSameTypeIndex())),o=Math.min(...e),r=Math.max(...e)+1,s=this.appendNewBoundaryNodeAt({startIndex:o,endIndex:r},t);i.push(s.data.id)}return i}addContainingSelfBoundaries(t){let e=[];for(let i of t){if(!this.canAppendMoreNode())break;let t=this.appendNewBoundaryNodeAt({containingAttached:!0},i);e.push(t.data.id)}return e}canAppendMoreNode(){let t=this.minder.dataManager.getTotalBranchNodeCount()+1;return $o.willCreateNode(t)}appendNewBoundaryNodeAt(t,e){let i=this.getInitNodeData(t,e);return this.minder.dataModifier.addTypedChild(i,e.id,-1,"Boundary"),t.containingAttached||(e.modifyOwnData("expanded",!0),e.setExpanded(!0)),i}getInitNodeData(t,e){var i,n;let o={data:{...Ki.generateOwnBaseData(),...t},style:{}},r=(null===(i=e.branchChildren[0])||void 0===i?void 0:i.id)||this.minder.dataModifier.getSameDeepthIdBelowSameRoot(this.minder.dataModifier.getRootIdOf(e.id),this.minder.dataModifier.getDeepth(e.id)+1,"Boundary");if(r){let t=this.minder.dataModifier.getItem(r);for(let e of ko.SameDeepthInheritableKeysWhenInit){let i=null===(n=t.style)||void 0===n?void 0:n[e];void 0!==i&&(o.style[e]=i)}}return o}selectOnlyNodeByIdAfterLayout(t,e){fi((()=>{let i=t.map((t=>this.minder.paper.getNodeById(t))).filter((t=>t));i.length>0&&(this.minder.paper.selections.selectOnly(...i),e||this.minder.viewer.moveByPassiveSelectedNode(i[0],!0))}))}willEditNodeById(t){this.minder.settings.get("mobileMode")&&this.minder.textEditorController.preFocus(),fi((()=>{let e=this.minder.paper.getNodeById(t);e&&this.minder.textEditorController.startEditing(e,"user-end-default-all")}))}},shortcutKeys:"Ctrl+Alt+B"}),qo.register({name:"BoundaryRemove",class:class extends Do{canExecWithNode(t){return t instanceof us}execWithNodes(t){t=this.minder.cooperateController.filterOutLockedNodes(t,"delete");for(let e of t)this.minder.dataModifier.removeChild(e.id),this.adjustDataAfterRemoved(e)}adjustDataAfterRemoved(t){let e=this.minder.dataManager.relLines.filter((e=>e.data.fromId===t.id||e.data.toId===t.id));for(let t of e)this.minder.dataModifier.removeChild(t.data.id)}}});class td extends k{constructor(t){super(),this.startPosition=null,this.triggersMoving=!1,this.paper=t,this.initEvents()}initEvents(){Y.on(document,"mousemove",this.onMouseMove,this),Y.on(document,"mousedown",this.onMouseDown,this)}onMouseMove(t){let e=new X(t,this.paper.k),i=e.getPaperPosition();if(this.triggersMoving||(this.startPosition=i,this.paper.status.setInDragging(!0),this.fire("start",e),this.triggersMoving=!0),this.triggersMoving){let t=i.diff(this.startPosition);this.fire("move",e,t)}}onMouseDown(t){let e=new X(t,this.paper.k),i=e.getPaperPosition().diff(this.startPosition);this.end(),this.fire("end",e,i)}end(){Y.off(document,"mousemove",this.onMouseMove,this),Y.off(document,"mousedown",this.onMouseDown,this),this.paper.status.setInDragging(!1),this.startPosition=null,this.triggersMoving=!1}}class ed{constructor(t,e,i,n,o,r){this.relLines=[],this.mover=null,this.fromNodes=t,this.paper=e,this.history=i,this.shortcutKeys=n,this.textEditorController=o,this.willEdit=r,this.initRelLines(),this.initEvents()}async initRelLines(){let t=[];for(let e of this.fromNodes)t.push(this.makeTempRelLine(e));await yi(),this.relLines=t}makeTempRelLine(t){let e={data:{...Ki.generateOwnBaseData(),fromId:t.id}},i=this.paper.createNode("rel-line",e);return i.k.setStyle("pointer-events","none"),i.willUpdate(),t.append(i),i}initEvents(){this.mover=new td(this.paper),this.mover.on("move",this.onMouseMove,this),this.mover.on("end",this.onMoveEnd,this),this.shortcutKeys.addShortcutKey("Escape",this.remove,this)}onMouseMove(t){let e=t.getPaperPosition();for(let t of this.relLines){let i=Fo.getOf(t,ya);i.setInteractiveToPoint(e),i.doSelfLayout()}}onMoveEnd(t){let e=zo.fromClosestElement(t.target),i=null;e instanceof $r&&this.relLines.filter((t=>t.ownData.fromId!==e.id)).length>0&&this.history.recordExecution((()=>{for(let t of this.relLines){let n=Fo.getOf(t,ya),o=t.data,r=n.getComputedProperties();o.data.fromAngle=r.fromAngle,n.newlySetToId(e.id),t.remove(),this.paper.dataManager.dataModifier.addTypedChild(o,this.paper.id,-1,"RelLine"),i=i||o.data.id}})),i&&this.willEdit&&this.willEditNodeById(i),this.remove()}willEditNodeById(t){fi((()=>{let e=this.paper.getNodeById(t);e&&this.textEditorController.startEditing(e,"user-end-default-all")}))}remove(){for(let t of this.relLines)t.remove();this.relLines=[],this.mover.end(),this.mover=null,this.shortcutKeys.deleteShortcutKey("Escape",this.remove,this)}}qo.register({name:"RelLineAdd",class:class extends Do{canExec(){return 1===this.getSelectedNodes().length}canExecWithNodes(t){return 1===t.filter((t=>this.canExecWithNode(t))).length}canExecWithNode(t){return t instanceof $r}execWithNodes(t,e=this.minder.settings.get("toEditAfterNewlyAdded")){new ed(t,this.minder.paper,this.minder.history,this.minder.shortcutKeys,this.minder.textEditorController,e)}},shortcutKeys:"F4"}),qo.register({name:"RelLineAddBetween",class:class extends Do{canExec(){return this.getSelectedNodes().length>=2}canExecWithNodes(t){return t.filter((t=>this.canExecWithNode(t))).length>=1}canExecWithNode(t){return t instanceof $r}execWithNodes(t,e=this.minder.settings.get("toEditAfterNewlyAdded")){let i=t[0],n=t[1],o=[],r=ga(Fo.get(i),Fo.get(n)),s=N.toVector(r.fromDirection),a=N.toVector(r.toDirection),l={data:{...Ki.generateOwnBaseData(),fromId:i.id,toId:n.id,fromAngle:s.angleInDegree(),toAngle:a.angleInDegree(),relativeControl1:s.multiplyScalar(r.controlLength),relativeControl2:a.multiplyScalar(r.controlLength)}};o.push(l.data.id),this.minder.dataModifier.addTypedChild(l,this.minder.dataModifier.id,-1,"RelLine"),this.selectOnlyNodeByIdAfterLayout(o,e),e&&o.length>0&&this.willEditNodeById(o[0])}selectOnlyNodeByIdAfterLayout(t,e){fi((()=>{let i=t.map((t=>this.minder.paper.getNodeById(t))).filter((t=>t));i.length>0&&(this.minder.paper.selections.selectOnly(...i),e||this.minder.viewer.moveByPassiveSelectedNode(i[0],!0))}))}willEditNodeById(t){this.minder.settings.get("mobileMode")&&this.minder.textEditorController.preFocus(),fi((()=>{let e=this.minder.paper.getNodeById(t);e&&this.minder.textEditorController.startEditing(e,"user-end-default-all")}))}},shortcutKeys:"F4"}),qo.register({name:"RelLineRemove",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t){t=this.minder.cooperateController.filterOutLockedNodes(t,"delete");for(let e of t)this.minder.dataModifier.removeChild(e.id)}}}),qo.register({name:"RelLineWidth",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t,e){for(let i of t)i.style.modify("line-width",e)}queryValueWithNode(t){return t.style.get("line-width")}}}),qo.register({name:"RelLineColor",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t,e){for(let i of t)i.style.modify("line-color",e)}queryValueWithNode(t){return t.style.get("line-color")}}}),qo.register({name:"RelLineDashArray",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t,e){for(let i of t)i.style.modify("line-dasharray",e)}queryValueWithNode(t){return t.style.get("line-dasharray")}}}),qo.register({name:"RelLineLineType",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t,e){for(let i of t)i.style.modify("line-type",e)}queryValueWithNode(t){return t.style.get("line-type")}}}),qo.register({name:"RelLineMarkerStart",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t,e){for(let i of t)i.style.modify("marker-start",e)}queryValueWithNode(t){return t.style.get("marker-start")}}}),qo.register({name:"RelLineMarkerEnd",class:class extends Do{canExecWithNode(t){return t instanceof Br}execWithNodes(t,e){for(let i of t)i.style.modify("marker-end",e)}queryValueWithNode(t){return t.style.get("marker-end")}}});class id extends Po{constructor(){super(...arguments),this.acceptShortKeyWhenInputing=!0}canExec(){return this.minder.status.isInInputing()}}qo.register({name:"TextBold",class:class extends id{exec(){this.minder.textEditorController.execCommand("bold")}queryValue(){return this.minder.textEditorController.getSelectionStyle()["font-weight"]}},shortcutKeys:"Ctrl+B"}),qo.register({name:"TextItalic",class:class extends id{exec(){this.minder.textEditorController.execCommand("italic")}queryValue(){return this.minder.textEditorController.getSelectionStyle()["font-style"]}},shortcutKeys:"Ctrl+I"}),qo.register({name:"TextUnderline",class:class extends id{exec(){this.minder.textEditorController.execCommand("underline")}queryValue(){return!!this.minder.textEditorController.getSelectionStyle()["text-underline"]}},shortcutKeys:"Ctrl+U"}),qo.register({name:"TextStrikeThrough",class:class extends id{exec(){this.minder.textEditorController.execCommand("strikeThrough")}queryValue(){return!!this.minder.textEditorController.getSelectionStyle()["text-line-through"]}},shortcutKeys:"Ctrl+["}),qo.register({name:"TextColor",class:class extends id{exec(t){this.minder.textEditorController.execCommand("foreColor",t)}queryValue(){var t,e;return null!==(e=null!==(t=this.minder.textEditorController.getSelectionStyle().color)&&void 0!==t?t:this.minder.commands.queryValue("NodeTextColor"))&&void 0!==e?e:void 0}}}),qo.register({name:"TextBackgroundColor",class:class extends id{exec(t){this.minder.textEditorController.execCommand("backColor",t)}queryValue(){return this.minder.textEditorController.getSelectionStyle()["background-color"]}}}),qo.register({name:"TextFontFamily",class:class extends id{exec(t){this.minder.textEditorController.execCommand("fontName",t)}queryValue(){var t,e;return null!==(e=null!==(t=this.minder.textEditorController.getSelectionStyle()["font-family"])&&void 0!==t?t:this.minder.commands.queryValue("NodeTextFontFamily"))&&void 0!==e?e:void 0}}}),qo.register({name:"TextFontSize",class:class extends id{exec(t){this.minder.textEditorController.execCommand("fontSize",t+"px")}queryValue(){var t,e;return null!==(e=null!==(t=this.minder.textEditorController.getSelectionStyle()["font-size"])&&void 0!==t?t:this.minder.commands.queryValue("NodeTextFontSize"))&&void 0!==e?e:void 0}}}),qo.register({name:"TextClearStyle",class:class extends id{exec(){this.minder.textEditorController.clearStyle()}},shortcutKeys:"Ctrl+Alt+0"}),qo.register({name:"ColorTheme",class:class extends Po{exec(t,e="auto"){this.minder.theme.setColorThemeName(t),this.minder.style.modify("map","background-color",void 0),this.minder.style.modify("map","background-image",void 0),this.cleanUserDefinedStyles(e),this.minder.viewSteadyController.makeViewSteady()}cleanUserDefinedStyles(t){if("none"!==t)for(let e of this.minder.dataModifier.walkDescendants(this.minder.dataModifier.id))if(e.style)for(let i of Object.keys(e.style))"all"===t?ko.ColorThemeKeys.has(i)&&this.minder.dataModifier.modify(e.data.id,["style",i],void 0):"auto"===t&&ko.ColorThemeOverwriteKeys.has(i)&&this.minder.dataModifier.modify(e.data.id,["style",i],void 0)}queryValue(){return this.minder.theme.colorName}}}),qo.register({name:"StructTheme",class:class extends Po{exec(t,e="auto"){this.minder.theme.setStructThemeName(t),this.mayCleanMindLayoutSplitIndex(),this.cleanUserDefinedStyles(e),this.minder.viewSteadyController.makeViewSteady()}mayCleanMindLayoutSplitIndex(){var t;let e=this.minder.paper.mainRoot.ownData.mindLayoutSplitIndex;(0===e||e===(null===(t=this.minder.paper.mainRoot)||void 0===t?void 0:t.children.length))&&this.minder.paper.mainRoot.modifyOwnData("mindLayoutSplitIndex",void 0)}cleanUserDefinedStyles(t){if("none"!==t)for(let e of this.minder.dataModifier.walkDescendants(this.minder.dataManager.id))if(e.style)for(let i of Object.keys(e.style))"all"===t?ko.StructThemeKeys.has(i)&&this.minder.dataModifier.modify(e.data.id,["style",i],void 0):"auto"===t&&ko.StructThemeOverwriteKeys.has(i)&&this.minder.dataModifier.modify(e.data.id,["style",i],void 0)}queryValue(){return this.minder.theme.structName}}}),qo.register({name:"BackgroundColor",class:class extends Po{exec(t){this.minder.style.setBackgroundColor(t)}queryValue(){return this.minder.style.get("map","background-color")}}}),qo.register({name:"BackgroundImage",class:class extends Po{exec(t){this.minder.style.setBackgroundImage(t)}queryValue(){return this.minder.style.get("map","background-image")}}}),qo.register({name:"BackgroundResourceId",class:class extends Po{exec(t){this.minder.style.setBackgroundResourceId(t)}queryValue(){return this.minder.style.get("map","background-resource-id")}}}),qo.register({name:"AvoidOverlay",class:class extends Po{exec(t){this.minder.style.modify("layout","avoid-overlay",t)}queryValue(){return this.minder.style.get("layout","avoid-overlay")}}}),qo.register({name:"JustifySameDeepthWidth",class:class extends Po{exec(t){this.minder.style.modify("content","justify-same-deepth-width",t)}queryValue(){return this.minder.style.get("content","justify-same-deepth-width")}}}),qo.register({name:"MoveToCenter",class:class extends Do{constructor(){super(...arguments),this.canExecWhenDisabled=!0}canExecWithNode(t){return t instanceof Uo}execWithNodes(t,e=!1){this.minder.viewer.moveToMakeNodeInCenter(t[0],e)}}}),qo.register({name:"MoveToVisible",class:class extends Do{constructor(){super(...arguments),this.canExecWhenDisabled=!0}canExecWithNode(t){return t instanceof Uo}execWithNodes(t,e=!1){this.minder.viewer.mayMoveToMakeNodeCompletelyVisible(t[0],e)}}});class nd extends Po{constructor(){super(...arguments),this.canExecWhenDisabled=!0}}qo.register({name:"ViewMoveBy",class:class extends nd{exec(t,e){this.minder.viewer.willMoveBy(t,e)}}}),qo.register({name:"ViewToMainRootCenter",class:class extends nd{exec(t=!0){let e=this.minder.paper.mainRoot;this.minder.viewer.moveToMakeNodeInCenter(e,t)}}}),qo.register({name:"ViewToCenter",class:class extends nd{exec(t=!0){this.minder.viewer.moveToCenter(t)}}}),qo.register({name:"ViewToBirdEye",class:class extends nd{exec(){this.minder.viewer.toBirdEyeView()}},shortcutKeys:"Ctrl+Shift+F"}),qo.register({name:"ViewZoom",class:class extends nd{exec(t){this.minder.viewer.setZoom(t)}queryValue(){return this.minder.viewer.getZoom()}}}),qo.register({name:"ViewZoomIn",class:class extends nd{exec(){this.minder.viewer.zoomInWithOrigin()}},shortcutKeys:"Ctrl+="}),qo.register({name:"ViewZoomOut",class:class extends nd{exec(){this.minder.viewer.zoomOutWithOrigin()}},shortcutKeys:"Ctrl+-"}),qo.register({name:"ViewZoomReset",class:class extends nd{exec(){this.minder.viewer.setZoom(1)}},shortcutKeys:"Ctrl+0"}),qo.register({name:"ViewPageUp",class:class extends nd{exec(){this.minder.viewer.willMoveBy(new P(0,this.minder.paper.k.getComputedHeight()),!0)}},shortcutKeys:"PageUp"}),qo.register({name:"ViewPageDown",class:class extends nd{exec(){this.minder.viewer.willMoveBy(new P(0,-this.minder.paper.k.getComputedHeight()),!0)}},shortcutKeys:"PageDown"}),qo.register({name:"Undo",class:class extends Po{canExec(){return this.minder.status.isInInputing()||this.minder.history.canUndo()}exec(){this.minder.status.isInInputing()?this.minder.textEditorController.execCommand("undo"):this.minder.history.undo()}},shortcutKeys:"Ctrl+Z"}),qo.register({name:"Redo",class:class extends Po{canExec(){return this.minder.status.isInInputing()||this.minder.history.canRedo()}exec(){this.minder.status.isInInputing()?this.minder.textEditorController.execCommand("redo"):this.minder.history.redo()}},shortcutKeys:"Ctrl+Y"}),qo.register({name:"NodeTextEditingStart",class:class extends Do{canExecWithNode(t){return t instanceof Uo}execWithNodes(t){this.minder.textEditorController.startEditing(t[0],"user-end-default-all")}}}),qo.register({name:"NodeTextEditingCommit",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(t=!1){this.minder.textEditorController.commitEditing(t)}}}),qo.register({name:"NodeTextEditingCancel",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(){this.minder.textEditorController.cancelEditing()}}}),qo.register({name:"NodeTextEditingInsertParagraph",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(){this.minder.textEditorController.execCommand("insertParagraph")}}}),qo.register({name:"NodeTextEditingInsertHTML",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(t){this.minder.textEditorController.execCommand("insertHTML",t)}}}),qo.register({name:"NodeTextEditingInsertText",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(t){this.minder.textEditorController.execCommand("insertText",t)}}}),qo.register({name:"TextCreateLink",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(t){this.minder.textEditorController.execCommand("createLink",t)}}}),qo.register({name:"TextRemoveLink",class:class extends Po{canExec(){return this.minder.status.isInInputing()}exec(){this.minder.textEditorController.execCommand("unlink")}}}),qo.register({name:"TextSetKatex",class:class extends Po{canExec(){return this.minder.textEditorController.canRestoreEditing()}exec(t){this.minder.textEditorController.setKatex(t)}}});class od extends k{static get ColorThemes(){return zi.Themes}static get StructThemes(){return Vi.Themes}static get MultiColors(){return ji.multiColors}static get PriorityColors(){return ji.priorityColors}static get ShapeNames(){return Vo.getAllShapeNames()}static get LayoutNames(){return jo.getAllLayoutNames()}static get ConnectNames(){return Ho.getAllConnectNames()}static get SummaryConnectNames(){return Ho.getAllConfigableConnectNames()}static get RelLineLineTypes(){return["line","bezier","hv-line","polygon"]}static get RelLineMarkerNames(){return Object.keys(Sr)}static upgradeData(t){return Oi(t)}constructor(t={},e={},i={}){super(),this.minder=new xl(t,e,i),this.minder.broadcastTo(this)}get settings(){return this.minder.settings}get selections(){return this.minder.selections}get history(){return this.minder.history}get commands(){return this.minder.commands}get status(){return this.minder.status}get dataCacher(){return this.minder.dataCacher}get cooperate(){return this.minder.cooperateController}get presentation(){return this.minder.presentationController}get textStream(){return this.minder.textStreamController}get dataLocker(){return this.minder.dataModifier.dataLocker}get watermark(){return this.minder.watermark}toPaperOrigin(t){return this.minder.paper.toPaperOrigin(t)}toScreenOrigin(t){return this.minder.paper.toScreenOrigin(t)}appendTo(t){this.minder.paper.appendTo(t)}makeEmptyData(t={}){return Ki.generateEmptyData(t)}getId(){var t;return(null===(t=this.minder.dataManager.data)||void 0===t?void 0:t.id)||null}async import(t,e,i){this.minder.cooperateController.remove(),await this.minder.dataManager.import(t,e,i)}async untilImported(){return this.minder.dataManager.untilImported()}createNew(t,e,i){this.minder.dataManager.createNew(t,e,i)}export(t){return this.minder.dataManager.export(t)}exportNodeAsTreeData(t,e){return this.minder.dataManager.exportNodeAsTreeData(t,e)}exportAs(t,e){return this.minder.dataManager.exportAs(t,e)}exportAsFile(t,e,i){return this.minder.dataManager.exportAsFile(t,e,i)}getTotalNodeCount(){return this.minder.dataManager.getTotalNodeCount()}getTotalBranchNodeCount(){return this.minder.dataManager.getTotalBranchNodeCount()}getTotalImageCount(){return this.minder.dataManager.getTotalImageCount()}recordExecution(t){this.minder.history.recordExecution(t)}getAllowedShapeNames(){let t=this.minder.selections.contentable.getFirstSelected();return t?Vo.getAllowedShapeNames(t):[]}getAllowedLayoutNames(){let t=this.minder.selections.contentable.getFirstSelected();return t?jo.getAllowedLayoutNames(t):[]}getAllowedConnectNames(){let t=this.minder.selections.contentable.getFirstSelected();return t?Ho.getAllowedConnectNames(t):[]}getAllowedSummaryConnectNames(){let t=this.minder.selections.summary.getFirstSelected();return t?Ho.getAllowedConnectNames(t):[]}getAllCommandKeysMap(){return this.minder.shortcutKeys.getAllCommandKeysMap()}canTriggerShortcutKeys(t){return this.minder.keyReceiver.canTriggerShortcutKeys(t)}getContainer(){return this.minder.paper.container}syncWithContainerSize(){this.minder.paper.syncWithContainerSize()}getMainRootId(){return this.minder.paper.mainRoot.id}hasNodeById(t){return this.minder.paper.hasNodeById(t)}getNodeById(t){return this.minder.paper.getNodeById(t)||null}hasDataItemById(t){return t!==this.minder.dataManager.id&&this.minder.dataModifier.hasItem(t)}getDataItemById(t){return t===this.minder.dataManager.id?null:this.minder.dataModifier.hasItem(t)?this.minder.dataModifier.getItem(t):null}getSiblingsOfIds(t){return this.minder.dataModifier.getSiblingsOfIds(t)}getSameDeepthOfIds(t){return this.minder.dataModifier.getSameDeepthOfIds(t)}getDescentantOfIds(t){return this.minder.dataModifier.getDescentantOfIds(t)}getTextEditorElement(){var t;return(null===(t=this.minder.textEditorController)||void 0===t?void 0:t.getTextEditorElement())||null}getTextEditorSelectionStyle(){return this.minder.textEditorController.getSelectionStyle()}getBackgroundStyle(){return this.minder.style.getBackgroundStyle()}lockTextEditor(){var t;return null===(t=this.minder.textEditorController)||void 0===t?void 0:t.lock()}unlockTextEditor(){var t;return null===(t=this.minder.textEditorController)||void 0===t?void 0:t.unlock()}getTotalCommentCount(){let t=0;for(let e of this.minder.dataModifier.walkDescendants(this.minder.dataModifier.id))t+=e.data.commentCount||0;return t}setCommentCount(t,e){let i=this.minder.dataModifier.getItem(t);i&&(void 0===e?delete i.data.commentCount:i.data.commentCount=e),this.willUpdate()}setTotalCommentCountMap(t){for(let e of this.minder.dataModifier.walkDescendants(this.minder.dataModifier.id)){let i="RelLine"===this.minder.dataModifier.getType(e.data.id)?void 0:t[e.data.id];void 0===i?delete e.data.commentCount:e.data.commentCount=i}this.willUpdate()}toggleWatermarkStatus(t){this.minder.watermark.toggleStatus(t)}changeWatermarkConfig(t){this.minder.watermark.updateConfig(t)}*walkDataItems(){yield*this.minder.dataModifier.walkDescendants(this.minder.dataModifier.id)}*walkDataItemsInType(t){yield*this.minder.dataModifier.walkDescendantsInType(this.minder.dataModifier.id,t)}requestBirdEyePreview(t){return new Ol(this.minder,t)}willUpdate(){this.minder.willUpdate()}untilLayoutComplete(){return yi()}remove(){this.minder.remove()}}function rd(t){return{map:{"background-color":"#fbfbfb"},root:{color:"#fff","fill-color":sd(t,37,60),"stroke-color":"transparent","font-size":16,padding:[12,24],margin:[30,50],"connect-color":sd(t,37,60),"connect-width":2},main:{color:"#000","fill-color":sd(t,33,95),"stroke-color":sd(t,37,60),"stroke-width":2,"font-size":14,padding:[6,20],margin:[30,20],"connect-color":sd(t,37,60),"connect-width":2},sub:{color:"#000","fill-color":"transparent","stroke-color":"transparent","font-size":14,padding:[5,10],margin:[23,20],"connect-color":sd(t,37,60),"connect-width":2}}}function sd(t,e,i){return f.fromHSL(t,e,i).toRGB()}od.Customization=ji,od.ExternalResources=Hi,od.Permissions=$o,od.IconPreviewer=Sl,od.RelLineLineTypePreviewer=Pl,od.RelLineMarkerPreviewer=Ml,od.colorThemePreviewer=new class{async renderSVG(t,e={}){var i,n;let o={...Cl,...e},r=zi.get(t);if(!r)return null;let s=await gl.requestMinder(),a=this.makeRoot(t,o,s);s.style.patchTotal(o.style),a.willUpdate(),await yi();let l=kl.extractBranchNode(a,o.width,o.height,o.viewportPadding,{width:o.fixedViewportWidth||void 0}),h=null===(i=r.map)||void 0===i?void 0:i["background-image"],d=null===(n=r.map)||void 0===n?void 0:n["background-color"],c=d||"";if(h&&Hi.getBackgroundURL(h)){const t=m?"cover":"100% 100%";c=`url(${Hi.getBackgroundURL(h)}) left bottom / ${t} ${d}`.trim()}return l.setStyle("background",c),a.remove(),gl.releaseMinder(s),l}makeRoot(t,e,i){let n=zi.get(t);i.style.patchTotal(n);let o={data:{...Ki.generateOwnBaseData(),expanded:!0},children:[]},r={data:{...Ki.generateOwnBaseData(),expanded:!0},children:[]},s={data:{...Ki.generateOwnBaseData()}};for(let t=0;t<e.subNodeCount;t++)r.children.push(Ki.cloneDataItemDeeply(s));for(let t=0;t<e.mainNodeCount;t++)o.children.push(Ki.cloneDataItemDeeply(r));let a=i.paper.createNode("branch-root",o);return i.paper.append(a),a}},od.structThemePreviewer=new class{async renderSVG(t,e={}){let i={..._l,...e};if(!Vi.has(t))return null;let n=await gl.requestMinder(),o=this.makeRoot(t,i,n);n.style.patchTotal(i.style),o.willUpdate(),await yi();let r=kl.extractBranchNode(o,i.width,i.height,i.viewportPadding,{width:i.fixedViewportWidth||void 0});return o.remove(),gl.releaseMinder(n),r}makeRoot(t,e,i){let n=Vi.get(t);i.style.patchTotal(n);let o={data:{...Ki.generateOwnBaseData(),expanded:!0},children:[]},r={data:{...Ki.generateOwnBaseData(),expanded:!0},children:[]},s={data:{...Ki.generateOwnBaseData()}};for(let t=0;t<e.subNodeCount;t++)r.children.push(Ki.cloneDataItemDeeply(s));for(let t=0;t<e.mainNodeCount;t++)o.children.push(Ki.cloneDataItemDeeply(r));let a=i.paper.createNode("branch-root",o);return i.paper.append(a),a}},od.shapePreviewer=new class{constructor(){this.testNode=null}async renderSVG(t,e={}){let i={...bl,...e},{width:n,height:o}=i,r=await gl.requestMinder();await this.ensureTestNode(r),this.setNodeStyle(i);let s=new ei,a=-n/2,l=-o/2,h=n,d=o;s.setViewBox(a,l,h,d);let c=this.makeShape(t,i);return s.appendShape(c.k),gl.releaseMinder(r),s}async ensureTestNode(t){this.testNode||(this.testNode=await this.makeTestNode(t))}async makeTestNode(t){let e={data:Ki.generateOwnBaseData(),style:{}};return t.paper.createNode("branch-root",e)}setNodeStyle(t){this.testNode.data.style={shape:t.shape,radius:t.radius,"stroke-color":t["stroke-color"],"stroke-width":t["stroke-width"],"fill-color":t["fill-color"]}}makeShape(t,e){let{width:i,height:n,viewportPadding:o}=e,r=O(o),s=i-r.left-r.right,a=n-r.top-r.bottom,l=this.testNode;this.setNodeStyle(e);let h=Vo.create(t,l);return h.updateStyle(),h.updateSize(s,a),h}},od.connectLinePreviewer=new class{async renderSVG(t,e={}){let i={...Bl,...e},n=await gl.requestMinder();n.style.patchTotal({layout:{"layout-timeline-margin":0,"layout-fishbone-shifting":10,"partition-margin":0}});let o=this.makeRoot(t,i,n);o.willUpdate(),await yi();let r=kl.extractConnectionNode(o.connectionNode,i.width,i.height,i.viewportPadding);return o.remove(),gl.releaseMinder(n),r}makeRoot(t,e,i){let n=e.layout,o=Ho.getLimitedLayoutName(t),r=O(e.viewportPadding),s=e.width-r.left-r.right,a=e.height-r.top-r.bottom;o&&(n=o.find((t=>t.includes(n)))||o[0]);let l={layout:n,connect:t,"connect-width":e["connect-width"],"connect-color":e["connect-color"],"fill-color":"transparent","stroke-width":0,"font-size":0,padding:[0],margin:[a,s,a,0]},h={"connect-width":e["connect-width"],"connect-color":e["connect-color"],"fill-color":"transparent","stroke-width":0,"font-size":0,padding:[a/2,s/2],margin:[0]};"-fishbone-bended-line"===t&&(l.margin=[0,s/4],h.margin=[a/2,s/2],h.padding=[.01,.01]);let d={data:{...Ki.generateOwnBaseData()},style:h},c=[d,Ki.cloneDataItemDeeply(d)];"-fishbone-in-line"!==t&&"-timeline"!==t||(c=[d]);let u={data:{...Ki.generateOwnBaseData(),expanded:!0},style:l,children:c},p=i.paper.createNode("branch-root",u);return i.paper.append(p),Fo.getOf(p.connectionNode,Rl),p}},od.layoutPreviewer=new class{async renderSVG(t,e={}){let i={...Nl,...e},n=await gl.requestMinder();n.style.patchTotal(i.style);let o=this.makeRoot(t,i,n);o.willUpdate(),await yi();let r=kl.extractBranchNode(o,i.width,i.height,i.viewportPadding,{width:i.fixedViewportWidth||void 0});return o.remove(),gl.releaseMinder(n),r}makeRoot(t,e,i){let n={layout:t},o={data:{...Ki.generateOwnBaseData(),expanded:!0},children:[],style:n},r={data:{...Ki.generateOwnBaseData(),expanded:!0},children:[]},s={data:{...Ki.generateOwnBaseData()}};for(let t=0;t<e.subNodeCount;t++)r.children.push(Ki.cloneDataItemDeeply(s));for(let t=0;t<e.mainNodeCount;t++)o.children.push(Ki.cloneDataItemDeeply(r));let a=i.paper.createNode("branch-root",o);return a.style.getFixedValue=function(t,e){return"layout"===t&&e?e:Vr.prototype.getFixedValue.call(this,t,e)},i.paper.append(a),a}},od.utils=n,window.MinderExported=od,window.MinderLayouts=Fo,[{name:"business-1",data:{map:{"background-color":"#E7E4DC","background-image":"business6"},root:{color:"#333","fill-color":"#fff",shape:"arc-sides-rect",connect:"hayfork","connect-multicolor":"multiColor10",padding:[12,20],"font-size":24},main:{color:"#333","fill-color":"transparent","stroke-width":2,shape:"arc-sides-rect",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#333",connect:"bezier",shape:"underline","font-size":14},relLine:{"line-color":"#ff930f",color:"#333"},summary:{"summary-connect-color":"#FF930F","fill-color":"#FF930F",color:"#333",shape:"ellipse"}}},{name:"business-2",data:{map:{"background-color":"#FFFFFF","background-image":"business4"},root:{color:"#333","fill-color":"#fff",shape:"arc-sides-rect",connect:"bezier","connect-multicolor":"multiColor11",padding:[12,20],"font-size":24},main:{color:"#333","fill-color":"transparent",shape:"arc-sides-rect",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#333",connect:"bezier",shape:"underline","font-size":14},relLine:{"line-color":"#f1787d",color:"#333"},summary:{"summary-connect-color":"#f1787d","fill-color":"#f1787d",color:"#333",shape:"ellipse"}}},{name:"business-3",data:{map:{"background-color":"#E7E4DC","background-image":"grain2"},root:{color:"#222","fill-color":"#C0DF20",connect:"arc","connect-multicolor":"multiColor12","fill-multicolor":"multiColor12","connect-tapered":!0,"font-size":24},main:{color:"#fff",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#333",connect:"bezier","font-size":14},relLine:{"line-color":"#302624",color:"#fd6574","font-weight":"bold"},summary:{"summary-connect-color":"#302624","fill-color":"#302624",color:"#fd6574"}}},{name:"business-4",data:{map:{"background-color":"#E7E4DC","background-image":"business2"},root:{color:"#4E61FB","fill-color":"#fff","fill-multicolor":"multiColor13",shape:"arc-sides-rect",connect:"hayfork","connect-multicolor":"multiColor13",margin:[50,80],"font-size":24},main:{color:"#fff",shape:"arc-sides-rect",connect:"bezier","font-size":18},sub:{color:"#333",connect:"bezier","stroke-width":2,"fill-color":"#fff","font-size":14},relLine:{"line-color":"#f1a33a",color:"#333"},summary:{"summary-connect-color":"#f1a33a","fill-color":"#f1a33a",color:"#333",shape:"ellipse"}}},{name:"business-5",data:{map:{"background-color":"#303030","background-image":"business9"},root:{color:"#fff","fill-color":"#565554",shape:"arc-sides-rect",connect:"bezier",padding:[12,20],"connect-color":"#fff","font-size":24},main:{color:"#fff","fill-color":"#565554",connect:"bezier","font-size":18},sub:{color:"#fff","fill-color":"transparent",connect:"bezier",shape:"underline","font-size":14},relLine:{"line-color":"#f1a33a",color:"#fff"},summary:{"summary-connect-color":"#f1a33a","fill-color":"#f1a33a",color:"#333",shape:"ellipse"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"classic",data:{map:{"background-color":"#3A4144"},root:{color:"#430","fill-color":"#e9df98","font-size":24,padding:[15,25],margin:[30,40],shape:"arc-sides-rect"},main:{color:"#333","fill-color":"#a4c5c0","font-size":16,padding:[10,20],margin:[20,20],"stroke-color":"#a4c5c0","connect-width":3,"connect-color":"#fff"},sub:{color:"#fff","fill-color":"transparent","font-size":14,padding:[5,10],margin:[23,20],"connect-color":"#fff","connect-width":2},relLine:{color:"#fff"}}},{name:"classic-2",data:{map:{"background-color":"#f1ece6"},root:{color:"#fff","fill-color":"#61799f",connect:"arc","connect-out-adjust":"evenly","stroke-width":2,shape:"arc-sides-rect","font-size":24},main:{color:"#61799f","fill-color":"#fff",connect:"bezier","stroke-width":2,"connect-color":"#fff",shape:"circle","font-weight":"bold","font-size":18},sub:{color:"#61799f",connect:"bezier","stroke-width":2,"connect-color":"#fff","font-size":14},relLine:{"line-color":"#387be9",color:"#61799f"},summary:{"summary-connect-color":"#387be9","fill-color":"#387be9",color:"#fff"}}},{name:"classic-3",data:{map:{"background-color":"#effaef"},root:{color:"#fff","fill-color":"#1e3556",connect:"y","stroke-width":2,shape:"roof-hexagon","font-size":24},main:{color:"#fff","fill-color":"#a9dada","stroke-width":2,"connect-color":"#1e3556",connect:"y",shape:"roof-hexagon","font-weight":"bold","font-size":18},sub:{color:"#1e3556","stroke-width":2,connect:"y","connect-color":"#1e3556","font-size":14},relLine:{"line-color":"#387be9",color:"#1e3556"},summary:{"summary-connect-color":"#387be9","fill-color":"#387be9",color:"#fff"}}},{name:"classic-4",data:{map:{"background-color":"#EFECE2","background-image":"grain1"},root:{color:"#fff","fill-color":"#529977","connect-out-adjust":"evenly","font-size":24},main:{color:"#282828","fill-color":"#d8d8d8","font-weight":"bold",connect:"fork-rounded","connect-color":"#282828","font-size":18},sub:{color:"#282828","connect-color":"#282828","font-size":14},relLine:{"line-color":"#529977",color:"#282828"},summary:{"summary-connect-color":"#282828","fill-color":"#529977",color:"#fff"}}},{name:"classic-5",data:{map:{"background-color":"#FFFFFF","background-image":"study11"},root:{color:"#fff","fill-color":"#415a9e","font-weight":"bold",shape:"arc-sides-rect","font-size":24},main:{color:"#415a9e","fill-color":"#fff","stroke-width":2,"connect-color":"#415a9e",shape:"arc-sides-rect","font-size":18},sub:{color:"#444442","connect-color":"#415a9e","font-size":14},relLine:{"line-color":"#415a9e",color:"#444442"},summary:{"summary-connect-color":"#415a9e","fill-color":"#415a9e",color:"#fff",shape:"arc-sides-rect"}}},{name:"classic-6",data:{map:{"background-color":"#FFFFFF","background-image":"business7"},root:{color:"#fff","fill-color":"#42589f","connect-out-adjust":"evenly","font-size":24},main:{color:"#42589f","fill-color":"#fff","stroke-width":2,"connect-color":"#42589f",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#42589f","connect-color":"#42589f","font-size":14},relLine:{"line-color":"#a6d4e8",color:"#42589f"},summary:{"summary-connect-color":"#a6d4e8","fill-color":"#a6d4e8",color:"#fff"}}},{name:"classic-7",data:{map:{"background-color":"#FFFFFF","background-image":"art6"},root:{color:"#fff","fill-color":"#AAA797",shape:"arc-sides-rect","connect-out-adjust":"evenly","font-size":24},main:{color:"#444442","fill-color":"#FEF5D4","connect-color":"#AAA797",shape:"arc-sides-rect","font-size":18},sub:{color:"#444442","connect-color":"#AAA797","font-size":14},relLine:{"line-color":"#8BBAD8",color:"#444442"},summary:{"summary-connect-color":"#AAA797","fill-color":"#8BBAD8",color:"#fff"}}},{name:"classic-8",data:{map:{"background-color":"#FEFEFE","background-image":"study3"},root:{color:"#fff","fill-color":"#f4a067",shape:"arc-sides-rect","font-size":24},main:{color:"#4d4d4d","fill-color":"#fff","stroke-width":2,"stroke-color":"#f4a067","connect-color":"#f4a067","font-size":18},sub:{color:"#4d4d4d","connect-color":"#f4a067","font-size":14},relLine:{"line-color":"#c4caf6",color:"#f4a067"},summary:{"summary-connect-color":"#c4caf6","fill-color":"#c4caf6",color:"#fff"}}},{name:"classic-9",data:{map:{"background-color":"#EAEFFC","background-image":"business2"},root:{color:"#fff","fill-color":"#4660e0",shape:"arc-sides-rect",connect:"bezier",margin:[50,80],"font-size":24},main:{color:"#1b1b24","connect-color":"#1b1b24","font-weight":"bold",connect:"bezier","fill-color":"#e8eefc","font-size":18},sub:{color:"#1b1b24",connect:"bezier","connect-color":"#1b1b24",shape:"underline","font-size":14},relLine:{"line-color":"#9eade9",color:"#1b1b24"},summary:{"summary-connect-color":"#387be9","fill-color":"#9eade9",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"colorful-1",data:{map:{"background-color":"#F8F8F8","background-image":"study5"},root:{color:"#333","fill-color":"#FFCB48",shape:"arc-roof-rect",connect:"hayfork","connect-multicolor":"multiColor14",padding:[12,20],margin:[50,80],"font-size":24},main:{color:"#333","fill-color":"#fff",shape:"arc-roof-rect",connect:"fork","connect-color":"#fff","stroke-color":"#fff","stroke-width":2,padding:[10,15],"font-size":18},sub:{color:"#333",connect:"fork","connect-color":"#fff","font-size":14},relLine:{"line-color":"#FF930F",color:"#333"},summary:{"summary-connect-color":"#FF930F","fill-color":"#FF930F",color:"#fff",shape:"ellipse"}}},{name:"colorful-2",data:{map:{"background-color":"#F6F5F3","background-image":"study6"},root:{color:"#333","fill-color":"#fff","fill-multicolor":"multiColor13","stroke-width":2,shape:"arc-roof-rect",connect:"y","connect-multicolor":"multiColor13","font-size":24},main:{color:"#fff","stroke-width":2,"connect-color":"#1e3556",connect:"fork-rounded","font-weight":"bold","font-size":18},sub:{color:"#1e3556","connect-color":"#1e3556",connect:"fork-rounded","font-size":14},relLine:{"line-color":"#f1a33a",color:"#333"},summary:{"summary-connect-color":"#f1a33a","fill-color":"#f1a33a",color:"#333"}}},{name:"colorful-3",data:{map:{"background-color":"#F8F7F4","background-image":"art1"},root:{color:"#333",connect:"arc","connect-tapered":!0,"connect-multicolor":"multiColor1","stroke-color":"#858fa5","stroke-width":2,"fill-color":"#fff","font-size":24},main:{color:"#333",connect:"fork-rounded","stroke-width":2,"font-size":18},sub:{color:"#333",connect:"fork-rounded","font-size":14},relLine:{"line-color":"#489b7b",color:"#333"},summary:{"summary-connect-color":"#489b7b","fill-color":"#489b7b",color:"#fff"}}},{name:"colorful-4",data:{map:{"background-color":"#FEFBF0","background-image":"grain3"},root:{color:"#fff","connect-tapered":!0,connect:"arc","fill-color":"#80cc6f",shape:"arc-sides-rect",margin:[50,80],"font-size":24},main:{color:"#333","fill-color":"#bbebaf",connect:"fork-rounded","connect-color":"#80cc6f",shape:"arc-sides-rect","font-size":18},sub:{color:"#333","connect-color":"#80cc6f","font-size":14},relLine:{"line-color":"#f38562",color:"#333"},summary:{"summary-connect-color":"#f38562","fill-color":"#f38562",color:"#fff"}}},{name:"colorful-5",data:{map:{"background-color":"#D3F1E3","background-image":"gradient4"},root:{color:"#333",connect:"arc","stroke-color":"#76a880","stroke-width":2,"fill-color":"#fff","connect-multicolor":"multiColor8","font-size":24},main:{color:"#333","connect-color":"#80cc6f","stroke-color":"#398f8d","stroke-width":2,connect:"bezier","font-size":18},sub:{color:"#333","connect-color":"#80cc6f",connect:"bezier","font-size":14},relLine:{"line-color":"#ffc610",color:"#333"},summary:{"summary-connect-color":"#ffc610","fill-color":"#ffc610",color:"#333"}}},{name:"colorful-6",data:{map:{"background-color":"#F3F2F8","background-image":"gradient2"},root:{color:"#fff","fill-color":"#0874b0","fill-multicolor":"multiColor9","connect-out-adjust":"evenly","font-size":24},main:{color:"#fff","connect-color":"#1e3556",connect:"fork-rounded","font-size":18},sub:{connect:"fork-rounded","font-size":14},relLine:{"line-color":"#0874b0",color:"#333"},summary:{"summary-connect-color":"#0874b0","fill-color":"#0874b0",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"default",data:{map:{"background-color":"#FFFFFF"},root:{"fill-color":"#F58220","font-size":26,"connect-color":"#333333",connect:"arc",shape:"rect"},main:{color:"#333333","fill-color":"#E5E5E5","font-size":16,"connect-color":"#333333","connect-width":3,connect:"fork-rounded",shape:"rect"},sub:{color:"#333333","fill-color":"transparent","font-size":14,"connect-color":"#333333","connect-width":2,connect:"arc",shape:"rect"},summary:{"summary-connect-color":"#0874B0","fill-color":"#0874B0",color:"#FFFFFF"}}},{name:"word-1",data:{root:{"fill-color":"#fff",color:"#02215e","connect-color":"#41599E","font-size":24},main:{"connect-color":"#41599E","font-size":18},sub:{"connect-color":"#41599E","font-size":14}}},{name:"ice-1",data:{root:{"fill-color":"#4285f6",padding:[15,30],"connect-color":"#dbdbdb","font-size":24},main:{padding:[5,10],"connect-color":"#dbdbdb","font-size":18},sub:{"connect-color":"#dbdbdb","font-size":14}}},{name:"ice-2",data:{map:{"background-color":"#f2fae9"},root:{"fill-color":"#80d335",padding:[15,30],shape:"arc-sides-rect","connect-color":"#b4e4a4","font-size":24},main:{padding:[5,10],shape:"arc-sides-rect","connect-color":"#b4e4a4","font-size":18},sub:{shape:"arc-sides-rect","connect-color":"#b4e4a4","font-size":14}}},{name:"ice-3",data:{root:{"fill-color":"#f3a535",padding:[15,30],"connect-color":"#dbdbdb","font-size":24},main:{color:"#fff","fill-color":"#f3a535",padding:[5,10],"connect-color":"#dbdbdb","font-size":18},sub:{"connect-color":"#dbdbdb","font-size":14}}},{name:"ice-4",data:{root:{"fill-color":"#e45f37",padding:[15,30],"connect-color":"#dfcfb6","font-size":24},main:{color:"#fff","fill-color":"#e45f37",padding:[5,10],"connect-color":"#dfcfb6","font-size":18},sub:{color:"#e45f37","stroke-color":"#e45f37","stroke-width":1,shape:"arc-sides-rect","connect-color":"#dfcfb6","font-size":14}}},{name:"ice-5",data:{map:{"background-color":"#f8f5fb"},root:{"fill-color":"#a54cf1",padding:[15,30],shape:"arc-sides-rect","connect-color":"#c3abd7","font-size":24},main:{color:"#fff","fill-color":"#a54cf1","stroke-color":"#a54cf1",padding:[5,10],shape:"arc-sides-rect","connect-color":"#c3abd7","font-size":18},sub:{shape:"arc-sides-rect","connect-color":"#c3abd7","font-size":14}}},{name:"ice-6",data:{map:{"background-color":"#f7f6f5"},root:{"fill-color":"#8a562e",padding:[15,30],shape:"arc-sides-rect","connect-color":"#beb3ab","font-size":24},main:{color:"#fff","fill-color":"#8a562e","stroke-color":"#8a562e",padding:[5,10],shape:"arc-sides-rect","connect-color":"#beb3ab","font-size":18},sub:{shape:"arc-sides-rect","connect-color":"#beb3ab","font-size":14}}},{name:"dark",data:{map:{"background-color":"#1a232b"},root:{"fill-color":"#1a232b","stroke-color":"#fff","connect-color":"#fff",color:"#fff","stroke-width":2,connect:"arc","connect-out-adjust":"evenly","font-size":24},main:{"fill-color":"#1a232b","stroke-color":"#fff",padding:[15,30],"connect-color":"#fff",color:"#fff","stroke-width":2,connect:"bezier","font-size":18},sub:{color:"#fff","connect-color":"#fff",margin:[23,16],"font-size":14},relLine:{"line-color":"#ffd835",color:"#fff"},summary:{"summary-connect-color":"#ffd835","fill-color":"#ffd835",color:"#1a232b"}}},{name:"sky",data:{map:{"background-color":"#e6eef2"},root:{"fill-color":"#1cabfc","font-size":24},main:{"stroke-color":"#ccc","font-size":18}}},{name:"sky-1",data:{map:{"background-color":"#fbe4ec"},root:{"fill-color":"#3352fa","connect-color":"#fff","font-size":24},main:{"connect-color":"#fff","font-size":18},sub:{"connect-color":"#fff","font-size":14}}},{name:"sky-2",data:{map:{"background-color":"#E9F2F9","background-image":"sky2"},root:{"fill-color":"#0985b","font-weight":"bold",shape:"arc-sides-rect","connect-color":"#868a84",color:"#fff","connect-out-adjust":"evenly","font-size":24},main:{"fill-color":"#e5e5e5",shape:"arc-sides-rect",color:"#333333","stroke-width":1,"stroke-color":"#fff","connect-color":"#868a84",connect:"bezier","font-size":18},sub:{color:"#02215e","connect-color":"#868a84",margin:[23,16],"font-size":14},relLine:{"line-color":"#f3b330",color:"#333333"},summary:{"summary-connect-color":"#f3b330","fill-color":"#f3b330",color:"#333333"}}},{name:"sky-3",data:{map:{"background-color":"#E9F2F9","background-image":"sky3"},root:{"fill-color":"#fff","font-weight":"bold",shape:"arc-sides-rect","connect-color":"#6bbde8",color:"#333","connect-out-adjust":"evenly","font-size":24},main:{"fill-color":"#fff",shape:"arc-sides-rect",color:"#02215e","stroke-width":1,"stroke-color":"#fff","connect-color":"#6bbde8",connect:"bezier","font-size":18},sub:{color:"#02215e","connect-color":"#6bbde8",margin:[23,16],"font-size":14},relLine:{"line-color":"#ffb42e"},summary:{"summary-connect-color":"#ffb42e","fill-color":"#ffb42e",color:"#fff"}}},{name:"sky-4",data:{root:{"fill-color":"#35455b","font-size":26,"connect-color":"#35455b","connect-width":4},main:{color:"#333333","fill-color":"#84a1c9","font-size":20,shape:"arc-sides-rect","connect-color":"#35455b","connect-width":4},sub:{color:"#000","fill-color":"#e2e9f1","font-size":14,shape:"arc-sides-rect","connect-color":"#35455b","connect-width":4}}},{name:"sky-5",data:{map:{"background-color":"#ecf5e7"},root:{color:"#ff9f00","fill-color":"#fff","font-size":28,"font-weight":"bold","connect-color":"#fff","connect-width":4},main:{color:"#ff9f00","stroke-color":"#ccc","stroke-width":1,"font-size":20,"connect-width":4,"connect-color":"#fff"},sub:{"connect-color":"#fff","connect-width":4,"font-size":14}}},{name:"sky-6",data:{map:{"background-color":"#f7fdd5"},root:{color:"#1a8d6b","fill-color":"#dff774","font-size":26,"font-weight":"bold","connect-color":"#1a8d6b","connect-width":2},main:{"connect-color":"#1a8d6b","connect-width":2,"font-size":18},sub:{"connect-color":"#1a8d6b","connect-width":2,"font-size":14}}},{name:"sky-7",data:{map:{"background-color":"#fff8e1"},root:{"fill-color":"#ff6f01","connect-color":"#0d5302","font-size":24},main:{"fill-color":"#ffe082","stroke-color":"#ccc","stroke-width":1,"connect-color":"#0d5302","font-size":18},sub:{"connect-color":"#0d5302","font-size":14}}},{name:"sky-8",data:{map:{"background-color":"#fde2e2"},root:{"fill-color":"#febeaf","connect-color":"#60752e","font-size":24},main:{"stroke-color":"#60752e","stroke-width":1,"connect-color":"#60752e","font-size":18},sub:{"connect-color":"#60752e","font-size":14}}},{name:"sky-9",data:{map:{"background-color":"#daebd0"},root:{"fill-color":"#1a8d6b","font-size":26,"font-weight":"bold","connect-color":"#1a8d6b"},main:{"connect-color":"#1a8d6b","font-size":18},sub:{"connect-color":"#1a8d6b","font-size":14}}},{name:"sky-10",data:{map:{"background-color":"#e4daee","background-image":"sky10"},root:{"fill-color":"#4e317d","font-size":26,"font-weight":"bold","connect-color":"#4e317d","connect-out-adjust":"evenly"},main:{color:"#fff","fill-color":"#9888d8","font-size":18,"connect-color":"#4e317d",connect:"bezier"},sub:{color:"#4e317d","connect-color":"#4e317d","font-size":14,margin:[23,16]},relLine:{color:"#4e317d","line-color":"#ff8366"},summary:{"summary-connect-color":"#ff8366","fill-color":"#ff8366",color:"#9888d8"}}},{name:"sky-11",data:{map:{"background-color":"#ffe4ec"},root:{"fill-color":"#ff90aa","font-weight":"bold","connect-color":"#ff90aa","font-size":24},main:{color:"#4a148c","fill-color":"#d5dce7","font-weight":"bold","connect-color":"#ff90aa","font-size":18},sub:{"connect-color":"#ff90aa","font-size":14}}},{name:"sky-12",data:{map:{"background-color":"#c7e5e6"},root:{color:"#333","fill-color":"#fff8e1","connect-color":"#fff","font-size":24},main:{"connect-color":"#fff","font-size":18},sub:{"connect-color":"#fff","font-size":14}}},{name:"sky-13",data:{map:{"background-color":"#edddeb"},root:{color:"#333","fill-color":"#badbee","connect-color":"#dfcfb6","font-size":24},main:{color:"#4a148c","fill-color":"#badbee","connect-color":"#dfcfb6","font-size":18},sub:{"connect-color":"#dfcfb6","font-size":14}}},{name:"sky-14",data:{map:{"background-color":"#c6d4e2"},root:{"fill-color":"#7f84c3","connect-color":"#dbdbdb","font-size":24},main:{color:"#fff","fill-color":"#7f84c3","connect-color":"#dbdbdb","font-size":18},sub:{"connect-color":"#dbdbdb","font-size":14}}},{name:"sky-15",data:{map:{"background-color":"#acc7c9"},root:{color:"#333","fill-color":"#d5d9dd","connect-color":"#fff","font-size":24},main:{"fill-color":"#d5d9dd","connect-color":"#fff","font-size":18},sub:{"connect-color":"#fff","font-size":14}}},{name:"sky-16",data:{map:{"background-color":"#509CAA"},root:{color:"#04225C","fill-color":"#fff","font-weight":"bold","connect-color":"#fff","connect-width":3,"font-size":24},main:{color:"#04225C","fill-color":"#FBE3BC","connect-color":"#fff","connect-width":3,"font-size":18},sub:{color:"#04225C","connect-color":"#fff","connect-width":3,"font-size":14}}},{name:"sky-17",data:{map:{"background-color":"#F5FAFE"},root:{"fill-color":"#5A7397","font-size":24},main:{"fill-color":"#96D3E4","font-size":18},sub:{"connect-color":"#89929B","connect-width":3,"font-size":14}}},{name:"sky-18",data:{map:{"background-color":"#e6eef2","background-image":"sky18"},root:{color:"#fff","fill-color":"#42589f","font-weight":"bold",shape:"arc-sides-rect","connect-color":"#42589f","connect-out-adjust":"evenly","font-size":24},main:{color:"#42589f","font-weight":"bold","stroke-width":2,"stroke-color":"#42589f","connect-color":"#42589f",connect:"bezier","font-size":18},sub:{color:"#42589f","connect-color":"#42589f",margin:[23,16],"font-size":14},relLine:{color:"#42589f","line-color":"#f68a4c"},summary:{"summary-connect-color":"#f68a4c","fill-color":"#f68a4c",color:"#42589f"}}},{name:"sky-19",data:{root:{"fill-color":"#41599E",shape:"arc-sides-rect","connect-color":"#41599E","font-size":24},main:{"fill-color":"#fff",color:"#02215e","stroke-color":"#41599E","stroke-width":1,"connect-color":"#41599E","font-size":18},sub:{color:"#02215e","connect-color":"#41599E","font-size":14}}},{name:"simple-1",data:{root:{"fill-color":"#49B938","connect-color":"#8793A4","font-size":24},main:{color:"#fff","fill-color":"#8793A4",shape:"arc-sides-rect","connect-color":"#8793A4","font-size":18},sub:{"connect-color":"#8793A4","font-size":14}}},{name:"simple-2",data:{map:{"background-color":"#F4F9FA"},root:{"fill-color":"#41C0C1","connect-color":"#CEE7EB","font-size":24},main:{color:"#41C0C1","fill-color":"transparent","stroke-color":"#999999","stroke-width":2,"stroke-dasharray":[3],"connect-color":"#CEE7EB","font-size":18},sub:{"connect-color":"#CEE7EB","font-size":14}}},{name:"simple-3",data:{map:{"background-color":"#F1ECE6"},root:{"fill-color":"#61789F","font-weight":"bold","connect-color":"#fff","connect-width":4,"font-size":24},main:{color:"#61789F","fill-color":"#fff","stroke-width":1,"stroke-color":"#CCCCCC",shape:"arc-sides-rect","connect-color":"#fff","connect-width":4,"font-size":18},sub:{color:"#61789F","connect-color":"#fff","connect-width":4,"font-size":14}}},{name:"simple-4",data:{map:{"background-color":"#545753"},root:{"fill-color":"#6AA47D","font-weight":"bold","connect-out-adjust":"evenly","font-size":24},main:{color:"#fff","fill-color":"transparent","stroke-color":"#A4A8A3","stroke-width":2,"connect-color":"#A4A8A3",connect:"bezier","font-size":18},sub:{color:"#fff","connect-color":"#A4A8A3",margin:[23,16],"font-size":14},relLine:{color:"#fff","line-color":"#f4dc76"},summary:{"summary-connect-color":"#f4dc76","fill-color":"#f4dc76",color:"#545753"}}},{name:"fresh-1",data:{map:{"background-color":"#FAF4F6","background-image":"fresh1"},root:{"fill-color":"#F3AEAC","connect-out-adjust":"evenly","font-size":24},main:{"fill-color":"#F3CBC7","connect-color":"#F3AEAC","connect-width":2,connect:"bezier",color:"#42589f","font-size":18},sub:{shape:"rect","connect-color":"#F3AEAC","connect-width":2,color:"#42589f",margin:[23,16],"font-size":14},relLine:{color:"#F3CBC7","line-color":"#42589f"},summary:{"summary-connect-color":"#42589f","fill-color":"#42589f",color:"#F3CBC7"}}},{name:"fresh-2",data:{map:{"background-color":"#F1FAEE"},root:{"fill-color":"#1E3556","font-family":",_GB2312,SimKai,STKaiti","font-size":26},main:{color:"#fff","fill-color":"#A9DADC","font-family":",_GB2312,SimKai,STKaiti","font-size":20,"font-weight":"bold","connect-color":"#1E3556","connect-width":2},sub:{"font-family":",_GB2312,SimKai,STKaiti","font-size":20,"connect-color":"#1E3556","connect-width":2}}},{name:"default-1",data:{map:{"background-color":"#FFF1E6"},root:{"fill-color":"#ffbb91","font-size":26,"connect-color":"#ff8e6e","connect-width":2,shape:"arc-sides-rect"},main:{"stroke-color":"#ffbb91","stroke-width":2,"font-size":16,radius:10,"font-weight":"bold","connect-color":"#ff8e6e"},sub:{"connect-color":"#ff8e6e","font-size":14}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),ji.registerColorTheme("fish",{map:{"background-color":"#3A4144","background-image":"business9"},root:{color:"#430","fill-color":"#e9df98","stroke-color":"#e9df98","font-size":24,padding:[35,35],margin:[30,30],shape:"arc-sides-rect","connect-color":"#fff","connect-width":3},main:{color:"#333","fill-color":"#a4c5c0","stroke-color":"#a4c5c0","font-size":16,padding:[6,20],margin:[30,20],"connect-color":"#fff","connect-width":3},sub:{color:"#000","fill-color":"#fff","stroke-color":"#fff","font-size":14,padding:[5,10],margin:[23,10],"connect-color":"#fff","connect-width":3}});const ad={red:0,soil:25,green:122,blue:212,purple:246,pink:334};for(let[pd,md]of Object.entries(ad))ji.registerColorTheme("fresh-"+pd,rd(md));ji.registerColorTheme("snow",{map:{"background-color":"#3A4144"},root:{color:"#430","fill-color":"#e9df98","stroke-color":"#e9df98","font-size":24,padding:[15,25],margin:[30,30],"connect-color":"#fff","connect-width":2},main:{color:"#333","fill-color":"#a4c5c0","stroke-color":"#a4c5c0","font-size":16,padding:[6,20],margin:[30,40],"connect-color":"#fff","connect-width":3},sub:{color:"#000","fill-color":"#fff","stroke-color":"#fff","font-size":14,padding:[5,10],margin:[23,20],"connect-color":"#fff","connect-width":2}}),[{name:"spy-1",data:{map:{"background-color":"#2E2933"},root:{color:"#fff","fill-color":"#241B37","stroke-color":"#fff","stroke-width":2,"connect-tapered":!0,connect:"arc",margin:[50,80],"font-size":24},main:{color:"#fff","fill-color":"#241B37","stroke-color":"#C07093","stroke-width":2,connect:"fork-rounded","connect-color":"#C07093","font-size":18},sub:{color:"#fff",connect:"fork-rounded","connect-color":"#C07093",margin:[23,16],"font-size":14},relLine:{"line-color":"#EB5F58",color:"#fff"},summary:{"summary-connect-color":"#4BA5ED","fill-color":"#4BA5ED"}}},{name:"spy-2",data:{map:{"background-color":"#2E2933"},root:{color:"#333","fill-color":"#D8F693",shape:"arc-sides-rect",connect:"bezier",margin:[50,80],"font-size":24},main:{color:"#fff","fill-color":"transparent",connect:"bezier","connect-color":"#64C7B8","font-size":18},sub:{color:"#fff",connect:"bezier","connect-color":"#64C7B8",margin:[23,16],shape:"underline","font-size":14},relLine:{"line-color":"#fff",color:"#fff"},summary:{"summary-connect-color":"#fff","fill-color":"#fff",color:"#333"}}},{name:"spy-3",data:{map:{"background-image":"study3"},root:{color:"#fff","fill-color":"#F4A067",shape:"arc-sides-rect","connect-tapered":!0,connect:"arc","font-size":24},main:{color:"#333","fill-color":"#fff","stroke-color":"#F4A067","stroke-width":2,connect:"bezier","connect-color":"#F4A067","font-size":18},sub:{color:"#333",connect:"bezier","connect-color":"#F4A067",margin:[23,16],"font-size":14},relLine:{"line-color":"#5F76FF",color:"#333"},summary:{"summary-connect-color":"#5F76FF","fill-color":"#5F76FF"}}},{name:"spy-4",data:{root:{color:"#333","fill-color":"#f5c244","connect-tapered":!0,connect:"arc",margin:[50,80],"font-size":24},main:{color:"#fff","fill-color":"#5DBADC",connect:"fork-rounded","connect-color":"#4D97D2","font-size":18},sub:{color:"#333",connect:"fork-rounded","connect-color":"#5DBADC",margin:[23,16],"font-size":14},relLine:{"line-color":"#5DBADC",color:"#333"},summary:{"summary-connect-color":"#5DBADC","fill-color":"#4351AE"}}},{name:"spy-5",data:{map:{"background-color":"#61B3C6"},root:{color:"#333","fill-color":"#FFFEFE",shape:"roof-hexagon",connect:"y","font-size":24},main:{color:"#333","fill-color":"#FAE6C2",shape:"roof-hexagon",connect:"y","connect-color":"#fff","font-size":18},sub:{color:"#fff",connect:"y","connect-color":"#fff",margin:[23,20],"font-size":14},relLine:{"line-color":"#fff",color:"#333"},summary:{"summary-connect-color":"#fff","fill-color":"#fff",color:"#333"}}},{name:"spy-6",data:{map:{"background-color":"#F4D9DF"},root:{color:"#fff","fill-color":"#4C8ADA",connect:"bracket",margin:[30,20],"font-size":24},main:{color:"#333","fill-color":"#fff",connect:"bracket","connect-color":"#fff",margin:[30,20],"font-size":18},sub:{color:"#333",connect:"bracket","connect-color":"#fff","stroke-color":"#fff","stroke-width":2,margin:[23,16],"font-size":14},relLine:{"line-color":"#4C8ADA",color:"#333"},summary:{"summary-connect-color":"#4C8ADA","fill-color":"#4C8ADA",color:"#fff"}}},{name:"spy-7",data:{map:{"background-color":"#E7E4DC","background-image":"grain2"},root:{color:"#333","fill-color":"#FFCB48",shape:"arc-roof-rect",connect:"hayfork","connect-multicolor":"multiColor1",padding:[12,20],"font-size":24},main:{color:"#333","fill-color":"#fff",shape:"arc-roof-rect",connect:"fork","connect-color":"#fff","stroke-color":"#fff","stroke-width":2,padding:[10,15],"font-size":18},sub:{color:"#333",connect:"fork","connect-color":"#fff",margin:[23,20],"font-size":14},relLine:{"line-color":"#FF930F",color:"#333"},summary:{"summary-connect-color":"#FF930F","fill-color":"#FF930F",color:"#fff",shape:"ellipse"}}},{name:"spy-8",data:{map:{"background-color":"#FFF2EB"},root:{color:"#fff","fill-color":"#ED7786",shape:"arc-sides-rect","connect-tapered":!0,connect:"arc","font-size":24},main:{color:"#fff","fill-color":"#ED7786",connect:"bezier","connect-color":"#7F56B0","font-size":18},sub:{color:"#333",connect:"bezier","connect-color":"#7F56B0",margin:[23,16],"font-size":14},relLine:{"line-color":"#7F56B0",color:"#333"},summary:{"summary-connect-color":"#7F56B0","fill-color":"#7F56B0"}}},{name:"spy-9",data:{map:{"background-color":"#F8F8F8","background-image":"study5"},root:{color:"#333","fill-color":"#F4F4F4",connect:"arc","connect-multicolor":"multiColor8","stroke-color":"#CE79E0","stroke-width":2,"font-size":24},main:{color:"#333","fill-color":"#F4F4F4",connect:"bezier","stroke-width":2,"font-size":18},sub:{color:"#333",connect:"bezier","stroke-width":2,margin:[23,16],"font-size":14},relLine:{"line-color":"#8D98FF",color:"#333"},summary:{"summary-connect-color":"#8D98FF","fill-color":"#8D98FF"}}},{name:"spy-10",data:{map:{"background-color":"#E9EFFD","background-image":"business2"},root:{color:"#fff","fill-color":"#46589A",connect:"bracket","font-size":24},main:{color:"#333","fill-color":"transparent",connect:"bracket","connect-color":"#46589A","font-size":18},sub:{color:"#333",connect:"bracket","connect-color":"#46589A",margin:[23,16],"font-size":14},relLine:{"line-color":"#F1A33A",color:"#333"},summary:{"summary-connect-color":"#F1A33A","fill-color":"#F1A33A"}}},{name:"fresh-2",data:{map:{"background-color":"#F1FAEE","background-image":"paper2"},root:{"fill-color":"#1E3556","font-family":",_GB2312,SimKai,STKaiti","font-size":26,"connect-tapered":!0},main:{color:"#fff","fill-color":"#A9DADC","font-family":",_GB2312,SimKai,STKaiti","font-size":20,"font-weight":"bold","connect-color":"#1E3556","connect-width":2,connect:"bezier"},sub:{"font-family":",_GB2312,SimKai,STKaiti","font-size":20,"connect-color":"#1E3556","connect-width":2,margin:[23,16]},relLine:{"line-color":"#e47478",color:"#333"},summary:{"summary-connect-color":"#e47478","fill-color":"#e47478"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"business-brown",data:{map:{"background-color":"#E7E4DC","background-image":"grain2"},root:{color:"#222","fill-color":"#C0DF20","connect-multicolor":"multiColor12","fill-multicolor":"multiColor12"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#302624",color:"#fd6574"},summary:{"summary-connect-color":"#302624","fill-color":"#302624",color:"#fd6574"}}},{name:"business-white",data:{map:{"background-color":"#303030","background-image":"business9"},root:{color:"#fff","fill-color":"#565554",shape:"arc-sides-rect",connect:"bezier",padding:[12,20],"connect-color":"#fff","font-size":24},main:{color:"#fff","fill-color":"#565554",connect:"bezier","font-size":18},sub:{color:"#fff","fill-color":"transparent",connect:"bezier",shape:"underline","font-size":14},relLine:{"line-color":"#f1a33a",color:"#fff"},summary:{"summary-connect-color":"#f1a33a","fill-color":"#f1a33a",color:"#333",shape:"ellipse"}}},{name:"business-lightyellow",data:{map:{"background-color":"#E7E4DC","background-image":"business6"},root:{color:"#333","fill-color":"#fff",shape:"arc-sides-rect",connect:"hayfork","connect-multicolor":"multiColor10",padding:[12,20],"font-size":24},main:{color:"#333","fill-color":"transparent","stroke-width":2,shape:"arc-sides-rect",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#333",connect:"bezier",shape:"underline","font-size":14},relLine:{"line-color":"#ff930f",color:"#333"},summary:{"summary-connect-color":"#FF930F","fill-color":"#FF930F",color:"#333",shape:"ellipse"}}},{name:"business-beige",data:{map:{"background-color":"#FFFFFF","background-image":"business4"},root:{color:"#333","fill-color":"#fff",shape:"arc-sides-rect",connect:"bezier","connect-multicolor":"multiColor11",padding:[12,20],"font-size":24},main:{color:"#333","fill-color":"transparent",shape:"arc-sides-rect",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#333",connect:"bezier",shape:"underline","font-size":14},relLine:{"line-color":"#f1787d",color:"#333"},summary:{"summary-connect-color":"#f1787d","fill-color":"#f1787d",color:"#333",shape:"ellipse"}}},{name:"business-lightblue",data:{map:{"background-color":"#E7E4DC","background-image":"business2"},root:{color:"#4E61FB","fill-color":"#fff","fill-multicolor":"multiColor13",shape:"arc-sides-rect",connect:"hayfork","connect-multicolor":"multiColor13",margin:[50,80],"font-size":24},main:{color:"#fff",shape:"arc-sides-rect",connect:"bezier","font-size":18},sub:{color:"#333",connect:"bezier","stroke-width":2,"fill-color":"#fff","font-size":14},relLine:{"line-color":"#f1a33a",color:"#333"},summary:{"summary-connect-color":"#f1a33a","fill-color":"#f1a33a",color:"#333",shape:"ellipse"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"classic-orange",data:{map:{"background-color":"#FFF1E6"},root:{"fill-color":"#ffbb91","connect-color":"#ff8e6e","connect-width":2},main:{"stroke-color":"#ffbb91","stroke-width":2,"connect-color":"#ff8e6e"},sub:{"connect-color":"#ff8e6e","font-size":14}}},{name:"classic-yellowblue",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#ffab00"},main:{color:"#fff","fill-color":"#009ce4","connect-color":"#ffab00"},sub:{color:"#333","connect-color":"#ffab00"},relLine:{"line-color":"#5dbadc",color:"#333"},summary:{"summary-connect-color":"#4ba5ed","fill-color":"#4351ae"}}},{name:"classic-grayblue",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#444444"},main:{color:"#fff","fill-color":"#999","connect-color":"#535c61"},sub:{color:"#333","connect-color":"#535c61"},relLine:{"line-color":"#ff5f6f",color:"#333"},summary:{"summary-connect-color":"#009dec","fill-color":"#009dec"}}},{name:"classic-redblack",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#e20713"},main:{color:"#fff","fill-color":"#222","connect-color":"#666565"},sub:{color:"#333","connect-color":"#666565"},relLine:{"line-color":"#ff8398",color:"#333"},summary:{"summary-connect-color":"#ff8398","fill-color":"#ff8398"}}},{name:"classic-cyan",data:{map:{"background-color":"#dcedfe","background-image":"random2"},root:{color:"#fff","fill-color":"#36445c"},main:{color:"#fff","fill-color":"#84a1c8","connect-color":"#35445b"},sub:{color:"#333","connect-color":"#35445b"},relLine:{"line-color":"#34455b",color:"#333"},summary:{"summary-connect-color":"#34455b","fill-color":"#34455b"}}},{name:"classic-grayyellow",data:{map:{"background-color":"#fff8eb","background-image":"random1"},root:{color:"#fff","fill-color":"#aba795"},main:{color:"#222","fill-color":"#fff5d0","connect-color":"#aba795"},sub:{color:"#333","connect-color":"#aba795"},relLine:{"line-color":"#7dbbdb",color:"#333"},summary:{"summary-connect-color":"#7dbbdb","fill-color":"#7dbbdb"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"classical-1",data:{map:{"background-color":"#e6eef2"},root:{"fill-color":"#1cabfc"},main:{"stroke-color":"#ccc"}}},{name:"classical-2",data:{map:{"background-color":"#EFECE2","background-image":"grain1"},root:{color:"#fff","fill-color":"#529977"},main:{color:"#282828","fill-color":"#d8d8d8","connect-color":"#282828"},sub:{color:"#282828","connect-color":"#282828"},relLine:{"line-color":"#529977",color:"#282828"},summary:{"summary-connect-color":"#282828","fill-color":"#529977",color:"#fff"}}},{name:"classical-3",data:{map:{"background-color":"#FFFFFF","background-image":"study11"},root:{color:"#fff","fill-color":"#415a9e"},main:{color:"#415a9e","fill-color":"#fff","stroke-width":2,"connect-color":"#415a9e"},sub:{color:"#444442","connect-color":"#415a9e","font-size":14},relLine:{"line-color":"#415a9e",color:"#444442"},summary:{"summary-connect-color":"#415a9e","fill-color":"#415a9e",color:"#fff"}}},{name:"classical-4",data:{map:{"background-color":"#EAEFFC","background-image":"business2"},root:{color:"#fff","fill-color":"#4660e0",shape:"arc-sides-rect",connect:"bezier",margin:[50,80],"font-size":24},main:{color:"#1b1b24","connect-color":"#1b1b24","font-weight":"bold",connect:"bezier","fill-color":"#e8eefc","font-size":18},sub:{color:"#1b1b24",connect:"bezier","connect-color":"#1b1b24",shape:"underline","font-size":14},relLine:{"line-color":"#9eade9",color:"#1b1b24"},summary:{"summary-connect-color":"#387be9","fill-color":"#9eade9",color:"#fff"}}},{name:"classical-5",data:{map:{"background-color":"#f1ece6"},root:{color:"#fff","fill-color":"#61799f",connect:"arc","connect-out-adjust":"evenly","stroke-width":2,shape:"arc-sides-rect","font-size":24},main:{color:"#61799f","fill-color":"#fff",connect:"bezier","stroke-width":2,"connect-color":"#fff",shape:"circle","font-weight":"bold","font-size":18},sub:{color:"#61799f",connect:"bezier","stroke-width":2,"connect-color":"#fff","font-size":14},relLine:{"line-color":"#387be9",color:"#61799f"},summary:{"summary-connect-color":"#387be9","fill-color":"#387be9",color:"#fff"}}},{name:"classical-6",data:{map:{"background-color":"#effaef"},root:{color:"#fff","fill-color":"#1e3556",connect:"y","stroke-width":2,shape:"roof-hexagon","font-size":24},main:{color:"#fff","fill-color":"#a9dada","stroke-width":2,"connect-color":"#1e3556",connect:"y",shape:"roof-hexagon","font-weight":"bold","font-size":18},sub:{color:"#1e3556","stroke-width":2,connect:"y","connect-color":"#1e3556","font-size":14},relLine:{"line-color":"#387be9",color:"#1e3556"},summary:{"summary-connect-color":"#387be9","fill-color":"#387be9",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"cream-white",data:{map:{"background-color":"#fff6de","background-image":"random3"},root:{color:"#273136","fill-color":"#fffdf4","connect-multicolor":"multiColor22"},main:{color:"#273136","fill-color":"transparent"},sub:{color:"#333"},relLine:{"line-color":"#e8734b",color:"#333"},summary:{"summary-connect-color":"#ff5f6f","fill-color":"#ff5f6f",color:"#fff"}}},{name:"cream-green",data:{map:{"background-color":"#eaf5e6"},root:{color:"#ff9a00","fill-color":"#fff","connect-color":"#fff"},main:{color:"#020526","fill-color":"#fff","connect-color":"#fff"},sub:{color:"#333","connect-color":"#fff"},relLine:{"line-color":"#b5d376",color:"#333"},summary:{"summary-connect-color":"#b5d376","fill-color":"#b5d376",color:"#fff"}}},{name:"cream-blue",data:{map:{"background-color":"#eff8fa"},root:{color:"#43556d","fill-color":"#fff","connect-color":"#80d4fa"},main:{color:"#43556d","fill-color":"#fff","connect-color":"#80d4fa"},sub:{color:"#43556d","connect-color":"#80d4fa"},relLine:{"line-color":"#2fbdff",color:"#333"},summary:{"summary-connect-color":"#80d4fa","fill-color":"#80d4fa",color:"#fff"}}},{name:"cream-pink",data:{map:{"background-color":"#fff9f8"},root:{color:"#fff","fill-color":"#c59a8e","connect-color":"#c59a8e"},main:{color:"#fff","fill-color":"#bfb4b0","connect-color":"#c59a8e"},sub:{color:"#333","connect-color":"#aba795"},relLine:{"line-color":"#aba795",color:"#333"},summary:{"summary-connect-color":"#c59a8e","fill-color":"#c59a8e",color:"#fff"}}},{name:"cream-yellow",data:{map:{"background-color":"#ffffeb"},root:{color:"#fff","fill-color":"#81c981","connect-color":"#aba795"},main:{color:"#605f4f","fill-color":"#fff5d0","connect-color":"#aba795"},sub:{color:"#333","connect-color":"#aba795"},relLine:{"line-color":"#c59a8e",color:"#333"},summary:{"summary-connect-color":"#aba795","fill-color":"#c59a8e",color:"#fff"}}},{name:"cream-purple",data:{map:{"background-color":"#f1f0f2"},root:{color:"#fff","fill-color":"#44006f","connect-color":"#a081c1"},main:{color:"#fff","fill-color":"#8956a2","connect-color":"#a081c1"},sub:{color:"#333","connect-color":"#a081c1"},relLine:{"line-color":"#e5682e",color:"#333"},summary:{"summary-connect-color":"#a081c1","fill-color":"#e5682e"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"dark-white",data:{map:{"background-color":"#312f2f","background-image":"random4"},root:{color:"#fff","fill-color":"#334247"},main:{color:"#fff","fill-color":"transparent","connect-color":"#fff"},sub:{color:"#fff","connect-color":"#fff"},relLine:{"line-color":"#008aba",color:"#fff"},summary:{"summary-connect-color":"#008aba","fill-color":"#008aba"}}},{name:"dark-orange",data:{map:{"background-color":"#140b03"},root:{color:"#fff","fill-color":"#9d0504"},main:{color:"#fff","fill-color":"#ff9800","connect-color":"rgba(255, 255, 255, 0.6)"},sub:{color:"#fff","connect-color":"#fff"},relLine:{"line-color":"#fff",color:"#fff"},summary:{"summary-connect-color":"#fff","fill-color":"#9d0504"}}},{name:"dark-apple",data:{map:{"background-color":"#303030","background-image":"business9"},root:{color:"#fff","fill-color":"#313b41","connect-multicolor":"multiColor15"},main:{color:"#fff","fill-color":"transparent"},sub:{color:"#fff"},relLine:{"line-color":"#f1c667",color:"#fff"},summary:{"summary-connect-color":"#f1c667","fill-color":"#f1c667",color:"#333"}}},{name:"dark-green",data:{map:{"background-color":"#2E2933"},root:{color:"#333","fill-color":"#D8F693",shape:"arc-sides-rect",connect:"bezier",margin:[50,80],"font-size":24},main:{color:"#fff","fill-color":"transparent",connect:"bezier","connect-color":"#64C7B8","font-size":18},sub:{color:"#fff",connect:"bezier","connect-color":"#64C7B8",margin:[23,16],shape:"underline","font-size":14},relLine:{"line-color":"#fff",color:"#fff"},summary:{"summary-connect-color":"#fff","fill-color":"#fff",color:"#333"}}},{name:"dark-pink",data:{map:{"background-color":"#2E2933"},root:{color:"#fff","fill-color":"#241B37","stroke-color":"#fff","stroke-width":2},main:{color:"#fff","fill-color":"#241B37","stroke-color":"#C07093","stroke-width":2,"connect-color":"#C07093"},sub:{color:"#fff","connect-color":"#C07093"},relLine:{"line-color":"#EB5F58",color:"#fff"},summary:{"summary-connect-color":"#4BA5ED","fill-color":"#4BA5ED"}}},{name:"dark-blue",data:{map:{"background-color":"#090417"},root:{color:"#fff","fill-color":"#323e99"},main:{color:"#fff","fill-color":"#090417","stroke-color":"#00c7f0","stroke-width":2,"connect-color":"#7cd1fa"},sub:{color:"#fff","connect-color":"#7cd1fa"},relLine:{"line-color":"#f1c667",color:"#fff"},summary:{"summary-connect-color":"#f1c667","fill-color":"#f1c667",color:"#333"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"fancy-1",data:{map:{"background-color":"#FEFBF0","background-image":"grain3"},root:{color:"#fff","fill-color":"#80cc6f"},main:{color:"#333","fill-color":"#bbebaf","connect-color":"#80cc6f"},sub:{color:"#333","connect-color":"#80cc6f"},relLine:{"line-color":"#f38562",color:"#333"},summary:{"summary-connect-color":"#f38562","fill-color":"#f38562",color:"#fff"}}},{name:"fancy-2",data:{map:{"background-color":"#F3F2F8","background-image":"gradient2"},root:{color:"#fff","fill-color":"#0874b0","fill-multicolor":"multiColor9","connect-color":"#dcdcdc"},main:{color:"#fff","connect-color":"#dcdcdc"},sub:{},relLine:{"line-color":"#0874b0",color:"#333"},summary:{"summary-connect-color":"#0874b0","fill-color":"#0874b0",color:"#fff"}}},{name:"fancy-3",data:{map:{"background-color":"#F8F7F4","background-image":"art1"},root:{color:"#333","connect-multicolor":"multiColor1","stroke-color":"#858fa5","stroke-width":2,"fill-color":"#fff"},main:{color:"#333","stroke-width":2},sub:{color:"#333"},relLine:{"line-color":"#489b7b",color:"#333"},summary:{"summary-connect-color":"#489b7b","fill-color":"#489b7b",color:"#fff"}}},{name:"fancy-4",data:{map:{"background-color":"#F8F8F8","background-image":"study5"},root:{color:"#333","fill-color":"#FFCB48","connect-multicolor":"multiColor14"},main:{color:"#333","fill-color":"#fff","stroke-width":2},sub:{color:"#333","connect-color":"#fff"},relLine:{"line-color":"#FF930F",color:"#333"},summary:{"summary-connect-color":"#FF930F","fill-color":"#FF930F",color:"#fff"}}},{name:"fancy-5",data:{map:{"background-color":"#D3F1E3","background-image":"gradient4"},root:{color:"#333",connect:"arc","stroke-color":"#76a880","stroke-width":2,"fill-color":"#fff","connect-multicolor":"multiColor8","font-size":24},main:{color:"#333","connect-color":"#80cc6f","stroke-color":"#398f8d","stroke-width":2,connect:"bezier","font-size":18},sub:{color:"#333","connect-color":"#80cc6f",connect:"bezier","font-size":14},relLine:{"line-color":"#ffc610",color:"#333"},summary:{"summary-connect-color":"#ffc610","fill-color":"#ffc610",color:"#333"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"hot-1",data:{map:{"background-color":"#f9fafe"},root:{color:"#333","fill-color":"#f5c244"},main:{color:"#fff","fill-color":"#5DBADC","connect-color":"#4D97D2"},sub:{color:"#333","connect-color":"#5DBADC"},relLine:{"line-color":"#5DBADC",color:"#333"},summary:{"summary-connect-color":"#5DBADC","fill-color":"#4351AE"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"morandi-green",data:{map:{"background-color":"#ece7dd","background-image":"grain2"},root:{color:"#fff","fill-color":"#1b323a"},main:{color:"#1b323a","fill-color":"#dbd7a5","connect-color":"#1b323a"},sub:{color:"#1b323a","connect-color":"#1b323a"},relLine:{"line-color":"#bcbcbc",color:"#1b323a"},summary:{"summary-connect-color":"#bcbcbc","fill-color":"#d1ca86",color:"#333"}}},{name:"morandi-orange",data:{map:{"background-color":"#fff1e5"},root:{color:"#fff","fill-color":"#989c81"},main:{color:"#1b323a","fill-color":"#e3bda6","connect-color":"#1d333a"},sub:{color:"#1b323a","connect-color":"#1d333a"},relLine:{"line-color":"#989c81",color:"#333"},summary:{"summary-connect-color":"#989c81","fill-color":"#e3bda6",color:"#1b323a"}}},{name:"morandi-gray",data:{map:{"background-color":"#e3e5e3"},root:{color:"#fff","fill-color":"#a55a3a"},main:{color:"#1b323a","fill-color":"#989289","connect-color":"#2f414a"},sub:{color:"#1b323a","connect-color":"#2f414a"},relLine:{"line-color":"#d2997b",color:"#333"},summary:{"summary-connect-color":"#d2997b","fill-color":"#a55a3a",color:"#1b323a"}}},{name:"morandi-yellow",data:{map:{"background-color":"#fffbe7"},root:{color:"#fff","fill-color":"#b38a6f"},main:{color:"#1b323a","fill-color":"#d4aa8f","connect-color":"#193239"},sub:{color:"#1b323a","connect-color":"#193239"},relLine:{"line-color":"#989c81",color:"#333"},summary:{"summary-connect-color":"#989c81","fill-color":"#b38a6f",color:"#1b323a"}}},{name:"morandi-blue",data:{map:{"background-color":"#FFFFFF","background-image":"business7"},root:{color:"#fff","fill-color":"#42589f","connect-out-adjust":"evenly","font-size":24},main:{color:"#42589f","fill-color":"#fff","stroke-width":2,"connect-color":"#42589f",connect:"bezier","font-weight":"bold","font-size":18},sub:{color:"#42589f","connect-color":"#42589f","font-size":14},relLine:{"line-color":"#a6d4e8",color:"#42589f"},summary:{"summary-connect-color":"#a6d4e8","fill-color":"#a6d4e8",color:"#fff"}}},{name:"morandi-red",data:{map:{"background-color":"#ffeff0"},root:{color:"#fff","fill-color":"#493233"},main:{color:"#fff","fill-color":"#8a5657","connect-color":"#1b323a"},sub:{color:"#333","connect-color":"#1b323a"},relLine:{"line-color":"#dbbabd",color:"#333"},summary:{"summary-connect-color":"#dbbabd","fill-color":"#493233",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"optimize",data:{map:{"background-color":"#fff","background-image":"grain4"},root:{color:"#3a424d","fill-color":"#fff","connect-multicolor":"multiColor23","fill-multicolor":"multiColor23","stroke-width":1,"stroke-color":"#999"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#302624",color:"#fd6574"},summary:{"summary-connect-color":"#66d6fe","fill-color":"#66d6fe",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"rainbow-normal",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#0070c7","connect-multicolor":"multiColor16","fill-multicolor":"multiColor16"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#33bce0",color:"#333"},summary:{"summary-connect-color":"#33bce0","fill-color":"#0070c7",color:"#fff"}}},{name:"rainbow-baby",data:{map:{"background-color":"#fff","background-image":"grain4"},root:{color:"#fff","fill-color":"#66d6fe","fill-multicolor":"multiColor17","connect-multicolor":"multiColor17"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#66d6fe",color:"#333"},summary:{"summary-connect-color":"#66d6fe","fill-color":"#66d6fe",color:"#fff"}}},{name:"rainbow-yellow",data:{map:{"background-color":"#fff","background-image":"random5"},root:{color:"#fff","fill-color":"#623f35","fill-multicolor":"multiColor18","connect-multicolor":"multiColor18"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#623f35",color:"#333"},summary:{"summary-connect-color":"#33bce0","fill-color":"#623f35",color:"#fff"}}},{name:"rainbow-green",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#005500","fill-multicolor":"multiColor19","connect-multicolor":"multiColor19"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#005500",color:"#333"},summary:{"summary-connect-color":"#33bce0","fill-color":"#005500",color:"#fff"}}},{name:"rainbow-bright",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#8100a3","fill-multicolor":"multiColor20","connect-multicolor":"multiColor20"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#8100a3",color:"#333"},summary:{"summary-connect-color":"#33bce0","fill-color":"#8100a3",color:"#fff"}}},{name:"rainbow-school",data:{map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#0854a0","fill-multicolor":"multiColor21","connect-multicolor":"multiColor21"},main:{color:"#fff"},sub:{color:"#333"},relLine:{"line-color":"#515151",color:"#333"},summary:{"summary-connect-color":"#33bce0","fill-color":"#0854a0",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),[{name:"anniversary-1",data:{map:{"background-color":"#f5f0e9","background-image":"anniversary1"},root:{color:"#fff","fill-color":"#555455"},main:{color:"#fff","fill-color":"#aca29d","connect-color":"#aca29d"},sub:{color:"#333","connect-color":"#aca29d"},relLine:{"line-color":"#707070",color:"#333"},summary:{"summary-connect-color":"#707070","fill-color":"#333",color:"#fff"}}},{name:"anniversary-2",data:{map:{"background-color":"#f2f2ed","background-image":"anniversary2"},root:{color:"#fff","fill-color":"#2B4F55"},main:{color:"#fff","fill-color":"#5B787C","connect-color":"#6F8284"},sub:{color:"#16282B","connect-color":"#6F8284"},relLine:{"line-color":"#869FA9",color:"#333"},summary:{"summary-connect-color":"#7C8377","fill-color":"#6F8284",color:"#fff"}}},{name:"anniversary-3",data:{map:{"background-color":"#f8e6cd","background-image":"anniversary3"},root:{color:"#fff","fill-color":"#957355"},main:{color:"#fff","fill-color":"#C29D70","connect-color":"#A39180"},sub:{color:"#1C1918","connect-color":"#A39180"},relLine:{"line-color":"#957355",color:"#333"},summary:{"summary-connect-color":"#957355","fill-color":"#886D4B",color:"#fff"}}},{name:"anniversary-4",data:{map:{"background-color":"#c4b8a5","background-image":"anniversary4"},root:{color:"#333","fill-color":"#EDDDC3"},main:{color:"#fff","fill-color":"#716A60","connect-color":"#6E6355"},sub:{color:"#000","connect-color":"#6E6355"},relLine:{"line-color":"#EADAC2",color:"#333"},summary:{"summary-connect-color":"#585043","fill-color":"#585043",color:"#fff"}}},{name:"anniversary-5",data:{map:{"background-color":"#dae1ed","background-image":"anniversary5"},root:{color:"#fff","fill-color":"#F8576A"},main:{color:"#fff","fill-color":"#606994","connect-color":"#9E94B6"},sub:{color:"#1C1918","connect-color":"#B1C1B5"},relLine:{"line-color":"#FF777F",color:"#333"},summary:{"summary-connect-color":"#684F9D","fill-color":"#684F9D",color:"#fff"}}},{name:"anniversary-6",data:{map:{"background-color":"#bfcfdc","background-image":"anniversary6"},root:{color:"#fff","fill-color":"#FF6941"},main:{color:"#333","fill-color":"#FFE37E","connect-color":"#6A96CD"},sub:{color:"#1C1918","connect-color":"#FAEFDE"},relLine:{"line-color":"#FF6941",color:"#333"},summary:{"summary-connect-color":"#6A94D8","fill-color":"#6A94D8",color:"#fff"}}},{name:"anniversary-7",data:{map:{"background-color":"#131314","background-image":"anniversary7"},root:{color:"#fff","fill-color":"#685CF2","connect-multicolor":"multiColor24"},main:{color:"#fff","fill-color":"transparent"},sub:{color:"#fff"},relLine:{"line-color":"#685CF2",color:"#fff"},summary:{"summary-connect-color":"#685CF2","fill-color":"#685CF2",color:"#fff"}}},{name:"anniversary-8",data:{map:{"background-color":"#0e1117","background-image":"anniversary8"},root:{color:"#fff","fill-color":"#231F7E"},main:{color:"#fff","fill-color":"#0466F7","connect-color":"#79B6FF"},sub:{color:"#fff","connect-color":"#79B6FF"},relLine:{"line-color":"#8473ED",color:"#fff"},summary:{"summary-connect-color":"#8473ED","fill-color":"#5C48DB",color:"#fff"}}},{name:"anniversary-9",data:{map:{"background-color":"#ffffff","background-image":"anniversary9"},root:{color:"#ffffff","fill-color":"#F74A6C"},main:{color:"#333","fill-color":"#FFE5EA","connect-color":"#E8CCD2"},sub:{color:"#1C1918","connect-color":"#E8CCD2"},relLine:{"line-color":"#F74A6C",color:"#333"},summary:{"summary-connect-color":"#C28591","fill-color":"#FFA7B8",color:"#fff"}}},{name:"anniversary-10",data:{map:{"background-color":"#b9d3ec","background-image":"anniversary10"},root:{color:"#fff","fill-color":"#986E54"},main:{color:"#333","fill-color":"#FFEBD2","connect-color":"#7CA1C4"},sub:{color:"#1C1918","connect-color":"#7CA1C4"},relLine:{"line-color":"#D69169",color:"#333"},summary:{"summary-connect-color":"#D69169","fill-color":"#986E54",color:"#fff"}}},{name:"anniversary-11",data:{map:{"background-color":"#0c1320","background-image":"anniversary11"},root:{color:"#fff","fill-color":"#244C99"},main:{color:"#fff","fill-color":"#5B76BC","connect-color":"#7B8DA8"},sub:{color:"#fff","connect-color":"#7B8DA8"},relLine:{"line-color":"#C4B3F4",color:"#fff"},summary:{"summary-connect-color":"#C4B3F4","fill-color":"#A684EE",color:"#fff"}}},{name:"anniversary-12",data:{map:{"background-color":"#e4e3e2","background-image":"anniversary12"},root:{color:"#fff","fill-color":"#E17F46"},main:{color:"#fff","fill-color":"#61524D","connect-color":"#B2A49E"},sub:{color:"#222","connect-color":"#B2A49E"},relLine:{"line-color":"#A98F80",color:"#333"},summary:{"summary-connect-color":"#A98F80","fill-color":"#A18278",color:"#fff"}}}].forEach((function(t){ji.registerColorTheme(t.name,t.data)})),ji.registerStructTheme("file-tree-down",{root:{layout:"bottom",connect:"fork","connect-out-adjust":"none"},main:{layout:"file-tree-down-right",connect:"fork"},sub:{layout:"file-tree-down-right",connect:"fork"}}),ji.registerStructTheme("file-tree-down-rounded",{root:{layout:"bottom",connect:"fork-rounded","connect-out-adjust":"none"},main:{layout:"file-tree-down-right",connect:"fork-rounded"},sub:{layout:"file-tree-down-right",connect:"fork-rounded"}}),ji.registerStructTheme("file-tree-down-arc",{root:{layout:"bottom",connect:"fork-rounded","connect-out-adjust":"none"},main:{layout:"file-tree-down-right",connect:"arc"},sub:{layout:"file-tree-down-right",connect:"arc"}}),ji.registerStructTheme("fishbone-right",{root:{layout:"fishbone-right","connect-out-adjust":"none"},main:{},sub:{connect:"fork-rounded"}}),ji.registerStructTheme("fishbone-left",{root:{layout:"fishbone-left","connect-out-adjust":"none"},main:{},sub:{connect:"fork-rounded"}}),ji.registerStructTheme("logic-right-arc",{root:{layout:"right",connect:"arc","connect-out-adjust":"none"},main:{layout:"right",connect:"arc"},sub:{layout:"right",connect:"arc"}}),ji.registerStructTheme("logic-right-straight",{root:{layout:"right",connect:"fork","connect-out-adjust":"none"},main:{layout:"right",connect:"fork"},sub:{layout:"right",connect:"fork"}}),ji.registerStructTheme("logic-right-straight-rounded",{root:{layout:"right",connect:"fork-rounded","connect-out-adjust":"none"},main:{layout:"right",connect:"fork-rounded"},sub:{layout:"right",connect:"fork-rounded"}}),ji.registerStructTheme("logic-right-bracket",{root:{layout:"right",connect:"bracket","connect-out-adjust":"none"},main:{layout:"right",connect:"bracket"},sub:{layout:"right",connect:"bracket"}}),ji.registerStructTheme("logic-right-hayfork",{root:{layout:"right",connect:"hayfork","connect-out-adjust":"none"},main:{layout:"right",connect:"hayfork"},sub:{layout:"right",connect:"hayfork"}}),ji.registerStructTheme("logic-right-hayfork-rounded",{root:{layout:"right",connect:"hayfork-rounded","connect-out-adjust":"none"},main:{layout:"right",connect:"hayfork-rounded"},sub:{layout:"right",connect:"hayfork-rounded"}}),ji.registerStructTheme("logic-right-bezier",{root:{layout:"right",connect:"bezier","connect-out-adjust":"none"},main:{layout:"right",connect:"bezier"},sub:{layout:"right",connect:"bezier"}}),ji.registerStructTheme("logic-right-parabola",{root:{layout:"right",connect:"parabola","connect-out-adjust":"none"},main:{layout:"right",connect:"parabola"},sub:{layout:"right",connect:"parabola"}}),ji.registerStructTheme("logic-left-arc",{root:{layout:"left",connect:"arc","connect-out-adjust":"none"},main:{layout:"left",connect:"arc"},sub:{layout:"left",connect:"arc"}}),ji.registerStructTheme("logic-left-straight",{root:{layout:"left",connect:"fork","connect-out-adjust":"none"},main:{layout:"left",connect:"fork"},sub:{layout:"left",connect:"fork"}}),ji.registerStructTheme("logic-left-straight-rounded",{root:{layout:"left",connect:"fork-rounded","connect-out-adjust":"none"},main:{layout:"left",connect:"fork-rounded"},sub:{layout:"left",connect:"fork-rounded"}}),ji.registerStructTheme("logic-left-bracket",{root:{layout:"left",connect:"bracket","connect-out-adjust":"none"},main:{layout:"left",connect:"bracket"},sub:{layout:"left",connect:"bracket"}}),ji.registerStructTheme("logic-left-hayfork",{root:{layout:"left",connect:"hayfork","connect-out-adjust":"none"},main:{layout:"left",connect:"hayfork"},sub:{layout:"left",connect:"hayfork"}}),ji.registerStructTheme("logic-left-hayfork-rounded",{root:{layout:"left",connect:"hayfork-rounded","connect-out-adjust":"none"},main:{layout:"left",connect:"hayfork-rounded"},sub:{layout:"left",connect:"hayfork-rounded"}}),ji.registerStructTheme("logic-left-bezier",{root:{layout:"left",connect:"bezier","connect-out-adjust":"none"},main:{layout:"left",connect:"bezier"},sub:{layout:"left",connect:"bezier"}}),ji.registerStructTheme("logic-left-parabola",{root:{layout:"left",connect:"parabola","connect-out-adjust":"none"},main:{layout:"left",connect:"parabola"},sub:{layout:"left",connect:"parabola"}}),ji.registerStructTheme("mind-arc",{root:{layout:"mind",connect:"arc","connect-out-adjust":"evenly"},main:{layout:"right",connect:"bezier"},sub:{layout:"right",connect:"bezier"}}),ji.registerStructTheme("mind-y",{root:{layout:"mind",connect:"y","connect-out-adjust":"evenly"},main:{layout:"right",connect:"y"},sub:{layout:"right",connect:"y"}}),ji.registerStructTheme("mind-straight",{root:{layout:"mind",connect:"fork","connect-out-adjust":"none"},main:{layout:"right",connect:"fork"},sub:{layout:"right",connect:"fork"}}),ji.registerStructTheme("mind-straight-rounded",{root:{layout:"mind",connect:"fork-rounded","connect-out-adjust":"none"},main:{layout:"right",connect:"fork-rounded"},sub:{layout:"right",connect:"fork-rounded"}}),ji.registerStructTheme("mind-bezier",{root:{layout:"mind",connect:"bezier","connect-out-adjust":"none"},main:{layout:"right",connect:"bezier"},sub:{layout:"right",connect:"bezier"}}),ji.registerStructTheme("mind-hayfork",{root:{layout:"mind",connect:"hayfork","connect-out-adjust":"none"},main:{layout:"right",connect:"hayfork"},sub:{layout:"right",connect:"hayfork"}}),ji.registerStructTheme("mind-hayfork-rounded",{root:{layout:"mind",connect:"hayfork-rounded","connect-out-adjust":"none"},main:{layout:"right",connect:"hayfork-rounded"},sub:{layout:"right",connect:"hayfork-rounded"}}),ji.registerStructTheme("mind-bracket",{root:{layout:"mind",connect:"bracket","connect-out-adjust":"none"},main:{layout:"right",connect:"bracket"},sub:{layout:"right",connect:"bracket"}}),ji.registerStructTheme("mind-parabola",{root:{layout:"mind",connect:"parabola","connect-out-adjust":"none"},main:{layout:"right",connect:"parabola"},sub:{layout:"right",connect:"parabola"}}),ji.registerStructTheme("org-bottom",{root:{layout:"bottom",connect:"fork","connect-out-adjust":"none"},main:{layout:"bottom",connect:"fork"},sub:{layout:"bottom",connect:"fork"}}),ji.registerStructTheme("org-bottom-arc",{root:{layout:"bottom",connect:"arc","connect-out-adjust":"none"},main:{layout:"bottom",connect:"arc"},sub:{layout:"bottom",connect:"arc"}}),ji.registerStructTheme("org-bottom-rounded",{root:{layout:"bottom",connect:"fork-rounded","connect-out-adjust":"none"},main:{layout:"bottom",connect:"fork-rounded"},sub:{layout:"bottom",connect:"fork-rounded"}}),ji.registerStructTheme("org-bottom-hayfork",{root:{layout:"bottom",connect:"hayfork","connect-out-adjust":"none"},main:{layout:"bottom",connect:"hayfork"},sub:{layout:"bottom",connect:"hayfork"}}),ji.registerStructTheme("org-bottom-hayfork-rounded",{root:{layout:"bottom",connect:"hayfork-rounded","connect-out-adjust":"none"},main:{layout:"bottom",connect:"hayfork-rounded"},sub:{layout:"bottom",connect:"hayfork-rounded"}}),ji.registerStructTheme("org-bottom-bracket",{root:{layout:"bottom",connect:"bracket","connect-out-adjust":"none"},main:{layout:"bottom",connect:"bracket"},sub:{layout:"bottom",connect:"bracket"}}),ji.registerStructTheme("org-bottom-bezier",{root:{layout:"bottom",connect:"bezier","connect-out-adjust":"none"},main:{layout:"bottom",connect:"bezier"},sub:{layout:"bottom",connect:"bezier"}}),ji.registerStructTheme("org-bottom-parabola",{root:{layout:"bottom",connect:"parabola","connect-out-adjust":"none"},main:{layout:"bottom",connect:"parabola"},sub:{layout:"bottom",connect:"parabola"}}),ji.registerStructTheme("timeline-right",{root:{layout:"timeline-right","connect-out-adjust":"none"},main:{layout:"file-tree-down-right"},sub:{layout:"file-tree-down-right"}}),ji.registerStructTheme("timeline-right-alternate",{root:{layout:"timeline-right","layout-alternate":"odd","connect-out-adjust":"none"},main:{layout:"file-tree-down-right"},sub:{layout:"file-tree-down-right"}}),ji.registerStructTheme("timeline-left",{root:{layout:"timeline-left","connect-out-adjust":"none"},main:{layout:"file-tree-down-left"},sub:{layout:"file-tree-down-left"}}),ji.registerStructTheme("timeline-left-alternate",{root:{layout:"timeline-left","layout-alternate":"odd","connect-out-adjust":"none"},main:{layout:"file-tree-down-left"},sub:{layout:"file-tree-down-left"}}),ji.registerStructTheme("timeline-down",{root:{layout:"timeline-down","connect-out-adjust":"none"},main:{layout:"right"}}),ji.registerStructTheme("timeline-down-alternate",{root:{layout:"timeline-down","layout-alternate":"odd","connect-out-adjust":"none"},main:{layout:"right"}}),ji.registerStructTheme("timeline-up",{root:{layout:"timeline-up","connect-out-adjust":"none"},main:{layout:"right"}}),ji.registerStructTheme("timeline-up-alternate",{root:{layout:"timeline-up","layout-alternate":"odd","connect-out-adjust":"none"},main:{layout:"right"}}),ji.setDefaultStyle({theme:{colorTheme:"",structTheme:""},content:{"progress-non-color":"#999999","progress-active-color":"#1acc67","outline-color":"#ffa261","interact-fill-color":"#fff","comment-stroke-color":"#aaa"},layout:{"broadcast-margins":!1},map:{"background-color":"#fff"},root:{color:"#fff","fill-color":"#1cabfc","font-size":26,"font-weight":"bold","connect-width":3,"text-align":"center",padding:[16,24],margin:[50],radius:8,"stroke-color":"#41599E","stroke-width":0},main:{color:"#333","fill-color":"#fff","font-size":20,padding:[10,15],margin:[30],radius:6,"connect-width":3,"connect-color":"#bdc5c9","stroke-color":"#41599E","stroke-width":0},sub:{color:"#333","fill-color":"transparent","font-size":16,padding:[6,9],margin:[20],radius:5,"connect-width":2,"connect-color":"#bdc5c9","stroke-color":"#41599E","stroke-width":0},floatRoot:{color:"#fff","fill-color":"#3982fc","font-weight":"bold","font-size":20,"stroke-color":"#41599E","stroke-width":0,padding:[14,20],margin:[30],radius:6},summary:{color:"#fff","fill-color":"#3982fc","font-size":16,"connect-color":"#bdc5c9","stroke-color":"#41599E","stroke-width":0,padding:[6,9],margin:[20],radius:6,"summary-connect":"bracket","summary-connect-width":2,"summary-connect-color":"#3982fc"},relLine:{shape:"rect","fill-color":"transparent","stroke-color":"transparent",color:"#333","font-size":14,padding:[3,6],"marker-start":"line","marker-end":"triangle","stroke-width":0,"line-type":"bezier","line-color":"#3982fc","line-width":2,"line-dasharray":[4,1]}}),ji.setMultiColors({multiColor1:["#FD6D5A","#FEB40B","#6DC354","#994487","#518CD8","#443295"],multiColor2:["#264653","#2A9D8F","#E9C46A","#F4A261","#E76F51","#253777"],multiColor3:["#C1C976","#C8A9A1","#FEC2E4","#77CCE0","#FFD372","#F88078"],multiColor4:["#FFE577","#FEC051","#FF7F59","#4A3838","#A56C43","#E3C498"],multiColor5:["#88857E","#D0CCC3","#ABC0B7","#DA8157","#A99D8F","#444C57"],multiColor6:["#5BD4FF","#38B2FF","#2589E5","#005FA2","#253777","#14235A"],multiColor7:["#C1E194","#A5C669","#70AE7D","#2D9594","#2D8495","#1E7080"],multiColor8:["#C2E199","#A4C678","#74AB84","#398F8D","#26878F","#147082"],multiColor9:["#9F4494","#F6910D","#37A6A7","#37A6A7","#F35B5F","#90A7A5"],multiColor10:["#F1787D","#F8D889","#69cde0","#5EB7F1","#EDA462","#f6c4e6"],multiColor11:["#64b6ea","#fb8857","#a788eb","#80d172","#fc7a77","#61d4d5"],multiColor12:["#037cd2","#00aaaa","#927fd3","#e54e5d","#eaa700","#f57f4b"],multiColor13:["#4C87D6","#F38562","#f2b825","#d4c114","#88b421","#199fe0"],multiColor14:["#104FFF","#2FD151","#64C7B8","#FF1038","#45CAFF","#B913FF"],multiColor15:["#2a70ff","#a876fa","#ff458c","#ffd300","#ffa600","#ff1d00"],multiColor16:["#ff6150","#ffb200","#46c740","#a53b8a","#408cde","#4a2c9b"],multiColor17:["#ff6f7a","#fdd87c","#3ccfe3","#3ab8f7","#f9a154","#ffc1e8"],multiColor18:["#ffbe2f","#e8c392","#c49b8e","#4d3738","#ae6a3a","#ff764d"],multiColor19:["#b8e38a","#9bc95a","#5ab178","#009895","#008697","#007282"],multiColor20:["#007cd9","#00adab","#977bd9","#f73d59","#f4a500","#ff783a"],multiColor21:["#00356a","#ffc200","#ff6900","#e80017","#ffc200","#003c8f"],multiColor22:["#fed36b","#e8734b","#f9d8c6","#95bde4","#bfd8d0","#d3a8dd"],multiColor23:["#4c88de","#f38562","#f2b825","#d4c114","#88b421","#199fe0"],multiColor24:["#44C8FF","#72FDBA","#542AFD","#8B6EFF","#FEFA8B","#FF9141"]}),ji.setPriorityColors(["#e64248","#f9b62a","#5565fb","#bb3aac","#2bcc5b","#25b7e6","#80acb4","#83989b","#8e9698","#798ba0","#a17883","#a09379","#7899a0","#9677a0","#77a17e","#a69bc0","#c0b39d","#cca9a8","#acbbbe","#dfcaa1"]);{let gd=qo.Commands.StructTheme,fd=gd.prototype.exec;gd.prototype.exec=function(t,e="auto"){fd.call(this,t,e);for(let t of["root","floatRoot","main","sub","summary"])for(let e of["connect","connect-out-adjust"])this.minder.paper.style.modify(t,e,void 0)}}{let yd=fa.prototype.doSelfLayout;fa.prototype.doSelfLayout=function(){let t=this.node.ownData;if(t.ctrl&&this.node.fromNode&&this.node.toNode){try{let e=Fo.get(this.node.fromNode),i=Fo.get(this.node.toNode),n=e.getRenderBoxInPaperOrigin().center,o=i.getRenderBoxInPaperOrigin().center,[r,s]=this.makeFromToAngles(),a=this.makeFromPoint(r),l=this.makeToPoint(s),h=a.diff(n),d=l.diff(o),c=P.fromCoord(t.ctrl[0]),u=P.fromCoord(t.ctrl[1]),p=c.minus(h),m=u.minus(d);p.dot(h.normalize())<20&&(p=c.normalize().multiplyScalar(20)),m.dot(d.normalize())<20&&(m=u.normalize().multiplyScalar(20)),t.fromAngle=r,t.toAngle=s,t.relativeControl1={...p},t.relativeControl2={...m}}catch(t){}delete t.ctrl}yd.call(this)}}{function xd(t,e){e(t),t.children&&t.children.forEach((function(t){xd(t,e)}))}function wd(t){let e=new Map,i=(t,n)=>{if(e.set(t.data.id,n),t.children)for(let e of t.children)i(e,n+1);if(t.summaries)for(let e of t.summaries)i(e,n+1)};for(let e of oo(t))i(e,1);return e}function vd(){let t=!1;var e;return e=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}var ld=[{version:"1.4.43",process:function(t){function e(t){if(!t.data.html){var e=Ji(t.data.text||"");t.data.html="<p>"+e.split("\n").join("</p><p>")+"</p>"}}xd(t.root,e),t.subtree&&t.subtree.forEach((function(t){xd(t.root,e)}))}},{version:"1.5.0",process:function(t){t.generalize&&t.generalize.forEach((e=>{(t.subtree||[]).some((t=>e.treeId===t.id&&(t.nodeId=e.nodeId,t.genId=e.id,!0)))}))}},{version:"1.5.1",process:function(t){function e(t){delete t.data.expandSide,delete t.data.layout}xd(t.root,e),t.subtree&&t.subtree.forEach((function(t){xd(t.root,e)}))}},{version:"1.5.2",process:function(t){t.style&&(Object.entries(t.style).forEach((e=>{var i=e[0].split("-"),n=i.shift();t.style[n]=t.style[n]||{},e[1]&&(t.style[n][i.join("-")]=e[1]),delete t.style[e[0]]})),t.style.map=t.style.map||{},t.background&&(t.style.map.background=t.background),t.backgroundImage&&(t.style.map["background-image"]=t.backgroundImage))}},{version:"1.5.3",process:function(t){t.style&&t.style.map&&(t.style.map["background-image"]=t.style.map["background-image"]||t.style.map.backgroundImage,delete t.style.map.backgroundImage)}},{version:"1.5.5",process:function(t){function e(t){if(t.generalizes)for(var i=t.generalizes,n=0;n<i.length;n++){var o=i[n].range;if(o){var r=o[0],s=o[1],a=[];for(let e=r;e<s+1;e++)a.push(t.children[e].data.id);i[n].ids=a,xd(i[n].tree.root,(function(t){e(t)}))}}}xd(t.root,(function(t){e(t)})),t.subtree&&t.subtree.forEach((t=>{xd(t.root,(function(t){e(t)}))}))}},{version:"2.0.0",process:t=>{var e,i,n,o,r,s,a,l,h;const d=["font-size","font-family","font-weight","font-style","color","stroke-dasharray","stroke-width","shape","radius","connect-color","connect-width"],c={stroke:"stroke-color",branch:"connect","branch-tapered":"connect-tapered","branch-multicolor":"connect-multicolor",background:"fill-color"},u={generalizes:"summaries"},p={expandState:"expanded"},m={startId:"fromId",endId:"toId"},g={default:"mind-arc","default-poly":"mind-straight",filetree:"file-tree-down","fish-bone":"fishbone-right",right:"logic-right-arc","right-poly":"logic-right-straight",structure:"org-bottom","vertical-bottom":"timeline-down","horizontal-right":"timeline-right"},f={hexagon:"roof-hexagon",annulus:"arc-sides-rect","rect-arc":"arc-roof-rect","rounded-rect":"rect",default:"rect"},y={"fishbone-master":"fishbone-right","fishbone-slave":"fishbone-right","filetree-down":"file-tree-down-right","filetree-up":"file-tree-up-right"},x={straight:"y",l:"t","fishbone-master":"-fishbone-bended-line",slingshot:"fork",poly:"fork",under:"bezier","round-elbow":"fork-rounded",stitch:"hayfork",dotted:"y"};let w=t.template;t.style=t.style||{},t.style.map=t.style.map||{},t.style.theme=t.style.theme||{},Kn(t,"subtree","floatRoots"),Kn(t,"relLine","relLines"),Kn(t,"generalize","summaries"),Kn(t.style.map,"background","background-color"),Yn(t,t.style.theme,{theme:"colorTheme"}),Yn(t,t.style.theme,{template:"structTheme"});for(let n of["root","main","sub"])Array.isArray(null===(i=null===(e=t.style)||void 0===e?void 0:e[n])||void 0===i?void 0:i.margin)?t.style[n].margin=t.style[n].margin.map((t=>2*t)):Jn(t.style,[n,"margin"]);if(t.colorGroup){let e=Object.entries(ji.priorityColors).find((e=>e[1][0]===t.colorGroup[0]));e&&(t.style.root=t.style.root||{},t.style.root["connect-multicolor"]=e[0])}delete t.colorGroup,delete t.position,delete t.zoom,delete t.outlineThemeNo,delete t.wordWrap,delete t.background;for(let e of t.floatRoots||[])e.data=(null===(n=e.root)||void 0===n?void 0:n.data)||e.data||{},e.children=(null===(o=e.root)||void 0===o?void 0:o.children)||e.children||[],e.style=e.style||{},qn(e,u),qn(e.data,p),Gn(e,e.style,"template","layout"),Gn(e.data,e.style,"layout","layout"),e.pos&&(e.data.position=e.pos),e.data.image&&e.data.imageSize&&(e.data.position.x-=e.data.imageSize.width/4+5,e.data.position.y-=e.data.imageSize.height/2+15),Qn(e.data),Xn(e,["data","style","children","summaries"]);for(let e of to(t)){(null===(r=e.tree)||void 0===r?void 0:r.root)&&Object.assign(e,e.tree.root),e.data=e.data||{},e.style=e.style||{},qn(e,u),qn(e.data,p),Yn(e.data,e.style,d),Yn(e.data,e.style,c),Jn(e.data,["right-number"]);let t=e.data.range||e.range;if(t&&Array.isArray(t)&&(e.data.startIndex=t[0],e.data.endIndex=t[1]+1),!t&&e.ids){let t=(null===(s=e.children)||void 0===s?void 0:s.indexOf(e.ids[0]))||0,i=((null===(a=e.children)||void 0===a?void 0:a.indexOf(e.ids[0]))||0)+1;e.data.startIndex=t,e.data.endIndex=i}delete e.commentCount,Qn(e.data),Xn(e,["data","style","children","summaries"])}for(let e of t.relLines||[])(null===(l=e.data)||void 0===l?void 0:l.node)?Object.assign(e,e.data.node):e.node&&Object.assign(e,e.node),e.data=e.data||{},e.style={},Object.assign(e.data,e),e.data.relativeControl1=e.data.ctrl[0],e.data.relativeControl2=e.data.ctrl[1],qn(e.data,m),Yn(e.data,e.style,d),Yn(e.data,e.style,c),delete e.data.data,delete e.data.startP,delete e.data.endP,delete e.style.shape,delete e.data.ctrlCur,delete e.data.node,delete e.data.icon,Qn(e.data),Xn(e,["data","style"]);Zn(t.style.theme,"structTheme",g);for(let e of t.floatRoots||[]){if(g[e.style.layout]){let t=g[e.style.layout],i=Vi.get(t)||{};if(e.style=e.style||{},Object.assign(e.style,i.root||{}),e.children)for(let t of e.children){t.style=t.style||{},Object.assign(t.style,i.main||{});for(let e of io(t))e.style=e.style||{},Object.assign(e.style,i.sub||{})}}Zn(e.style,"layout",y)}let v=wd(t),b={mind:["mind",["right","left"]],default:["mind",["right","left"]],"default-poly":["mind",["right","left"]],filetree:["bottom","filetree-down"],"fish-bone":["fish-bone-master","fish-bone-slave",["filetree-down","filetree-up"]],right:["right"],"right-poly":["right"],structure:["bottom"],"vertical-bottom":["vertical-bottom"],"vertical-top":["vertical-top"],"horizontal-left":["horizontal-left"],"horizontal-right":["horizontal-right","filetree-down"]}[w];for(let e of to(t)){Zn(e.style,"shape",f),Zn(e.style,"layout",y),Zn(e.style,"connect",x),e.data.expanded="collapse"!==e.data.expanded,void 0===e.data.html&&""===e.data.text&&(e.data.html="",e.data.text=""),e.data.html&&(e.data.html=e.data.html.replace(/\n/g,"<br/>")),e.data.resource_id&&(e.data.imageOthers={resource_id:e.data.resource_id}),delete e.data.resource_id,e.data.imageSize&&Xn(e.data.imageSize,["width","height"]),e.data.icon&&(e.data.icons=e.data.icon.split(","),delete e.data.icon),e.data.progress>0?e.data.progress-=1:delete e.data.progress;let t=(v.get(e.data.id)||1)-2;t>3&&(t=3);let i=[];if(b&&t>=0)for(let e=t;e>=0;e--)if(b[e]){i=Array.isArray(b[e])?b[e]:[b[e]];break}for(let t of Object.keys(e.data)){if(!t.startsWith("layout_"))continue;let n=null===(h=t.match(/^layout_([-\w]+)_offset$/))||void 0===h?void 0:h[1],o=e.data[t];delete e.data[t],n&&o&&void 0!==o.x&&void 0!==o.y&&i.includes(n)&&(["mind"].includes(n)||["right","filetree-down","horizontal-right","fish-bone-master","fish-bone-slave"].includes(n)?e.data.layoutOffset=o:["left","filetree-up","horizontal-left"].includes(n)?e.data.layoutOffset={x:-o.x,y:o.y}:["bottom","vertical-bottom"].includes(n)?e.data.layoutOffset={x:o.y,y:o.x}:["top","vertical-top"].includes(n)&&(e.data.layoutOffset={x:-o.y,y:o.x}))}"string"==typeof e.style.radius&&(e.style.radius=Number(e.style.radius)),"string"==typeof e.style["stroke-dasharray"]&&(e.style["stroke-dasharray"]=e.style["stroke-dasharray"].split(",").map((t=>Number(t))))}}},{version:"2.0.1",process:t=>{let e=new Set,i=new Map;for(let n of[...to(t),...no(t),...t.relLines||[]]){let t=n.data.id;if(t||(t=ue(),n.data.id=t),e.has(t)){let e=ue();n.data.id=e,i.set(t,e)}else e.add(t)}}},{version:"2.0.3",process:t=>{t.created||(t.created=t.root.data.created),delete t.outlineThemeNo,delete t.background,t.style.map&&t.style.map["background-color"]&&t.style.map["background-image"]&&(t.style.map["background-color"]=""),t.style.map&&t.style.map["background-color"]&&void 0===t.style.map["background-image"]&&(t.style.map["background-image"]="")}},{version:"2.0.6",process:t=>{t.modified||(t.modified=t.created)}},{version:"2.1.0",process:t=>{t.created<new Date("2022-07-20").getTime()&&(t.style.layout=t.style.layout||{},t.style.layout["avoid-overlay"]=!1)}},{version:"2.1.1",process:t=>{var e,i,n,o;t.style.root=t.style.root||{},t.style.floatRoot=t.style.floatRoot||{};for(let r of["connect-multicolor","connect-tapered"])(null===(e=t.root.style)||void 0===e?void 0:e[r])&&(t.style.root[r]=null===(i=t.root.style)||void 0===i?void 0:i[r],t.style.floatRoot[r]=null===(n=t.root.style)||void 0===n?void 0:n[r],null===(o=t.root.style)||void 0===o||delete o[r])}},{version:"2.1.2",process:t=>{var e,i;(null===(e=t.style.appearance)||void 0===e?void 0:e["max-text-width"])&&delete t.style.appearance["max-text-width"],(null===(i=t.style.layout)||void 0===i?void 0:i["max-text-width"])&&delete t.style.layout["max-text-width"];let n=vd();t.created<new Date("2022-07-12").getTime()&&!n&&(t.style.content=t.style.content||{},t.style.content["max-text-width"]||(t.style.content["max-text-width"]=2560))}},{version:"2.1.3",process:t=>{for(let e of[...to(t),...no(t),...t.relLines||[]])e.data.customContentWidth&&(e.style=e.style||{},e.style["custom-content-width"]=e.data.customContentWidth,delete e.data.customContentWidth)}}];Bi.unshift(...ld)}const hd={emoji_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><clipPath id="a"><path fill="none" d="M32.5 53A10.76 10.76 0 0043 42H22a10.76 10.76 0 0010.5 11z"/></clipPath></defs><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="20" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><ellipse cx="45" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><g clip-path="url(#a)"><path fill="#f19274" d="M32.5 53A10.76 10.76 0 0043 42H22a10.76 10.76 0 0010.5 11z"/><ellipse cx="32.5" cy="41.5" fill="#fffffa" rx="6.5" ry="4.5"/><ellipse cx="32.5" cy="52" fill="#ff6642" rx="8.5" ry="5"/></g></g></svg>',emoji_10:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="19.5" cy="26" fill="#7e6a14" rx="4.5" ry="7"/><ellipse cx="44.5" cy="26" fill="#7e6a14" rx="4.5" ry="7"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M26 50s8-9 12 0"/><path fill="#7bd3ff" d="M56.85 13.12a3 3 0 00-1.47-1.37 1.34 1.34 0 00-1.87.75c-1 2-8 19 3 19 9.8 0 2.12-15.1.34-18.38z"/></g></svg>',emoji_11:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><circle cx="18.5" cy="27" r="7.5" fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/><circle cx="46" cy="27.5" r="7.5" fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/><ellipse cx="11" cy="42" fill="#fb8d5c" rx="5.5" ry="4"/><ellipse cx="52.5" cy="42" fill="#fb8d5c" rx="5.5" ry="4"/><circle cx="32" cy="48" r="2" fill="#7e6a14"/></g></svg>',emoji_12:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="32.5" cy="50" fill="#7e6a14" rx="4.5" ry="7"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 24s-7 6 1 8 8-17-4-12 1 24 9 14M44 24s-6 7 2 7 4-11 0-11-7 2-8 5 0 13 10 9"/></g></svg>',emoji_13:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 33l8-10 8 11M39 33l7-10 6 10M29 50s3-7 5-5 5 4-1 7c0 0 6 0 5 3s-6 5-8 2"/></g></svg>',emoji_14:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><clipPath id="a"><ellipse cx="31.5" cy="47.5" fill="none" rx="6.5" ry="10.5"/></clipPath></defs><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="19.5" cy="26" fill="#7e6a14" rx="4.5" ry="7"/><ellipse cx="44.5" cy="26" fill="#7e6a14" rx="4.5" ry="7"/><g clip-path="url(#a)"><ellipse cx="31.5" cy="47.5" fill="#f1936f" rx="6.5" ry="10.5"/><ellipse cx="31.5" cy="59.5" fill="#ff663d" rx="8.5" ry="12.5"/></g></g></svg>',emoji_15:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 68"><g data-name=" 2"><circle cx="32.69" cy="32" r="32" fill="#ffd522"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M10.69 29s7 9 15 0M37.19 28.5s8 12 17 2M24.19 50.5s6-8 13 0"/><path fill="#76d9fa" d="M7.19 32.5s-12 7-5 12 9-7 8-10-1.5-2.5-3-2zM58.69 34s-3-1-3 1 0 12 9 10c8-2-2-10-6-11z"/></g></svg>',emoji_16:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="20" cy="26" fill="#7e6a14" rx="4.5" ry="7"/><ellipse cx="44.5" cy="26" fill="#7e6a14" rx="4.5" ry="7"/><path fill="none" stroke="#786c18" stroke-miterlimit="10" stroke-width="3" d="M28.25 45.5l8.5 8.5M28.25 54l8.5-8.5"/></g></svg>',emoji_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="20" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><ellipse cx="45" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 46s13 15 26 0"/></g></svg>',emoji_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><clipPath id="a"><ellipse cx="33" cy="49" fill="none" rx="13.5" ry="7"/></clipPath></defs><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="20" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><ellipse cx="45" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><g clip-path="url(#a)"><ellipse cx="33" cy="49" fill="#fff" rx="13.5" ry="7"/><path fill="none" stroke="#dddce2" stroke-miterlimit="10" d="M23 43v13M27.5 41v16M32.5 41v16M37.5 41v16M41.5 41v16M19 49h28.5"/></g></g></svg>',emoji_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 22l9 8-12 7M49.5 22.5l-9 6 9 7"/><path fill="#f5835e" d="M32.5 60.75c-5.74 0-7-9.68-7-13.41 0-2 1-2.09 1-2.09h11.16c.64 4.21.45 11-2 14a3.89 3.89 0 01-3.16 1.5z"/><path fill="#f1682c" d="M36.78 46.25c.48 4.12.12 9.89-1.9 12.35a2.9 2.9 0 01-2.38 1.15c-4.9 0-6-9.19-6-12.41a2.15 2.15 0 01.2-1.09h10.08m1.72-2h-12s-2 0-2 3.09 1 14.41 8 14.41 7-12.35 6-17.5z"/><path fill="none" stroke="#f1682c" stroke-miterlimit="10" stroke-width="2" d="M31.74 47v9"/></g></svg>',emoji_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><ellipse cx="20" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><ellipse cx="45" cy="26.5" fill="#7e6a14" rx="4" ry="6.5"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M22.5 45h19"/></g></svg>',emoji_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20l13 12M12.5 32.5l12-13M43.5 20.5l11 11M42.5 31.5l11-11"/><ellipse cx="32.5" cy="48.5" fill="#776712" rx="5.5" ry="7"/></g></svg>',emoji_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><clipPath id="a"><path fill="none" d="M23 49s-3-1-2 2 5 7 8 8 10.16 1.12 14-4c3-4 2-6 0-6s-9 2-20 0z"/></clipPath></defs><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><path fill="#fc683a" d="M48.94 19.33a1.28 1.28 0 001.39.39c1.55-.47 4.87-1.22 6.43.28 2.08 2 2.08 5-4.15 11s-10.38 3-11.42 2-6.72-6.47-4.52-14.8a4.9 4.9 0 011.47-2.51c3.3-2.84 8.51.67 10.8 3.64zM16.23 19.33a1.28 1.28 0 01-1.39.39c-1.55-.47-4.84-1.22-6.43.28-2.08 2-2.08 5 4.15 11S22.94 34 24 33s6.72-6.47 4.52-14.8A4.9 4.9 0 0027 15.69c-3.27-2.84-8.48.67-10.77 3.64z"/><path fill="#f8ffff" d="M23.78 55.25S23 58 24 59s3-2 3-2-3 5 0 5c2 0 1-6 1-6z"/><g clip-path="url(#a)"><path fill="#fb6938" d="M23 49s-3-1-2 2 5 7 8 8 10.16 1.12 14-4c3-4 2-6 0-6s-9 2-20 0z"/><path fill="#f8ffff" d="M24 48s-2 3 1 4c2.1.7 3.22.42 3.71.19a.85.85 0 00.4-.41A8.87 8.87 0 0030 49c0-1-6-1-6-1zM35 49s1 3 2 3 5 1 5-1a35.36 35.36 0 00-1-6z"/></g></g></svg>',emoji_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><path fill="none" stroke="#786c18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 25.5h11l-8 9M54.5 34.5l-10-8 10-1M22.5 50.5l3-4 3 3 3-3 2 3 2-3 3 3 2-3 2 3"/></g></svg>',emoji_9:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 68"><defs><clipPath id="a"><path fill="none" d="M21 42s-4-1-3 3 7 10 14 10 14-4 15-10-4-3-6-2-17 1-20-1z"/></clipPath></defs><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#ffd522"/><path fill="#7e6721" d="M17.5 25a12.09 12.09 0 017.5 2.31V27c0-3.31-3.36-6-7.5-6S10 23.69 10 27v.31A12.09 12.09 0 0117.5 25zM47.5 25a12.09 12.09 0 017.5 2.31V27c0-3.31-3.36-6-7.5-6S40 23.69 40 27v.31A12.09 12.09 0 0147.5 25z"/><path fill="#7ed3f9" d="M4.67 28.74a5.91 5.91 0 00-4.1 6.36A3.19 3.19 0 003 38c4 1 4-4 6-7s1-4-4.33-2.26zM60 26s-4-1-3 1 2.55 3.11 3 4c1 2 2.37 4.75 5 3 3-2 1-7-5-8z"/><g clip-path="url(#a)"><path fill="#f3956f" d="M21 42s-4-1-3 3 7 10 14 10 14-4 15-10-4-3-6-2-17 1-20-1z"/><path fill="#fcfaee" d="M26 42s-3 4-1 5 7 2 7-2-6-3-6-3zM32 43s0 3 2 4 6 1 6-2a4.33 4.33 0 00-2-4z"/><ellipse cx="31" cy="54" fill="#fa643a" rx="8" ry="3"/><path fill="#fa643a" d="M31.73 50.12c-.88.37-3.43 1.23 0-3.2a1 1 0 01.71-.42c1 0 1.52 1.5 2 2.5s.5 2-2.2 1.14a.81.81 0 00-.51-.02z"/></g></g></svg>',avatar_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#2884f2"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#b066d9"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#5ecc59"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#2bafe0"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#c87833"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#fb82ad"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#f24946"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',avatar_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#fdb52e"/><path fill="#fff" d="M32.44 52.13a23.12 23.12 0 005.25-.44 33.75 33.75 0 0011.37-3.06 2.91 2.91 0 001.75-2.19c.87-4.81-2.63-10.5-7.44-12.25a7.46 7.46 0 00-4.37 0 14.83 14.83 0 01-13.56 0 4 4 0 00-4.37 0c-4.81 2.19-7 5.69-7.87 10.5-.44 3.06 0 3.5 2.63 4.38a41.66 41.66 0 0016.62 3.06zM32 32a10.27 10.27 0 0010.5-10.06A10.27 10.27 0 0032 11.87a10.27 10.27 0 00-10.5 10.06A10.27 10.27 0 0032 32z"/></g></svg>',star_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#2983f3"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#b066d9"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#5ecc59"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#2bafe0"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#c87833"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#fb82ad"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#f24946"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',star_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g data-name=" 2"><circle cx="32" cy="32" r="32" fill="#fdb52d"/><path fill="#fff" d="M32.9 12.89l5.67 11.49a1 1 0 00.75.55L52 26.77a1 1 0 01.55 1.71l-9.17 8.94a1 1 0 00-.29.89l2.17 12.63A1 1 0 0143.8 52l-11.33-6a1 1 0 00-.93 0L20.2 52a1 1 0 01-1.45-1.05l2.16-12.65a1 1 0 00-.29-.89l-9.17-8.94a1 1 0 01.55-1.7l12.68-1.84a1 1 0 00.75-.55l5.67-11.49a1 1 0 011.8 0z"/></g></svg>',flag_1:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 18 21" viewBox="0 0 18 21"><defs><filter id="a" width="17.9" height="20.8" x="0" y="0" filterUnits="userSpaceOnUse"><feColorMatrix values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"/></filter></defs><mask id="b" width="17.9" height="20.8" x="0" y="0" maskUnits="userSpaceOnUse"><g filter="url(#a)"><path fill="#fff" d="M0 0h17.9v20.8H0z"/></g></mask><path fill="#e84544" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.2.4 7.8 0 6.2 0s-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2s3 .4 3.9.9c1 .5 2.4.9 3.9.9s3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2" mask="url(#b)"/></svg>',flag_10:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#ababab" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9 1.6 0 3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#fbb700" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9s3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#5364ff" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9s3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#bd3cae" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9s3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#1ccc55" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9s3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#13b6e8" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9s3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#7facb5" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9 1.6 0 3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#6e7a9c" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9 1.6 0 3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',flag_9:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21"><path fill="#fb6800" d="M.9 0C.4 0 0 .4 0 .9V20c0 .5.4.9.9.9s.9-.4.9-.9V.9C1.7.4 1.3 0 .9 0M14 1.8c-1.6 0-3-.4-3.9-.9C9.1.4 7.7 0 6.2 0c-1.6 0-3 .6-3.9 1.2V11c1-.5 2.4-1.2 3.9-1.2 1.6 0 3 .4 3.9.9 1 .5 2.4.9 3.9.9 1.6 0 3-.7 3.9-1.2V.6c-.9.5-2.3 1.2-3.9 1.2"/></svg>',symbol_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41.5 40"><defs><style>.cls-1{fill:#fbb703;}.cls-2{fill:#fbfbfb;}</style></defs><title> 13</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M5.7,38.5a4.2,4.2,0,0,1-4.2-4.2V18.9a4.2,4.2,0,0,1,1.2-3,4.7,4.7,0,0,1,3-1.2H9.6V38.5Z"/><path class="cls-2" d="M5.7,16.2H8.1V37H5.7A2.7,2.7,0,0,1,3,34.3V18.9a2.7,2.7,0,0,1,2.7-2.7m0-3h0a5.4,5.4,0,0,0-4,1.7,5.6,5.6,0,0,0-1.7,4V34.3A5.7,5.7,0,0,0,5.7,40h5.4V13.3H5.7Z"/><path class="cls-1" d="M9.1,38.5V14.8h1.8A4.8,4.8,0,0,0,15,10.4V8.1c0-2,0-6,3.9-6.5h.7c3.4,0,6.5,3.5,6.5,7.3a12.7,12.7,0,0,1-.4,3.2h8.7a5.7,5.7,0,0,1,4.3,2,5.5,5.5,0,0,1,1.2,4.6L37,34a5.6,5.6,0,0,1-5.5,4.5Z"/><path class="cls-2" d="M19.6,3c2.6,0,5,2.9,5,5.8a17.8,17.8,0,0,1-.8,4.7H34.4a4.2,4.2,0,0,1,3.2,1.5,4.1,4.1,0,0,1,.9,3.4l-3,15.4a4,4,0,0,1-4,3.3H10.6V16.3H11a6.2,6.2,0,0,0,5.5-5.9V8.1c0-2.6.2-4.7,2.6-5.1h.5m0-3h-.9c-5.2.7-5.2,6-5.2,8v2.3a3.1,3.1,0,0,1-2.7,2.9H7.6V40H31.5a7.2,7.2,0,0,0,7-5.8l2.9-15.4A7.1,7.1,0,0,0,39.9,13a7.2,7.2,0,0,0-5.5-2.6H27.5a10.3,10.3,0,0,0,.1-1.7c0-4.6-3.8-8.8-8-8.8Z"/></g></g></svg>',symbol_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39.7 39.7"><defs><style>.cls-1{fill:#f43601;}.cls-2{fill:#fbfbfb;}</style></defs><title> 26</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M34,38.2A4.2,4.2,0,0,1,31,37L19.9,25.8,8.7,37a4.2,4.2,0,0,1-3,1.2,4.2,4.2,0,0,1-3-1.2,4.3,4.3,0,0,1,0-6L13.9,19.9,2.7,8.7a4.2,4.2,0,0,1-1.2-3,4.2,4.2,0,0,1,1.2-3,4.2,4.2,0,0,1,3-1.2,4.2,4.2,0,0,1,3,1.2L19.9,13.9,31,2.7a4.3,4.3,0,0,1,6,0,4.2,4.2,0,0,1,1.2,3,4.2,4.2,0,0,1-1.2,3L25.8,19.9,37,31a4.2,4.2,0,0,1-3,7.2Z"/><path class="cls-2" d="M34,3a2.7,2.7,0,0,1,1.9.8,2.6,2.6,0,0,1,0,3.8L23.7,19.9,35.9,32.1a2.6,2.6,0,0,1,0,3.8,2.7,2.7,0,0,1-3.8,0L19.9,23.7,7.6,35.9a2.4,2.4,0,0,1-1.9.8,2.4,2.4,0,0,1-1.9-.8,2.6,2.6,0,0,1,0-3.8L16,19.9,3.8,7.6a2.6,2.6,0,0,1,0-3.8A2.7,2.7,0,0,1,5.7,3a2.7,2.7,0,0,1,1.9.8L19.9,16,32.1,3.8A2.7,2.7,0,0,1,34,3m0-3a5.4,5.4,0,0,0-4,1.7L19.9,11.8,9.8,1.7A5.8,5.8,0,0,0,5.7,0a5.6,5.6,0,0,0-4,1.7A5.6,5.6,0,0,0,0,5.7,5.8,5.8,0,0,0,1.7,9.8L11.8,19.9,1.7,30A5.4,5.4,0,0,0,0,34a5.8,5.8,0,0,0,1.7,4.1,5.9,5.9,0,0,0,4,1.6A5.8,5.8,0,0,0,9.8,38L19.9,27.9,30,38a5.4,5.4,0,0,0,4,1.7A5.8,5.8,0,0,0,38.1,38a5.8,5.8,0,0,0,1.6-4A5.4,5.4,0,0,0,38,30L27.9,19.9,38,9.8a5.8,5.8,0,0,0,1.7-4.1,5.6,5.6,0,0,0-1.7-4A5.4,5.4,0,0,0,34,0Z"/></g></g></svg>',symbol_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.2 40.6"><defs><style>.cls-1{fill:#1ecc56;}.cls-2{fill:#fbfbfb;}</style></defs><title> 12</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M20.6,39.1a1.3,1.3,0,0,1-1-.4,2.1,2.1,0,0,1-.5-.7A44.3,44.3,0,0,0,2.3,22.9a1.5,1.5,0,0,1-.8-1.1A1.3,1.3,0,0,1,2,20.5l6.6-6.3a1.3,1.3,0,0,1,1-.4l.9.2a39.7,39.7,0,0,1,9.3,10.2A71.3,71.3,0,0,1,49.7,1.6h.5l.9.3A1.3,1.3,0,0,1,51.7,3V7.1a1.5,1.5,0,0,1-1,1.4c-.1,0-7.3,2.6-15.7,12.2A85.9,85.9,0,0,0,23.2,36.4l-1.3,2a1.2,1.2,0,0,1-1.1.7Z"/><path class="cls-2" d="M50.2,3V7.1S42.7,9.6,33.9,19.7,23.8,32.6,20.6,37.6c-.3-.3-5-9.4-17.6-16l6.6-6.3A36.4,36.4,0,0,1,19.7,26.9,69.6,69.6,0,0,1,50.2,3m0-3L49.1.2A73.2,73.2,0,0,0,19.9,21.6a40.5,40.5,0,0,0-8.6-8.8,3.4,3.4,0,0,0-1.7-.5,3.4,3.4,0,0,0-2.1.8L.9,19.4A3.1,3.1,0,0,0,0,22a3,3,0,0,0,1.6,2.2c4.8,2.6,11.5,7.1,16.2,14.6a8.6,8.6,0,0,0,.7,1,3.2,3.2,0,0,0,2.1.8H21a3,3,0,0,0,2.2-1.4,23.9,23.9,0,0,1,1.3-2.1c2.4-4,4.7-7.8,11.6-15.4,8.1-9.3,15-11.7,15.1-11.8a2.9,2.9,0,0,0,2-2.8V3A3.1,3.1,0,0,0,51.9.5,3.4,3.4,0,0,0,50.2,0Z"/></g></g></svg>',symbol_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.4 44"><defs><style>.cls-1{fill:#f43601;}.cls-2{fill:#fbfbfb;}</style></defs><title> 25</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M3,42.5A1.6,1.6,0,0,1,1.9,42a1.5,1.5,0,0,1,0-2L14.2,26,9,21.5a3.1,3.1,0,0,1-1.1-2.6,3,3,0,0,1,1.2-2.1,4.3,4.3,0,0,1,2.7-1l4.7-.3a3.8,3.8,0,0,0,2.4-.8l9.6-7.2V5.4a3.3,3.3,0,0,1,2-3.5,3.3,3.3,0,0,1,1.7-.4,4.3,4.3,0,0,1,2.7,1l5.9,5.2,5.9,5.1h.1a3.4,3.4,0,0,1,.6,4.3,3.7,3.7,0,0,1-3.3,1.7H41l-8.2,8.5a3.7,3.7,0,0,0-.9,1.9l-.3,4.1a3.8,3.8,0,0,1-3.4,3.6h-.3a3.5,3.5,0,0,1-2.3-.9l-5.4-4.8L3.8,42.2A1.1,1.1,0,0,1,3,42.5Z"/><path class="cls-2" d="M32.2,3a2.4,2.4,0,0,1,1.7.6h0l5.9,5.2h0l5.9,5.1h0a1.9,1.9,0,0,1,.5,2.5,2.5,2.5,0,0,1-2.1,1H41a1.4,1.4,0,0,0-1,.5l-8.3,8.5a4.5,4.5,0,0,0-1.3,2.8l-.3,4.1a2.4,2.4,0,0,1-.7,1.6,2.6,2.6,0,0,1-1.3.6h-.2a2.1,2.1,0,0,1-1.3-.5h0l-6.3-5.6L3.1,40.9h0L16.3,25.8,10,20.3H9.9A1.9,1.9,0,0,1,9.4,19a1.9,1.9,0,0,1,.7-1.1,2.8,2.8,0,0,1,1.8-.6l4.7-.3a6.8,6.8,0,0,0,3.2-1.1l9.7-7.3a.9.9,0,0,0,.5-.9V5.3a2,2,0,0,1,1.1-2.1L32.2,3m0-3a6.9,6.9,0,0,0-2.4.5A5,5,0,0,0,27,5.4V6.8l-9,6.7a2.8,2.8,0,0,1-1.6.5l-4.7.3a5.4,5.4,0,0,0-3.5,1.3,4.2,4.2,0,0,0-1.8,3.1A4.5,4.5,0,0,0,8,22.6l4.1,3.5L.8,38.9H.7a3.2,3.2,0,0,0,0,3.9A3.1,3.1,0,0,0,3,44a3.4,3.4,0,0,0,1.7-.5h.1L20.1,33.1l4.5,4a5.3,5.3,0,0,0,3.3,1.3h.4A5,5,0,0,0,31.4,37a5.3,5.3,0,0,0,1.7-3.6l.3-4.1a1.4,1.4,0,0,1,.5-.9l7.8-8.1h2.4A5.1,5.1,0,0,0,48.7,18a4.8,4.8,0,0,0-1-6.3L41.8,6.5,35.9,1.4h0A5.5,5.5,0,0,0,32.2,0Z"/></g></g></svg>',symbol_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41.9 40.7"><defs><style>.cls-1{fill:#12b6e8;}.cls-2{fill:#fbfbfb;}</style></defs><title> 24</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><circle class="cls-1" cx="21" cy="12.7" r="11.2"/><path class="cls-2" d="M21,3a9.7,9.7,0,1,1-9.7,9.7A9.7,9.7,0,0,1,21,3m0-3A12.7,12.7,0,1,0,33.7,12.7,12.7,12.7,0,0,0,21,0Z"/><path class="cls-1" d="M28.9,39.2H1.6l.2-1.5A19.9,19.9,0,0,1,12.5,21.3l.9-.5.8.6A10.5,10.5,0,0,0,21,23.8a10.9,10.9,0,0,0,6.9-2.4l.7-.6.9.4A19.5,19.5,0,0,1,40.2,37.6v.7l-.5.5C39.3,39.2,39.3,39.2,28.9,39.2Z"/><path class="cls-2" d="M28.8,22.6a18,18,0,0,1,9.9,15.1H3.3a18.3,18.3,0,0,1,9.9-15.1A12.7,12.7,0,0,0,21,25.3a12.5,12.5,0,0,0,7.8-2.7M28.5,19l-1.6,1.2a9.3,9.3,0,0,1-11.8,0l-1.5-1.1-1.7.8A21.5,21.5,0,0,0,.3,37.4l-.3,3,3,.3H38a3.2,3.2,0,0,0,2.8-.9l1.1-.9-.2-1.5A21.2,21.2,0,0,0,30.2,19.9L28.5,19Z"/></g></g></svg>',symbol_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33.9 44.5"><defs><style>.cls-1{fill:#f43601;}.cls-2{fill:#fbfbfb;}</style></defs><title> 11</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M15.8,43h-.5a15.9,15.9,0,0,1-5.9-1.7A14.4,14.4,0,0,1,2,32.7L1.7,31c-.1-.3-.1-.5-.2-.8V27.5c0-.3.1-.6.1-.9A14.1,14.1,0,0,1,4.3,21l1.1-1.6c.7-.8,1.3-1.8,2-2.7a6,6,0,0,0,1-4.2l-.2-1.2A1.6,1.6,0,0,1,9.3,9.6h.5a1.5,1.5,0,0,1,1.1.4,10.3,10.3,0,0,1,2.4,4.1,9.2,9.2,0,0,0-.1-3.3,10.3,10.3,0,0,0-2.4-4.9L9.5,4.7l-.8-.6a1.6,1.6,0,0,1-.4-1.6,1.5,1.5,0,0,1,1.4-1H11a10.7,10.7,0,0,1,4,1.2,19.5,19.5,0,0,1,7.2,6,23.1,23.1,0,0,1,4.7,9.9,2.4,2.4,0,0,1,.8-.9h.6a1.7,1.7,0,0,1,1.2.5h.1a.5.5,0,0,1,.2.4A14.4,14.4,0,0,1,32,23.8a6.8,6.8,0,0,1,.2,1.4,1.7,1.7,0,0,1,.1.7c0,.1.1.1.1.2V28c0,.1-.1.2-.1.4h0a2.9,2.9,0,0,0-.2.9,8,8,0,0,1-.5,2.1,16.4,16.4,0,0,1-5,7.7,14.1,14.1,0,0,1-6.4,3.3l-1.6.3h-.7c0,.1-.1.1-.2.1Z"/><path class="cls-2" d="M10.5,3h.1a9.8,9.8,0,0,1,3.8,1.1,19.8,19.8,0,0,1,6.7,5.5,21.9,21.9,0,0,1,4.7,11.7,12.2,12.2,0,0,1-.5,5,12.7,12.7,0,0,1-.6,1.8,4.2,4.2,0,0,0,2-1.7,9.4,9.4,0,0,0,1.6-7.3l.3.2a13.7,13.7,0,0,1,1.9,4.7c.2.7.2,1.4.4,2V28c-.1,0-.1.1-.1.2a24.7,24.7,0,0,1-.6,2.9,14.4,14.4,0,0,1-4.6,7,15.3,15.3,0,0,1-5.8,3l-2.1.4H15.8c0-.1-.1-.1-.2-.1a13.3,13.3,0,0,1-5.5-1.5,12.4,12.4,0,0,1-6.6-7.6c-.2-.8-.3-1.6-.5-2.4V28.2c.1-.4.1-.9.2-1.3a12.7,12.7,0,0,1,2.3-5c1-1.5,2.1-2.9,3.1-4.3a7.3,7.3,0,0,0,1.3-5.4c-.1-.3-.1-.7-.2-1.1h.1c2.4,2.4,2.8,5.5,2.4,8.8l.3-.2a11.5,11.5,0,0,0,2.2-9.1,11,11,0,0,0-2.8-5.7L9.7,3h.8m0-3H9.7A3,3,0,0,0,6.9,2a3.2,3.2,0,0,0,.8,3.3l.8.6,1.2,1,.9,1.3H9a3,3,0,0,0-2.3,3.3v1.2a4.3,4.3,0,0,1-.8,3.2L4.2,18.6,3.1,20.1A15.3,15.3,0,0,0,.3,26.4a3,3,0,0,0-.2,1v2.5a1.3,1.3,0,0,0,.1.6,1.5,1.5,0,0,0,.1.7,16.2,16.2,0,0,0,.4,1.9,15.4,15.4,0,0,0,8.2,9.5,17,17,0,0,0,6.3,1.8h3.8l1.6-.3a16.2,16.2,0,0,0,7.1-3.7A18.4,18.4,0,0,0,33.1,32c.2-.9.4-1.7.5-2.4s.1-.5.1-.7h0a3.1,3.1,0,0,0,.2-.8V26.1a4.3,4.3,0,0,1-.1-.5c0-.2-.1-.4-.1-.6s-.1-1-.2-1.5a23.1,23.1,0,0,0-2.4-5.7l-.4-.5h-.1a3.3,3.3,0,0,0-2.3-1h-.4a26,26,0,0,0-4.5-8.3,21.2,21.2,0,0,0-7.7-6.4A12.5,12.5,0,0,0,11.3.1Z"/></g></g></svg>',symbol_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.5 38.9"><defs><style>.cls-1{fill:#12b6e8;}.cls-2{fill:#fbfbfb;}</style></defs><title> 10</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M10.5,37.4h-.1A10.8,10.8,0,0,1,8.8,16.6,13,13,0,0,1,20.9,8,12.6,12.6,0,0,1,33.4,19a8,8,0,0,1,2.6-.5,9.5,9.5,0,0,1,.9,18.9H10.5Z"/><path class="cls-2" d="M20.9,9.5A11.2,11.2,0,0,1,32,20.8v.4A8.9,8.9,0,0,1,36,20a8,8,0,0,1,.8,15.9H10.6A9.3,9.3,0,0,1,10,17.8,11.5,11.5,0,0,1,20.9,9.5m0-3A14.4,14.4,0,0,0,7.7,15.4,12.2,12.2,0,0,0,0,26.7,11.9,11.9,0,0,0,10.2,38.8H37.1A11,11,0,0,0,36,17H34.6A14.2,14.2,0,0,0,20.9,6.5Z"/><path class="cls-1" d="M45.2,27A9.2,9.2,0,0,0,36,18.6H34.7l-1.3.2L33,17.6A12.7,12.7,0,0,0,22.3,8.1l-2.8-.3,1.9-2.1a11.6,11.6,0,0,1,20.5,5.9,6.2,6.2,0,0,1,2.3-.4,8.8,8.8,0,0,1,3.1,17.1l-1.9.7Z"/><path class="cls-2" d="M30.4,3A10.4,10.4,0,0,1,40.6,13.4c0,.2-.1.3-.1.4a8,8,0,0,1,3.7-1.1,7.3,7.3,0,0,1,2.5,14.2A10.8,10.8,0,0,0,36,17.1H34.5a14.2,14.2,0,0,0-12-10.6A10.5,10.5,0,0,1,30.4,3m0-3A13.5,13.5,0,0,0,20.2,4.7L16.5,9l5.7.6A11.2,11.2,0,0,1,31.6,18l.6,2.6,2.7-.4H36a7.7,7.7,0,0,1,7.7,7.1l.4,3.8,3.7-1.3a10.3,10.3,0,0,0-3.6-20H43.1A13.3,13.3,0,0,0,30.4,0Z"/></g></g></svg>',symbol_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.1 51.9"><defs><style>.cls-1{fill:#82999c;}.cls-2{fill:#fbfbfb;}</style></defs><title> 9</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M16.1,50.4a9,9,0,0,1-9-9,3.3,3.3,0,0,1,3.3-3.3,3.3,3.3,0,0,1,3.4,3.3,2.3,2.3,0,1,0,4.6,0V33.3H4.8a3.3,3.3,0,0,1-2.3-1,3,3,0,0,1-1-2.3A20.1,20.1,0,0,1,18.4,10a3.3,3.3,0,0,1,3.3-3.2A3.2,3.2,0,0,1,25,10,20.2,20.2,0,0,1,42,29.8a3.6,3.6,0,0,1-.9,2.4,3.2,3.2,0,0,1-2.4,1.1H25v8.1A8.9,8.9,0,0,1,16.1,50.4Z"/><path class="cls-2" d="M21.7,8.3a1.8,1.8,0,0,1,1.8,1.8v1.2a18.8,18.8,0,0,1,17,18.5,2.4,2.4,0,0,1-.5,1.4,2,2,0,0,1-1.3.6H23.5v9.4h0a7.5,7.5,0,0,1-7.4,7.5,7.6,7.6,0,0,1-7.5-7.5,1.9,1.9,0,0,1,1.9-1.8,1.9,1.9,0,0,1,1.8,1.8,3.9,3.9,0,0,0,3.8,3.9,3.9,3.9,0,0,0,3.8-3.9h0V31.8H4.8a1.8,1.8,0,0,1-1.3-.6A1.8,1.8,0,0,1,3,30,18.7,18.7,0,0,1,19.9,11.3V10.1a1.8,1.8,0,0,1,1.8-1.8m0-3a4.8,4.8,0,0,0-4.6,3.4A21.7,21.7,0,0,0,0,30a5.1,5.1,0,0,0,1.4,3.4,4.8,4.8,0,0,0,3.4,1.4H16.9v6.4h0a.9.9,0,0,1-.8.9.8.8,0,0,1-.8-.9,4.9,4.9,0,0,0-9.7,0,10.5,10.5,0,1,0,20.9,0h0V34.8H38.7a4.8,4.8,0,0,0,3.5-1.6,4.9,4.9,0,0,0,1.3-3.5,21.6,21.6,0,0,0-17.2-21,4.7,4.7,0,0,0-4.6-3.4Z"/><path class="cls-1" d="M30.8,11.6a2.4,2.4,0,0,1-1.2-.3,2.7,2.7,0,0,1-1.2-3.6l1.1-2.4a2.8,2.8,0,0,1,2.4-1.5,2.4,2.4,0,0,1,1.2.3,2.8,2.8,0,0,1,1.2,3.6l-1.1,2.4a2.8,2.8,0,0,1-2.4,1.5Z"/><path class="cls-2" d="M31.9,5.3l.5.2A1.3,1.3,0,0,1,33,7.1L31.8,9.5a1.1,1.1,0,0,1-1,.6h-.5a1.3,1.3,0,0,1-.6-1.6L30.9,6a1.2,1.2,0,0,1,1-.7m0-3a4.2,4.2,0,0,0-3.7,2.4L27,7.1a4.4,4.4,0,0,0,1.9,5.6,4.1,4.1,0,0,0,1.9.4,4.2,4.2,0,0,0,3.7-2.3l1.2-2.4a4.3,4.3,0,0,0-1.9-5.6,4.1,4.1,0,0,0-1.9-.5Z"/><path class="cls-1" d="M36.7,14.8a2.7,2.7,0,0,1-1.2-.3,2.8,2.8,0,0,1-1.2-3.6l1.2-2.4A2.5,2.5,0,0,1,37.8,7h.1a2.7,2.7,0,0,1,2.3,1.2,2.6,2.6,0,0,1,.1,2.7l-1.2,2.4a2.4,2.4,0,0,1-1.5,1.3Z"/><path class="cls-2" d="M37.9,8.5a1.2,1.2,0,0,1,1,.5,1.1,1.1,0,0,1,.1,1.2l-1.2,2.4a1.1,1.1,0,0,1-.7.6h-.4l-.5-.2a1.2,1.2,0,0,1-.5-1.6l1.2-2.4a1.1,1.1,0,0,1,1-.6h0m0-3h-.2a4.2,4.2,0,0,0-3.5,2.3L33,10.2a4.1,4.1,0,0,0,1.8,5.6,4.5,4.5,0,0,0,1.9.5l1.4-.2a4.7,4.7,0,0,0,2.4-2.2l1.2-2.3a4.2,4.2,0,0,0-.3-4.2,4.1,4.1,0,0,0-3.5-1.9Z"/><path class="cls-1" d="M41.7,17.9a2.9,2.9,0,0,1-2.3-1.2,2.9,2.9,0,0,1-.1-2.7l1.2-2.4A2.7,2.7,0,1,1,45.3,14l-1.2,2.4a2.7,2.7,0,0,1-2.2,1.5Z"/><path class="cls-2" d="M42.9,11.6h.5a1.2,1.2,0,0,1,.6,1.6l-1.2,2.4a1.2,1.2,0,0,1-1,.7h-.1a1.2,1.2,0,0,1-1-.5,1.3,1.3,0,0,1-.1-1.2l1.2-2.4a1.4,1.4,0,0,1,1.1-.7m0-3a4.4,4.4,0,0,0-3.8,2.3l-1.2,2.4a4.5,4.5,0,0,0,.3,4.2,4.2,4.2,0,0,0,3.5,1.9h.2a4.2,4.2,0,0,0,3.5-2.3l1.2-2.4a4.1,4.1,0,0,0-1.8-5.6,4.5,4.5,0,0,0-1.9-.5Z"/><path class="cls-1" d="M43.8,9.3A2.1,2.1,0,0,1,42.6,9a2.6,2.6,0,0,1-1.2-3.6L42.5,3a2.8,2.8,0,0,1,2.3-1.5H45a2.7,2.7,0,0,1,2.2,1.2,2.9,2.9,0,0,1,.2,2.7L46.2,7.8a2.8,2.8,0,0,1-2.4,1.5Z"/><path class="cls-2" d="M45,3a1.4,1.4,0,0,1,1,.5,1.3,1.3,0,0,1,0,1.2L44.8,7.1a1.2,1.2,0,0,1-1,.7h-.6a1.2,1.2,0,0,1-.5-1.6l1.2-2.4a1.2,1.2,0,0,1,1-.7H45m0-3h-.3a4.3,4.3,0,0,0-3.5,2.3L40,4.7a4.2,4.2,0,0,0,1.9,5.6,4,4,0,0,0,5.6-1.8l1.2-2.4A4.2,4.2,0,0,0,45,0Z"/></g></g></svg>',symbol_9:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.8 45.4"><defs><style>.cls-1{fill:#fbb703;}.cls-2{fill:#fbfbfb;}</style></defs><title> 8</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M9.7,43.9a2.7,2.7,0,0,1-2.3-1.2,2.5,2.5,0,0,1-.5-2.5l3.3-12.6H4.4A3.1,3.1,0,0,1,2,26.3a2.9,2.9,0,0,1-.3-2.7L9.4,3.4a2.9,2.9,0,0,1,2.7-1.9h13a2.8,2.8,0,0,1,2.4,1.3,2.8,2.8,0,0,1,.3,2.8l-3.6,8.9h6.2a2.9,2.9,0,0,1,2.7,1.7,2.9,2.9,0,0,1-.5,3.1L11.9,42.9a2.9,2.9,0,0,1-2.2,1Z"/><path class="cls-2" d="M25.1,3a1.4,1.4,0,0,1,1.3,2L22,16h8.4a1.5,1.5,0,0,1,1.1,2.4L10.8,41.9a1.6,1.6,0,0,1-1.1.5,1.5,1.5,0,0,1-1.4-1.8l3.9-14.5H4.4a1.5,1.5,0,0,1-1.3-2L10.8,3.9A1.4,1.4,0,0,1,12.1,3h13m0-3h-13A4.3,4.3,0,0,0,8,2.9L.3,23a4.6,4.6,0,0,0,.5,4.1,4.5,4.5,0,0,0,3.6,2H8.3L5.4,39.8a4.6,4.6,0,0,0,.8,3.8,4.5,4.5,0,0,0,3.5,1.8,4.9,4.9,0,0,0,3.4-1.5L33.7,20.3a4.3,4.3,0,0,0,.7-4.7,4.4,4.4,0,0,0-4-2.6h-4l2.8-6.9A4.3,4.3,0,0,0,28.8,2a4.3,4.3,0,0,0-3.7-2Z"/></g></g></svg>',symbol_10:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.7 47.7"><defs><style>.cls-1{fill:#ff980a;}.cls-2{fill:#fbfbfb;}</style></defs><title> 23</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M23.8,34.3A10.5,10.5,0,1,1,34.3,23.8,10.5,10.5,0,0,1,23.8,34.3Z"/><path class="cls-2" d="M23.8,14.7a9.1,9.1,0,1,1-9.1,9.1,9.1,9.1,0,0,1,9.1-9.1m0-2.8a12,12,0,1,0,12,11.9,12,12,0,0,0-12-11.9Z"/><path class="cls-1" d="M13.9,16.9a2.5,2.5,0,0,1-2-.9L8,12.2A3.2,3.2,0,0,1,8,8a3.2,3.2,0,0,1,4.2,0L16,11.9A2.8,2.8,0,0,1,16,16,2.7,2.7,0,0,1,13.9,16.9Z"/><path class="cls-2" d="M10.1,8.7a1.2,1.2,0,0,1,1,.4l3.8,3.8a1.3,1.3,0,0,1,0,2,1.2,1.2,0,0,1-1,.5,1.6,1.6,0,0,1-1-.5L9.1,11.1a1.3,1.3,0,0,1,0-2,1.4,1.4,0,0,1,1-.4m0-3A4,4,0,0,0,7,7a4.5,4.5,0,0,0,0,6.3l3.8,3.8a4.4,4.4,0,0,0,3.1,1.3,4.8,4.8,0,0,0,3.2-1.3,4.8,4.8,0,0,0,1.3-3.2,4.4,4.4,0,0,0-1.3-3.1L13.3,7a4.4,4.4,0,0,0-3.2-1.3Z"/><path class="cls-1" d="M4.4,26.8a3,3,0,0,1,0-5.9H9.8a3,3,0,1,1,0,5.9Z"/><path class="cls-2" d="M9.8,22.4a1.5,1.5,0,0,1,1.5,1.4,1.5,1.5,0,0,1-1.5,1.5H4.4A1.5,1.5,0,0,1,3,23.8a1.4,1.4,0,0,1,1.4-1.4H9.8m0-3H4.4a4.5,4.5,0,0,0,0,8.9H9.8a4.5,4.5,0,1,0,0-8.9Z"/><path class="cls-1" d="M10.1,40.5A2.9,2.9,0,0,1,8,39.6a3,3,0,0,1-.8-2A3,3,0,0,1,8,35.5l3.9-3.8a2.5,2.5,0,0,1,2-.9,2.7,2.7,0,0,1,2.1.9,2.8,2.8,0,0,1,0,4.1l-3.8,3.8A2.9,2.9,0,0,1,10.1,40.5Z"/><path class="cls-2" d="M13.9,32.3a1.5,1.5,0,0,1,1,.4,1.4,1.4,0,0,1,0,2.1l-3.8,3.8a1.2,1.2,0,0,1-1,.4,1.4,1.4,0,0,1-1-.4,1.4,1.4,0,0,1,0-2.1l3.8-3.8a2.1,2.1,0,0,1,1-.4m0-3a4.4,4.4,0,0,0-3.1,1.3L7,34.4a4.5,4.5,0,0,0,0,6.3A4.4,4.4,0,0,0,10.1,42a4.8,4.8,0,0,0,3.2-1.3l3.8-3.8a4.6,4.6,0,0,0,1.3-3.1,4.8,4.8,0,0,0-1.3-3.2,4.8,4.8,0,0,0-3.2-1.3Z"/><path class="cls-1" d="M23.8,12.8a3,3,0,0,1-2.9-3V4.4a3,3,0,0,1,5.9,0V9.8A3,3,0,0,1,23.8,12.8Z"/><path class="cls-2" d="M23.8,3a1.5,1.5,0,0,1,1.5,1.4V9.8a1.5,1.5,0,0,1-1.5,1.5,1.5,1.5,0,0,1-1.4-1.5V4.4A1.4,1.4,0,0,1,23.8,3m0-3a4.4,4.4,0,0,0-4.4,4.4V9.8a4.5,4.5,0,1,0,8.9,0V4.4A4.5,4.5,0,0,0,23.8,0Z"/><path class="cls-1" d="M33.8,16.9a2.7,2.7,0,0,1-2.1-.9,2.7,2.7,0,0,1-.9-2.1,2.5,2.5,0,0,1,.9-2L35.5,8a3,3,0,0,1,2.1-.8,3,3,0,0,1,2,.8,2.9,2.9,0,0,1,0,4.2L35.8,16A2.7,2.7,0,0,1,33.8,16.9Z"/><path class="cls-2" d="M37.6,8.7a1.4,1.4,0,0,1,1,.4,1.5,1.5,0,0,1,0,2l-3.8,3.8a1.4,1.4,0,0,1-2.1,0,1.5,1.5,0,0,1,0-2l3.8-3.8a1.5,1.5,0,0,1,1.1-.4m0-3A4.4,4.4,0,0,0,34.4,7l-3.8,3.8a4.5,4.5,0,0,0,0,6.3,4.8,4.8,0,0,0,3.2,1.3,4.6,4.6,0,0,0,3.1-1.3l3.8-3.8a4.5,4.5,0,0,0,0-6.3,4.2,4.2,0,0,0-3.1-1.3Z"/><path class="cls-1" d="M37.6,40.5a2.7,2.7,0,0,1-2.1-.9l-3.8-3.8a2.7,2.7,0,0,1-.9-2,3.1,3.1,0,0,1,3-3,2.7,2.7,0,0,1,2,.9l3.8,3.8a2.8,2.8,0,0,1,0,4.1,2.7,2.7,0,0,1-2,.9Z"/><path class="cls-2" d="M33.8,32.3a2.1,2.1,0,0,1,1,.4l3.8,3.8a1.7,1.7,0,0,1,0,2.1,2.1,2.1,0,0,1-1,.4h0a1.5,1.5,0,0,1-1.1-.4l-3.8-3.8a1.7,1.7,0,0,1,0-2.1,2.1,2.1,0,0,1,1.1-.4m0-3a4.4,4.4,0,0,0-4.5,4.5,4.6,4.6,0,0,0,1.3,3.1l3.8,3.8A4.8,4.8,0,0,0,37.6,42a4.4,4.4,0,0,0,3.1-1.3A4.6,4.6,0,0,0,42,37.6a4.8,4.8,0,0,0-1.3-3.2l-3.8-3.8a4.6,4.6,0,0,0-3.1-1.3Z"/><path class="cls-1" d="M37.9,26.8a3,3,0,1,1,0-5.9h5.3a3,3,0,1,1,0,5.9Z"/><path class="cls-2" d="M43.2,22.4a1.5,1.5,0,0,1,1.5,1.4,1.5,1.5,0,0,1-1.5,1.5H37.9a1.5,1.5,0,0,1-1.5-1.5,1.5,1.5,0,0,1,1.5-1.4h5.3m0-3H37.9a4.5,4.5,0,1,0,0,8.9h5.3a4.5,4.5,0,1,0,0-8.9Z"/><path class="cls-1" d="M23.8,46.2a2.9,2.9,0,0,1-2.9-3V37.9a3,3,0,1,1,5.9,0v5.3A2.9,2.9,0,0,1,23.8,46.2Z"/><path class="cls-2" d="M23.8,36.4a1.5,1.5,0,0,1,1.5,1.5v5.3a1.5,1.5,0,0,1-1.5,1.5,1.5,1.5,0,0,1-1.4-1.5V37.9a1.5,1.5,0,0,1,1.4-1.5m0-3a4.5,4.5,0,0,0-4.4,4.5v5.3a4.5,4.5,0,1,0,8.9,0V37.9a4.5,4.5,0,0,0-4.5-4.5Z"/></g></g></svg>',symbol_11:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43.4 43.4"><defs><style>.cls-1{fill:#6e7a9c;}.cls-2{fill:#fbfbfb;}</style></defs><title> 22</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M23.2,41.9a18.5,18.5,0,0,1-13-5.2,17,17,0,0,1-3.3-4.2,1.4,1.4,0,0,1,.2-1.7,1.6,1.6,0,0,1,1.1-.5h.6a15.6,15.6,0,0,0,6.4,1.3A16.5,16.5,0,0,0,31.7,15.2a15.6,15.6,0,0,0-1.3-6.4,1.5,1.5,0,0,1,.4-1.7,1.3,1.3,0,0,1,1-.4,1,1,0,0,1,.7.2,17,17,0,0,1,4.2,3.3,18.5,18.5,0,0,1,5.2,13,20.2,20.2,0,0,1-1.4,7.3,18.4,18.4,0,0,1-4.1,5.9,18.4,18.4,0,0,1-5.9,4.1A20.2,20.2,0,0,1,23.2,41.9Z"/><path class="cls-2" d="M31.8,8.2a18.5,18.5,0,0,1,3.9,3,17.7,17.7,0,0,1,4.7,12,17,17,0,0,1-1.3,6.7,18.4,18.4,0,0,1-3.7,5.5,18.4,18.4,0,0,1-5.5,3.7,17,17,0,0,1-6.7,1.3,17.7,17.7,0,0,1-12-4.7,18.5,18.5,0,0,1-3-3.9,18.6,18.6,0,0,0,7,1.4,17.9,17.9,0,0,0,18-18,18.6,18.6,0,0,0-1.4-7m0-3a3.1,3.1,0,0,0-2,.7A3.1,3.1,0,0,0,29,9.4a14.3,14.3,0,0,1,1.2,5.8,15,15,0,0,1-15,15A14.3,14.3,0,0,1,9.4,29l-1.2-.2a2.9,2.9,0,0,0-2.3,1,3,3,0,0,0-.3,3.5,15.5,15.5,0,0,0,3.6,4.5,20,20,0,0,0,14,5.6,19.6,19.6,0,0,0,7.9-1.6A20,20,0,0,0,41.8,31.1a19.6,19.6,0,0,0,1.6-7.9,20,20,0,0,0-5.6-14,15.5,15.5,0,0,0-4.5-3.6,2.8,2.8,0,0,0-1.5-.4Z"/><path class="cls-1" d="M8.8,16a2.9,2.9,0,0,1-3-2.9V11.7H4.4a3,3,0,0,1,0-5.9H5.8V4.4a3,3,0,0,1,5.9,0V5.8h1.4a3,3,0,0,1,0,5.9H11.7v1.4A2.9,2.9,0,0,1,8.8,16Z"/><path class="cls-2" d="M8.8,3a1.4,1.4,0,0,1,1.4,1.4V7.3h2.9a1.5,1.5,0,0,1,1.4,1.5,1.4,1.4,0,0,1-1.4,1.4H10.2v2.9a1.4,1.4,0,0,1-1.4,1.4,1.5,1.5,0,0,1-1.5-1.4V10.2H4.4A1.4,1.4,0,0,1,3,8.8,1.5,1.5,0,0,1,4.4,7.3H7.3V4.4A1.5,1.5,0,0,1,8.8,3m0-3A4.5,4.5,0,0,0,4.3,4.3,4.5,4.5,0,0,0,0,8.8a4.4,4.4,0,0,0,4.3,4.4,4.5,4.5,0,0,0,4.5,4.3,4.4,4.4,0,0,0,4.4-4.3,4.4,4.4,0,0,0,4.3-4.4,4.5,4.5,0,0,0-4.3-4.5A4.4,4.4,0,0,0,8.8,0Z"/><path class="cls-1" d="M16.2,26.1a2.9,2.9,0,0,1-2.9-2.9,2.9,2.9,0,0,1-2.9-2.9,3.1,3.1,0,0,1,2.9-3,2.8,2.8,0,0,1,2.9-2.8,3,3,0,0,1,3,2.8,3.1,3.1,0,0,1,2.9,3,2.9,2.9,0,0,1-2.9,2.9A3.1,3.1,0,0,1,16.2,26.1Z"/><path class="cls-2" d="M16.2,16a1.5,1.5,0,0,1,1.5,1.4v1.4h1.4a1.5,1.5,0,0,1,1.5,1.5,1.5,1.5,0,0,1-1.5,1.4H17.7v1.5a1.5,1.5,0,0,1-1.5,1.4,1.4,1.4,0,0,1-1.4-1.4V21.7H13.4a1.5,1.5,0,0,1-1.5-1.4,1.5,1.5,0,0,1,1.5-1.5h1.4V17.4A1.4,1.4,0,0,1,16.2,16m0-3A4.6,4.6,0,0,0,12,16a4.5,4.5,0,0,0-3.1,4.3A4.4,4.4,0,0,0,12,24.5a4.5,4.5,0,0,0,8.5,0,4.4,4.4,0,0,0,3.1-4.2A4.5,4.5,0,0,0,20.5,16a4.6,4.6,0,0,0-4.3-3Z"/></g></g></svg>',symbol_12:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48.7 39.7"><defs><style>.cls-1{fill:#1ecc56;}.cls-2{fill:#fbfbfb;}</style></defs><title> 21</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M12.3,30.1a5.5,5.5,0,0,1-1.8-.2,6.8,6.8,0,0,1-4.2-3.2L2,19.1a3.3,3.3,0,0,1,.3-3.8A3,3,0,0,1,4.9,14H6l5.1,1.6.6-.4L3.3,10.8A3.3,3.3,0,0,1,1.5,7.9,3.4,3.4,0,0,1,3.2,4.8L7.4,2.4a3.4,3.4,0,0,1,1.7-.5H10L24,5.6,26.1,4a12.2,12.2,0,0,1,7.3-2.5,11.2,11.2,0,0,1,4.8,1,9,9,0,0,1,4.7,5.1,7.5,7.5,0,0,1,.3,2A6.4,6.4,0,0,1,40,15.2l-24.3,14A6.7,6.7,0,0,1,12.3,30.1Z"/><path class="cls-2" d="M33.4,3a10.6,10.6,0,0,1,4.2.9,6.9,6.9,0,0,1,3.8,4.2,4,4,0,0,1,.3,1.5,4.8,4.8,0,0,1-2.5,4.3L15,27.9a5.2,5.2,0,0,1-2.7.7H10.9a5.4,5.4,0,0,1-3.3-2.6L3.3,18.4a2,2,0,0,1,.1-2.2,1.9,1.9,0,0,1,1.5-.7h.6l5.9,1.8,3-2.4L4,9.5A1.9,1.9,0,0,1,3,7.8,2.1,2.1,0,0,1,4,6.1L8.2,3.7a1.6,1.6,0,0,1,.9-.3h.5L24.4,7.3l2.7-2.1A9.7,9.7,0,0,1,33.4,3m0-3a13.3,13.3,0,0,0-8.2,2.8L23.7,4,10.4.6,9.1.4a5.1,5.1,0,0,0-2.4.7L2.5,3.5A5,5,0,0,0,0,7.9a4.7,4.7,0,0,0,2.6,4.2l1,.6a4.2,4.2,0,0,0-2.5,1.6,4.8,4.8,0,0,0-.4,5.6L5,27.4a8.5,8.5,0,0,0,5.1,4l2.2.2a7.8,7.8,0,0,0,4.2-1.1l24.2-14a7.9,7.9,0,0,0,4-6.9,7.7,7.7,0,0,0-.4-2.5,10,10,0,0,0-5.5-5.9A12.5,12.5,0,0,0,33.4,0Z"/><path class="cls-1" d="M15.8,38.2a3.8,3.8,0,0,1-3.2-1.8,3.6,3.6,0,0,1-.3-2.7A3.3,3.3,0,0,1,14,31.4L41.7,15.3a4.1,4.1,0,0,1,1.9-.5,4.4,4.4,0,0,1,2.2.7,3.7,3.7,0,0,1,1.3,3.8l-1.5,6.3a3.6,3.6,0,0,1-3.5,2.7h-.9a3.5,3.5,0,0,1-2.3-1.6,4.2,4.2,0,0,1-.4-1L17.6,37.7A2.9,2.9,0,0,1,15.8,38.2Z"/><path class="cls-2" d="M43.6,16.3a3.3,3.3,0,0,1,1.3.4,2.4,2.4,0,0,1,.8,2.3l-1.6,6.2a2,2,0,0,1-2,1.6h-.6A2.2,2.2,0,0,1,40,24.2l.3-1.4L16.9,36.4a2.3,2.3,0,0,1-1.1.3,2.4,2.4,0,0,1-1.9-1,2.2,2.2,0,0,1,.8-3L42.5,16.6a2,2,0,0,1,1.1-.3m0-3A5.9,5.9,0,0,0,41,14L13.2,30.1a5.5,5.5,0,0,0-2.4,3.2,5.4,5.4,0,0,0,.6,3.9,5,5,0,0,0,4.4,2.5,4.8,4.8,0,0,0,2.6-.7L37.9,27.7a4.9,4.9,0,0,0,3,2h1.2a5.2,5.2,0,0,0,5-3.9l1.5-6.2a5.2,5.2,0,0,0-2-5.4,5.4,5.4,0,0,0-3-1Z"/></g></g></svg>',symbol_13:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45.5 45.5"><defs><style>.cls-1{fill:#12b6e8;}.cls-2{fill:#fbfbfb;}</style></defs><title> 20</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M16.9,44a2.9,2.9,0,0,1-2-.9h-.1L9.4,36.1,2.5,30.7H2.4a2.7,2.7,0,0,1-.9-2,4.1,4.1,0,0,1,1.4-2.7H3a3.4,3.4,0,0,1,2.4-1.1l1.1.2,5.3,1.3,4.7-4.8L7.8,14.3a.1.1,0,0,1-.1-.1c-2.6-2.5-2.6-5.1,0-7.6a5.1,5.1,0,0,1,3.7-1.7,7.8,7.8,0,0,1,2.1.4h.3l13.7,5.1,7.2-7.2A6.2,6.2,0,0,1,39,1.5a5.1,5.1,0,0,1,3.6,1.4c2.2,2.3,1.6,5.9-.4,7.9L35,18l5.1,13.7v.2h.1a5.4,5.4,0,0,1-1.4,5.9,5.2,5.2,0,0,1-3.7,1.8h0a5.4,5.4,0,0,1-3.8-1.8v-.2L24,29l-4.7,4.7L20.5,39v.2a3,3,0,0,1-.8,3.2A4.7,4.7,0,0,1,16.9,44Z"/><path class="cls-2" d="M39,3a3.5,3.5,0,0,1,2.5,1c1.6,1.5,1.2,4.2-.4,5.7l-7.8,7.9,5.4,14.6c.4,1.4.8,2.9-.9,4.6a4.1,4.1,0,0,1-2.7,1.4,3.9,3.9,0,0,1-2.8-1.4l-8.2-10-6.4,6.5,1.3,6c.3,1,.4,1.4-.3,2.1s-1.3,1.1-1.8,1.1a1.2,1.2,0,0,1-.9-.4L10.5,35,3.4,29.5c-1.2-1.2.5-2.4.8-2.7a1.4,1.4,0,0,1,1.2-.6h.7l6.1,1.5,6.5-6.5-10-8.2c-2.7-2.7-.9-4.5,0-5.4a3.6,3.6,0,0,1,2.7-1.3,7.2,7.2,0,0,1,1.9.4l14.6,5.4,7.8-7.8A4.7,4.7,0,0,1,39,3m0-3a7.7,7.7,0,0,0-5.4,2.2L27.1,8.7,14.3,3.9h-.5a8,8,0,0,0-2.4-.4A6.4,6.4,0,0,0,6.6,5.6c-4.4,4.3-1.5,8.2,0,9.6l.2.3,7.5,6-3,3L6.9,23.4l-1.5-.2a4.9,4.9,0,0,0-3.5,1.5h0A5.4,5.4,0,0,0,0,28.6a3.9,3.9,0,0,0,1.3,3l.3.3,6.7,5.2,5.3,6.8.3.3a3.9,3.9,0,0,0,3,1.3,5.8,5.8,0,0,0,3.9-2h0A4.3,4.3,0,0,0,22,38.9v-.2h0l-1-4.4,2.9-2.9L30,38.7l.2.2a6.6,6.6,0,0,0,4.9,2.3,6.8,6.8,0,0,0,4.8-2.3,6.6,6.6,0,0,0,1.7-7.2v-.2c0-.1-.1-.2-.1-.3L36.8,18.4l6.4-6.5c2.9-2.9,3.1-7.4.4-10A6.4,6.4,0,0,0,39,0Z"/></g></g></svg>',symbol_14:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><defs><style>.cls-1{fill:#f43601;}.cls-2{fill:#fbfbfb;}</style></defs><title> 19</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M22.5,43.5A21,21,0,0,1,7.6,37.3a21.2,21.2,0,0,1,0-29.7A21.3,21.3,0,0,1,22.5,1.5a21,21,0,0,1,21,21,20.6,20.6,0,0,1-6.2,14.8,20.6,20.6,0,0,1-14.8,6.2Zm-11.9-28A13.7,13.7,0,0,0,22.5,36.3a13.2,13.2,0,0,0,7-1.9Zm23.8,14a14.1,14.1,0,0,0-2.1-16.8,13.9,13.9,0,0,0-9.8-4,13.2,13.2,0,0,0-7,1.9Z"/><path class="cls-2" d="M22.5,3A19.5,19.5,0,0,1,36.3,8.7a19.6,19.6,0,0,1,0,27.6A19.5,19.5,0,1,1,22.5,3M34.6,31.8A15.3,15.3,0,0,0,22.5,7.2a15.1,15.1,0,0,0-9.4,3.2L34.6,31.8m-12.1,6a14.6,14.6,0,0,0,9.3-3.2L10.4,13.2A15.2,15.2,0,0,0,22.5,37.8M22.5,0A22.1,22.1,0,0,0,6.6,6.6a22.5,22.5,0,1,0,31.8,0A22.2,22.2,0,0,0,22.5,0ZM18,11a13.3,13.3,0,0,1,4.5-.8A12.3,12.3,0,0,1,34,26.9L18,11Zm4.5,23.8a12.3,12.3,0,0,1-8.7-3.6A12.5,12.5,0,0,1,11,18L26.9,34a13.2,13.2,0,0,1-4.4.8Z"/></g></g></svg>',symbol_15:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.6 40.5"><defs><style>.cls-1{fill:#12b6e8;}.cls-2{fill:#fbfbfb;}</style></defs><title> 18</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M17.5,39,16,38.8a8.5,8.5,0,0,1-5.5-3.7c-.7-.9-.8-1-1.1-1H9.2c-.7,0-1.3.4-2,1.4l-.2.3A3,3,0,0,1,4.6,37a3.1,3.1,0,0,1-1.9-.6,3.1,3.1,0,0,1-.6-4.3h0c2.3-3.5,5.1-4.2,7.1-4.2h.9c2.9.3,4.3,2.2,5.3,3.4s1.1,1.3,1.7,1.4h.4A9.3,9.3,0,0,0,21,31.7a6.2,6.2,0,0,0,2.3-1.6,6.5,6.5,0,0,1,5.2-2.2,6.2,6.2,0,0,1,5,2.7A3.4,3.4,0,0,0,35,32a6.6,6.6,0,0,0,2.5.4,3.8,3.8,0,0,0,2.2-.5c.4-.2.5-.4.8-.8a9.4,9.4,0,0,1,2.9-2.3,9.1,9.1,0,0,1,4.1-.9l2.6.3A2.9,2.9,0,0,1,52,29.5a3.2,3.2,0,0,1,.5,2.3,3.1,3.1,0,0,1-3,2.4h-.7L47.5,34a2.9,2.9,0,0,0-1.4.3,1.8,1.8,0,0,0-.8.7,8.7,8.7,0,0,1-2.4,2.1,9.7,9.7,0,0,1-5.4,1.5,12.5,12.5,0,0,1-4.8-1,8.5,8.5,0,0,1-4.1-3.3c-.1,0-.2-.2-.3-.3H28l-.4.4a12.1,12.1,0,0,1-4.1,2.8A14,14,0,0,1,17.6,39Z"/><path class="cls-2" d="M47.5,29.4l2.3.2A1.7,1.7,0,0,1,51,31.5a1.6,1.6,0,0,1-1.5,1.2h-.4l-1.6-.2a6.5,6.5,0,0,0-2.1.4,5,5,0,0,0-1.3,1.2,9.3,9.3,0,0,1-2,1.8,9.6,9.6,0,0,1-4.6,1.2,13.7,13.7,0,0,1-4.3-.8,7.2,7.2,0,0,1-3.4-2.9c-.7-.8-.8-.9-1.3-.9a1.9,1.9,0,0,0-1.9.9,10.1,10.1,0,0,1-3.7,2.5,12.6,12.6,0,0,1-5.3,1.6H16.3a7.2,7.2,0,0,1-4.6-3.2c-.8-1-1.2-1.5-2.1-1.6H9.2a3.9,3.9,0,0,0-3.2,2c-.1.2-.2.2-.2.3a1.6,1.6,0,0,1-1.2.6,1.7,1.7,0,0,1-1-.3A1.6,1.6,0,0,1,3.3,33h.1a6.8,6.8,0,0,1,5.8-3.5H10c2.2.2,3.3,1.7,4.2,2.8s1.4,1.8,2.6,2h.7a9.5,9.5,0,0,0,4.1-1.2,8.1,8.1,0,0,0,2.7-1.9,5,5,0,0,1,4.2-1.8,4.5,4.5,0,0,1,3.8,2.1,4.9,4.9,0,0,0,2.1,1.9,10.1,10.1,0,0,0,3.1.5,6.3,6.3,0,0,0,3-.7,6.5,6.5,0,0,0,1.2-1.1,6.3,6.3,0,0,1,2.4-2,7.4,7.4,0,0,1,3.4-.7m0-3a10.4,10.4,0,0,0-4.7,1,10.6,10.6,0,0,0-3.4,2.7c-.3.4-.4.5-.5.5a2.6,2.6,0,0,1-1.4.3,5.4,5.4,0,0,1-1.9-.3c-.4-.2-.5-.3-.9-.9a7.5,7.5,0,0,0-6.2-3.3,8.1,8.1,0,0,0-6.3,2.7,5.6,5.6,0,0,1-1.8,1.3,8.5,8.5,0,0,1-2.9.9h-.2l-.7-.8a8.9,8.9,0,0,0-6.3-4H9.2A9.9,9.9,0,0,0,.9,31.2h0a4.5,4.5,0,0,0,.9,6.3,4.7,4.7,0,0,0,2.8.9,4.7,4.7,0,0,0,3.6-1.8l.3-.4a1.5,1.5,0,0,1,.5-.6c.1.1.3.3.3.4a10.5,10.5,0,0,0,6.4,4.2l1.8.2a16.5,16.5,0,0,0,6.7-1.8,13.7,13.7,0,0,0,3.9-2.6,10.3,10.3,0,0,0,4,2.9,13.7,13.7,0,0,0,5.4,1.1,11.8,11.8,0,0,0,6.2-1.7A11.3,11.3,0,0,0,46.4,36c.1-.1.3-.3.3-.4h2.8a4.5,4.5,0,0,0,4.4-3.5,4.4,4.4,0,0,0-.6-3.5,4.7,4.7,0,0,0-2.8-2l-3-.3Z"/><path class="cls-1" d="M38,33c-2,0-4.2-1-6.7-3.1h-.2c-1.5-1.4-2.5-2.2-3.2-2.2a1.9,1.9,0,0,0-1.2.4,3.8,3.8,0,0,0-.9.9c-1.2,1.3-3,3.3-6.3,3.3H18.4c-2.2-.3-5-1.7-8.3-4.3a4,4,0,0,1-1.4-3.4,3.6,3.6,0,0,1,2-3l11.4-6.2-7.4-2.7a5.9,5.9,0,0,1-3.2-2.8,5.7,5.7,0,0,1,6.9-7.9L29.7,5.5a4.6,4.6,0,0,1,2.9,2.4l3.6,6.7A9,9,0,1,1,44.1,28H42.9A4.9,4.9,0,0,1,41,32.1a5.3,5.3,0,0,1-3,.9Z"/><path class="cls-2" d="M16.6,3l1.3.2L29.3,6.9a3.4,3.4,0,0,1,2,1.7l5.3,9.8a7.5,7.5,0,1,1,7.5,8.1,7.9,7.9,0,0,1-3.7-1l.6,1.1a3.2,3.2,0,0,1-.9,4.2,3.8,3.8,0,0,1-2.1.7h0c-1.6,0-3.5-.9-5.8-2.7h-.1c-1.7-1.7-2.9-2.6-4.2-2.6a3.7,3.7,0,0,0-2.1.7,11.4,11.4,0,0,0-1.1,1.1c-1.1,1.2-2.6,2.8-5.2,2.8h-.9c-2.4-.3-5.4-2.3-7.6-4a2.2,2.2,0,0,1-.8-2,2.2,2.2,0,0,1,1.2-1.9l13.7-7.4a3.5,3.5,0,0,0-1.7-1.2l-8.2-3A4.5,4.5,0,0,1,12.8,9a5,5,0,0,1-.2-3.2,4.2,4.2,0,0,1,4-2.8m0-3A7.2,7.2,0,0,0,9.8,4.9a6.8,6.8,0,0,0,.4,5.4,6.8,6.8,0,0,0,4,3.6l4.3,1.6L10,20.1a5,5,0,0,0-2.8,4.2,5.3,5.3,0,0,0,2,4.7c3.5,2.7,6.6,4.3,9,4.6h1.3c3.9,0,6.2-2.5,7.4-3.8l.7-.7h.3a11.6,11.6,0,0,1,2.2,1.8h.2c2.9,2.3,5.4,3.4,7.7,3.4a6.4,6.4,0,0,0,3.8-1.2,6.1,6.1,0,0,0,2.5-3.8,10.6,10.6,0,1,0-7.9-17.7L33.9,7.2a6.3,6.3,0,0,0-3.7-3.1L18.8.4A5.7,5.7,0,0,0,16.6,0Z"/></g></g></svg>',symbol_16:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.4 44.4"><defs><style>.cls-1{fill:#fbb703;}.cls-2{fill:#fbfbfb;}.cls-3{fill:#fff;}</style></defs><title> 2</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M22.2,43A20.8,20.8,0,1,1,43,22.2,20.8,20.8,0,0,1,22.2,43Z"/><path class="cls-2" d="M22.2,2.7A19.5,19.5,0,1,1,2.7,22.2,19.4,19.4,0,0,1,22.2,2.7m0-2.7A22.2,22.2,0,1,0,44.4,22.2,22.3,22.3,0,0,0,22.2,0Z"/><path class="cls-3" d="M22.5,29.3a2,2,0,0,0,2-2L25.8,9.7c0-1.5-1.7-2.8-3.3-2.8s-3.4,1.2-3.4,2.9l1.4,17.5A2,2,0,0,0,22.5,29.3Z"/><path class="cls-3" d="M22.5,32.8a2.3,2.3,0,0,0-2.3,2.3,2.3,2.3,0,0,0,2.3,2.4,2.4,2.4,0,0,0,2.4-2.4A2.3,2.3,0,0,0,22.5,32.8Z"/></g></g></svg>',symbol_17:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43.7 50.2"><defs><style>.cls-1{fill:#ff980a;}.cls-2{fill:#fbfbfb;}</style></defs><title> 16</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M18.2,41.8a2.8,2.8,0,0,1-1.7-.7,2.4,2.4,0,0,1-.7-1.7V35.3a12,12,0,1,1,12.4,0v4.1a2.4,2.4,0,0,1-2.4,2.4Z"/><path class="cls-2" d="M22,14.5A10.5,10.5,0,0,1,32.5,25a10.6,10.6,0,0,1-5.8,9.4v5a.9.9,0,0,1-.9.9H18.2a.7.7,0,0,1-.6-.3.6.6,0,0,1-.3-.6v-5A10.6,10.6,0,0,1,11.5,25,10.5,10.5,0,0,1,22,14.5m0-3a13.5,13.5,0,0,0-7.7,24.6v3.3a3.8,3.8,0,0,0,1.2,2.8,3.9,3.9,0,0,0,2.7,1.1h7.6a3.9,3.9,0,0,0,3.9-3.9V36.1A13.5,13.5,0,0,0,22,11.5Z"/><path class="cls-1" d="M18.2,48.7a2.8,2.8,0,0,1-1.7-.7,2.8,2.8,0,0,1-.7-1.7V43a2.8,2.8,0,0,1,.7-1.7,2.8,2.8,0,0,1,1.7-.7h7.6a2.6,2.6,0,0,1,1.7.7,2.8,2.8,0,0,1,.7,1.7v3.3a2.8,2.8,0,0,1-.7,1.7,2.6,2.6,0,0,1-1.7.7Z"/><path class="cls-2" d="M25.8,42.1a.7.7,0,0,1,.6.3.9.9,0,0,1,.3.6v3.3a1.1,1.1,0,0,1-.9.9H18.2a1.1,1.1,0,0,1-.9-.9V43a.9.9,0,0,1,.3-.6.7.7,0,0,1,.6-.3h7.6m0-3H18.2a3.6,3.6,0,0,0-2.7,1.2A3.6,3.6,0,0,0,14.3,43v3.3A3.6,3.6,0,0,0,15.5,49a3.6,3.6,0,0,0,2.7,1.2h7.6A3.4,3.4,0,0,0,28.5,49a3.6,3.6,0,0,0,1.2-2.7V43a3.6,3.6,0,0,0-1.2-2.7,3.4,3.4,0,0,0-2.7-1.2Z"/><path class="cls-1" d="M6.5,17.4a2.7,2.7,0,0,1-1.9-.8L2.3,14.3a2.5,2.5,0,0,1,0-3.7,2.5,2.5,0,0,1,1.8-.8,2.7,2.7,0,0,1,1.9.8l2.3,2.3a2.6,2.6,0,0,1,.6,2.9,2.6,2.6,0,0,1-2.4,1.6Z"/><path class="cls-2" d="M4.1,11.3a1.1,1.1,0,0,1,.8.3L7.3,14a1.1,1.1,0,0,1,.2,1.2,1.1,1.1,0,0,1-1,.7h0a1.1,1.1,0,0,1-.8-.3L3.3,13.2a1.2,1.2,0,0,1,0-1.6,1.3,1.3,0,0,1,.8-.3m0-3A4,4,0,0,0,1.2,9.5a4.2,4.2,0,0,0,0,5.9l2.4,2.3a3.8,3.8,0,0,0,2.9,1.2,4.1,4.1,0,0,0,3.8-2.5,4.1,4.1,0,0,0-.9-4.5L7.1,9.5a4.2,4.2,0,0,0-3-1.2Z"/><path class="cls-1" d="M13.4,11.6A2.5,2.5,0,0,1,11,10L9.7,6.9A2.7,2.7,0,0,1,10,4.3a2.8,2.8,0,0,1,2.1-1h.4a2.9,2.9,0,0,1,2.1,1.6L15.8,8a2.5,2.5,0,0,1-.2,2.5,2.7,2.7,0,0,1-2.2,1.1Z"/><path class="cls-2" d="M12.1,4.8h.2a1.3,1.3,0,0,1,.9.7l1.2,3.1a.9.9,0,0,1-.1,1,1.1,1.1,0,0,1-.9.5h0a1.1,1.1,0,0,1-1.1-.7l-1.2-3a1.3,1.3,0,0,1,.1-1.2,1.5,1.5,0,0,1,.9-.4m0-3A4.2,4.2,0,0,0,8.8,3.4a4.1,4.1,0,0,0-.5,4.1l1.3,3.1a4.1,4.1,0,0,0,7.2.7,4.2,4.2,0,0,0,.4-3.9L15.9,4.3a4.1,4.1,0,0,0-3.2-2.5Z"/><path class="cls-1" d="M21.9,10.1a2.7,2.7,0,0,1-2.7-2.6V4.1a2.4,2.4,0,0,1,1.4-2.2,2,2,0,0,1,1.3-.4,2.2,2.2,0,0,1,1.3.4,2.5,2.5,0,0,1,1.3,2.2V7.5a2.5,2.5,0,0,1-.8,1.8A2.5,2.5,0,0,1,21.9,10.1Z"/><path class="cls-2" d="M21.9,3l.5.2a1,1,0,0,1,.6.9V7.5a1.3,1.3,0,0,1-.3.8,1.2,1.2,0,0,1-2-.8V4.1a1.1,1.1,0,0,1,.6-.9l.6-.2m0-3a3.9,3.9,0,0,0-2.1.6,4,4,0,0,0-2.1,3.5V7.5a4.2,4.2,0,0,0,4.2,4.1A4.1,4.1,0,0,0,26,7.5V4.1A4,4,0,0,0,23.9.6a3.6,3.6,0,0,0-2-.6Z"/><path class="cls-2" d="M24.3,28.2c-1.2,0-1.8-1.2-2.1-1.9L22,26l-.2.3c-.3.7-.9,1.9-2.1,1.9s-1.8-1.2-2.1-1.9a3.3,3.3,0,0,1-.3-.6,1.1,1.1,0,1,1,.1-2.1c1.2,0,1.8,1.1,2.1,1.8s.1.3.2.4.1-.2.2-.4.8-1.8,2.1-1.8,1.8,1.1,2.1,1.8.1.3.2.4.1-.3.2-.4.9-1.8,2.1-1.8a1.1,1.1,0,1,1,.1,2.1,1.7,1.7,0,0,1-.3.6C26.1,27,25.6,28.2,24.3,28.2Z"/><path class="cls-2" d="M17.4,23.8h0c1.1,0,1.6,1,1.9,1.7l.4.7.4-.7c.3-.7.8-1.7,1.9-1.7s1.6,1,1.9,1.7l.4.7.4-.7c.3-.7.8-1.7,1.9-1.7h0a.9.9,0,0,1,.9.8.9.9,0,0,1-.9.9l-.4.7c-.3.7-.8,1.8-1.9,1.8s-1.6-1.1-1.9-1.8l-.4-.6-.4.6c-.3.7-.8,1.8-1.9,1.8s-1.6-1.1-1.9-1.8l-.4-.7a.9.9,0,0,1-.9-.9.9.9,0,0,1,.9-.8m9.2-.4h0a2.6,2.6,0,0,0-2.3,1.9A2.6,2.6,0,0,0,22,23.4a2.6,2.6,0,0,0-2.3,1.9,2.6,2.6,0,0,0-2.3-1.9,1.2,1.2,0,0,0-1.3,1.2,1.3,1.3,0,0,0,1,1.3l.3.5a2.6,2.6,0,0,0,2.3,2,2.6,2.6,0,0,0,2.3-2,2.6,2.6,0,0,0,2.3,2,2.6,2.6,0,0,0,2.3-2l.3-.5a1.3,1.3,0,0,0,1-1.3,1.2,1.2,0,0,0-1.3-1.2Z"/><path class="cls-1" d="M37.3,17.4a2.6,2.6,0,0,1-1.9-4.5l2.3-2.3a2.7,2.7,0,0,1,3.8,0,2.4,2.4,0,0,1,.7,1.8,2.6,2.6,0,0,1-.7,1.9l-2.4,2.3a2.7,2.7,0,0,1-1.8.8Z"/><path class="cls-2" d="M39.6,11.3a1.1,1.1,0,0,1,.8.3,1.2,1.2,0,0,1,0,1.6l-2.3,2.4a1.3,1.3,0,0,1-.8.3h0a1.2,1.2,0,0,1-1.1-.7,1.1,1.1,0,0,1,.2-1.2l2.4-2.4a1.1,1.1,0,0,1,.8-.3m0-3a4,4,0,0,0-2.9,1.2l-2.4,2.4a4.1,4.1,0,0,0-.9,4.5,4.3,4.3,0,0,0,3.9,2.5,4,4,0,0,0,2.9-1.2l2.3-2.3a4.2,4.2,0,0,0,1.2-3,4.1,4.1,0,0,0-4.1-4.1Z"/><path class="cls-1" d="M30.4,11.6a2.7,2.7,0,0,1-2.2-1.1A2.8,2.8,0,0,1,28,8l1.3-3.1a2.5,2.5,0,0,1,2-1.6h.4a2.8,2.8,0,0,1,2.1,1,2.5,2.5,0,0,1,.3,2.6L32.9,10a2.6,2.6,0,0,1-2.5,1.6Z"/><path class="cls-2" d="M31.7,4.8a1.5,1.5,0,0,1,.9.4,1.3,1.3,0,0,1,.1,1.2l-1.2,3a1.1,1.1,0,0,1-1.1.7h0a1.1,1.1,0,0,1-.9-.5.9.9,0,0,1-.1-1l1.2-3.1a1.3,1.3,0,0,1,.9-.7h.2m0-3h-.5a4.1,4.1,0,0,0-3.3,2.6l-1.3,3a4.1,4.1,0,0,0,3.8,5.7,4.1,4.1,0,0,0,3.8-2.5l1.3-3.1A4.1,4.1,0,0,0,35,3.4a4.2,4.2,0,0,0-3.3-1.6Z"/></g></g></svg>',symbol_18:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.9 41.7"><defs><style>.cls-1,.cls-3{fill:#1ecc56;}.cls-2{fill:#fbfbfb;}.cls-3{stroke:#fbfbfb;stroke-linecap:round;stroke-linejoin:round;stroke-width:2.3px;}</style></defs><title> 7</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M22.5,40.2a3.2,3.2,0,0,1-2.3-.9l-5.5-5.6H6.2a4.7,4.7,0,0,1-3.3-1.4,4.8,4.8,0,0,1-1.4-3.4V6.2A4.7,4.7,0,0,1,6.3,1.5H38.7A4.5,4.5,0,0,1,42,2.9a4.7,4.7,0,0,1,1.4,3.3V29a4.7,4.7,0,0,1-4.7,4.7H30.2l-5.5,5.6A3.1,3.1,0,0,1,22.5,40.2Z"/><path class="cls-2" d="M38.7,3a3.2,3.2,0,0,1,3.2,3.2V28.9a3.2,3.2,0,0,1-3.2,3.3H29.6l-6,6a1.6,1.6,0,0,1-1.1.5,1.7,1.7,0,0,1-1.2-.5l-6-6H6.2A3.2,3.2,0,0,1,3,28.9V6.2A3.2,3.2,0,0,1,6.3,3H38.7m0-3H6.3A6.3,6.3,0,0,0,0,6.2V28.9a6.7,6.7,0,0,0,1.8,4.5,6.7,6.7,0,0,0,4.4,1.8h7.9l5.1,5.1a4.5,4.5,0,0,0,3.3,1.4,4.5,4.5,0,0,0,3.2-1.4l5.2-5.1h7.8a6.3,6.3,0,0,0,6.2-6.3V6.2a6.2,6.2,0,0,0-1.8-4.4A6,6,0,0,0,38.7,0Z"/><path class="cls-3" d="M13.5,20.8a2.4,2.4,0,0,1-2.4-2.4,2.5,2.5,0,0,1,4.9,0,2.4,2.4,0,0,1-2.5,2.4Z"/><path class="cls-3" d="M22.5,20.8A2.4,2.4,0,0,1,20,18.4a2.5,2.5,0,0,1,4.9,0,2.4,2.4,0,0,1-2.4,2.4Z"/><path class="cls-3" d="M31.4,20.8A2.3,2.3,0,0,1,29,18.4,2.4,2.4,0,0,1,31.4,16a2.4,2.4,0,0,1,2.4,2.4,2.4,2.4,0,0,1-2.4,2.4Z"/></g></g></svg>',symbol_19:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42.4 42.4"><defs><style>.cls-1{fill:#6e7a9c;}.cls-2{fill:#fbfbfb;}</style></defs><title> 6</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M21.2,40.9A19.7,19.7,0,1,1,40.9,21.2a28.3,28.3,0,0,1-.2,2.9,14.2,14.2,0,0,1-.4,2v.4l-.4,1.3V28a19.5,19.5,0,0,1-2.8,5.1l.9.5A3,3,0,0,1,39,36.2a2.9,2.9,0,0,1-1.6,2.4,2.7,2.7,0,0,1-1.2.3h0a3.4,3.4,0,0,1-1.7-.5,1.7,1.7,0,0,0-1.3-.4,9,9,0,0,0-3.4.9l-.4.2-.6.3-.7.3-.5.2H27l-1,.3h-.3l-1.5.3h-.1l-2.9.2Zm0-14.1A1.2,1.2,0,0,0,20,28a1.2,1.2,0,1,0,2.4,0A1.2,1.2,0,0,0,21.2,26.8ZM28,20a1.2,1.2,0,1,0,0,2.4A1.2,1.2,0,1,0,28,20ZM14.4,20a1.2,1.2,0,1,0,0,2.4,1.2,1.2,0,1,0,0-2.4Zm6.8-6.9A1.2,1.2,0,0,0,20,14.4a1.2,1.2,0,1,0,2.4,0A1.2,1.2,0,0,0,21.2,13.1Z"/><path class="cls-2" d="M21.2,3A18.1,18.1,0,0,1,39.4,21.2a24.5,24.5,0,0,1-.2,2.7,11.6,11.6,0,0,1-.4,1.8h0v.2a5.6,5.6,0,0,1-.4,1.2v.2a20.3,20.3,0,0,1-4,6.4,4.9,4.9,0,0,1,2.6,1,1.1,1.1,0,0,1,.6,1.2,1.2,1.2,0,0,1-.7,1.1l-.6.2a1.1,1.1,0,0,1-.8-.3,3.8,3.8,0,0,0-2.2-.6,11.7,11.7,0,0,0-3.9,1H28.1l-.4.2H25.3l-1.3.3h-.1l-2.7.2h0A18.2,18.2,0,0,1,21.2,3m0,14.1a2.7,2.7,0,0,0,2.7-2.7,2.7,2.7,0,1,0-5.4,0,2.7,2.7,0,0,0,2.7,2.7M28,23.9a2.7,2.7,0,1,0,0-5.4,2.7,2.7,0,1,0,0,5.4m-13.6,0a2.7,2.7,0,1,0,0-5.4,2.7,2.7,0,1,0,0,5.4m6.8,6.9A2.8,2.8,0,0,0,23.9,28a2.7,2.7,0,1,0-5.4,0,2.8,2.8,0,0,0,2.7,2.8M21.2,0a21.2,21.2,0,0,0,0,42.4l3.1-.2h.2l1.5-.3h2.7l.6-.2h.3l.3-.2h.6a8.3,8.3,0,0,1,2.7-.8h.5a4.4,4.4,0,0,0,2.5.8,4.5,4.5,0,0,0,1.9-.5,4.4,4.4,0,0,0,.9-7.2,16.5,16.5,0,0,0,2.1-4.2h.1c.1-.5.3-1,.4-1.5v-.3h0a17.4,17.4,0,0,0,.5-2.2c.1-1,.2-2.1.2-3.1A21.2,21.2,0,0,0,21.2,0Z"/></g></g></svg>',symbol_20:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33.7 50"><defs><style>.cls-1{fill:#8e6dff;}.cls-2{fill:#fff;}</style></defs><title> 15</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M7.7,48.5a2.9,2.9,0,0,1-2.9-2.7,2.8,2.8,0,0,1,2.6-2.9h6.2V34.4C6.1,32.8.9,26.2,1.6,18.7L3.1,4A2.7,2.7,0,0,1,5.9,1.5H27.8A2.9,2.9,0,0,1,30.7,4l1.5,14.7a14.3,14.3,0,0,1-3.5,10.6,15.3,15.3,0,0,1-9.4,5.2v8.3H26a2.9,2.9,0,0,1,2.9,2.7,3,3,0,0,1-2.6,3H7.7Z"/><path class="cls-2" d="M27.8,3a1.4,1.4,0,0,1,1.4,1.2l1.5,14.7c.6,7.5-5.4,13.8-12.9,14.3V44.3H26a1.4,1.4,0,0,1,.2,2.7H7.7a1.4,1.4,0,0,1-1.4-1.3,1.2,1.2,0,0,1,1.2-1.3h7.6V33.1C8,32.2,2.4,26.1,3,18.8L4.6,4.2A1.2,1.2,0,0,1,5.9,3H27.8M5.9,0A4.3,4.3,0,0,0,1.6,3.9L.1,18.5a16.3,16.3,0,0,0,12,17.1v5.7H7.2a4.3,4.3,0,0,0-3.9,4.5A4.5,4.5,0,0,0,7.7,50H26.5a4.4,4.4,0,0,0,3.9-4.5,4.5,4.5,0,0,0-4.3-4.2H20.8V35.8a18.3,18.3,0,0,0,9.1-5.5,16.2,16.2,0,0,0,3.8-11.7L32.1,3.9A4.3,4.3,0,0,0,27.8,0H5.9Z"/></g></g></svg>',symbol_21:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.7 50.1"><defs><style>.cls-1{fill:#03cb55;}.cls-2{fill:#fbfbfb;}</style></defs><title> 5</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M17.6,42.4a13.8,13.8,0,0,1-9.9-4.2,13.4,13.4,0,0,1-4.1-9.8l-.5-9.8h0a3.3,3.3,0,0,1,3.2-3.3H34.6A3.4,3.4,0,0,1,37.9,18l.8.2a5,5,0,0,1,4.4,5.7l-.3,2.4A6.3,6.3,0,0,1,37,31.7a13.7,13.7,0,0,1-3.7,6.5,13.9,13.9,0,0,1-9.9,4.2Z"/><path class="cls-2" d="M34.6,16.7a1.8,1.8,0,0,1,1.8,1.8h0v1.1h2.2a3.6,3.6,0,0,1,3.1,4.1l-.3,2.4a4.7,4.7,0,0,1-4.7,4.1h-.8a12.4,12.4,0,0,1-3.6,7.1,12.6,12.6,0,0,1-8.8,3.7H17.6a13,13,0,0,1-8.9-3.7,12.7,12.7,0,0,1-3.6-8.8l-.5-9.9h0a1.8,1.8,0,0,1,1.7-1.8H34.6m0-3H6.3a4.8,4.8,0,0,0-4.7,4.8h0v.2l.5,9.7A15.4,15.4,0,0,0,6.6,39.3a15.9,15.9,0,0,0,11,4.6h5.8a15.9,15.9,0,0,0,11-4.6A16.9,16.9,0,0,0,38.2,33a7.8,7.8,0,0,0,6.1-6.5l.3-2.4A6.5,6.5,0,0,0,39,16.7a4.8,4.8,0,0,0-4.4-3Z"/><path class="cls-1" d="M4.2,48.6a2.7,2.7,0,0,1,0-5.4H38.5a2.7,2.7,0,1,1,0,5.4Z"/><path class="cls-2" d="M38.5,44.7a1.2,1.2,0,0,1,1.3,1.2,1.3,1.3,0,0,1-1.3,1.2H4.2A1.3,1.3,0,0,1,3,45.9a1.2,1.2,0,0,1,1.2-1.2H38.5m0-3H4.2a4.2,4.2,0,0,0,0,8.4H38.5a4.2,4.2,0,1,0,0-8.4Z"/><path class="cls-1" d="M21,14.9a3.1,3.1,0,0,1-1.3-.3l-.4-.3a.1.1,0,0,1-.1-.1l-.4-.4a11.4,11.4,0,0,1-.9-1.6,6.4,6.4,0,0,1,.3-5A1.7,1.7,0,0,0,18.4,6h0a2.6,2.6,0,0,1,.1-3.6,2.7,2.7,0,0,1,3.8,0,6.5,6.5,0,0,1,.8,7.1,2.4,2.4,0,0,0-.2.9v.2c.1,0,.1.1.2.2a2.7,2.7,0,0,1-.2,3.4A2.8,2.8,0,0,1,21,14.9Z"/><path class="cls-2" d="M20.4,3a1.2,1.2,0,0,1,.9.4,5,5,0,0,1,.4,5.4,2.8,2.8,0,0,0-.2,2,2.5,2.5,0,0,0,.4.7h0a1.1,1.1,0,0,1-.9,1.9,1.1,1.1,0,0,1-.7-.2h-.1v-.2a3.6,3.6,0,0,1-.8-1.2,5,5,0,0,1,.3-3.9,2.9,2.9,0,0,0,.2-2.2,1.4,1.4,0,0,0-.2-.6,1.2,1.2,0,0,1,0-1.7,1.1,1.1,0,0,1,.8-.3m0-3a4,4,0,0,0-2.9,1.2,4.1,4.1,0,0,0-.6,5.3h0a8.3,8.3,0,0,0-.4,6.3,8.2,8.2,0,0,0,1.2,2l.4.5.2.2.8.5a4.3,4.3,0,0,0,1.9.4,4.4,4.4,0,0,0,3.1-1.3,4.2,4.2,0,0,0,.4-5.2,7.7,7.7,0,0,0-1.1-8.6,4.3,4.3,0,0,0-3-1.3Z"/><path class="cls-1" d="M27.2,14.9a3.1,3.1,0,0,1-1.3-.3c-.1-.1-.3-.1-.4-.3a.1.1,0,0,1-.1-.1l-.4-.4a11.4,11.4,0,0,1-.9-1.6,6.4,6.4,0,0,1,.3-5A1.7,1.7,0,0,0,24.6,6h0a2.4,2.4,0,0,1-.7-1.8,2.3,2.3,0,0,1,.8-1.8,2.7,2.7,0,0,1,3.8,0,6.5,6.5,0,0,1,.8,7.1,2.4,2.4,0,0,0-.2.9v.2c.1,0,.1.1.2.2a2.7,2.7,0,0,1-.2,3.4A2.8,2.8,0,0,1,27.2,14.9Z"/><path class="cls-2" d="M26.6,3a.9.9,0,0,1,.8.4c.1,0,2,2.1.5,5.4a2.8,2.8,0,0,0-.2,2,2.5,2.5,0,0,0,.4.7h0a1.2,1.2,0,0,1,0,1.6,1.4,1.4,0,0,1-.9.3,1.1,1.1,0,0,1-.7-.2h-.1v-.2a3.6,3.6,0,0,1-.8-1.2,5,5,0,0,1,.3-3.9A2.9,2.9,0,0,0,26,5.6a.9.9,0,0,0-.3-.6,1.2,1.2,0,0,1,.1-1.7,1.1,1.1,0,0,1,.8-.3m0-3a4,4,0,0,0-2.9,1.2,4.1,4.1,0,0,0-.6,5.3h0a7.9,7.9,0,0,0-.4,6.3,8.2,8.2,0,0,0,1.2,2l.4.5.2.2.8.5a4.3,4.3,0,0,0,1.9.4,4.4,4.4,0,0,0,3.1-1.3,4.2,4.2,0,0,0,.4-5.2,7.7,7.7,0,0,0-1.1-8.6,4.3,4.3,0,0,0-3-1.3Z"/><path class="cls-1" d="M14.7,14.9a2.8,2.8,0,0,1-1.3-.3c-.2,0-.3-.1-.4-.3h-.2l-.3-.4a4.2,4.2,0,0,1-.9-1.6,6.4,6.4,0,0,1,.3-5c.1-.4.3-.8.1-1.2h0a2.5,2.5,0,0,1,.2-3.6A2.5,2.5,0,0,1,14,1.5a2.8,2.8,0,0,1,2,.8,6.3,6.3,0,0,1,.7,7.1,1.3,1.3,0,0,0-.1.9v.4a2.6,2.6,0,0,1-.2,3.4A2.7,2.7,0,0,1,14.7,14.9Z"/><path class="cls-2" d="M14,3a1.1,1.1,0,0,1,.9.4c.1,0,2,2.1.5,5.4a2.4,2.4,0,0,0-.2,2,1.3,1.3,0,0,0,.4.7h0a1.4,1.4,0,0,1-.1,1.6,1.1,1.1,0,0,1-.8.3.8.8,0,0,1-.7-.2h-.1l-.2-.2a2.4,2.4,0,0,1-.7-1.2,4.9,4.9,0,0,1,.2-3.9,3,3,0,0,0,.3-2.2L13.2,5a1.2,1.2,0,0,1,0-1.7A1.1,1.1,0,0,1,14,3m0-3a4,4,0,0,0-2.9,1.2,4.4,4.4,0,0,0-.6,5.3h0a8.2,8.2,0,0,0-.3,6.3,5.6,5.6,0,0,0,1.1,2l.4.5.3.2.8.5a3.8,3.8,0,0,0,1.9.4,4.6,4.6,0,0,0,3.1-1.3,4.2,4.2,0,0,0,.3-5.2A7.7,7.7,0,0,0,17,1.3,4,4,0,0,0,14,0Z"/></g></g></svg>',symbol_22:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39.1 58.1"><defs><style>.cls-1{fill:#965106;}.cls-2{fill:#fbfbfb;}.cls-3{fill:#fff;}</style></defs><title> 4</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M25.2,21.5a5.4,5.4,0,0,1-4.8-8.1l5.1-9.2a5.5,5.5,0,0,1,4.7-2.7,5.2,5.2,0,0,1,2.7.7,5.4,5.4,0,0,1,2,7.4l-5,9.2a5.6,5.6,0,0,1-3.8,2.6Z"/><path class="cls-2" d="M30.2,3a4.9,4.9,0,0,1,2,.5,3.9,3.9,0,0,1,1.4,5.3l-5,9.2h0A4,4,0,0,1,25.8,20h-.6a4.6,4.6,0,0,1-2-.5,4,4,0,0,1-1.5-5.3l5-9.2h.1a4,4,0,0,1,3.4-2m0-3a6.8,6.8,0,0,0-6,3.5h-.1l-5,9.1a6.9,6.9,0,0,0,2.6,9.4,6.8,6.8,0,0,0,3.5.9h1.1a6.6,6.6,0,0,0,4.8-3.3v-.2l5.1-9.1A7.1,7.1,0,0,0,33.7.9,7.3,7.3,0,0,0,30.2,0Z"/><path class="cls-1" d="M12.1,56.6a4.8,4.8,0,0,1-5-4.3L5.2,29.9a3.8,3.8,0,0,1-3.7-3.8v-.4a3.9,3.9,0,0,1,3.7-3.9A14.4,14.4,0,0,1,19.5,9.9a13.9,13.9,0,0,1,8.2,2.5,14.5,14.5,0,0,1,6.2,9.4,3.9,3.9,0,0,1,3.7,3.9v.4a3.9,3.9,0,0,1-3.7,3.8L32,52.3a5.1,5.1,0,0,1-5,4.3Z"/><path class="cls-2" d="M19.5,11.4a13.7,13.7,0,0,1,7.4,2.2c4.4,2.8,5.5,7.8,5.7,9.7h1.1a2.4,2.4,0,0,1,2.4,2.4v.4a2.3,2.3,0,0,1-2.4,2.3H32.5l-2,23.8A3.5,3.5,0,0,1,27,55.1H12.1a3.4,3.4,0,0,1-3.5-2.9l-2-23.8H5.4A2.3,2.3,0,0,1,3,26.1v-.4a2.4,2.4,0,0,1,2.4-2.4H6.5a13.1,13.1,0,0,1,13-11.9m0-3A16,16,0,0,0,3.9,20.5,5.4,5.4,0,0,0,0,25.7v.4a5.4,5.4,0,0,0,3.8,5.1L5.6,52.5a6.3,6.3,0,0,0,6.5,5.6H27a6.4,6.4,0,0,0,6.5-5.6l1.8-21.3a5.4,5.4,0,0,0,3.8-5.1v-.4a5.4,5.4,0,0,0-4-5.2A16,16,0,0,0,19.5,8.4Z"/><path class="cls-3" d="M13.2,45.1a2.8,2.8,0,0,1-2.8-2.8,2.7,2.7,0,0,1,2.8-2.8A2.8,2.8,0,0,1,16,42.3a2.9,2.9,0,0,1-2.8,2.8Zm6.5,1.6a2.7,2.7,0,0,1-2.8-2.8,2.8,2.8,0,0,1,2.8-2.8,2.9,2.9,0,0,1,2.8,2.8,2.8,2.8,0,0,1-2.8,2.8Zm1.4,6.5a2.8,2.8,0,0,1-2.8-2.8,2.9,2.9,0,0,1,2.8-2.8,2.8,2.8,0,0,1,2.8,2.8,2.7,2.7,0,0,1-2.8,2.8Z"/><path class="cls-3" d="M15.5,49.2a2.3,2.3,0,0,1-2.3-2.3,2.4,2.4,0,0,1,2.3-2.3,2.3,2.3,0,0,1,2.3,2.3,2.3,2.3,0,0,1-2.3,2.3Z"/><path class="cls-3" d="M11.9,52.2A2.4,2.4,0,0,1,9.6,50a2.3,2.3,0,0,1,2.3-2.3,2.3,2.3,0,1,1,0,4.5ZM16.2,54a2.3,2.3,0,1,1,0-4.5,2.2,2.2,0,0,1,2.2,2.2A2.2,2.2,0,0,1,16.2,54Zm8.9-4.7h-.4a2.4,2.4,0,0,1-1.5-.9,2.5,2.5,0,0,1-.3-1.7,2.3,2.3,0,0,1,2.6-1.9,2.5,2.5,0,0,1,1.5,1,2,2,0,0,1,.3,1.7,2.1,2.1,0,0,1-2.2,1.8Zm1,4.7h-.4a2.4,2.4,0,0,1-1.9-2.7,2.4,2.4,0,0,1,4.2-.9,2.5,2.5,0,0,1,.3,1.7A2.2,2.2,0,0,1,26.1,54Z"/><path class="cls-3" d="M24,18.8c1.7.7,3.3.6,3.6-.2s-.6-2-2.3-2.7-3.3-.6-3.6.2.7,2,2.3,2.7Z"/><path class="cls-2" d="M31,35.3a.5.5,0,0,1-.7,0l-1.4-1.1a2.7,2.7,0,0,0-3.7,0l-1.3,1.1a.6.6,0,0,1-.8,0l-1.3-1.1a2.7,2.7,0,0,0-3.7,0l-1.4,1.1a.5.5,0,0,1-.7,0l-1.4-1.1a2.5,2.5,0,0,0-3.6,0L9.6,35.3a.6.6,0,0,1-.8,0L7.4,34.2,7,33.9l-.5-5.5H32.7l-.5,6Z"/><path class="cls-2" d="M11.8,42.4a2.8,2.8,0,0,1-1.2-.4,2.5,2.5,0,0,1-.9-3.3l7-12.6a2.5,2.5,0,0,1,2.2-1.2,2.7,2.7,0,0,1,1.2.3,2.5,2.5,0,0,1,.9,3.3L14,41.1a2.3,2.3,0,0,1-1.7,1.2Z"/><path class="cls-1" d="M18.9,26.4h.4a1,1,0,0,1,.4,1.3l-7,12.6a1,1,0,0,1-.7.4c0,.1-.1.1-.2.1l-.4-.2a.9.9,0,0,1-.4-1.2l7-12.7a1,1,0,0,1,.9-.4m0-3h0a4.2,4.2,0,0,0-3.5,1.9h0L8.4,38a3.9,3.9,0,0,0,1.5,5.3,3.5,3.5,0,0,0,1.9.6h.7a4,4,0,0,0,2.8-1.9h0l7-12.6a4,4,0,0,0-1.5-5.3,3.4,3.4,0,0,0-1.9-.5Z"/><path class="cls-2" d="M25.2,18.5a2.8,2.8,0,0,1-1.3-.3,2.6,2.6,0,0,1-.9-3.3l5.1-9.2a2.4,2.4,0,0,1,2.1-1.2,2.7,2.7,0,0,1,1.2.3,2.4,2.4,0,0,1,.9,3.3l-5,9.2a2.6,2.6,0,0,1-1.7,1.2Z"/><path class="cls-1" d="M30.2,6h.5A1,1,0,0,1,31,7.4l-5,9.2a1,1,0,0,1-.7.4h-.6a1,1,0,0,1-.4-1.3l5.1-9.1a1,1,0,0,1,.8-.5m0-3h0a4,4,0,0,0-3.4,2h-.1l-5,9.2a4,4,0,0,0,1.5,5.3,4.6,4.6,0,0,0,2,.5h.6a4,4,0,0,0,2.8-1.9h0l5-9.2a3.9,3.9,0,0,0-1.4-5.3,4.9,4.9,0,0,0-2-.5Z"/></g></g></svg>',symbol_23:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50.9 50.9"><defs><style>.cls-1{fill:#63a4f4;}.cls-2{fill:#fff;}</style></defs><title> 28</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M26.3,49.4h-.2L11.8,46.8,2.7,45.2a1.5,1.5,0,0,1-1.2-1.5V7.2A1.5,1.5,0,0,1,2.7,5.7l8.7-1.5L26.2,1.5h3.3A1.5,1.5,0,0,1,31,3V5.7H46.1a3.4,3.4,0,0,1,2.3,1,3.1,3.1,0,0,1,.9,2.6c.1,5.7.1,11.5.1,17.1V40.8a5.7,5.7,0,0,1-.7,3.2l-.4.5a4.9,4.9,0,0,1-3,.7H31v2.6a1.5,1.5,0,0,1-1.5,1.5Z"/><path class="cls-2" d="M29.5,3V7.2H46.1a1.7,1.7,0,0,1,1.2.5,1.7,1.7,0,0,1,.5,1.5c.1,10.3,0,20.6.1,30.9-.1,1,.1,2.2-.5,3.1a4.8,4.8,0,0,1-2.6.6H29.5v4.1H26.3C18.6,46.4,10.8,45.1,3,43.7V7.2L26.5,3h3m0-3H25.9L11.2,2.7,2.5,4.2A3,3,0,0,0,0,7.2V43.7a3,3,0,0,0,2.5,3l9,1.6,14.3,2.5h3.7a3,3,0,0,0,3-3V46.8H45.4a6.5,6.5,0,0,0,3.7-1,2.4,2.4,0,0,0,.8-.9,6.6,6.6,0,0,0,1-4v-.6h0V26.4c0-5.6,0-11.4-.1-17a5.2,5.2,0,0,0-1.3-3.8,4.9,4.9,0,0,0-3.4-1.4H32.5V3a2.9,2.9,0,0,0-3-3Z"/><path class="cls-2" d="M29.5,8.7H46.3V42.1H29.5V38H42.8V35.9H29.5V33.3H42.8V31.2H29.5V28.6H42.8V26.5H29.5V23.8H42.8v-2H29.5V19.2H42.8V17.1H29.5V14.5H42.8V12.4H29.5ZM13.6,18l2.9-.2c.6,3.5,1.3,7.1,2.1,10.6l1.8-10.9h3.1c-1.2,5-2.2,10.1-3.5,15.1-.8.5-2.1,0-3.1.1-.7-3.5-1.5-6.9-2.1-10.4-.6,3.4-1.4,6.7-2.1,10.1l-2.9-.2C9,27.5,8,23,7.2,18.4l2.6-.2c.5,3.4,1.1,6.7,1.6,10,.7-3.4,1.4-6.8,2.2-10.2Z"/></g></g></svg>',symbol_24:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50.9 50.9"><defs><style>.cls-1{fill:#61bc44;}.cls-2{fill:#fff;}</style></defs><title> 27</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M26.3,49.4h-.2L11.8,46.8,2.7,45.2a1.5,1.5,0,0,1-1.2-1.5V7.2A1.5,1.5,0,0,1,2.7,5.7l8.7-1.5L26.2,1.5h3.3A1.5,1.5,0,0,1,31,3V5.7H46.1a3.4,3.4,0,0,1,2.3,1,3.1,3.1,0,0,1,.9,2.6c.1,5.7.1,11.5.1,17.1V40.8a5.7,5.7,0,0,1-.7,3.2l-.4.5a4.9,4.9,0,0,1-3,.7H31v2.6a1.5,1.5,0,0,1-1.5,1.5Z"/><path class="cls-2" d="M29.5,3V7.2H46.1a1.7,1.7,0,0,1,1.2.5,1.7,1.7,0,0,1,.5,1.5c.1,10.3,0,20.6.1,30.9-.1,1,.1,2.2-.5,3.1a4.8,4.8,0,0,1-2.6.6H29.5v4.1H26.3C18.6,46.4,10.8,45.1,3,43.7V7.2L26.5,3h3m0-3H25.9L11.2,2.7,2.5,4.2A3,3,0,0,0,0,7.2V43.7a3,3,0,0,0,2.5,3l9,1.6,14.3,2.5h3.7a3,3,0,0,0,3-3V46.8H45.4a6.5,6.5,0,0,0,3.7-1,2.4,2.4,0,0,0,.8-.9,6.6,6.6,0,0,0,1-4v-.6h0V26.4c0-5.6,0-11.4-.1-17a5.2,5.2,0,0,0-1.3-3.8,4.9,4.9,0,0,0-3.4-1.4H32.5V3a2.9,2.9,0,0,0-3-3Z"/><path class="cls-2" d="M29.5,8.7H46.3V42.1H29.5V38H42.8V35.9H29.5V33.3H42.8V31.2H29.5V28.6H42.8V26.5H29.5V23.8H42.8v-2H29.5V19.2H42.8V17.1H29.5V14.5H42.8V12.4H29.5ZM13.2,34.6H9.1L14.5,26,9.3,17.7h4.3l3,5.5,3.1-5.5h4.1l-5.2,8.1,5.5,8.8H19.8l-3.2-5.8Z"/></g></g></svg>',symbol_25:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50.7 50.8"><defs><style>.cls-1{fill:#e07c61;}.cls-2{fill:#fff;}.cls-3{fill:#fbe9e7;}.cls-4{fill:#e64a19;}</style></defs><title> 29</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M29.1,49.3h-.3l-26.1-5a1.4,1.4,0,0,1-1.2-1.5V8A1.5,1.5,0,0,1,2.7,6.5l26.1-5h.3a1.9,1.9,0,0,1,1,.3A1.8,1.8,0,0,1,30.6,3V6.5H46.5a2.7,2.7,0,0,1,2.7,2.8V41.6a2.7,2.7,0,0,1-2.7,2.7H30.6v3.5a1.7,1.7,0,0,1-.5,1.2A1.9,1.9,0,0,1,29.1,49.3Z"/><path class="cls-2" d="M29.1,3V8H46.5a1.2,1.2,0,0,1,1.2,1.3V41.6a1.2,1.2,0,0,1-1.2,1.2H29.1v5L3,42.8V8L29.1,3m0-3h-.6L2.4,5A3,3,0,0,0,0,8V42.8a3,3,0,0,0,2.4,3l26.1,5h.6a2.6,2.6,0,0,0,1.9-.7,2.8,2.8,0,0,0,1.1-2.3v-2H46.5a4.2,4.2,0,0,0,4.2-4.2V9.3A4.2,4.2,0,0,0,46.5,5H32.1V3A3,3,0,0,0,31,.7,2.6,2.6,0,0,0,29.1,0Z"/><path class="cls-3" d="M25.4,31.6H42.8v2.5H25.4Zm0,5H42.8v2.5H25.4Zm7.4-22.4a7.5,7.5,0,1,0,7.5,7.5H32.8Z"/><path class="cls-3" d="M35.3,11.7v7.5h7.5a7.6,7.6,0,0,0-7.5-7.5Z"/><polygon class="cls-4" points="29.1 47.8 3 42.8 3 8 29.1 3 29.1 47.8"/><path class="cls-2" d="M16.5,16.9H10.6v17h3.6V28.1h1.9A6.9,6.9,0,0,0,21,26.4a5.4,5.4,0,0,0,1.8-4.1c0-3.6-2.2-5.4-6.3-5.4Zm-.7,8.2H14.2V19.8h1.6c2,0,3,.9,3,2.6s-1,2.7-3,2.7Z"/></g></g></svg>',symbol_26:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.6 51.6"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#ff980a;}</style></defs><title> 14</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M8,49a3.6,3.6,0,0,1-2-.6,3.1,3.1,0,0,1-1.5-2.7,3.5,3.5,0,0,1-.4-3,3.2,3.2,0,0,1,2-2.1,3.2,3.2,0,0,1,2.7-1.4h.1a3.7,3.7,0,0,1,2.7,1.3,3.3,3.3,0,0,1,1.9,2.1,3.6,3.6,0,0,1-.3,2.9,3.9,3.9,0,0,1-1.5,2.8,3.7,3.7,0,0,1-2.1.6H8Z"/><path class="cls-1" d="M31.3,9.8a3.1,3.1,0,0,1-2-.7,3.3,3.3,0,0,1-1.5-2.7,3.3,3.3,0,0,1-.4-2.9,4,4,0,0,1,2-2.2A3.7,3.7,0,0,1,32.1,0h.2a3.3,3.3,0,0,1,2.6,1.3,3.6,3.6,0,0,1,1.9,2.1,3.5,3.5,0,0,1-.3,3A3.3,3.3,0,0,1,35,9.1a3.1,3.1,0,0,1-2,.7H31.3Z"/><path class="cls-1" d="M37.6,12.4a3.3,3.3,0,0,1-1.9-.6,3.3,3.3,0,0,1-1.4-2.3A3.5,3.5,0,0,1,34.1,7a3.8,3.8,0,0,1,1.6-1.9,3.4,3.4,0,0,1,4.8,0A3.2,3.2,0,0,1,42,7a3.6,3.6,0,0,1-.1,2.5,3.7,3.7,0,0,1-1.4,2.3,3.3,3.3,0,0,1-1.9.6h-1Z"/><path class="cls-1" d="M27.1,26.6a4.5,4.5,0,0,1-1.9-.5A4.2,4.2,0,0,1,23.3,21l3.6-9.4a5.5,5.5,0,0,1,3.3-3.2,5.6,5.6,0,0,1,3.6,0,4.4,4.4,0,0,1,1.5.8h.1a5.7,5.7,0,0,1,2,3.5,5.7,5.7,0,0,1-1.1,4.2l-5.9,8A4.2,4.2,0,0,1,27.1,26.6Z"/><path class="cls-1" d="M24,24.1a4,4,0,0,1-4-3.5L18.2,8a5.5,5.5,0,0,1,1.4-4.6,5.7,5.7,0,0,1,4.4-2h.1a6.1,6.1,0,0,1,4.4,2,5.7,5.7,0,0,1,1.3,4.7L28,20.6A4,4,0,0,1,24,24.1Z"/><path class="cls-1" d="M20.3,25.4a4.4,4.4,0,0,1-3.5-1.8l-5.6-8.5a5,5,0,0,1-.5-1.3,5.5,5.5,0,0,1-.1-3.1,6,6,0,0,1,2.7-3.4,5.8,5.8,0,0,1,2.6-.6,4.5,4.5,0,0,1,2,.4A5.3,5.3,0,0,1,21,10.5l3.1,9.6A3.9,3.9,0,0,1,22,25,3.3,3.3,0,0,1,20.3,25.4Z"/><path class="cls-1" d="M18,27.8l-1.4-.3-12-4.4a5.2,5.2,0,0,1-3.4-3.4,5.6,5.6,0,0,1,.5-4.9,5.9,5.9,0,0,1,4-2.7h1a5.7,5.7,0,0,1,3.5,1.2l10.2,7.1a4.2,4.2,0,0,1,1.3,5.3A4.3,4.3,0,0,1,18,27.8Z"/><path class="cls-1" d="M5.5,31.9a5.4,5.4,0,0,1-3.8-1.5A4.8,4.8,0,0,1,0,26.7a5,5,0,0,1,1.7-3.8,5.8,5.8,0,0,1,3.8-1.5h.6l11.4,1.2a4.1,4.1,0,0,1-.1,8.2L6.1,31.9Z"/><path class="cls-1" d="M40.9,32.2h-.6L29,31a4,4,0,0,1-3.7-4A4.1,4.1,0,0,1,29,22.9l11.3-1.2h.6a5.8,5.8,0,0,1,3.9,1.5,5.2,5.2,0,0,1,1.6,3.7,5.3,5.3,0,0,1-1.6,3.8A6.3,6.3,0,0,1,40.9,32.2Z"/><path class="cls-1" d="M5.9,42H4.7A5.7,5.7,0,0,1,1,39.4a5.7,5.7,0,0,1-.7-4.9,5.8,5.8,0,0,1,3.6-3.6l11.9-4.3a3.5,3.5,0,0,1,1.4-.3,4.2,4.2,0,0,1,2.4,7.5L9.3,40.9A6,6,0,0,1,5.9,42Z"/><path class="cls-1" d="M15.1,46.4a5.7,5.7,0,0,1-1.8-.3,5.3,5.3,0,0,1-1.5-.8h-.1a5.6,5.6,0,0,1-2-3.5,5.5,5.5,0,0,1,1.1-4.1l5.9-8A3.9,3.9,0,0,1,20,27.9a4.5,4.5,0,0,1,1.9.5,4.2,4.2,0,0,1,1.9,5.1l-3.7,9.4a5.3,5.3,0,0,1-3.2,3.2A5.7,5.7,0,0,1,15.1,46.4Z"/><path class="cls-1" d="M23.4,51.6a5.7,5.7,0,0,1-4.5-2.1,5.6,5.6,0,0,1-1.3-4.6l1.8-12.5a4.1,4.1,0,0,1,8.1,0l1.8,12.5a5.7,5.7,0,0,1-1.4,4.6A5.5,5.5,0,0,1,23.4,51.6Z"/><path class="cls-1" d="M31.9,47.4a5.7,5.7,0,0,1-1.8-.3,5.5,5.5,0,0,1-3.3-3.2l-3.6-9.4A4.3,4.3,0,0,1,25,29.4a4.6,4.6,0,0,1,2-.5,4,4,0,0,1,3.3,1.7l6.1,8.3.3.5a5.5,5.5,0,0,1-1.7,7h-.2A5.2,5.2,0,0,1,31.9,47.4Z"/><path class="cls-1" d="M39.5,41.1A6.1,6.1,0,0,1,36,40L25.8,32.8a4,4,0,0,1-1.2-5.2,4,4,0,0,1,3.6-2.2l1.4.2,12,4.4a6.2,6.2,0,0,1,3.5,3.6,5.8,5.8,0,0,1-.6,4.8,5.9,5.9,0,0,1-4,2.6Z"/><path class="cls-1" d="M30.5,27.7a4.1,4.1,0,0,1-2.4-7.4l10.3-7.2A6,6,0,0,1,41.8,12H43a6.4,6.4,0,0,1,3.8,2.6,5.8,5.8,0,0,1,.6,4.8,6.2,6.2,0,0,1-3.5,3.6l-12,4.4Z"/><path class="cls-1" d="M22,32.4a3.7,3.7,0,0,1-2.1-.6,3.5,3.5,0,0,1-1.4-3.5v-.2h-.1a3.4,3.4,0,0,1-.8-3.6A3.5,3.5,0,0,1,20.4,22h0a3.4,3.4,0,0,1,3.2-2,3.5,3.5,0,0,1,3.2,2h0a3.3,3.3,0,0,1,2.8,2.4,3.2,3.2,0,0,1-.8,3.6h-.1v.2a3.7,3.7,0,0,1-1.5,3.5,3.6,3.6,0,0,1-2,.6h0a3.3,3.3,0,0,1-1.7-.4A3.2,3.2,0,0,1,22,32.4Z"/><path class="cls-2" d="M10.2,43.3H9.5l-.3-.6c0-.2-.2-.3-.4-.3s-.3.1-.4.3l-.3.6H7.4a.8.8,0,0,0-.4.4.6.6,0,0,0,.1.4l.5.6v.7a.8.8,0,0,0,.2.5.4.4,0,0,0,.5,0l.6-.3.6.3h.5c.2-.1.2-.3.2-.5v-.7l.5-.6a.6.6,0,0,0,.1-.4A.8.8,0,0,0,10.2,43.3Z"/><path class="cls-2" d="M31,5.4l-.2.8a.5.5,0,0,0,.2.4h.5l.6-.4.6.4a.4.4,0,0,0,.5-.1c.2-.1.3-.3.2-.4V5.4l.5-.5a.4.4,0,0,0,.1-.5.4.4,0,0,0-.4-.3h-.6l-.3-.7-.5-.2-.4.2-.3.7h-.7c-.2,0-.3.2-.4.3a.7.7,0,0,0,.1.5Z"/><path class="cls-2" d="M37.4,8.6V9l.2.3h.2l.4-.2.3.2h.3c.1-.1.2-.2.1-.3V8.6l.3-.3c0-.1.1-.2,0-.3a.2.2,0,0,0-.2-.2h-.4l-.2-.3a.2.2,0,0,0-.2-.2l-.3.2v.3h-.4L37,8a.4.4,0,0,0,.1.3Z"/><path class="cls-2" d="M26.7,23.4h.4a1,1,0,0,0,.9-.4L33.9,15a2.4,2.4,0,0,0,.5-1.8,2.7,2.7,0,0,0-1-1.6h-.1l-.4-.2a2.5,2.5,0,0,0-1.7,0,2.4,2.4,0,0,0-1.4,1.4l-3.6,9.4A1,1,0,0,0,26.7,23.4Z"/><path class="cls-2" d="M23,20.2a1,1,0,0,0,2,0L26.8,7.6a2.9,2.9,0,0,0-.6-2.2A2.8,2.8,0,0,0,24,4.5h0a2.7,2.7,0,0,0-2.1.9,2.6,2.6,0,0,0-.7,2.2Z"/><path class="cls-2" d="M13.8,13.4l5.6,8.5a1,1,0,0,0,.9.4h.4a.9.9,0,0,0,.5-1.2l-3.1-9.6a2.4,2.4,0,0,0-1.3-1.5,2.7,2.7,0,0,0-2,.1,2.9,2.9,0,0,0-1.2,1.5,2.6,2.6,0,0,0,0,1.5C13.7,13.2,13.7,13.3,13.8,13.4Z"/><path class="cls-2" d="M5.7,20.2l12,4.5H18a.9.9,0,0,0,.9-.5,1,1,0,0,0-.3-1.3L8.4,15.7a3,3,0,0,0-2.2-.6A2.8,2.8,0,0,0,4,18.6,2.5,2.5,0,0,0,5.7,20.2Z"/><path class="cls-2" d="M5.5,28.8h.3l11.3-1.1a1,1,0,0,0,1-1,1,1,0,0,0-.9-1L5.8,24.5a2.7,2.7,0,0,0-2.1.7,2,2,0,0,0-.6,1.5,2.2,2.2,0,0,0,.6,1.5A3,3,0,0,0,5.5,28.8Z"/><path class="cls-2" d="M40.6,24.8h0L29.3,26a1,1,0,0,0-.9,1,1.1,1.1,0,0,0,.9,1l11.3,1.1h.3a2.8,2.8,0,0,0,1.8-.6,2.6,2.6,0,0,0,.7-1.6,2.3,2.3,0,0,0-.7-1.5A2.5,2.5,0,0,0,40.6,24.8Z"/><path class="cls-2" d="M17.8,31.2a1,1,0,0,0,.3-1.3,1.1,1.1,0,0,0-1.2-.5l-12,4.4a2.9,2.9,0,0,0-1.7,1.7,2.9,2.9,0,0,0,.3,2.2,3.2,3.2,0,0,0,1.8,1.2h.6a2.4,2.4,0,0,0,1.6-.5Z"/><path class="cls-2" d="M20.4,31.1a1,1,0,0,0-1.3.3l-5.9,8a2.6,2.6,0,0,0-.5,1.9,2.6,2.6,0,0,0,.9,1.5h.2l.4.3h1.7a2.7,2.7,0,0,0,1.4-1.4l3.6-9.4A1,1,0,0,0,20.4,31.1Z"/><path class="cls-2" d="M24.4,32.8a1,1,0,0,0-1-.9,1.1,1.1,0,0,0-1,.9L20.6,45.3a2.9,2.9,0,0,0,.7,2.3,2.8,2.8,0,0,0,2.1,1,2.9,2.9,0,0,0,2.2-1,2.7,2.7,0,0,0,.6-2.2Z"/><path class="cls-2" d="M33.9,40.7l-6.1-8.3a1.1,1.1,0,0,0-1.3-.3,1.1,1.1,0,0,0-.4,1.3l3.6,9.4a2.2,2.2,0,0,0,1.4,1.4h.8a2.4,2.4,0,0,0,1.3-.4,2.5,2.5,0,0,0,.8-3.1Z"/><path class="cls-2" d="M40.5,32.9h0l-12-4.4a1.1,1.1,0,0,0-1.2.5,1,1,0,0,0,.3,1.3l10.2,7.2a2.7,2.7,0,0,0,1.7.6H40a2.8,2.8,0,0,0,1.9-1.2,2.6,2.6,0,0,0-1.4-3.9Z"/><path class="cls-2" d="M44.2,16.3a2.9,2.9,0,0,0-1.8-1.2,3.2,3.2,0,0,0-2.3.5L29.9,22.8a1,1,0,0,0-.3,1.3.9.9,0,0,0,.9.5h.3l12-4.4a2.9,2.9,0,0,0,1.7-1.7A2.9,2.9,0,0,0,44.2,16.3Z"/><path class="cls-2" d="M26.7,25.4a.3.3,0,0,0-.3-.3l-1.6-.3L24,23.3a.4.4,0,0,0-.8,0l-.7,1.5-1.6.3c-.2,0-.4.1-.4.3s0,.3.1.5l1.2,1.2-.3,1.7c0,.2,0,.3.2.4h.5l1.4-.8,1.4.8c.2.1.4.1.5-.1s.3-.2.2-.4l-.3-1.7,1.2-1.2C26.8,25.7,26.8,25.5,26.7,25.4Z"/></g></g></svg>',symbol_27:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.5 49.5"><defs><style>.cls-1{fill:#fbb703;}.cls-2{fill:#fbfbfb;}.cls-3{fill:#fff;}</style></defs><title> 3</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path class="cls-1" d="M24.8,48A23.3,23.3,0,1,1,48,24.8,23.2,23.2,0,0,1,24.8,48Z"/><path class="cls-2" d="M24.8,3A21.8,21.8,0,1,1,3,24.8,21.7,21.7,0,0,1,24.8,3m0-3A24.8,24.8,0,1,0,49.5,24.8,24.8,24.8,0,0,0,24.8,0Z"/><path class="cls-3" d="M34.5,30.1c0,3.9-2.7,7.3-7.7,8.1v4.5H22.4V38.6A19.4,19.4,0,0,1,15,36.7l1.3-5.1a15.4,15.4,0,0,0,7.3,1.9c2.5,0,4.2-1,4.2-2.7s-1.4-2.7-4.7-3.8-7.9-3.8-7.9-8.1,2.7-6.9,7.4-7.8V6.9h4.3v3.9a16,16,0,0,1,6.4,1.4l-1.3,5a13.6,13.6,0,0,0-6.3-1.6c-2.9,0-3.8,1.3-3.8,2.5s1.6,2.4,5.4,3.7S34.5,26.1,34.5,30.1Z"/></g></g></svg>',work_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70.53 55.04"><title> 64</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M22.11,55A22.11,22.11,0,1,1,44.23,32.92,22.14,22.14,0,0,1,22.11,55Zm0-34.23A12.11,12.11,0,1,0,34.23,32.92,12.13,12.13,0,0,0,22.11,20.81Z" fill="#fcfcfc"/><path d="M35.44,44.23A22.11,22.11,0,1,1,57.56,22.11,22.14,22.14,0,0,1,35.44,44.23Zm0-34.23A12.11,12.11,0,1,0,47.56,22.11,12.13,12.13,0,0,0,35.44,10Z" fill="#fcfcfc"/><path d="M51.56,55a19,19,0,1,1,19-19A19,19,0,0,1,51.56,55Zm0-27.92a9,9,0,1,0,9,9A9,9,0,0,0,51.56,27.11Z" fill="#fcfcfc"/><path d="M52.56,55H22.11a5,5,0,0,1-5-5V39.23a5,5,0,0,1,5-5H52.56a5,5,0,0,1,5,5V50A5,5,0,0,1,52.56,55ZM27.11,45H47.56v-.81H27.11Z" fill="#fcfcfc"/><path d="M42.36,42.88H28.16a6.42,6.42,0,0,1-4.83-10.66h0l7.1-8.09a6.42,6.42,0,0,1,9.66,0l7.1,8.09a6.42,6.42,0,0,1-4.83,10.66ZM30.85,38.82h0Z" fill="#fcfcfc"/><rect x="26.81" y="32.43" width="16.9" height="22.49" rx="5" ry="5" fill="#fcfcfc"/><circle cx="22.11" cy="32.92" r="17.11" fill="#5ca7f4"/><circle cx="35.44" cy="22.11" r="17.11" fill="#5ca7f4"/><circle cx="51.56" cy="36.08" r="13.96" fill="#5ca7f4"/><rect x="22.11" y="39.23" width="30.44" height="10.81" fill="#5ca7f4"/><path d="M27.09,35.52l7.1-8.09a1.42,1.42,0,0,1,2.14,0l7.1,8.09a1.42,1.42,0,0,1-1.07,2.36H28.16A1.42,1.42,0,0,1,27.09,35.52Z" fill="#fff"/><rect x="31.81" y="37.43" width="6.9" height="12.49" fill="#fff"/></g></g></svg>',work_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 58.6 58.92"><title> 65</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M35,22.08H23.62a5.39,5.39,0,0,1-5.38-5.38V10.38A5.39,5.39,0,0,1,23.62,5H35a5.39,5.39,0,0,1,5.38,5.38V16.7A5.39,5.39,0,0,1,35,22.08ZM23.62,9a1.39,1.39,0,0,0-1.38,1.38V16.7a1.39,1.39,0,0,0,1.38,1.38H35a1.39,1.39,0,0,0,1.38-1.38V10.38A1.39,1.39,0,0,0,35,9Z" fill="#9ce9cd"/><rect x="5" y="15.04" width="48.6" height="38.88" rx="4" ry="4" fill="#76d5ae"/><line x1="5" y1="28.93" x2="53.6" y2="28.93" fill="#f9fffb"/><rect x="5" y="27.43" width="48.6" height="3" fill="#fff"/><path d="M32.45,38.32h-6.3a3.61,3.61,0,0,1-3.61-3.61V27.43H36.06v7.28A3.61,3.61,0,0,1,32.45,38.32Zm-6.91-7.89v4.28a.61.61,0,0,0,.61.61h6.3a.61.61,0,0,0,.61-.61V30.43Z" fill="#f9fffb"/><path d="M35,27.08H23.62A10.4,10.4,0,0,1,13.23,16.7V10.38A10.4,10.4,0,0,1,23.62,0H35A10.4,10.4,0,0,1,45.37,10.38V16.7A10.4,10.4,0,0,1,35,27.08ZM35,14h0Z" fill="#fcfcfc"/><path d="M49.6,58.92H9a9,9,0,0,1-9-9V19a9,9,0,0,1,9-9H49.6a9,9,0,0,1,9,9V49.92A9,9,0,0,1,49.6,58.92ZM10,48.92H48.6V20H10Z" fill="#fcfcfc"/><path d="M53.6,33.93H5a5,5,0,1,1,0-10H53.6a5,5,0,1,1,0,10Z" fill="#fcfcfc"/><rect y="22.43" width="58.6" height="13" rx="5" ry="5" fill="#fcfcfc"/><path d="M32.45,43.32h-6.3a8.62,8.62,0,0,1-8.61-8.61V27.43a5,5,0,0,1,5-5H36.06a5,5,0,0,1,5,5v7.28A8.62,8.62,0,0,1,32.45,43.32Z" fill="#fcfcfc"/><path d="M35,22.08H23.62a5.39,5.39,0,0,1-5.38-5.38V10.38A5.39,5.39,0,0,1,23.62,5H35a5.39,5.39,0,0,1,5.38,5.38V16.7A5.39,5.39,0,0,1,35,22.08ZM23.62,9a1.39,1.39,0,0,0-1.38,1.38V16.7a1.39,1.39,0,0,0,1.38,1.38H35a1.39,1.39,0,0,0,1.38-1.38V10.38A1.39,1.39,0,0,0,35,9Z" fill="#9ce9cd"/><rect x="5" y="15.04" width="48.6" height="38.88" rx="4" ry="4" fill="#76d5ae"/><line x1="5" y1="28.93" x2="53.6" y2="28.93" fill="#f9fffb"/><rect x="5" y="27.43" width="48.6" height="3" fill="#fff"/><path d="M32.45,38.32h-6.3a3.61,3.61,0,0,1-3.61-3.61V27.43H36.06v7.28A3.61,3.61,0,0,1,32.45,38.32Zm-6.91-7.89v4.28a.61.61,0,0,0,.61.61h6.3a.61.61,0,0,0,.61-.61V30.43Z" fill="#f9fffb"/><rect x="24.04" y="9.72" width="10.52" height="3.82" fill="#fff"/></g></g></svg>',work_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 58.98 56.12"><title> 66</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M50,47.93H9a9,9,0,0,1-9-9V9A9,9,0,0,1,9,0H50a9,9,0,0,1,9,9V38.93A9,9,0,0,1,50,47.93Zm-40-10H49V10H10Z" fill="#fcfcfc"/><path d="M13.46,37.23A6.5,6.5,0,0,1,9.62,25.48l13-9.52a6.47,6.47,0,0,1,8.43.65l2.14,2.14,8.23-6.62A6.5,6.5,0,1,1,49.6,22.26L36.82,32.54a6.49,6.49,0,0,1-8.67-.47l-2.33-2.33L17.29,36A6.45,6.45,0,0,1,13.46,37.23ZM11.39,27.9h0Z" fill="#fcfcfc"/><path d="M44.46,56.12H14.52a7,7,0,0,1,0-14H44.46a7,7,0,0,1,0,14Zm0-4h0Z" fill="#fcfcfc"/><rect x="5" y="5" width="48.98" height="37.93" rx="4" ry="4" fill="#8e6dff"/><path d="M13.46,32.23a1.5,1.5,0,0,1-.89-2.71L25.6,20a1.5,1.5,0,0,1,1.95.15l5.31,5.31L44.58,16a1.5,1.5,0,1,1,1.88,2.34L33.69,28.64a1.5,1.5,0,0,1-2-.11l-5.36-5.35-12,8.76A1.49,1.49,0,0,1,13.46,32.23Z" fill="#f9fffb"/><path d="M44.46,51.12H14.52a2,2,0,1,1,0-4H44.46a2,2,0,0,1,0,4Z" fill="#b7adff"/></g></g></svg>',work_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61.19 52.23"><title> 67</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M52.19,52.23H9a9,9,0,0,1-9-9V9A9,9,0,0,1,9,0H52.19a9,9,0,0,1,9,9V43.23A9,9,0,0,1,52.19,52.23ZM10,42.23H51.19V10H10Z" fill="#fcfcfc"/><path d="M48,45.83H13.16a7,7,0,0,1-4.93-11.9l6.55-6.55a7,7,0,0,1,9.5-.33L36.54,14.79a7,7,0,0,1,9.85,0L53,21.36a6.92,6.92,0,0,1,2,4.93V38.86A7,7,0,0,1,48,45.83ZM15.31,41h0Zm-3.54-3.53h0Zm17.88-1.64H45V27.54L41.46,24Z" fill="#fcfcfc"/><path d="M17.37,26.21a9.05,9.05,0,1,1,9.05-9.05A9.06,9.06,0,0,1,17.37,26.21Zm0-10a.95.95,0,1,0,.95.95A.95.95,0,0,0,17.37,16.21Z" fill="#fcfcfc"/><rect x="5" y="5" width="51.19" height="42.23" rx="4" ry="4" fill="#f0a141"/><path d="M11.77,37.47l6.55-6.55a2,2,0,0,1,2.78,0l1.8,1.8a2,2,0,0,0,2.78,0L40.07,18.33a2,2,0,0,1,2.78,0l6.56,6.56A2,2,0,0,1,50,26.28V38.86a2,2,0,0,1-2,2H13.16A2,2,0,0,1,11.77,37.47Z" fill="#fff"/><circle cx="17.37" cy="17.16" r="4.05" fill="#fff"/></g></g></svg>',work_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64.32 52.12"><title> 68</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M55.56,52.12H8.76A8.77,8.77,0,0,1,0,43.36V8.76A8.77,8.77,0,0,1,8.76,0H20.13a8.76,8.76,0,0,1,5.77,2.17l5.81,5.09H55.56A8.77,8.77,0,0,1,64.32,16V43.36A8.77,8.77,0,0,1,55.56,52.12ZM10,42.12H54.32V17.26H31.23a8.82,8.82,0,0,1-6.07-2.45L19.67,10H10Z" fill="#fcfcfc"/><path d="M59.32,28H5A5,5,0,0,1,5,18H59.32a5,5,0,0,1,0,10Z" fill="#fcfcfc"/><path d="M31.23,17.26H5a5,5,0,0,1-5-5V8.76A8.77,8.77,0,0,1,8.76,0H20.13a8.76,8.76,0,0,1,5.77,2.17l5.83,5.11a5,5,0,0,1-.51,10Z" fill="#fcfcfc"/><path d="M55.56,47.12H8.76A3.76,3.76,0,0,1,5,43.36V8.76A3.76,3.76,0,0,1,8.76,5H20.13a3.76,3.76,0,0,1,2.48.93l5.95,5.21a3.76,3.76,0,0,0,2.67,1.12H55.56A3.76,3.76,0,0,1,59.32,16V43.36A3.76,3.76,0,0,1,55.56,47.12Z" fill="#f4cf4b"/><rect x="5" y="21.48" width="54.32" height="3" fill="#f6f6f6"/><path d="M28.56,11.14,22.61,5.93A3.76,3.76,0,0,0,20.13,5H8.76A3.76,3.76,0,0,0,5,8.76v3.49H31.23A3.76,3.76,0,0,1,28.56,11.14Z" fill="#f2c13a"/></g></g></svg>',work_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 57.87 60.45"><title> 69</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M42.87,60.45C34,60.45,22.13,52.9,13.48,43.2,4.67,33.32-.6,21.73.05,13.68A11.34,11.34,0,0,1,4,5.42L5.38,4.3C7.92,2.14,11-.15,15.36,0c3.83.15,7.21,2.25,10.07,6.26,3.26,4.58,6.69,11.27.18,17.64a48.92,48.92,0,0,0,4.19,5.28A46.37,46.37,0,0,0,35,34.3c.37-.27.74-.51,1.11-.73,7.68-4.76,14.47,1.37,16.71,3.39,5.33,4.8,5.48,9.36,4.66,12.34-.93,3.39-3.24,5.58-5.6,7.44l-.5.39-1.19.92A11.33,11.33,0,0,1,42.87,60.45ZM14.9,10c-.33,0-.94.13-3,1.92L10.4,13.14c-1.13,1.17-.42,11.1,10.54,23.4,10.67,12,21.24,14.89,23,13.74l1.39-1.08.4-.31c1.76-1.39,2.07-1.94,2.15-2.23s-.29-1-1.72-2.28c-3.45-3.11-4.23-2.63-4.81-2.27a7.42,7.42,0,0,0-.91.65l-1.29,1-.1.08c-4.85,3.91-11.16-1.87-16.69-8-8-9-7.79-12.2-7.68-13.56a5.58,5.58,0,0,1,2-3.94c.24-.19,1-.8,1.26-1,1.18-1,1.31-1.39,1.31-1.4s.08-1-2-3.87C16.22,10.57,15.38,10,15,10Zm21,30h0Zm-3.12-3.91h0Z" fill="#fcfcfc"/><path d="M35.91,40l1.36-1.11a12.08,12.08,0,0,1,1.43-1c3.17-2,6.27-1.27,10.79,2.81,2.79,2.52,3.84,4.94,3.19,7.31-.48,1.76-1.67,3.1-3.88,4.84-.14.11-1.42,1.09-1.75,1.35-5.12,4.16-18.92-2-29.85-14.3S2,13.52,7.2,9.3l.68-.57.74-.63C11.23,5.89,13,4.92,15.17,5s4.26,1.45,6.2,4.17c4.08,5.74,3.74,8.76-.13,12-.28.24-1.27,1-1.37,1.1-1,.77,1.36,4.84,6.21,10.28s8.79,8.33,9.83,7.49Z" fill="#8e6dff"/></g></g></svg>',work_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50.88 58.54"><title> 70</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M25.44,50.88A25.44,25.44,0,1,1,50.88,25.44,25.47,25.47,0,0,1,25.44,50.88Zm0-40.88A15.44,15.44,0,1,0,40.88,25.44,15.46,15.46,0,0,0,25.44,10Z" fill="#fcfcfc"/><path d="M25.44,58.54a6.91,6.91,0,0,1-4.9-2h0L7.6,43.58a5,5,0,0,1,0-7.07L21.9,22.2a5,5,0,0,1,7.07,0l14.3,14.3a5,5,0,0,1,0,7.07L30.34,56.51A6.91,6.91,0,0,1,25.44,58.54ZM18.21,40l7.23,7.23L32.67,40l-7.23-7.23Z" fill="#fcfcfc"/><path d="M25.44,40.37A14.93,14.93,0,1,1,40.37,25.44,15,15,0,0,1,25.44,40.37Zm0-19.87a4.93,4.93,0,1,0,4.93,4.93A4.94,4.94,0,0,0,25.44,20.51Z" fill="#fcfcfc"/><circle cx="25.44" cy="25.44" r="20.44" fill="#3eabfd"/><path d="M15.33,29.93H35.55a0,0,0,0,1,0,0v18.3a1.93,1.93,0,0,1-1.93,1.93H15.33a0,0,0,0,1,0,0V29.93a0,0,0,0,1,0,0Z" transform="translate(35.76 -6.26) rotate(45)" fill="#3eabfd"/><circle cx="25.44" cy="25.44" r="7.77" fill="#fff"/></g></g></svg>',work_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64.37 45.08"><title> 71</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="5" y="5" width="54.37" height="35.08" rx="4" ry="4" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M6.44,5.93,31,23.34a2,2,0,0,0,2.31,0L57.93,5.93" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="5" y="5" width="54.37" height="35.08" rx="4" ry="4" fill="#6cdaba"/><path d="M55.37,5H9A4,4,0,0,0,5.55,7L31,25.34a2,2,0,0,0,2.31,0L58.82,7A4,4,0,0,0,55.37,5Z" fill="#9ce9cd"/><path d="M4.55,6,31,25.34a2,2,0,0,0,2.31,0L59.82,6" fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="3"/></g></g></svg>',work_9:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61.49 61.49"><title> 72</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M29.12,61.49c-.62,0-1.23,0-1.86-.06a29.11,29.11,0,0,1-1.1-58,7.2,7.2,0,0,1,5.55,1.83,7.28,7.28,0,0,1,2.39,5.39V27.38H50.84a7.25,7.25,0,0,1,7.23,8A29,29,0,0,1,29.12,61.49Zm-5-47.57A19.07,19.07,0,0,0,10,33.61,19.33,19.33,0,0,0,27.88,51.45,19.06,19.06,0,0,0,47.57,37.38H31.36a7.25,7.25,0,0,1-7.25-7.24Zm3.06-.56h0Zm-.5-5h0Z" fill="#fcfcfc"/><path d="M54.23,34H34.75a7.26,7.26,0,0,1-7.25-7.25V7.26a7.25,7.25,0,0,1,8-7.23,29.18,29.18,0,0,1,26,26,7.25,7.25,0,0,1-7.23,8ZM37.49,24H50.94A19.19,19.19,0,0,0,37.49,10.55Z" fill="#fcfcfc"/><path d="M26.67,8.39A24.11,24.11,0,1,0,53.1,34.83a2.25,2.25,0,0,0-2.25-2.45H31.36a2.24,2.24,0,0,1-2.25-2.24c0-4.55,0-14.85,0-19.51A2.24,2.24,0,0,0,26.67,8.39Z" fill="#3eabfd"/><path d="M32.49,7.26V26.74A2.25,2.25,0,0,0,34.75,29H54.23a2.25,2.25,0,0,0,2.25-2.45A24.12,24.12,0,0,0,34.94,5,2.25,2.25,0,0,0,32.49,7.26Z" fill="#00baff"/></g></g></svg>',work_10:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.76 55.98"><title> 73</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M26.38,43.72A18.55,18.55,0,0,1,7.86,25.19V18.52a18.52,18.52,0,1,1,37,0v6.67A18.55,18.55,0,0,1,26.38,43.72Zm0-29.72a4.53,4.53,0,0,0-4.52,4.52v6.67a4.52,4.52,0,1,0,9,0V18.52A4.53,4.53,0,0,0,26.38,14Z" fill="#fcfcfc"/><path d="M43.76,56H9a9,9,0,0,1-9-9V23.13a9,9,0,0,1,9-9H43.76a9,9,0,0,1,9,9V47A9,9,0,0,1,43.76,56ZM10,46H42.76V24.13H10Z" fill="#fcfcfc"/><path d="M26.38,42.27a10,10,0,1,1,10-10A10,10,0,0,1,26.38,42.27Zm0-10h0Z" fill="#fcfcfc"/><path d="M26.38,47.8a6.5,6.5,0,0,1-6.49-6.49V35.83a6.49,6.49,0,1,1,13,0v5.47A6.5,6.5,0,0,1,26.38,47.8Zm-2.19-9.23a3.5,3.5,0,0,0,4.38,0,3.5,3.5,0,0,0-4.38,0Z" fill="#fcfcfc"/><path d="M26.38,38.72A13.54,13.54,0,0,1,12.86,25.19V18.52a13.52,13.52,0,0,1,27,0v6.67A13.54,13.54,0,0,1,26.38,38.72ZM26.38,9a9.54,9.54,0,0,0-9.53,9.52v6.67a9.52,9.52,0,1,0,19,0V18.52A9.53,9.53,0,0,0,26.38,9Z" fill="#f78f76"/><rect x="5" y="19.13" width="42.76" height="31.85" rx="4" ry="4" fill="#ea755a"/><circle cx="26.38" cy="32.29" r="4.98" fill="#fff"/><rect x="24.89" y="34.34" width="2.99" height="8.46" rx="1.49" ry="1.49" fill="#fff"/></g></g></svg>',work_11:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 63.74 60.5"><title> 74</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M17.35,60.5a6.77,6.77,0,0,1-6.67-7.87l2-15a5,5,0,0,1,7-3.9l15.4,7a5,5,0,0,1,.72,8.7l-14.6,9.83A6.74,6.74,0,0,1,17.35,60.5Zm-1.72-7.1h0Zm6.07-7.77L21.51,47l1.31-.88Z" fill="#fcfcfc"/><path d="M31.87,55.31C14.3,55.31,0,42.9,0,27.65S14.3,0,31.87,0,63.74,12.41,63.74,27.65,49.44,55.31,31.87,55.31Zm0-45.31C19.81,10,10,17.92,10,27.65s9.81,17.65,21.87,17.65,21.87-7.92,21.87-17.65S43.93,10,31.87,10Z" fill="#fcfcfc"/><path d="M43.5,27.66H20.24a5,5,0,1,1,0-10H43.5a5,5,0,0,1,0,10Z" fill="#fcfcfc"/><path d="M39.54,37.65H24.19a5,5,0,0,1,0-10H39.54a5,5,0,1,1,0,10Z" fill="#fcfcfc"/><path d="M17.62,38.28l-2,15.12a1.75,1.75,0,0,0,2.75,1.76L33,45.3Z" fill="#f0911d"/><ellipse cx="31.87" cy="27.65" rx="26.87" ry="22.65" fill="#f0a141"/><path d="M43.5,24.16H20.24a1.5,1.5,0,0,1,0-3H43.5a1.5,1.5,0,0,1,0,3Z" fill="#fff"/><path d="M39.54,34.15H24.19a1.5,1.5,0,0,1,0-3H39.54a1.5,1.5,0,1,1,0,3Z" fill="#fff"/></g></g></svg>',work_12:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 67.36 62.05"><title> 75</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M60.36,62h-24a7,7,0,0,1-5.72-11l12-17a7,7,0,0,1,11.44,0l12,17a7,7,0,0,1-5.72,11Zm-2.45-5.27h0ZM42.15,52H54.57l-6.21-8.79Z" fill="#fcfcfc"/><path d="M42.59,62H7A7,7,0,0,1,1.28,51l17.79-25.2a7,7,0,0,1,11.44,0L48.3,51a7,7,0,0,1-5.72,11Zm-2.45-5.27h0ZM12.79,52h24l-12-17Z" fill="#fcfcfc"/><path d="M24.67,38.46a6.51,6.51,0,0,1-6.5-6.5V6.59a6.5,6.5,0,0,1,13,0V32A6.51,6.51,0,0,1,24.67,38.46Z" fill="#fcfcfc"/><path d="M41.15,22.11H25.73a6.07,6.07,0,0,1-6.06-6.06V5a5,5,0,0,1,5-5H41.15A6.06,6.06,0,0,1,45.7,10.07l-.87,1,.87,1a6.06,6.06,0,0,1-4.54,10.07Zm-3-3.46h0Zm-8.53-6.54h3.94a6.13,6.13,0,0,1,0-2.11H29.66Z" fill="#fcfcfc"/><path d="M60.36,57h-24a2,2,0,0,1-1.63-3.15l12-17a2,2,0,0,1,3.27,0l12,17A2,2,0,0,1,60.36,57Z" fill="#63bafd"/><path d="M42.59,57H7a2,2,0,0,1-1.63-3.15L23.16,28.7a2,2,0,0,1,3.27,0L44.22,53.89A2,2,0,0,1,42.59,57Z" fill="#3eabfd"/><path d="M24.67,33.46a1.5,1.5,0,0,1-1.5-1.5V6.59a1.5,1.5,0,1,1,3,0V32A1.5,1.5,0,0,1,24.67,33.46Z" fill="#3eabfd"/><path d="M41.15,17.11H25.73a1.06,1.06,0,0,1-1.06-1.06V5H41.15a1.06,1.06,0,0,1,.8,1.76l-3.17,3.59a1.06,1.06,0,0,0,0,1.4l3.17,3.59A1.06,1.06,0,0,1,41.15,17.11Z" fill="#3eabfd"/></g></g></svg>',work_13:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 58.36 58.36"><title> 76</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M33.38,58.36A9,9,0,0,1,27,55.73L4.28,33a9,9,0,0,1-2.6-5.53L0,9.84A9,9,0,0,1,9.84,0L27.46,1.68A9,9,0,0,1,33,4.28L55.73,27a9,9,0,0,1,0,12.73h0l-16,16A9,9,0,0,1,33.38,58.36ZM11.61,26.17,33.39,48,48,33.39,26.17,11.61l-16.07-1.5Zm40.59,10h0Zm-3.54-3.53h0Z" fill="#fcfcfc"/><path d="M16.94,27.21a9.9,9.9,0,1,1,7-2.9A9.84,9.84,0,0,1,16.94,27.21Zm-.07-9.83a.1.1,0,0,0,.14-.14l3.4-3.4L17,17.24h0a.1.1,0,0,0-.14.14Z" fill="#fcfcfc"/><path d="M52.2,36.21l-16,16a4,4,0,0,1-5.66,0L7.82,29.45A4,4,0,0,1,6.66,27L5,9.37A4,4,0,0,1,9.37,5L27,6.66a4,4,0,0,1,2.46,1.15L52.2,30.56A4,4,0,0,1,52.2,36.21Z" fill="#f4cf4b"/><path d="M16.94,23.71a6.4,6.4,0,1,1,4.53-1.88A6.36,6.36,0,0,1,16.94,23.71Zm0-9.8a3.4,3.4,0,0,0-2.41,5.81,3.48,3.48,0,0,0,4.81,0,3.4,3.4,0,0,0-2.41-5.81Z" fill="#fff"/></g></g></svg>',work_14:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.44 60.07"><title> 77</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M26.72,33.62A16.81,16.81,0,1,1,43.53,16.81,16.83,16.83,0,0,1,26.72,33.62Zm0-23.62a6.81,6.81,0,1,0,6.81,6.81A6.82,6.82,0,0,0,26.72,10Z" fill="#fcfcfc"/><path d="M42.44,60.07H11a11,11,0,0,1-11-11V46.15A20.69,20.69,0,0,1,20.67,25.49H32.78A20.69,20.69,0,0,1,53.44,46.15v2.92A11,11,0,0,1,42.44,60.07ZM20.67,35.49A10.68,10.68,0,0,0,10,46.15v2.92a1,1,0,0,0,1,1H42.44a1,1,0,0,0,1-1V46.15A10.68,10.68,0,0,0,32.78,35.49Z" fill="#fcfcfc"/><circle cx="26.72" cy="16.81" r="11.81" fill="#45a1ff"/><path d="M20.67,30.49H32.78A15.67,15.67,0,0,1,48.44,46.15v2.92a6,6,0,0,1-6,6H11a6,6,0,0,1-6-6V46.15A15.67,15.67,0,0,1,20.67,30.49Z" fill="#70b6ff"/></g></g></svg>',work_15:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.98 48.49"><title> 78</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M37.45,40.35A13,13,0,0,1,25,31.09l-.67-2.22A13,13,0,0,1,33,12.63L56.76,5.44a14.09,14.09,0,0,1,17.56,9.4l.05.17A14.11,14.11,0,0,1,65,32.59L41.23,39.78A13,13,0,0,1,37.45,40.35Z" fill="#fcfcfc"/><path d="M32.63,48.49H28.75A28.78,28.78,0,0,1,0,19.75V9.6A9.61,9.61,0,0,1,9.6,0H51.78a9.61,9.61,0,0,1,9.6,9.6V19.75A28.78,28.78,0,0,1,32.63,48.49ZM10,10v9.75A18.77,18.77,0,0,0,28.75,38.49h3.89A18.77,18.77,0,0,0,51.38,19.75V10Z" fill="#fcfcfc"/><path d="M37.46,35.34a8,8,0,0,1-7.69-5.7l-.67-2.22a8,8,0,0,1,5.36-10l23.75-7.19a9.1,9.1,0,0,1,11.33,6.06l.06.19a9.09,9.09,0,0,1-6.06,11.33L39.79,35A8,8,0,0,1,37.46,35.34ZM60.84,14.43a4.46,4.46,0,0,0-1.3.19L35.79,21.82a3.43,3.43,0,0,0-2.29,4.27l.67,2.22a3.43,3.43,0,0,0,4.27,2.29L62.2,23.41a4.48,4.48,0,0,0,3-5.59l-.06-.19A4.49,4.49,0,0,0,60.84,14.43Z" fill="#ed9353"/><path d="M9.6,5H51.78a4.6,4.6,0,0,1,4.6,4.6V19.75A23.74,23.74,0,0,1,32.63,43.49H28.75A23.74,23.74,0,0,1,5,19.75V9.6A4.6,4.6,0,0,1,9.6,5Z" fill="#f0a141"/><polygon points="58.13 16.61 58.13 22.59 64.1 20.78 62.96 14.96 58.13 16.61" fill="#fdfdfd"/><rect x="5" y="12.93" width="51.38" height="3" fill="#fff"/></g></g></svg>',work_16:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61.46 61.46"><title> 79</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M30.73,61.46A30.73,30.73,0,1,1,61.46,30.73,30.77,30.77,0,0,1,30.73,61.46Zm0-51.46A20.73,20.73,0,1,0,51.46,30.73,20.76,20.76,0,0,0,30.73,10Z" fill="#fcfcfc"/><circle cx="30.73" cy="30.73" r="25.73" fill="#f4cf4b"/><path d="M30.79,27.09a1.7,1.7,0,0,1-1.2-.49l-8.8-8.67a1.7,1.7,0,0,1,2.39-2.43L30.79,23l7.48-7.48a1.7,1.7,0,1,1,2.41,2.41L32,26.59A1.7,1.7,0,0,1,30.79,27.09Z" fill="#fff"/><path d="M40,28.85H21.49a1.71,1.71,0,1,1,0-3.41H40a1.71,1.71,0,0,1,0,3.41Z" fill="#fff"/><path d="M40,36.91H21.49a1.71,1.71,0,1,1,0-3.41H40a1.71,1.71,0,0,1,0,3.41Z" fill="#fff"/><path d="M30.7,46.45h0A1.71,1.71,0,0,1,29,44.74l.06-19.36a1.71,1.71,0,0,1,1.71-1.7h0a1.71,1.71,0,0,1,1.7,1.71L32.4,44.75A1.71,1.71,0,0,1,30.7,46.45Z" fill="#fff"/></g></g></svg>',study_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.55 54.36"><title> 48</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M45.64,9.64H39.89V6.76a2.76,2.76,0,0,0-5.52,0V9.64H19.18V6.76a2.76,2.76,0,0,0-5.52,0V9.64H7.91A3.91,3.91,0,0,0,4,13.55v32.9a3.91,3.91,0,0,0,3.91,3.91H45.64a3.91,3.91,0,0,0,3.91-3.91V13.55A3.91,3.91,0,0,0,45.64,9.64Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="8"/><rect x="13.66" y="3.54" width="5.52" height="9.78" rx="2.76" ry="2.76" fill="#ffe171"/><rect x="34.37" y="3.54" width="5.52" height="9.78" rx="2.76" ry="2.76" fill="#ffe171"/><rect x="4" y="9.18" width="45.55" height="40.72" rx="3.91" ry="3.91" fill="#ffba00"/><path d="M10.32,13.32H43.23A1.69,1.69,0,0,1,44.92,15v1.76a0,0,0,0,1,0,0H8.63a0,0,0,0,1,0,0V15A1.69,1.69,0,0,1,10.32,13.32Z" fill="#fff"/><polyline points="15.04 34.02 22.64 41.62 38.51 25.74" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.69"/></g></g></svg>',study_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.9 56.67"><title> 49</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="5" y="5" width="39.9" height="46.67" rx="3.41" ry="3.41" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="5" y="5" width="39.9" height="46.67" rx="3.41" ry="3.41" fill="#76d68f"/><line x1="14.54" y1="30.27" x2="35.36" y2="30.27" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.17" opacity="0.5"/><line x1="14.54" y1="39.43" x2="35.36" y2="39.43" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.17"/><polygon points="21.41 17.26 16.69 13.79 11.96 17.26 11.96 5 21.41 5 21.41 17.26" fill="#fff"/></g></g></svg>',study_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55.19 62.85"><title> 50</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M48.26,5H35.53a1.93,1.93,0,0,0-1.71,1l-4.44,8.46c-.59,0-1.18-.08-1.78-.08s-1.19,0-1.78.08L21.37,6a1.93,1.93,0,0,0-1.71-1H6.93A1.93,1.93,0,0,0,5.22,7.82L12.1,20.92a21.72,21.72,0,1,0,31,0L50,7.82A1.93,1.93,0,0,0,48.26,5Z" fill="none" stroke="#fdfdfd" stroke-miterlimit="10" stroke-width="10"/><path d="M31.11,30.64H18.37a1.93,1.93,0,0,1-1.71-1L5.22,7.82A1.93,1.93,0,0,1,6.93,5H19.67a1.93,1.93,0,0,1,1.71,1L32.81,27.81A1.93,1.93,0,0,1,31.11,30.64Z" fill="#ff899c"/><path d="M24.09,30.64H36.82a1.93,1.93,0,0,0,1.71-1L50,7.82A1.93,1.93,0,0,0,48.26,5H35.53a1.93,1.93,0,0,0-1.71,1L22.38,27.81A1.93,1.93,0,0,0,24.09,30.64Z" fill="#ff899c"/><circle cx="27.6" cy="36.13" r="21.72" fill="#ff4661"/><path d="M29,27.47l2.32,3.39a1.69,1.69,0,0,0,.92.67l3.94,1.16A1.69,1.69,0,0,1,37,35.34l-2.5,3.26a1.69,1.69,0,0,0-.35,1.08l.11,4.11A1.69,1.69,0,0,1,32,45.42L28.16,44A1.69,1.69,0,0,0,27,44l-3.87,1.38a1.69,1.69,0,0,1-2.26-1.64L21,39.67a1.69,1.69,0,0,0-.35-1.08l-2.5-3.26A1.69,1.69,0,0,1,19,32.69L23,31.53a1.69,1.69,0,0,0,.92-.67l2.32-3.39A1.69,1.69,0,0,1,29,27.47Z" fill="#fdfdfd"/></g></g></svg>',study_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 51.65 67.19"><title> 51</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M34.18,56.41,19.18,58a.44.44,0,0,0-.17.82l5.09,2.91a3.48,3.48,0,0,0,3.45,0s4.63-2.81,7-4.43A.49.49,0,0,0,34.18,56.41Z" fill="#fff"/><path d="M33.53,49.26,17.7,51A2,2,0,0,0,16,53V53a2,2,0,0,0,2.15,1.94l15.83-1.76a2,2,0,0,0,1.74-1.94v-.06A2,2,0,0,0,33.53,49.26Z" fill="#fff"/><path d="M46.65,25.82A20.82,20.82,0,1,0,15.59,43.95v2.42a1.46,1.46,0,0,0,1.62,1.45L34.74,46a1.46,1.46,0,0,0,1.31-1.45v-.56A20.8,20.8,0,0,0,46.65,25.82Z" fill="#fff"/><path d="M19,58.82l5.09,2.91a3.48,3.48,0,0,0,3.45,0s4.63-2.81,7-4.43a.49.49,0,0,0-.34-.89L19.18,58A.44.44,0,0,0,19,58.82Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M36.05,44.51v-1a2,2,0,0,0-1.95-1.95H17.54a2,2,0,0,0-1.95,1.95v2.89a1.46,1.46,0,0,0,1.62,1.45L34.74,46A1.46,1.46,0,0,0,36.05,44.51Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><path d="M16,53V53a2,2,0,0,0,2.15,1.94l15.83-1.76a2,2,0,0,0,1.74-1.94v-.06a2,2,0,0,0-2.15-1.94L17.7,51A2,2,0,0,0,16,53Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="25.82" cy="25.82" r="20.82" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="25.82" cy="28.66" r="5.7" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><rect x="24.67" y="32.41" width="2.3" height="9.82" rx="1.15" ry="1.15" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><path d="M19,58.82l5.09,2.91a3.48,3.48,0,0,0,3.45,0s4.63-2.81,7-4.43a.49.49,0,0,0-.34-.89L19.18,58A.44.44,0,0,0,19,58.82Z" fill="#ffba00"/><path d="M36.05,44.51v-1a2,2,0,0,0-1.95-1.95H17.54a2,2,0,0,0-1.95,1.95v2.89a1.46,1.46,0,0,0,1.62,1.45L34.74,46A1.46,1.46,0,0,0,36.05,44.51Z" fill="#ffd42e"/><path d="M16,53V53a2,2,0,0,0,2.15,1.94l15.83-1.76a2,2,0,0,0,1.74-1.94v-.06a2,2,0,0,0-2.15-1.94L17.7,51A2,2,0,0,0,16,53Z" fill="#ffba00"/><circle cx="25.82" cy="25.82" r="20.82" fill="#ffd42e"/><circle cx="25.82" cy="28.66" r="5.7" fill="#fff"/><rect x="24.67" y="32.41" width="2.3" height="9.82" rx="1.15" ry="1.15" fill="#fff"/></g></g></svg>',study_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 51.45 64.55"><title> 52</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M8.83,5H42.62a3.83,3.83,0,0,1,3.83,3.83V52.51a3.83,3.83,0,0,1-3.83,3.83H9.7A4.7,4.7,0,0,1,5,51.64V8.83A3.83,3.83,0,0,1,8.83,5Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M8.83,5H42.62a3.83,3.83,0,0,1,3.83,3.83V52.51a3.83,3.83,0,0,1-3.83,3.83H9.7A4.7,4.7,0,0,1,5,51.64V8.83A3.83,3.83,0,0,1,8.83,5Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M9.87,56.34h3.37V5H8.1A3.1,3.1,0,0,0,5,8.1V51.47A4.87,4.87,0,0,0,9.87,56.34Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M9.66,47H46.45a0,0,0,0,1,0,0v5.52a3.79,3.79,0,0,1-3.79,3.79h-33A4.66,4.66,0,0,1,5,51.68v0A4.66,4.66,0,0,1,9.66,47Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><polygon points="21.89 59.55 17.57 56.81 13.24 59.55 13.24 50.71 21.89 50.71 21.89 59.55" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M8.83,5H42.62a3.83,3.83,0,0,1,3.83,3.83V52.51a3.83,3.83,0,0,1-3.83,3.83H9.7A4.7,4.7,0,0,1,5,51.64V8.83A3.83,3.83,0,0,1,8.83,5Z" fill="#8279ff"/><path d="M8.83,5H42.62a3.83,3.83,0,0,1,3.83,3.83V52.51a3.83,3.83,0,0,1-3.83,3.83H9.7A4.7,4.7,0,0,1,5,51.64V8.83A3.83,3.83,0,0,1,8.83,5Z" fill="#8e6dff"/><path d="M9.87,56.34h3.37V5H8.1A3.1,3.1,0,0,0,5,8.1V51.47A4.87,4.87,0,0,0,9.87,56.34Z" fill="#b9acff"/><path d="M9.66,47H46.45a0,0,0,0,1,0,0v5.52a3.79,3.79,0,0,1-3.79,3.79h-33A4.66,4.66,0,0,1,5,51.68v0A4.66,4.66,0,0,1,9.66,47Z" fill="#cac5ff"/><polygon points="21.89 59.55 17.57 56.81 13.24 59.55 13.24 50.71 21.89 50.71 21.89 59.55" fill="#8e6dff"/></g></g></svg>',study_6:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 57.01 63.46"><title> 53</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="25.43" y="5" width="6.15" height="8.79" rx="3.08" ry="3.08" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M27.8,9.4h1.41A19.23,19.23,0,0,1,48.44,28.62v9.63a1.87,1.87,0,0,1-1.87,1.87H10.44a1.87,1.87,0,0,1-1.87-1.87V28.62A19.23,19.23,0,0,1,27.8,9.4Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M21.72,45.88H35.29a0,0,0,0,1,0,0v5.79a6.79,6.79,0,0,1-6.79,6.79h0a6.79,6.79,0,0,1-6.79-6.79V45.88a0,0,0,0,1,0,0Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M50,51H7a2,2,0,0,1-1.7-3l2-3.27a2,2,0,0,1,1.7-1H48a2,2,0,0,1,1.7,1l2,3.27A2,2,0,0,1,50,51Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="25.43" y="5" width="6.15" height="8.79" rx="3.08" ry="3.08" fill="#ff4f65"/><path d="M27.8,9.4h1.41A19.23,19.23,0,0,1,48.44,28.62v9.63a1.87,1.87,0,0,1-1.87,1.87H10.44a1.87,1.87,0,0,1-1.87-1.87V28.62A19.23,19.23,0,0,1,27.8,9.4Z" fill="#ff4f65"/><path d="M21.72,45.88H35.29a0,0,0,0,1,0,0v5.79a6.79,6.79,0,0,1-6.79,6.79h0a6.79,6.79,0,0,1-6.79-6.79V45.88a0,0,0,0,1,0,0Z" fill="#ff899c"/><path d="M50,51H7a2,2,0,0,1-1.7-3l2-3.27a2,2,0,0,1,1.7-1H48a2,2,0,0,1,1.7,1l2,3.27A2,2,0,0,1,50,51Z" fill="#ff4f65"/></g></g></svg>',study_7:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 66.49 59.94"><title> 54</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M47.37,43.19a4.47,4.47,0,0,1-4.46-4.71,4.64,4.64,0,0,1,4.72-4.23h9.52A4.31,4.31,0,0,0,61.49,30v0c0-13.79-12.65-25-28.25-25S5,16.18,5,30s12.65,25,28.25,25A30.7,30.7,0,0,0,49.4,50.45a3.92,3.92,0,0,0-2-7.27Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="22.26" cy="40.48" r="4.1" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="18.16" cy="25.88" r="4.1" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="30.45" cy="16.37" r="4.1" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="45.91" cy="20.47" r="4.1" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M47.37,43.19a4.47,4.47,0,0,1-4.46-4.71,4.64,4.64,0,0,1,4.72-4.23h9.52A4.31,4.31,0,0,0,61.49,30v0c0-13.79-12.65-25-28.25-25S5,16.18,5,30s12.65,25,28.25,25A30.7,30.7,0,0,0,49.4,50.45a3.92,3.92,0,0,0-2-7.27Z" fill="#00c6ff"/><circle cx="22.26" cy="40.48" r="4.1" fill="#b4ebfd"/><circle cx="18.16" cy="25.88" r="4.1" fill="#fff"/><circle cx="30.45" cy="16.37" r="4.1" fill="#b4ebfd"/><circle cx="45.91" cy="20.47" r="4.1" fill="#fff"/></g></g></svg>',study_8:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61.05 63.52"><title> 55</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="6.86" y="8.32" width="18.43" height="23.7" rx="9.22" ry="9.22" transform="translate(-9.55 17.28) rotate(-45)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="35.76" y="8.32" width="18.43" height="23.7" rx="9.22" ry="9.22" transform="translate(62.52 66.23) rotate(-135)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M13.22,58.52a2.11,2.11,0,0,1-1.5-3.61l5.79-5.79a2.11,2.11,0,1,1,3,3L14.72,57.9A2.11,2.11,0,0,1,13.22,58.52Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M34.48,9.23H26.28a2.11,2.11,0,1,1,0-4.23h8.19a2.11,2.11,0,0,1,0,4.23Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="28.27" y="7.11" width="4.23" height="7.31" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M47.83,58.52a2.11,2.11,0,0,1-1.5-.62l-5.79-5.79a2.11,2.11,0,1,1,3-3l5.79,5.79a2.11,2.11,0,0,1-1.5,3.61Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><circle cx="30.53" cy="34.58" r="23.48" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M30.53,36.7H20.58a2.11,2.11,0,0,1,0-4.23h7.83V20.17a2.11,2.11,0,0,1,4.23,0V34.58A2.11,2.11,0,0,1,30.53,36.7Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="6.86" y="8.32" width="18.43" height="23.7" rx="9.22" ry="9.22" transform="translate(-9.55 17.28) rotate(-45)" fill="#ffd693"/><rect x="35.76" y="8.32" width="18.43" height="23.7" rx="9.22" ry="9.22" transform="translate(62.52 66.23) rotate(-135)" fill="#ffd693"/><line x1="13.22" y1="56.41" x2="19.01" y2="50.62" fill="none" stroke="#ffab00" stroke-linecap="round" stroke-miterlimit="10" stroke-width="4.23"/><line x1="26.28" y1="7.11" x2="34.48" y2="7.11" fill="none" stroke="#ffab00" stroke-linecap="round" stroke-miterlimit="10" stroke-width="4.23"/><line x1="30.38" y1="14.43" x2="30.38" y2="7.11" fill="none" stroke="#ffab00" stroke-miterlimit="10" stroke-width="4.23"/><line x1="47.83" y1="56.41" x2="42.04" y2="50.62" fill="none" stroke="#ffab00" stroke-linecap="round" stroke-miterlimit="10" stroke-width="4.23"/><circle cx="30.53" cy="34.58" r="23.48" fill="#ffab00"/><polyline points="30.53 20.17 30.53 34.58 20.58 34.58" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4.23"/></g></g></svg>',study_9:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61.08 53.57"><title> 56</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M26.27,2.58h24a0,0,0,0,1,0,0V33A13.84,13.84,0,0,1,36.39,46.8h0A13.84,13.84,0,0,1,22.56,33V6.29a3.71,3.71,0,0,1,3.71-3.71Z" transform="translate(44.67 67.88) rotate(-135)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M24.69,2.58h0A13.84,13.84,0,0,1,38.53,16.41V46.8a0,0,0,0,1,0,0h-24a3.71,3.71,0,0,1-3.71-3.71V16.41A13.84,13.84,0,0,1,24.69,2.58Z" transform="translate(-10.23 24.69) rotate(-45)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M26.27,2.58h24a0,0,0,0,1,0,0V33A13.84,13.84,0,0,1,36.39,46.8h0A13.84,13.84,0,0,1,22.56,33V6.29a3.71,3.71,0,0,1,3.71-3.71Z" transform="translate(44.67 67.88) rotate(-135)" fill="#ff8891"/><path d="M24.69,2.58h0A13.84,13.84,0,0,1,38.53,16.41V46.8a0,0,0,0,1,0,0h-24a3.71,3.71,0,0,1-3.71-3.71V16.41A13.84,13.84,0,0,1,24.69,2.58Z" transform="translate(-10.23 24.69) rotate(-45)" fill="#ff6b5f"/></g></g></svg>',study_10:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 51.09 54.63"><title> 57</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="19.33" y="9.82" width="11.93" height="30.08" rx="0.88" ry="0.88" transform="translate(24.99 -10.61) rotate(45)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="33.35" y="8.03" width="11.93" height="5.65" rx="0.88" ry="0.88" transform="translate(19.19 -24.62) rotate(45)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M6.3,42.81l2.36-8.69a.86.86,0,0,1,1.44-.38l6.33,6.33A.86.86,0,0,1,16,41.5L7.35,43.87A.86.86,0,0,1,6.3,42.81Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M44.32,49.63H6.76a1.76,1.76,0,1,1,0-3.53H44.32a1.76,1.76,0,1,1,0,3.53Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="19.33" y="9.82" width="11.93" height="30.08" rx="0.88" ry="0.88" transform="translate(24.99 -10.61) rotate(45)" fill="#00c9ff"/><rect x="33.35" y="8.03" width="11.93" height="5.65" rx="0.88" ry="0.88" transform="translate(19.19 -24.62) rotate(45)" fill="#44d7ff"/><path d="M6.3,42.81l2.36-8.69a.86.86,0,0,1,1.44-.38l6.33,6.33A.86.86,0,0,1,16,41.5L7.35,43.87A.86.86,0,0,1,6.3,42.81Z" fill="#44d7ff"/><line x1="6.76" y1="47.87" x2="44.32" y2="47.87" fill="none" stroke="#89e0ff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.53"/></g></g></svg>',study_11:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.35 57.35"><title> 58</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M33.19,6.85,39,15.39a4.26,4.26,0,0,0,2.31,1.68L51.29,20a4.26,4.26,0,0,1,2.17,6.69L47.14,34.9a4.26,4.26,0,0,0-.88,2.72L46.55,48a4.26,4.26,0,0,1-5.69,4.13L31.1,48.63a4.26,4.26,0,0,0-2.86,0L18.49,52.1A4.26,4.26,0,0,1,12.8,48l.28-10.35a4.26,4.26,0,0,0-.88-2.72L5.89,26.69A4.26,4.26,0,0,1,8.06,20L18,17.07a4.26,4.26,0,0,0,2.31-1.68l5.85-8.54A4.26,4.26,0,0,1,33.19,6.85Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M28.6,48.52a3.79,3.79,0,0,1,2.5.11l9.76,3.46A4.26,4.26,0,0,0,46.54,48l-.28-10.35a4.18,4.18,0,0,1,.88-2.72S42.58,43.62,28.6,48.52Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M30.95,20.75l2.13,3.1a1.55,1.55,0,0,0,.84.61l3.61,1.06A1.55,1.55,0,0,1,38.31,28l-2.29,3a1.55,1.55,0,0,0-.32,1l.1,3.76a1.55,1.55,0,0,1-2.07,1.5l-3.54-1.26a1.55,1.55,0,0,0-1,0l-3.54,1.26a1.55,1.55,0,0,1-2.07-1.5l.1-3.76a1.55,1.55,0,0,0-.32-1L21,28a1.55,1.55,0,0,1,.79-2.43l3.61-1.06a1.55,1.55,0,0,0,.84-.61l2.13-3.1A1.55,1.55,0,0,1,30.95,20.75Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M33.19,6.85,39,15.39a4.26,4.26,0,0,0,2.31,1.68L51.29,20a4.26,4.26,0,0,1,2.17,6.69L47.14,34.9a4.26,4.26,0,0,0-.88,2.72L46.55,48a4.26,4.26,0,0,1-5.69,4.13L31.1,48.63a4.26,4.26,0,0,0-2.86,0L18.49,52.1A4.26,4.26,0,0,1,12.8,48l.28-10.35a4.26,4.26,0,0,0-.88-2.72L5.89,26.69A4.26,4.26,0,0,1,8.06,20L18,17.07a4.26,4.26,0,0,0,2.31-1.68l5.85-8.54A4.26,4.26,0,0,1,33.19,6.85Z" fill="#ffba00"/><path d="M28.6,48.52a3.79,3.79,0,0,1,2.5.11l9.76,3.46A4.26,4.26,0,0,0,46.54,48l-.28-10.35a4.18,4.18,0,0,1,.88-2.72S42.58,43.62,28.6,48.52Z" fill="#ffdd3c"/><path d="M30.95,20.75l2.13,3.1a1.55,1.55,0,0,0,.84.61l3.61,1.06A1.55,1.55,0,0,1,38.31,28l-2.29,3a1.55,1.55,0,0,0-.32,1l.1,3.76a1.55,1.55,0,0,1-2.07,1.5l-3.54-1.26a1.55,1.55,0,0,0-1,0l-3.54,1.26a1.55,1.55,0,0,1-2.07-1.5l.1-3.76a1.55,1.55,0,0,0-.32-1L21,28a1.55,1.55,0,0,1,.79-2.43l3.61-1.06a1.55,1.55,0,0,0,.84-.61l2.13-3.1A1.55,1.55,0,0,1,30.95,20.75Z" fill="#fdfdfd"/></g></g></svg>',study_12:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 63.64 53.84"><title> 59</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="53.47" y="18.79" width="3" height="11.53" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M56.67,20.26l-21,8.63a10.14,10.14,0,0,1-7.71,0L7,20.26a3.17,3.17,0,0,1,0-5.87L28,5.76a10.14,10.14,0,0,1,7.71,0l21,8.63A3.17,3.17,0,0,1,56.67,20.26Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M33.71,33.26a5.41,5.41,0,0,1-4.14,0l-15.5-6.41h0V42.8c0,3.34,7.87,6,17.58,6s17.58-2.7,17.58-6V26.85h0Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="52.24" y="26.92" width="5.46" height="5.46" rx="1.3" ry="1.3" transform="translate(37.07 -30.19) rotate(45)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><line x1="54.97" y1="18.79" x2="54.97" y2="30.32" fill="none" stroke="#64d4ff" stroke-miterlimit="10" stroke-width="3"/><path d="M56.67,20.26l-21,8.63a10.14,10.14,0,0,1-7.71,0L7,20.26a3.17,3.17,0,0,1,0-5.87L28,5.76a10.14,10.14,0,0,1,7.71,0l21,8.63A3.17,3.17,0,0,1,56.67,20.26Z" fill="#00baff"/><path d="M33.71,33.26a5.41,5.41,0,0,1-4.14,0l-15.5-6.41h0V42.8c0,3.34,7.87,6,17.58,6s17.58-2.7,17.58-6V26.85h0Z" fill="#64d4ff"/><rect x="52.24" y="26.92" width="5.46" height="5.46" rx="1.3" ry="1.3" transform="translate(37.07 -30.19) rotate(45)" fill="#64d4ff"/></g></g></svg>',study_13:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55.86 53.95"><title> 60</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M46.45,19.06H29.07a.64.64,0,0,1-.55-1L33,10.8a3.84,3.84,0,0,0-.15-4.39A3.7,3.7,0,0,0,27.39,6l-12,11.71A4.41,4.41,0,0,0,14,20.92V44.4a4.41,4.41,0,0,0,4.41,4.41H42.24a4.41,4.41,0,0,0,4.32-3.54l4.2-20.93A4.41,4.41,0,0,0,46.45,19.06Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><line x1="8" y1="22.68" x2="8" y2="45.95" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M8,48.95a3,3,0,0,1-3-3V22.68a3,3,0,0,1,6,0V45.95A3,3,0,0,1,8,48.95Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M46.45,19.06H29.07a.64.64,0,0,1-.55-1L33,10.8a3.84,3.84,0,0,0-.15-4.39A3.7,3.7,0,0,0,27.39,6l-12,11.71A4.41,4.41,0,0,0,14,20.92V44.4a4.41,4.41,0,0,0,4.41,4.41H42.24a4.41,4.41,0,0,0,4.32-3.54l4.2-20.93A4.41,4.41,0,0,0,46.45,19.06Z" fill="#ff6969"/><line x1="8" y1="22.68" x2="8" y2="45.95" fill="#ff4c48" stroke="#ff8585" stroke-linecap="round" stroke-linejoin="round" stroke-width="6"/></g></g></svg>',study_14:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56.7 52.12"><title> 61</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="5" y="5" width="46.7" height="34.89" rx="4" ry="4" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M22.2,26.37V18.52a2.3,2.3,0,0,1,3.46-2l6.68,3.93a2.3,2.3,0,0,1,0,4l-6.68,3.93A2.3,2.3,0,0,1,22.2,26.37Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M41.18,47.12H15.52a2,2,0,0,1,0-4H41.18a2,2,0,0,1,0,4Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><rect x="5" y="5" width="46.7" height="34.89" rx="4" ry="4" fill="#8e6dff"/><path d="M22.2,26.37V18.52a2.3,2.3,0,0,1,3.46-2l6.68,3.93a2.3,2.3,0,0,1,0,4l-6.68,3.93A2.3,2.3,0,0,1,22.2,26.37Z" fill="#fff"/><line x1="15.52" y1="45.12" x2="41.18" y2="45.12" fill="none" stroke="#b7adff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"/></g></g></svg>',study_15:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61.94 53.9"><title> 62</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><path d="M31,48.9a2,2,0,0,1-2-2V36a2,2,0,1,1,3.92,0V46.94A2,2,0,0,1,31,48.9Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M13.57,5h34.8a0,0,0,0,1,0,0V23A16.83,16.83,0,0,1,31.53,39.8H30.4A16.83,16.83,0,0,1,13.57,23V5A0,0,0,0,1,13.57,5Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M6.93,5h6.64a0,0,0,0,1,0,0V22.66a0,0,0,0,1,0,0h-1A7.54,7.54,0,0,1,5,15.12V6.93A1.93,1.93,0,0,1,6.93,5Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M55.91,5h1a0,0,0,0,1,0,0V22.66a0,0,0,0,1,0,0H50.3a1.93,1.93,0,0,1-1.93-1.93V12.54A7.54,7.54,0,0,1,55.91,5Z" transform="translate(105.3 27.66) rotate(-180)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M39.13,48.9H22.8a2,2,0,0,1,0-3.92H39.13a2,2,0,0,1,0,3.92Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M32,14.75l1.7,2.48a1.24,1.24,0,0,0,.67.49l2.89.85a1.24,1.24,0,0,1,.63,1.94L36,22.9a1.24,1.24,0,0,0-.26.79l.08,3a1.24,1.24,0,0,1-1.65,1.2l-2.84-1a1.24,1.24,0,0,0-.83,0l-2.84,1a1.24,1.24,0,0,1-1.65-1.2l.08-3a1.24,1.24,0,0,0-.26-.79l-1.83-2.38a1.24,1.24,0,0,1,.63-1.94l2.89-.85a1.24,1.24,0,0,0,.67-.49l1.7-2.48A1.24,1.24,0,0,1,32,14.75Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><line x1="30.97" y1="36.02" x2="30.97" y2="46.94" fill="none" stroke="#ffda3f" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.86"/><path d="M13.57,5h34.8a0,0,0,0,1,0,0V23A16.83,16.83,0,0,1,31.53,39.8H30.4A16.83,16.83,0,0,1,13.57,23V5A0,0,0,0,1,13.57,5Z" fill="#ffad00"/><path d="M6.93,5h6.64a0,0,0,0,1,0,0V22.66a0,0,0,0,1,0,0h-1A7.54,7.54,0,0,1,5,15.12V6.93A1.93,1.93,0,0,1,6.93,5Z" fill="#ffc700"/><path d="M55.91,5h1a0,0,0,0,1,0,0V22.66a0,0,0,0,1,0,0H50.3a1.93,1.93,0,0,1-1.93-1.93V12.54A7.54,7.54,0,0,1,55.91,5Z" transform="translate(105.3 27.66) rotate(-180)" fill="#ffc700"/><line x1="22.8" y1="46.94" x2="39.13" y2="46.94" fill="none" stroke="#ffda3f" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.86"/><path d="M32,14.75l1.7,2.48a1.24,1.24,0,0,0,.67.49l2.89.85a1.24,1.24,0,0,1,.63,1.94L36,22.9a1.24,1.24,0,0,0-.26.79l.08,3a1.24,1.24,0,0,1-1.65,1.2l-2.84-1a1.24,1.24,0,0,0-.83,0l-2.84,1a1.24,1.24,0,0,1-1.65-1.2l.08-3a1.24,1.24,0,0,0-.26-.79l-1.83-2.38a1.24,1.24,0,0,1,.63-1.94l2.89-.85a1.24,1.24,0,0,0,.67-.49l1.7-2.48A1.24,1.24,0,0,1,32,14.75Z" fill="#fdfdfd"/></g></g></svg>',study_16:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.68 55.23"><title> 63</title><g id="_2" data-name=" 2"><g id="_1-2" data-name=" 1"><rect x="20.8" y="16.09" width="26.15" height="4" transform="matrix(0.99, -0.16, 0.16, 0.99, -2.42, 5.55)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><path d="M20.18,42.63a2,2,0,0,1-2-2V11.3a2,2,0,0,1,1.69-2L47.37,5a2,2,0,0,1,2.31,2V36.61a2,2,0,0,1-4,0V9.34L22.18,13V40.63A2,2,0,0,1,20.18,42.63Z" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><ellipse cx="13.6" cy="42.71" rx="9.32" ry="6.6" transform="translate(-21.14 14.39) rotate(-33.15)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><ellipse cx="41.08" cy="38.88" rx="9.32" ry="6.6" transform="translate(-14.57 28.79) rotate(-33.15)" fill="none" stroke="#fcfcfc" stroke-linecap="round" stroke-linejoin="round" stroke-width="10"/><line x1="20.96" y1="20.15" x2="46.79" y2="16.04" fill="none" stroke="#78daff" stroke-miterlimit="10" stroke-width="4"/><polyline points="20.18 40.63 20.18 11.29 47.68 7 47.68 36.61" fill="none" stroke="#0dceff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"/><ellipse cx="13.6" cy="42.71" rx="9.32" ry="6.6" transform="translate(-21.14 14.39) rotate(-33.15)" fill="#78daff"/><ellipse cx="41.08" cy="38.88" rx="9.32" ry="6.6" transform="translate(-14.57 28.79) rotate(-33.15)" fill="#78daff"/></g></g></svg>'},dd=function(){let t={};for(let[e,i]of Object.entries(hd)){let n="data:image/svg+xml;base64,"+btoa(i.replace(/[^\u0000-\u00ff]/g,""));t[e]=n}return t}();(0,o.define)("mm-configuration-map",class extends o.Component{render(){return o.html`
		<template class="mm-configuration-map">
			<header>Map</header>


			<section>
				<mm-struct-theme-select
					.themeName=${this.minderExported.commands.queryValue("StructTheme")}
					@@select=${this.setStructTheme}
				/>
				<div class="spacer"></div>
				<header>Struct Theme</header>
			</section>


			<section>
				<mm-color-theme-select
					.themeName=${this.minderExported.commands.queryValue("ColorTheme")}
					@@select=${this.setColorTheme}
				/>
				<div class="spacer"></div>
				<header>Color Theme</header>
			</section>


			<section>
				<mm-color-select
					.color=${this.minderExported.commands.queryValue("BackgroundColor")}
					@@select=${this.setBackgroundColor}
				/>
				<div class="spacer"></div>
				<header>Background Color</header>
			</section>


			<section>
				<mm-multi-color-select
					.multiColor=${this.minderExported.commands.queryValue("RootMultiConnectColor")}
					@@select=${this.setMultiConnectColor}
				/>
				<header>Multi-Branch Color</header>
			</section>


			<section>
				<f-switch
					.value=${this.minderExported.commands.queryValue("RootTaperedLine")}
					@@change=${this.setTaperedLine}
				/>
				<div class="spacer"></div>
				<header>Tapered Line</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("RootTaperedLineStartWidth")}
			>
				<f-slider
					class="mm-radius-slider"
					.value=${this.minderExported.commands.queryValue("RootTaperedLineStartWidth")||0}
					.min=${5}
					.max=${20}
					.step=${1}
					@@change=${this.setTaperedStartWidth}
				/>
				<div class="spacer"></div>
				<header>Tapered Start Width</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("RootTaperedLinePower")}
			>
				<f-slider
					class="mm-radius-slider"
					.value=${this.minderExported.commands.queryValue("BranchTaperedLinePower")||0}
					.min=${-1}
					.max=${3}
					.step=${.1}
					@@change=${this.setTaperedPower}
				/>
				<div class="spacer"></div>
				<header>Tapered Power</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("RootConnectOutAdjust")}
			>
				<mm-connect-out-adjust-select
					.outAdjust=${this.minderExported.commands.queryValue("RootConnectOutAdjust")||"none"}
					@@select=${this.setConnectOutAdjust}
				/>
				<div class="spacer"></div>
				<header>Connect Out Adjust</header>
			</section>


			<section
				:show=${this.minderExported.commands.canExec("JustifySameDeepthWidth")}
			>
				<f-switch
					.value=${this.minderExported.commands.queryValue("JustifySameDeepthWidth")}
					@@change=${this.setJustifySameDeepthWidth}
				/>
				<div class="spacer"></div>
				<header>Justify Same Depth Width</header>
			</section>

		</template>
		`}setColorTheme(t){this.minderExported.commands.exec("ColorTheme",t)}setStructTheme(t){this.minderExported.commands.exec("StructTheme",t)}setBackgroundColor(t){this.minderExported.commands.exec("BackgroundColor",t)}setMultiConnectColor(t){this.minderExported.commands.exec("RootMultiConnectColor",t||void 0)}setTaperedLine(t){this.minderExported.commands.exec("RootTaperedLine",t)}setTaperedStartWidth(t){this.minderExported.commands.exec("RootTaperedLineStartWidth",t)}setTaperedPower(t){this.minderExported.commands.exec("RootTaperedLinePower",t)}setConnectOutAdjust(t){this.minderExported.commands.exec("RootConnectOutAdjust",t)}setJustifySameDeepthWidth(t){this.minderExported.commands.exec("JustifySameDeepthWidth",t)}}),(0,o.define)("mm-color-select",class extends o.Component{constructor(){super(...arguments),this.color=""}render(){return o.html`
		<template class="mm-color-select"
			:style.background=${this.color}
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup"})}
		/>
		`}renderMenu(){return o.html`<mm-color-menu .herizontal @@select=${this.onSelectColor} />`}onSelectColor(t){this.color=t,this.emit("select",t)}}),(0,o.define)("mm-color-menu",class extends r.Menu{constructor(){super(...arguments),this.COLORS=["#000000","#424242","#626262","#9d9d95","#c7c7c7","#efefef","#f7f7f7","#ffffff","#f7c7cf","#ffebcb","#ffebcb","#d7efd7","#d3dbe7","#cfe7f7","#d3dbe7","#e7d7df","#e79d9d","#ffc79d","#ffe79d","#b5d7a5","#a5c7cf","#9dc7ef","#b5a5d7","#d7a5bd","#e76262","#f7ad6a","#ffd762","#95bd7a","#72a5ad","#6aaddf","#8d7ac7","#c77aa5","#cf0000","#e79538","#efc730","#6aa54a","#4a7a8d","#3885c7","#624aa5","#a54a7a","#9d0000","#b56208","#bd9500","#387a20","#104a5a","#085295","#301872","#721842","#620000","#7a3800","#285218","#285218","#083038","#003062","#20104a","#4a1030"]}render(){return o.html`
		<template class="mm-color-menu">
			<ul>
			${this.COLORS.map((t=>o.html`
					<li
						:style.background=${t}
						${(0,r.tooltip)(`Color ${t}`,{alignPosition:"t"})}
						@click=${()=>this.onClickColor(t)}
					.>
				`))}
			</ul>
		</template>
		`.extends(super.render())}onClickColor(t){this.emit("select",t)}}),(0,o.define)("mm-multi-color-select",class extends o.Component{constructor(){super(...arguments),this.multiColor=""}render(){return o.html`
		<template class="mm-multi-color-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup"})}
		>
			<mm-multi-color .name=${this.multiColor} />
		</template>
		`}renderMenu(){return o.html`
		<mm-multi-color-menu
			.herizontal
			.multiColor=${this.multiColor}
			@@select=${this.onSelectMultiColor}
		/>
		`}onSelectMultiColor(t){this.multiColor=t,this.emit("select",t)}}),(0,o.define)("mm-multi-color",class extends o.Component{constructor(){super(...arguments),this.name=""}render(){let t=od.MultiColors[this.name]||["#e0e0e0"];return o.html`
		<template class="mm-multi-color">
			${t.map((t=>o.html`
				<div :style.background=${t}></div>
			`))}
		</template>
		`}}),(0,o.define)("mm-multi-color-menu",class extends r.Menu{constructor(){super(...arguments),this.multiColor=""}render(){return o.html`
		<template class="mm-multi-color-menu">
			<mm-multi-color @click=${()=>this.onClickColor("")} />

			${Object.keys(od.MultiColors).map((t=>o.html`
					<mm-multi-color
						.name=${t}
						:class.active=${t===this.multiColor}
						${(0,r.tooltip)(`MultiColor ${t}`,{alignPosition:"t"})}
						@click=${()=>this.onClickColor(t)}
					/>
				`))}
		</template>
		`.extends(super.render())}onClickColor(t){this.emit("select",t)}}),(0,o.define)("mm-color-theme-select",class extends o.Component{render(){return o.html`
			<template class="mm-color-theme-select"
				${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0,canShrinkInY:!0})}
			>
				<mm-color-theme
					.name=${this.themeName}
				/>
			</template>
		`}renderMenu(){return o.html`
			<mm-color-theme-menu
				.herizontal
				.themeName=${this.themeName}
				@@select=${this.onSelectThemeName}
			/>
		`}onSelectThemeName(t){this.emit("select",t)}}),(0,o.define)("mm-color-theme",class extends o.Component{constructor(){super(...arguments),this.name=""}async onReady(){this.watchImmediately((()=>this.name),(async t=>{var e;null===(e=this.el.firstElementChild)||void 0===e||e.remove();let i=await od.colorThemePreviewer.renderSVG(t,{style:{root:{radius:20,connect:"fork-rounded"},main:{radius:15}}});i&&this.el.append(i.element)}))}render(){return o.html`
			<template class="mm-color-theme" />
		`}}),(0,o.define)("mm-color-theme-menu",class extends r.Menu{constructor(){super(...arguments),this.themeName=""}render(){return o.html`
			<template class="mm-color-theme-menu">
				<div class="mm-color-theme-menu-scroller">
					${Object.keys(od.ColorThemes).sort().map((t=>o.html`
							<mm-color-theme
								.name=${t}
								:class.active=${t===this.themeName}
								${(0,r.tooltip)(`Theme ${t}`,{alignPosition:"l"})}
								@click=${()=>this.onClickTheme(t)}
							/>
						`))}
				</div>
			</template>
		`.extends(super.render())}onClickTheme(t){this.emit("select",t)}}),(0,o.define)("mm-struct-theme-select",class extends o.Component{render(){return o.html`
			<template class="mm-struct-theme-select"
				${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0,canShrinkInY:!0})}
			>
				<mm-struct-theme
					.name=${this.themeName}
				/>
			</template>
		`}renderMenu(){return o.html`
			<mm-struct-theme-menu
				.herizontal
				.themeName=${this.themeName}
				@@select=${this.onSelectThemeName}
			/>
		`}onSelectThemeName(t){this.emit("select",t)}}),(0,o.define)("mm-struct-theme",class extends o.Component{constructor(){super(...arguments),this.name=""}async onReady(){this.watchImmediately((()=>this.name),(async t=>{var e;null===(e=this.el.firstElementChild)||void 0===e||e.remove();let i=await od.structThemePreviewer.renderSVG(t,{style:{root:{"fill-color":"#555455",radius:20},main:{"fill-color":"#aca29d",radius:15}}});i&&this.el.append(i.element)}))}render(){return o.html`
			<template class="mm-struct-theme" />
		`}}),(0,o.define)("mm-struct-theme-menu",class extends r.Menu{constructor(){super(...arguments),this.themeName=""}render(){return o.html`
			<template class="mm-struct-theme-menu">
				<div class="mm-struct-theme-menu-scroller">
					${Object.keys(od.StructThemes).sort().map((t=>o.html`
							<mm-struct-theme
								.name=${t}
								:class.active=${t===this.themeName}
								${(0,r.tooltip)(`Theme ${t}`,{alignPosition:"l"})}
								@click=${()=>this.onClickTheme(t)}
							/>
						`))}
				</div>
			</template>
		`.extends(super.render())}onClickTheme(t){this.emit("select",t)}}),(0,o.define)("mm-zoom-show",class extends o.Component{onCreated(){this.minderExported.on("paper-view-transform-update",this.update,this)}render(){return o.html`
			<template class="mm-zoom-show">
				${Math.round(100*this.minderExported.commands.queryValue("ViewZoom"))}%
			</template>
		`}}),(0,o.define)("mm-exporter",class extends o.Component{render(){return o.html`
			<template class="mm-exporter" ${(0,r.popup)((()=>this.renderMenu()))}>
				Export
			</template>
		`}renderMenu(){return o.html`
			<f-menu class="mm-exporter-menu">
				<ul>
					<li @click=${()=>this.exportAs("text")}>Text</li>
					<li @click=${()=>this.exportAs("svg")}>SVG</li>
					<li @click=${()=>this.exportAs("json")}>JSON</li>
					<li @click=${()=>this.exportAs("jpeg")}>JPEG</li>
					<li @click=${()=>this.exportAs("png")}>PNG</li>
					<!-- <li>Docx</li>
					<li>PDF</li> -->
				</ul>
			</f-menu>
		`}exportAs(t){this.minderExported.exportAsFile(t,"gitmind",{expandAll:!0,fillDefaultText:!0})}});var cd=i(5499);(0,o.define)("mm-toolbar",class extends o.Component{render(){return o.html`
		<template class="mm-toolbar"
			:hide=${this.minderExported.status.isReadonly()}
		>
			<ul>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("BranchAddSibling")}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Topic ${this.renderShortcutKey("BranchAddSibling")}</header>
							<div class="mm-toolbar-tooltip-text">Add a topic after selected topic</div>
						`,{alignPosition:"t"})}
					@click=${()=>this.minderExported.commands.exec("BranchAddSibling")}
				>Topic</li>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("BranchAddChild")}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Sub Topic ${this.renderShortcutKey("BranchAddChild")}</header>
							<div class="mm-toolbar-tooltip-text">Add a child topic to selected topic</div>
						`,{alignPosition:"t"})}
					@click=${()=>this.minderExported.commands.exec("BranchAddChild")}
				>Sub Topic</li>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("BranchDuplicate")}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Duplicate Topic ${this.renderShortcutKey("BranchDuplicate")}</header>
							<div class="mm-toolbar-tooltip-text">Duplicate selected topic</div>
						`,{alignPosition:"t"})}
					@click=${()=>this.minderExported.commands.exec("BranchDuplicate")}
				>Duplicate</li>
					
				<li class="spliter"></li>

				<li class="bar"
					:class.disabled=${!(this.minderExported.commands.canExec("RelLineAdd")||this.minderExported.commands.canExec("RelLineAddBetween"))}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Relationship Line ${this.renderShortcutKey("RelLineAdd")}</header>
							<div class="mm-toolbar-tooltip-text">${this.minderExported.commands.canExec("RelLineAdd")?"Add a relationship line from selected topic":"Add a relationship line between selected topics"}</div>
						`,{alignPosition:"t"})}
					@click=${()=>{this.minderExported.commands.canExec("RelLineAdd")?this.minderExported.commands.exec("RelLineAdd"):this.minderExported.commands.exec("RelLineAddBetween")}}
				>Relationship</li>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("SummaryAdd")}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Summary ${this.renderShortcutKey("SummaryAdd")}</header>
							<div class="mm-toolbar-tooltip-text">Add a summary to selected topics</div>
						`,{alignPosition:"t"})}
					@click=${()=>this.minderExported.commands.exec("SummaryAdd")}
				>Summary</li>
				
				<li class="spliter"></li>
				
				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("Image")}
					@click=${this.pickImage}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Image ${this.renderShortcutKey("Image")}</header>
							<div class="mm-toolbar-tooltip-text">Pick a image from your driver for selected topic</div>
						`,{alignPosition:"t"})}
				>
					Pick Image
				</li>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("Hyperlink")}
					@click=${this.setHyperlink}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Hyperlink ${this.renderShortcutKey("Hyperlink")}</header>
							<div class="mm-toolbar-tooltip-text">Add a hyperlink to selected topic</div>
						`,{alignPosition:"t"})}
				>
					Hyperlink
				</li>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("Note")}
					@click=${this.setNote}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Note ${this.renderShortcutKey("Note")}</header>
							<div class="mm-toolbar-tooltip-text">Add note to selected topic</div>
						`,{alignPosition:"t"})}
				>
					Note
				</li>

				<li class="spliter"></li>

				<li class="bar"
					:class.disabled=${!this.minderExported.commands.canExec("BoundaryAdd")}
					@click=${this.addBoundary}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Add Boundary ${this.renderShortcutKey("Note")}</header>
							<div class="mm-toolbar-tooltip-text">Add boundary to selected topics</div>
						`,{alignPosition:"t"})}
				>
					Boundary
				</li>

				<li class="spliter"></li>
				
				<li class="bar"
					@click=${this.doPresentation}
					${(0,r.tooltip)(o.html`
							<header class="mm-toolbar-tooltip-header">Presentation</header>
							<div class="mm-toolbar-tooltip-text">Click to start presentation</div>
						`,{alignPosition:"t"})}
				>
					Presentation
				</li>
			</ul>
		</template>
		`}renderShortcutKey(t){let e=this.minderExported.commands.getShortcutKeys(t);return e?o.html`<span>(${e.join(", ")})</span>`:""}async pickImage(){let t=await(0,cd.selectFile)("image/*");if(!t)return;let e=URL.createObjectURL(t),i=await vr(e),n={width:i.naturalWidth,height:i.naturalHeight};this.setImage(e,t.name,n)}setImage(t,e,i){let n;if(i){let t=Math.min(300/i.width,300/i.height);n={...i},n.width=Math.round(n.width*t),n.height=Math.round(n.height*t)}this.minderExported.commands.exec("Image",{url:t||void 0,title:e||void 0,naturalSize:i,size:n})}async setHyperlink(){var t;let e=await r.dialog.prompt("Input hyperlink location:",{defaultValue:(null===(t=this.minderExported.commands.queryValue("Hyperlink"))||void 0===t?void 0:t.url)||""});void 0!==e&&this.minderExported.commands.exec("Hyperlink",e||void 0,void 0)}async setNote(){let t=await r.dialog.prompt("Input note:",{defaultValue:this.minderExported.commands.queryValue("Note")||"",inputType:"textarea"});void 0!==t&&this.minderExported.commands.exec("Note",t||void 0)}async addBoundary(){this.minderExported.commands.exec("BoundaryAdd")}doPresentation(){this.minderExported.presentation.start({author:"FF"},{enterFullscreen:!0})}}),(0,o.define)("mm-birdeye-previewer",class extends o.Component{onCreated(){this.minderExported.requestBirdEyePreview().appendTo(this.el)}render(){return o.html`
			<template class="mm-birdeye-previewer" />
		`}}),(0,o.define)("mm-configuration-node-shape",class extends o.Component{render(){var t;return o.html`
		<template class="mm-configuration-node-shape">
			<header>Node Shape Style</header>

			<section
				:enable=${this.minderExported.commands.canExec("NodeShape")}
			>
				<mm-shape-select
					.allowedShapeNames=${this.minderExported.getAllowedShapeNames()}
					.shapeName=${null!==(t=this.minderExported.commands.queryValue("NodeShape"))&&void 0!==t?t:"rect"}
					@@select=${this.setShape}
				/>
				<div class="spacer"></div>
				<header>Shape</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeFillColor")}
			>
				<mm-color-select
					.color=${this.minderExported.commands.queryValue("NodeFillColor")}
					@@select=${this.setFillColor}
				/>
				<div class="spacer"></div>
				<header>Fill Color</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeStrokeWidth")}
			>
				<mm-border-width-select
					.width=${this.minderExported.commands.queryValue("NodeStrokeWidth")}
					@@select=${this.setStrokeWidth}
				/>
				<div class="spacer"></div>
				<header>Border Width</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeStrokeColor")}
			>
				<mm-color-select
					.color=${this.minderExported.commands.queryValue("NodeStrokeColor")}
					@@select=${this.setStrokeColor}
				/>
				<div class="spacer"></div>
				<header>Stroke Color</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeRadius")}
			>
				<f-slider
					class="mm-radius-slider"
					.value=${this.minderExported.commands.queryValue("NodeRadius")||0}
					.max=${50}
					.step=${1}
					@@change=${this.setRadius}
					@@dragstart=${this.setRadiusStart}
					@@dragend=${this.setRadiusEnd}
				/>
				<div class="spacer"></div>
				<header>Radius</header>
			</section>


		</template>
		`}setShape(t){this.minderExported.commands.exec("NodeShape",t)}setRadiusStart(){this.minderExported.history.startRecording()}setRadiusEnd(){this.minderExported.history.endRecording()}setRadius(t){this.minderExported.commands.exec("NodeRadius",t)}setFillColor(t){this.minderExported.commands.exec("NodeFillColor",t)}setStrokeWidth(t){this.minderExported.commands.exec("NodeStrokeWidth",t)}setStrokeColor(t){this.minderExported.commands.exec("NodeStrokeColor",t)}}),(0,o.define)("mm-shape-select",class extends o.Component{constructor(){super(...arguments),this.allowedShapeNames=[]}render(){return o.html`
		<template class="mm-shape-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0})}
		>
			<mm-shape
				.name=${this.shapeName}
				${(0,r.tooltip)(this.shapeName,{alignPosition:"r"})}
			/>
		</template>
		`}renderMenu(){return o.html`
		<mm-shape-menu
			.herizontal
			.allowedShapeNames=${this.allowedShapeNames}
			.shapeName=${this.shapeName}
			@@select=${this.onSelectShape}
		/>`}onSelectShape(t){this.shapeName=t,this.emit("select",t)}}),(0,o.define)("mm-shape",class extends o.Component{onReady(){this.watchImmediately((()=>this.name),(()=>this.updateSVG()))}async updateSVG(){var t;let e=await od.shapePreviewer.renderSVG(this.name);null===(t=this.el.querySelector("svg"))||void 0===t||t.remove(),this.el.append(e.element)}render(){return o.html`
		<template class="mm-shape" />
		`}}),(0,o.define)("mm-shape-menu",class extends r.Menu{constructor(){super(...arguments),this.allowedShapeNames=[]}render(){return o.html`
		<template class="mm-shape-menu">
			<ul>
			${od.ShapeNames.map((t=>o.html`
					<li 
						:class.active=${t===this.shapeName}
						:enable=${this.allowedShapeNames.includes(t)}
						${(0,r.tooltip)(t,{alignPosition:"t"})}
						@click=${()=>this.onClickShape(t)}
					>
						<mm-shape
							.name=${t}

						/>
					</li>
				`))}
			</ul>
		</template>
		`.extends(super.render())}onClickShape(t){this.emit("select",t)}}),(0,o.define)("mm-border-width-select",class extends o.Component{constructor(){super(...arguments),this.width=0}render(){return o.html`
		<template class="mm-border-width-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup"})}
		>
			<mm-border-width .width=${this.width} />
		</template>
		`}renderMenu(){return o.html`<mm-border-width-menu
			.herizontal
			.width=${this.width}
			@@select=${this.onSelectBorderWidth}
		/>`}onSelectBorderWidth(t){this.width=t,this.emit("select",t)}}),(0,o.define)("mm-border-width",class extends o.Component{constructor(){super(...arguments),this.width=0}render(){return o.html`
		<template class="mm-border-width">
			<div :style.height.px=${this.width} />
		</template>
		`}}),(0,o.define)("mm-border-width-menu",class extends r.Menu{constructor(){super(...arguments),this.width=0,this.BorderWidths=[0,1,2,3,4,5]}render(){return o.html`
		<template class="mm-border-width-menu">
			${this.BorderWidths.map((t=>o.html`
					<mm-border-width
						.width=${t}
						:class.active=${t===this.width}
						@click=${()=>this.onClickBorderWidth(t)}
					/>
				`))}
		</template>
		`.extends(super.render())}onClickBorderWidth(t){this.emit("select",t)}}),(0,o.define)("mm-configuration-node-content",class extends o.Component{constructor(){super(...arguments),this.iconMenuPopedUp=!1,this.priorityIconMenuPopedUp=!1,this.progressIconMenuPopedUp=!1}onCreated(){this.bindClickContentIconEvent(),this.bindContentHyperlinkHoverEvent(),this.bindContentNoteHoverEvent()}bindClickContentIconEvent(){this.minderExported.on("content-icon-click",((t,e,i)=>{"icon"===i?this.showIconMenu(t.element.parentNode):"priority"===i?this.showPriorityIconMenu(t.element):"progress"===i&&this.showProgressIconMenu(t.element)}))}bindContentHyperlinkHoverEvent(){this.minderExported.on("content-hyperlink-hover-in",((t,e)=>{this.showHyperlinkTooltip(t.element,e)}))}bindContentNoteHoverEvent(){this.minderExported.on("content-note-hover-in",((t,e)=>{this.showNoteTooltip(t.element,e)})),this.minderExported.on("content-note-click",(()=>{this.setNote()}))}showIconMenu(t){if(this.iconMenuPopedUp)return;let e=()=>{var t;let e=null!==(t=this.minderExported.commands.queryValue("Icon"))&&void 0!==t?t:[];return o.html`
				<mm-icon-menu
					.iconNames=${e}
					@@select=${this.toggleIcon}
				/>
			`},i=new r.PopupBinding(t,this),n={trigger:"click"};i.update(e,n),i.showPopup(),this.on("updated",(()=>{i.update(e,n)})),i.on("openedStateChange",(t=>{!1===t&&(i.remove(),this.iconMenuPopedUp=!1)})),this.iconMenuPopedUp=!0}showPriorityIconMenu(t){if(this.priorityIconMenuPopedUp)return;let e=()=>{let t=this.minderExported.commands.queryValue("Priority");return o.html`
				<mm-icon-priority-menu
					.priority=${t}
					@@select=${this.setPriority}
				/>
			`},i=new r.PopupBinding(t,this),n={trigger:"click"};i.update(e,n),i.showPopup(),this.on("updated",(()=>{i.update(e,n)})),i.on("openedStateChange",(t=>{!1===t&&(i.remove(),this.priorityIconMenuPopedUp=!1)})),this.priorityIconMenuPopedUp=!0}showProgressIconMenu(t){if(this.progressIconMenuPopedUp)return;let e=()=>{let t=this.minderExported.commands.queryValue("Progress");return o.html`
				<mm-icon-progress-menu
					.progress=${t}
					@@select=${this.setProgress}
				/>
			`},i=new r.PopupBinding(t,this),n={trigger:"click"};i.update(e,n),i.showPopup(),this.on("updated",(()=>{i.update(e,n)})),i.on("openedStateChange",(t=>{!1===t&&(i.remove(),this.progressIconMenuPopedUp=!1)})),this.progressIconMenuPopedUp=!0}showHyperlinkTooltip(t,e){let i=new r.TooltipBinding(t,this),n=e.data.data.hyperlinkTitle?e.data.data.hyperlink+` (${e.data.data.hyperlink})`:e.data.data.hyperlink;i.update(n,{trigger:"hover",key:"content-tooltip",alignPosition:"b"}),i.showPopup()}showNoteTooltip(t,e){let i=new r.TooltipBinding(t,this),n=e.data.data.note;i.update(n,{trigger:"hover",key:"content-tooltip",alignPosition:"b"}),i.showPopup()}render(){var t,e,i;return o.html`
		<template class="mm-configuration-node-content">
			<header>Node Content</header>

			<section
				:enable=${this.minderExported.commands.canExec("Icon")}
			>
				<mm-icon-select
					.iconNames=${null!==(t=this.minderExported.commands.queryValue("Icon"))&&void 0!==t?t:[]}
					@@select=${this.toggleIcon}
				/>
				<div class="spacer"></div>
				<header>Icons</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("Icon")}
			>
				<mm-icon-priority-select
					.priority=${null!==(e=this.minderExported.commands.queryValue("Priority"))&&void 0!==e?e:-1}
					@@select=${this.setPriority}
				/>
				<div class="spacer"></div>
				<header>Priority</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("Icon")}
			>
				<mm-icon-progress-select
					.progress=${null!==(i=this.minderExported.commands.queryValue("Progress"))&&void 0!==i?i:-1}
					@@select=${this.setProgress}
				/>
				<div class="spacer"></div>
				<header>Progress</header>
			</section>
		</template>
		`}toggleIcon(t,e){e?this.minderExported.commands.exec("AddIcon",t):this.minderExported.commands.exec("RemoveIcon",t)}setPriority(t){let e=this.minderExported.commands.queryValue("Priority");this.minderExported.commands.exec("Priority",t===e?void 0:t)}setProgress(t){let e=this.minderExported.commands.queryValue("Progress");this.minderExported.commands.exec("Progress",t===e?void 0:t)}async setNote(){let t=await r.dialog.prompt("Input note:",{defaultValue:this.minderExported.commands.queryValue("Note")||"",inputType:"textarea"});void 0!==t&&this.minderExported.commands.exec("Note",t||void 0)}}),(0,o.define)("mm-icon-select",class extends o.Component{constructor(){super(...arguments),this.iconNames=[]}render(){return o.html`
		<template class="mm-icon-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0})}
		>
			${this.iconNames.map((t=>o.html`
					<mm-icon .name=${t} />
				`))}
			
		</template>
		`}renderMenu(){return o.html`
		<mm-icon-menu
			.herizontal
			.iconNames=${this.iconNames}
			@@select=${this.onSelectIcon}
		/>
		`}onSelectIcon(t,e){this.emit("select",t,e)}}),(0,o.define)("mm-icon",class extends o.Component{constructor(){super(...arguments),this.name=""}render(){return o.html`
			<template class="mm-icon">
				<img src=${dd[this.name]}>
			</template>
		`}}),(0,o.define)("mm-icon-menu",class extends r.Menu{constructor(){super(...arguments),this.iconNames=[]}render(){return o.html`
		<template class="mm-icon-menu">
			${Object.keys(dd).map((t=>o.html`
					<mm-icon
						.name=${t}
						:class.active=${this.iconNames.includes(t)}
						${(0,r.tooltip)(`Icon ${t}`,{alignPosition:"t"})}
						@click=${()=>this.onClickIcon(t)}
					/>
				`))}
		</template>
		`.extends(super.render())}onClickIcon(t){this.iconNames.includes(t)?this.emit("select",t,!1):this.emit("select",t,!0)}}),(0,o.define)("mm-icon-priority-select",class extends o.Component{constructor(){super(...arguments),this.priority=0}render(){return o.html`
		<template class="mm-icon-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0})}
		>
			<mm-icon-priority .priority=${this.priority} />
		</template>
		`}renderMenu(){return o.html`
		<mm-icon-priority-menu
			.herizontal
			.priority=${this.priority}
			@@select=${this.onSelectIcon}
		/>
		`}onSelectIcon(t){this.emit("select",t)}}),(0,o.define)("mm-icon-priority",class extends o.Component{constructor(){super(...arguments),this.priority=0}onCreated(){this.watchImmediately((()=>this.priority),(()=>{var t;null===(t=this.el.querySelector("svg"))||void 0===t||t.remove(),this.el.append(od.IconPreviewer.renderPriority(this.priority,24).element)}))}render(){return o.html`
		<template class="mm-icon" />
		`}}),(0,o.define)("mm-icon-priority-menu",class extends r.Menu{constructor(){super(...arguments),this.priority=0}render(){let t=od.PriorityColors.length,e=[];for(let i=0;i<t;i++)e[i]=i+1;return o.html`
		<template class="mm-icon-menu">
			${e.map((t=>o.html`
					<mm-icon-priority
						.priority=${t}
						:class.active=${this.priority===t}
						${(0,r.tooltip)(`Priority ${t}`,{alignPosition:"t"})}
						@click=${()=>this.onClickIcon(t)}
					/>
				`))}
		</template>
		`.extends(super.render())}onClickIcon(t){this.emit("select",t)}}),(0,o.define)("mm-icon-progress-select",class extends o.Component{constructor(){super(...arguments),this.progress=0}render(){return o.html`
		<template class="mm-icon-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0})}
		>
			<mm-icon-progress .progress=${this.progress} />
		</template>
		`}renderMenu(){return o.html`
		<mm-icon-progress-menu
			.herizontal
			.progress=${this.progress}
			@@select=${this.onSelectIcon}
		/>
		`}onSelectIcon(t){this.emit("select",t)}}),(0,o.define)("mm-icon-progress",class extends o.Component{constructor(){super(...arguments),this.progress=-1}onCreated(){this.watchImmediately((()=>this.progress),(()=>{var t;null===(t=this.el.querySelector("svg"))||void 0===t||t.remove(),this.el.append(od.IconPreviewer.renderProgress(this.progress,24).element)}))}render(){return o.html`
		<template class="mm-icon" />
		`}}),(0,o.define)("mm-icon-progress-menu",class extends r.Menu{constructor(){super(...arguments),this.progress=0}render(){let t=[];for(let e=0;e<=8;e++)t[e]=e;return o.html`
		<template class="mm-icon-menu">
			${t.map((t=>o.html`
					<mm-icon-progress
						.progress=${t}
						:class.active=${this.progress===t}
						${(0,r.tooltip)(`Priority ${t}`,{alignPosition:"t"})}
						@click=${()=>this.onClickIcon(t)}
					/>
				`))}
		</template>
		`.extends(super.render())}onClickIcon(t){this.emit("select",t)}}),(0,o.define)("mm-configuration-node-text",class extends o.Component{constructor(){super(...arguments),this.textEditorPopupBinding=null,this.katexEditorPopupBinding=null}onCreated(){this.bindTextEditorEnterEvent(),this.bindClickingKatexEvent()}bindTextEditorEnterEvent(){this.minderExported.on("editor-enter",(t=>{this.showEditorToolbarMenu(t)})),this.minderExported.on("editor-exit",(()=>{this.hideEditorToolbarMenu()}))}showEditorToolbarMenu(t){if(this.textEditorPopupBinding)return void this.textEditorPopupBinding.showPopup();let e=()=>o.html`
				<mm-text-editor-toolbar
					.minderExported=${this.minderExported}
					@mousedown.stop.prevent=${()=>{}}
					@@add-match-expression=${()=>this.showKatexEditPopup(this.minderExported.getTextEditorElement(),"")}
				/>
			`,i=new r.PopupBinding(t,this),n={trigger:"none"};i.update(e,n),i.showPopup(),this.on("updated",(()=>{i.update(e,n)})),this.minderExported.on("editor-area-updated",this.onEditorAreaUpdatedForToolbar,this),this.textEditorPopupBinding=i}hideEditorToolbarMenu(){var t;null===(t=this.textEditorPopupBinding)||void 0===t||t.remove(),this.minderExported.off("editor-area-updated",this.onEditorAreaUpdatedForToolbar,this),this.textEditorPopupBinding=null}onEditorAreaUpdatedForToolbar(){this.update()}bindClickingKatexEvent(){this.minderExported.on("editor-katex-focus",((t,e)=>{this.showKatexEditPopup(t,e)}))}showKatexEditPopup(t,e){if(this.minderExported.lockTextEditor(),this.katexEditorPopupBinding){if(this.katexEditorPopupBinding.getTriggerElement()===t)return void this.katexEditorPopupBinding.showPopup();this.hideKatexEditPopup()}let i=()=>o.html`
				<mm-text-katex-editor
					.value=${e}
					@keydown=${this.onKatexEditorKeyDown}
					@@change=${this.submitKatex}
					@@cancel=${this.hideKatexEditPopup}
				/>
			`,n=new r.PopupBinding(t,this),s={trigger:"none"};n.update(i,s),n.showPopup(),this.on("updated",(()=>{n.update(i,s)})),this.minderExported.on("editor-area-updated",this.onEditorAreaUpdatedForKatex,this),this.katexEditorPopupBinding=n}hideKatexEditPopup(){var t;this.minderExported.unlockTextEditor(),this.minderExported.off("editor-area-updated",this.onEditorAreaUpdatedForKatex,this),null===(t=this.katexEditorPopupBinding)||void 0===t||t.remove(),this.katexEditorPopupBinding=null}onEditorAreaUpdatedForKatex(){this.update()}render(){var t,e,i,n,r;return o.html`
		<template class="mm-configuration-node-content">
			<header>Node Text Style</header>

			<section
				:enable=${this.minderExported.commands.canExec("NodeTextFontFamily")}
			>
				<mm-font-family-select
					.fontFamily=${null!==(t=this.minderExported.commands.queryValue("NodeTextFontFamily"))&&void 0!==t?t:""}
					@@select=${this.setFontFamily}
				/>
				<div class="spacer"></div>
				<header>Font Family</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeTextFontSize")}
			>
				<mm-font-size-select
					.fontSize=${null!==(e=this.minderExported.commands.queryValue("NodeTextFontSize"))&&void 0!==e?e:""}
					@@select=${this.setFontSize}
				/>
				<div class="spacer"></div>
				<header>Font Size</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeTextLineHeight")}
			>
				<mm-line-height-select
					.fontSize=${null!==(i=this.minderExported.commands.queryValue("NodeTextLineHeight"))&&void 0!==i?i:""}
					@@select=${this.setLineHeight}
				/>
				<div class="spacer"></div>
				<header>Line Height</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeTextColor")}
			>
				<mm-color-select
					.color=${this.minderExported.commands.queryValue("NodeTextColor")}
					@@select=${this.setTextColor}
				/>
				<div class="spacer"></div>
				<header>Text Color</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeTextAlign")}
			>
				<mm-text-align-select
					.textAlign=${null!==(n=this.minderExported.commands.queryValue("NodeTextAlign"))&&void 0!==n?n:"center"}
					@@select=${this.setTextAlign}
				/>
				<div class="spacer"></div>
				<header>Text Align</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeTextVerticalAlign")}
			>
				<mm-text-vertical-align-select
					.textVerticalAlign=${null!==(r=this.minderExported.commands.queryValue("NodeTextVerticalAlign"))&&void 0!==r?r:"center"}
					@@select=${this.setTextVerticalAlign}
				/>
				<div class="spacer"></div>
				<header>Text Vertical Align</header>
			</section>

		</template>
		`}setFontFamily(t){this.minderExported.commands.exec("NodeTextFontFamily",t)}setFontSize(t){this.minderExported.commands.exec("NodeTextFontSize",t)}setLineHeight(t){this.minderExported.commands.exec("NodeTextLineHeight",t)}setTextColor(t){this.minderExported.commands.exec("NodeTextColor",t)}setTextAlign(t){this.minderExported.commands.exec("NodeTextAlign",t)}setTextVerticalAlign(t){this.minderExported.commands.exec("NodeTextVerticalAlign",t)}onKatexEditorKeyDown(t){"Escape"===t.key&&this.hideKatexEditPopup()}submitKatex(t){this.minderExported.commands.exec("TextSetKatex",t),this.hideKatexEditPopup()}}),(0,o.define)("mm-text-editor-toolbar",class extends r.Popup{render(){let t=this.minderExported.getTextEditorSelectionStyle()||{};return o.html`
		<template class="mm-text-editor-toolbar">
			<ul>
				<li
					:style.font-weight=${t["font-weight"]||""}
					:class.active=${"bold"===t["font-weight"]}
					:enable=${this.canExec("TextBold")}
					${(0,r.tooltip)(o.html`Toggle Bold ${this.renderShortcutKey("TextBold")}`,{alignPosition:"b"})}
					@click=${()=>this.exec("TextBold")}
				>
					B
				</li>

				<li
					:style.font-style=${t["font-style"]||""}
					:class.active=${"italic"===t["font-style"]}
					:enable=${this.canExec("TextItalic")}
					${(0,r.tooltip)(o.html`Toggle Italic ${this.renderShortcutKey("TextItalic")}`,{alignPosition:"b"})}
					@click=${()=>this.exec("TextItalic")}
				>
					I
				</li>

				<li
					:style.text-decoration=${t["text-underline"]?"underline":""}
					:class.active=${t["text-underline"]?"underline":""}
					:enable=${this.canExec("TextUnderline")}
					${(0,r.tooltip)(o.html`Toggle Underline ${this.renderShortcutKey("TextUnderline")}`,{alignPosition:"b"})}
					@click=${()=>this.exec("TextUnderline")}
				>
					U
				</li>

				<li
					:style.text-decoration=${t["text-line-through"]?"line-through":""}
					:class.active=${t["text-line-through"]?"line-through":""}
					:enable=${this.canExec("TextStrikeThrough")}
					${(0,r.tooltip)(o.html`Toggle Strike Through ${this.renderShortcutKey("TextStrikeThrough")}`,{alignPosition:"b"})}
					@click=${()=>this.exec("TextStrikeThrough")}
				>
					S
				</li>

				<li
					:enable=${this.canExec("TextClearStyle")}
					${(0,r.tooltip)(o.html`Clear Style ${this.renderShortcutKey("TextClearStyle")}`,{alignPosition:"b"})}
					@click=${()=>this.exec("TextClearStyle")}
				>
					C
				</li>

				<li
					:enable=${this.canExec("TextSetKatex")}
					${(0,r.tooltip)(o.html`Add Math Expression ${this.renderShortcutKey("TextSetKatex")}`,{alignPosition:"b"})}
					@click=${this.addMathExpression}
				>
					M
				</li>

			</ul>
		</template>
		`}onConnected(){this.minderExported.on("editor-update-selection",this.update,this)}onDisconnected(){this.minderExported.off("editor-update-selection",this.update,this)}renderShortcutKey(t){let e=this.minderExported.commands.getShortcutKeys(t);return e?o.html`<span>(${e.join(", ")})</span>`:""}exec(t){this.minderExported.commands.exec(t)}canExec(t){return this.minderExported.commands.canExec(t)}addMathExpression(){this.emit("add-match-expression")}}),(0,o.define)("mm-font-family-select",class extends o.Component{constructor(){super(...arguments),this.fontFamily=""}render(){return o.html`
		<template class="mm-font-family-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0})}
		>
			<mm-font-family .fontFamily=${this.fontFamily} />
		</template>
		`}renderMenu(){return o.html`<mm-font-family-menu
			.herizontal
			.fontFamily=${this.fontFamily}
			@@select=${this.onSelectFontFamily}
		/>`}onSelectFontFamily(t){this.fontFamily=t,this.emit("select",t)}}),(0,o.define)("mm-font-family",class extends o.Component{constructor(){super(...arguments),this.fontFamily=""}render(){return o.html`
		<template class="mm-font-family"
			:style.font-family=${this.fontFamily}
		>
			${this.fontFamily||"Default Font"}
		</template>
		`}}),(0,o.define)("mm-font-family-menu",class extends r.Menu{constructor(){super(...arguments),this.FontFamilies=["Arial","Arial Black","Book Antiqua","Charcoal","Comic Sans MS","Consolas","Courier","Courier New","cursive","Gadget","Geneva","Georgia","Helvetica","Impact","Lucida Grande","Lucida Sans Unicode","Monaco","Palatino","Palatino Linotype","sans-serif","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","ADAM.CG PRO","Abhaya Libre","Agency FB","Aladin","Alegreya Sans SC","Amandella Script","Arizonia","Bad Script","Baloo Bhaina 2","Barlow","Barrio","Berlin Sans FB","BlowBrush","Britannic","Cabin Sketch","Cursive Serif","Dancing Script","Dolce Vita","Hamurz Free Version","KG Broken Vessels Sketch","Kaushan Script","Montserrat Alternates","NISCRIPT","Permanent Marker","Playlist","SJNMDJW","Source Sans Pro"],this.fontFamily=""}render(){return o.html`
		<template class="mm-font-family-menu">
			<div class="mm-font-family-menu-scroller">
				${this.FontFamilies.map((t=>o.html`
						<mm-font-family
							.fontFamily=${t}
							:class.active=${t===this.fontFamily}
							@click=${()=>this.selectFontFamily(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectFontFamily(t){this.emit("select",t)}}),(0,o.define)("mm-font-size-select",class extends o.Component{constructor(){super(...arguments),this.fontSize=14}render(){return o.html`
		<template class="mm-font-size-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0})}
		>
			<mm-font-size .fontSize=${this.fontSize} />
		</template>
		`}renderMenu(){return o.html`<mm-font-size-menu
			.herizontal
			.fontSize=${this.fontSize}
			@@select=${this.onSelectFontSize}
		/>`}onSelectFontSize(t){this.fontSize=t,this.emit("select",t)}}),(0,o.define)("mm-font-size",class extends o.Component{constructor(){super(...arguments),this.fontSize=14}render(){return o.html`
		<template class="mm-font-size"
			:style.font-size.px=${this.fontSize}
		>
			${this.fontSize}
		</template>
		`}}),(0,o.define)("mm-font-size-menu",class extends r.Menu{constructor(){super(...arguments),this.FontSizes=[12,13,14,16,18,20,24,28,32,36,40],this.fontSize=14}render(){return o.html`
		<template class="mm-font-size-menu">
			<div class="mm-font-size-menu-scroller">
				${this.FontSizes.map((t=>o.html`
						<mm-font-size
							.fontSize=${t}
							:class.active=${t===this.fontSize}
							:style.line-height="1.5"
							@click=${()=>this.selectFontSize(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectFontSize(t){this.emit("select",t)}}),(0,o.define)("mm-line-height-select",class extends o.Component{constructor(){super(...arguments),this.lineHeight=1.2}render(){return o.html`
		<template class="mm-line-height-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0})}
		>
			<mm-line-height .lineHeight=${this.lineHeight} />
		</template>
		`}renderMenu(){return o.html`<mm-line-height-menu
			.herizontal
			.lineHeight=${this.lineHeight}
			@@select=${this.onSelectLineHeight}
		/>`}onSelectLineHeight(t){this.lineHeight=t,this.emit("select",t)}}),(0,o.define)("mm-line-height",class extends o.Component{constructor(){super(...arguments),this.lineHeight=1.2}render(){return o.html`
		<template class="mm-line-height">
			${this.lineHeight}
		</template>
		`}}),(0,o.define)("mm-line-height-menu",class extends r.Menu{constructor(){super(...arguments),this.LineHeights=[1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2],this.lineHeight=1.2}render(){return o.html`
		<template class="mm-line-height-menu">
			<div class="mm-line-height-menu-scroller">
				${this.LineHeights.map((t=>o.html`
						<mm-line-height
							.lineHeight=${t}
							:class.active=${t===this.lineHeight}
							@click=${()=>this.selectLineHeight(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectLineHeight(t){this.emit("select",t)}}),(0,o.define)("mm-text-align-select",class extends o.Component{constructor(){super(...arguments),this.textAlign="center"}render(){return o.html`
		<template class="mm-text-align-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0})}
		>
			<mm-text-align .textAlign=${this.textAlign} />
		</template>
		`}renderMenu(){return o.html`<mm-text-align-menu
			.herizontal
			.textAlign=${this.textAlign}
			@@select=${this.onSelectTextAlign}
		/>`}onSelectTextAlign(t){this.textAlign=t,this.emit("select",t)}}),(0,o.define)("mm-text-align",class extends o.Component{constructor(){super(...arguments),this.textAlign="center"}render(){return o.html`
		<template class="mm-text-align"
			:style.text-align=${this.textAlign}
		>
			${(0,cd.capitalize)(this.textAlign)}
		</template>
		`}}),(0,o.define)("mm-text-align-menu",class extends r.Menu{constructor(){super(...arguments),this.TextAligns=["left","center","right"],this.textAlign="center"}render(){return o.html`
		<template class="mm-text-align-menu">
			<div class="mm-text-align-menu-scroller">
				${this.TextAligns.map((t=>o.html`
						<mm-text-align
							.textAlign=${t}
							:class.active=${t===this.textAlign}
							@click=${()=>this.selectTextAlign(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectTextAlign(t){this.emit("select",t)}}),(0,o.define)("mm-text-vertical-align-select",class extends o.Component{constructor(){super(...arguments),this.textVerticalAlign="center"}render(){return o.html`
		<template class="mm-text-vertical-align-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0})}
		>
			<mm-text-vertical-align .textVerticalAlign=${this.textVerticalAlign} />
		</template>
		`}renderMenu(){return o.html`<mm-text-vertical-align-menu
			.herizontal
			.textVerticalAlign=${this.textVerticalAlign}
			@@select=${this.onSelectTextVerticalAlign}
		/>`}onSelectTextVerticalAlign(t){this.textVerticalAlign=t,this.emit("select",t)}}),(0,o.define)("mm-text-vertical-align",class extends o.Component{constructor(){super(...arguments),this.textVerticalAlign="center"}render(){return o.html`
		<template class="mm-text-vertical-align">
			${(0,cd.capitalize)(this.textVerticalAlign)}
		</template>
		`}}),(0,o.define)("mm-text-vertical-align-menu",class extends r.Menu{constructor(){super(...arguments),this.TextVerticalAligns=["top","center","bottom"],this.textVerticalAlign="center"}render(){return o.html`
		<template class="mm-text-vertical-align-menu">
			<div class="mm-text-vertical-align-menu-scroller">
				${this.TextVerticalAligns.map((t=>o.html`
						<mm-text-vertical-align
							.textVerticalAlign=${t}
							:class.active=${t===this.textVerticalAlign}
							@click=${()=>this.selectTextVerticalAlign(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectTextVerticalAlign(t){this.emit("select",t)}}),(0,o.define)("mm-text-katex-editor",class extends r.Popup{constructor(){super(...arguments),this.value="",this.triangle=!0,this.katexLibradyLoaded=!1}async onCreated(){await od.ExternalResources.ensureKatexResourcesLoaded(),this.katexLibradyLoaded=!0}render(){return o.html`
			<template class="mm-text-katex-editor">
				<textarea
					:refElement=${this.refTextarea}
					:model="value"
					@keydown=${this.onKeyDown}
				/>
				<button
					:enable=${this.katexLibradyLoaded}
					@click=${this.submitValue}
				>
					Submit
				</button>
			</template>
		`.extends(super.render())}async refTextarea(t){await(0,o.untilRenderComplete)(),t.focus()}onKeyDown(t){"Enter"===t.key?(this.submitValue(),t.preventDefault()):"Escape"===t.key&&this.emit("cancel")}submitValue(){this.emit("change",this.value)}}),(0,o.define)("mm-configuration-node-connect",class extends o.Component{onCreated(){}render(){var t,e;return o.html`
		<template class="mm-configuration-node-content">
			<header>Branch & Connection</header>

			<section
				:show=${this.minderExported.commands.canExec("BranchLayout")}
			>
				<mm-layout-name-select
					.layoutName=${null!==(t=this.minderExported.commands.queryValue("BranchLayout"))&&void 0!==t?t:""}
					.allowedLayoutNames=${this.minderExported.getAllowedLayoutNames()}
					@@select=${this.setLayoutName}
				/>
				<div class="spacer"></div>
				<header>Branch Layout</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeConnect")}
			>
				<mm-connect-name-select
					.connectName=${null!==(e=this.minderExported.commands.queryValue("NodeConnect"))&&void 0!==e?e:""}
					.allowedConnectNames=${this.minderExported.getAllowedConnectNames()}
					@@select=${this.setConnectName}
				/>
				<div class="spacer"></div>
				<header>Branch Connect</header>
			</section>


			<section
				:enable=${this.minderExported.commands.canExec("NodeConnect")}
			>
				<mm-border-width-select
					.width=${this.minderExported.commands.queryValue("NodeConnectWidth")}
					@@select=${this.setConnectWidth}
				/>
				<div class="spacer"></div>
				<header>Connect Width</header>
			</section>


			<section>
				<mm-color-select
					.color=${this.minderExported.commands.queryValue("NodeConnectColor")}
					@@select=${this.setConnectColor}
				/>
				<div class="spacer"></div>
				<header>Connect Color</header>
			</section>


			<!-- <section
				:show=${this.minderExported.commands.canExec("NodeConnectMultiColor")}
			>
				<mm-multi-color-select
					:enable=${this.minderExported.commands.canExec("NodeConnectMultiColor")}
					.multiColor=${this.minderExported.commands.queryValue("NodeConnectMultiColor")}
					@@select=${this.setConnectMultiColor}
				/>
				<header>Multi-Branch Color</header>
			</section>


			<section
				:show=${this.minderExported.commands.canExec("BranchTaperedLine")}
			>
				<f-switch
					:show=${this.minderExported.commands.canExec("BranchTaperedLine")}
					.value=${this.minderExported.commands.queryValue("BranchTaperedLine")}
					@@change=${this.setTaperedLine}
				/>
				<div class="spacer"></div>
				<header>Tapered Line</header>
			</section>


			<section
				:show=${this.minderExported.commands.canExec("BranchTaperedLinePower")}
			>
				<f-slider
					class="mm-radius-slider"
					.value=${this.minderExported.commands.queryValue("BranchTaperedLinePower")||0}
					.min=${-1}
					.max=${3}
					.step=${.1}
					@@change=${this.setTaperedPower}
				/>
				<div class="spacer"></div>
				<header>Tapered Power</header>
			</section>
			

			<section
				:show=${this.minderExported.commands.canExec("BranchTaperedLineStartWidth")}
			>
				<f-slider
					class="mm-radius-slider"
					.value=${this.minderExported.commands.queryValue("BranchTaperedLineStartWidth")||0}
					.min=${5}
					.max=${20}
					.step=${1}
					@@change=${this.setTaperedStartWidth}
				/>
				<div class="spacer"></div>
				<header>Tapered Start Width</header>
			</section>


			<section
				:show=${this.minderExported.commands.canExec("BranchConnectOutAdjust")}
			>
				<mm-connect-out-adjust-select
					.outAdjust=${this.minderExported.commands.queryValue("BranchConnectOutAdjust")||"none"}
					@@select=${this.setConnectOutAdjust}
				/>
				<div class="spacer"></div>
				<header>Connect Out Adjust</header>
			</section> -->
		</template>
		`}setLayoutName(t){this.minderExported.commands.exec("BranchLayout",t)}setConnectName(t){this.minderExported.commands.exec("NodeConnect",t)}setConnectWidth(t){this.minderExported.commands.exec("NodeConnectWidth",t)}setConnectColor(t){this.minderExported.commands.exec("NodeConnectColor",t)}setConnectMultiColor(t){this.minderExported.commands.exec("NodeConnectMultiColor",t)}setTaperedLine(t){this.minderExported.commands.exec("BranchTaperedLine",t)}setTaperedPower(t){this.minderExported.commands.exec("BranchTaperedLinePower",t)}setTaperedStartWidth(t){this.minderExported.commands.exec("BranchTaperedLineStartWidth",t)}setConnectOutAdjust(t){this.minderExported.commands.exec("BranchConnectOutAdjust",t)}}),(0,o.define)("mm-layout-name-select",class extends o.Component{constructor(){super(...arguments),this.layoutName="right",this.allowedLayoutNames=[]}render(){return o.html`
			<template class="mm-layout-name-select"
				${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0,cacheable:!0})}
			>
				<mm-layout-name
					.name=${this.layoutName}
					${(0,r.tooltip)(this.layoutName,{alignPosition:"r"})}
				/>
			</template>
		`}renderMenu(){return o.html`<mm-layout-name-menu
			.herizontal
			.layoutName=${this.layoutName}
			.allowedLayoutNames=${this.allowedLayoutNames}
			@@select=${this.onSelectlayoutName}
		/>`}onSelectlayoutName(t){this.layoutName=t,this.emit("select",t)}}),(0,o.define)("mm-layout-name",class extends o.Component{onReady(){this.watchImmediately((()=>this.name),(()=>this.updateSVG()))}async updateSVG(){var t;let e=await od.layoutPreviewer.renderSVG(this.name,{subNodeCount:0,style:{root:{"fill-color":"#555455",radius:20},main:{"fill-color":"#aca29d",radius:15}}});null===(t=this.el.querySelector("svg"))||void 0===t||t.remove(),this.el.append(e.element)}render(){return o.html`
			<template class="mm-layout-name" />
		`}}),(0,o.define)("mm-layout-name-menu",class extends r.Menu{constructor(){super(...arguments),this.layoutName="right",this.allowedLayoutNames=[]}render(){let t=[];for(let e=0;e<this.allowedLayoutNames.length;e++)t[Math.floor(e/2)]=t[Math.floor(e/2)]||[],t[Math.floor(e/2)].push(this.allowedLayoutNames[e]);return o.html`
		<template class="mm-layout-name-menu">
			<div class="mm-layout-name-menu-scroller">
				${t.map((t=>o.html`
						<div class="mm-layout-name-menu-line">
							${t.map((t=>o.html`
								<mm-layout-name
									.name=${t}
									:enable=${this.allowedLayoutNames.includes(t)}
									:class.active=${t===this.layoutName}
									${(0,r.tooltip)(t,{alignPosition:"t"})}
									@click=${()=>this.selectlayoutName(t)}
								/>
							`))}
						</div>
					`)).flat()}
			</div>
		</template>
		`.extends(super.render())}selectlayoutName(t){this.emit("select",t)}}),(0,o.define)("mm-connect-name-select",class extends o.Component{constructor(){super(...arguments),this.connectName="fork",this.allowedConnectNames=[]}render(){return o.html`
		<template class="mm-connect-name-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",canShrinkInY:!0,cacheable:!0})}
		>
			<mm-connect-name
				.name=${this.connectName}
				${(0,r.tooltip)(this.connectName,{alignPosition:"r"})}
			/>
		</template>
		`}renderMenu(){return o.html`<mm-connect-name-menu
			.herizontal
			.connectName=${this.connectName}
			.allowedConnectNames=${this.allowedConnectNames}
			@@select=${this.onSelectconnectName}
		/>`}onSelectconnectName(t){this.connectName=t,this.emit("select",t)}}),(0,o.define)("mm-connect-name",class extends o.Component{onReady(){this.watchImmediately((()=>this.name),(()=>this.updateSVG()))}async updateSVG(){var t;let e=await od.connectLinePreviewer.renderSVG(this.name);null===(t=this.el.querySelector("svg"))||void 0===t||t.remove(),this.el.append(e.element)}render(){return o.html`
			<template class="mm-connect-name" />
		`}}),(0,o.define)("mm-connect-name-menu",class extends r.Menu{constructor(){super(...arguments),this.connectName="fork",this.allowedConnectNames=[]}render(){return o.html`
		<template class="mm-connect-name-menu">
			<div class="mm-connect-name-menu-scroller">
				${this.allowedConnectNames.map((t=>o.html`
						<mm-connect-name
							.name=${t}
							:enable=${this.allowedConnectNames.includes(t)}
							:class.active=${t===this.connectName}
							${(0,r.tooltip)(t,{alignPosition:"t"})}
							@click=${()=>this.selectconnectName(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectconnectName(t){this.emit("select",t)}}),(0,o.define)("mm-connect-out-adjust-select",class extends o.Component{constructor(){super(...arguments),this.outAdjust=""}render(){return o.html`
		<template class="mm-connect-out-adjust-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup"})}
		>
			<mm-connect-out-adjust .outAdjust=${this.outAdjust} />
		</template>
		`}renderMenu(){return o.html`<mm-connect-out-adjust-menu
			.herizontal
			.outAdjust=${this.outAdjust}
			@@select=${this.onSelectOutAdjust}
		/>`}onSelectOutAdjust(t){this.outAdjust=t,this.emit("select",t)}}),(0,o.define)("mm-connect-out-adjust",class extends o.Component{constructor(){super(...arguments),this.outAdjust=""}render(){return o.html`
		<template class="mm-connect-out-adjust">
			${(0,cd.capitalize)(this.outAdjust)}
		</template>
		`}}),(0,o.define)("mm-connect-out-adjust-menu",class extends r.Menu{constructor(){super(...arguments),this.outAdjustData=["none","evenly","center"],this.outAdjust=""}render(){return o.html`
		<template class="mm-connect-out-adjust-menu">
			<div class="mm-connect-out-adjust-menu-scroller">
				${this.outAdjustData.map((t=>o.html`
						<mm-connect-out-adjust
							.outAdjust=${t}
							:class.active=${t===this.outAdjust}
							@click=${()=>this.selectoutAdjust(t)}
						/>
					`))}
			</div>
		</template>
		`.extends(super.render())}selectoutAdjust(t){this.emit("select",t)}}),(0,o.define)("mm-configuration-node-relline",class extends o.Component{onCreated(){}render(){return o.html`
		<template class="mm-configuration-node-content">
			<header>Rel-Line</header>


			<section
				:enable=${this.minderExported.commands.canExec("RelLineWidth")}
			>
				<mm-border-width-select
					.width=${this.minderExported.commands.queryValue("RelLineWidth")}
					@@select=${this.setRelLineWidth}
				/>
				<div class="spacer"></div>
				<header>Line Width</header>
			</section>


			<section>
				<mm-color-select
					.color=${this.minderExported.commands.queryValue("RelLineColor")}
					@@select=${this.setRelLineColor}
				/>
				<div class="spacer"></div>
				<header>Line Color</header>
			</section>


			<section>
				<mm-relline-shape-select
					.shapeName=${this.minderExported.commands.queryValue("RelLineLineType")}
					@@select=${this.setShapeName}
				/>
				<header>Shape</header>
			</section>


			<section>
				<mm-relline-marker-select
					.markerEdge='start'
					.markerName=${this.minderExported.commands.queryValue("RelLineMarkerStart")||"line"}
					@@select=${this.setMarkerStartName}
				/>
				<header>Marker Start</header>
			</section>


			<section>
				<mm-relline-marker-select
					.markerEdge='end'
					.markerName=${this.minderExported.commands.queryValue("RelLineMarkerEnd")||"line"}
					@@select=${this.setMarkerEndName}
				/>
				<header>Marker End</header>
			</section>


		</template>
		`}setRelLineWidth(t){this.minderExported.commands.exec("RelLineWidth",t)}setRelLineColor(t){this.minderExported.commands.exec("RelLineColor",t)}setShapeName(t){this.minderExported.commands.exec("RelLineLineType",t)}setMarkerStartName(t){this.minderExported.commands.exec("RelLineMarkerStart",t)}setMarkerEndName(t){this.minderExported.commands.exec("RelLineMarkerEnd",t)}}),(0,o.define)("mm-relline-shape-select",class extends o.Component{render(){return o.html`
		<template class="mm-relline-shape-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0})}
		>
			<mm-relline-shape .name=${this.shapeName} />
		</template>
		`}renderMenu(){return o.html`
		<mm-relline-shape-menu
			.herizontal
			.shapeName=${this.shapeName}
			@@select=${this.onSelectShape}
		/>`}onSelectShape(t){this.shapeName=t,this.emit("select",t)}}),(0,o.define)("mm-relline-shape",class extends o.Component{render(){return o.html`
		<template class="mm-relline-shape">
			${this.name}
		</template>
		`}}),(0,o.define)("mm-relline-shape-menu",class extends r.Menu{render(){return o.html`
		<template class="mm-relline-shape-menu">
			${od.RelLineShapeNames.map((t=>o.html`
					<mm-relline-shape
						.name=${t}
						:class.active=${t===this.shapeName}
						@click=${()=>this.onClickShape(t)}
					/>
				`))}
			</ul>
		</template>
		`.extends(super.render())}onClickShape(t){this.emit("select",t)}}),(0,o.define)("mm-relline-marker-select",class extends o.Component{constructor(){super(...arguments),this.markerEdge="start"}render(){return o.html`
		<template class="mm-relline-marker-select"
			${(0,r.popup)((()=>this.renderMenu()),{alignPosition:"l",key:"popup",cacheable:!0})}
		>
			<mm-relline-marker .name=${this.markerName} .markerEdge=${this.markerEdge} />
		</template>
		`}renderMenu(){return o.html`
		<mm-relline-marker-menu
			.herizontal
			.markerEdge=${this.markerEdge}
			.markerName=${this.markerName}
			@@select=${this.onSelectMarker}
		/>`}onSelectMarker(t){this.markerName=t,this.emit("select",t)}}),(0,o.define)("mm-relline-marker",class extends o.Component{constructor(){super(...arguments),this.markerEdge="start"}onReady(){this.watchImmediately((()=>this.name),(()=>this.updateShapeSVG()))}updateShapeSVG(){var t;let e="start"===this.markerEdge?od.RelLineMarkerPreviewer.renderStartSVG(this.name):od.RelLineMarkerPreviewer.renderEndSVG(this.name);null===(t=this.el.querySelector("svg"))||void 0===t||t.remove(),this.el.append(e.element)}render(){return o.html`
		<template class="mm-relline-marker" ${(0,r.tooltip)(this.name)} />
		`}}),(0,o.define)("mm-relline-marker-menu",class extends r.Menu{constructor(){super(...arguments),this.markerEdge="start"}render(){return o.html`
		<template class="mm-relline-marker-menu">
			${od.RelLineMarkerNames.map((t=>o.html`
					<mm-relline-marker
						.markerEdge=${this.markerEdge}
						.name=${t}
						:class.active=${t===this.markerName}
						@click=${()=>this.onClickMarker(t)}
					/>
				`))}
			</ul>
		</template>
		`.extends(super.render())}onClickMarker(t){this.emit("select",t)}});const ud={intro:{id:"chytpqpkhnk0",version:"2.1.3",theme:"default",position:{x:0,y:0},zoom:100,style:{layout:{"avoid-overlay":!1},root:{"connect-multicolor":"multiColor3","connect-tapered":!0,"connect-tapered-power":0},floatRoot:{"connect-multicolor":"multiColor3","connect-tapered":!0,"connect-tapered-power":0},content:{"max-text-width":2560,"justify-same-deepth-width":!1},theme:{colorTheme:"",structTheme:""}},root:{data:{id:"chytpqpkg400",created:1645152007550,expanded:!0,html:"<p>Hello, <br>Mindmap</p>",icons:[],text:"Hello, \nMindmap"},style:{layout:"bottom",connect:"bezier","connect-tapared":!0,"text-underline":!1,"text-line-through":!1,"font-family":'"Dancing Script"',"stroke-color":"#000000","fill-color":"#424242","font-size":32,"connect-width":1,"connect-color":"#424242",shape:"circle","stroke-width":5,radius:40,"connect-tapared-start-width":12,"connect-tapared-power":.1,"custom-content-width":113,"line-height":1.3},children:[{data:{id:"chytpwdmlnc0",created:1645152019887,text:"Intro",html:"<p>Intro</p>",expanded:!0},style:{"font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":4,"text-align":"center","font-family":"Alegreya Sans SC","font-weight":"bold",connect:"bezier","connect-width":4,layout:"bottom","font-size":20,"custom-content-width":90.41421954134198},children:[{data:{id:"chzso7bs8a80",created:1645250625839,text:"How?",html:"<p>How?</p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"connect-width":1,"stroke-width":1,"font-size":12,connect:"bezier",layout:"file-tree-down-left"},children:[{data:{id:"chzsrj41cuw0",created:1645250886584,text:" 0",html:"<p> 0&nbsp;</p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,"line-height":1.2,"custom-content-width":77.29747632585124,"stroke-width":1},children:[]},{data:{id:"ci0n2kt2rio0",created:1645336385578,text:"",html:"<p></p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,"custom-content-width":77.29747632585124,"stroke-width":1}},{data:{id:"ci1dg2q0x200",created:1645410792167,html:"<p></p>",expanded:!1,text:""},style:{"text-underline":!1,"text-line-through":!1,"font-size":12,"custom-content-width":77.29747632585124,"stroke-width":1},children:[]}]},{data:{id:"chztqyc5x280",created:1645253662473,text:"",html:"<p></p>",expanded:!1},style:{"font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"connect-width":1,"stroke-width":1,layout:"file-tree-down-right",connect:"bezier","custom-content-width":36.000000529905805},children:[{data:{id:"ci0ngxymh0w0",created:1645337511310,html:"<p>kityminder</p>",expanded:!1,text:"kityminder"},style:{"text-underline":!1,"text-line-through":!1,"font-size":12,"stroke-width":1}},{data:{id:"ci0nftnbrbc0",created:1645337423555,text:"XMIND",html:"<p>XMIND</p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,"stroke-width":1}},{data:{id:"ci0nht8ioww0",created:1645337579388,html:"<p>&lt;&lt;  &gt;&gt;</p>",expanded:!1,text:"<<  >>"},style:{"text-underline":!1,"text-line-through":!1,"font-size":12,"stroke-width":1}}]}]},{data:{id:"chytvzt1ut40",created:1645152497535,text:"Features",html:"<p>Features</p>",expanded:!0},style:{"stroke-width":4,"text-align":"center","font-family":"Alegreya Sans SC","font-weight":"bold","connect-width":4,"font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"bezier",layout:"bottom","font-size":20,"connect-color":"#c77aa5","custom-content-width":90.41421954134198},children:[{data:{id:"ci0nrt9esq80",created:1645338363084,text:"Node",expanded:!0,html:"<p>Node</p>"},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":2,"connect-width":2,"font-family":"Barlow"},children:[{data:{id:"chz8drelkw80",created:1645193385340,text:"Shapes",expanded:!1,html:"<p>Shapes</p>"},style:{connect:"arc",layout:"file-tree-down-balanced","stroke-width":1,"connect-width":1,"font-family":"Barlow","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,shape:"rect","font-size":12,radius:4},children:[{data:{id:"chz8dtdn0a80",created:1645193389636,text:"Rect",expanded:!1,html:"<p>Rect</p>"},style:{"stroke-width":1,"connect-width":1,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,radius:4},children:[]},{data:{id:"chz8ok0jz4o0",created:1645194231260,text:"",html:"<p></p>",expanded:!1},style:{"stroke-width":1,"connect-width":1,shape:"arc-roof-rect","font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,radius:4}},{data:{id:"chz8okcc8s80",created:1645194231972,text:"",html:"",expanded:!1},style:{"stroke-width":1,"connect-width":1,shape:"arc-sides-rect","font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,radius:4,"custom-content-width":85}},{data:{id:"ci0nnv43i3s0",created:1645338053659,html:"<p></p>",expanded:!1,text:""},style:{shape:"flat-hexagon","connect-width":1,"stroke-width":1,"font-size":12,"text-underline":!1,"text-line-through":!1,radius:4}},{data:{id:"ci0no0an1k00",created:1645338064939,text:"",html:"<p></p>",expanded:!1},style:{shape:"roof-hexagon","connect-width":1,"stroke-width":1,"font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,radius:4,"custom-content-width":92.42697721937371,"text-align":"center"}},{data:{id:"ci0no68bogo0",created:1645338077860,text:"Underline",html:"<p>Underline</p>",expanded:!1},style:{shape:"underline","connect-width":1,"stroke-width":1,"font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,radius:4}},{data:{id:"ci0no9wd2q00",created:1645338085845,text:"Circle",html:"<p>Circle</p>",expanded:!1},style:{shape:"circle","connect-width":1,"stroke-width":1,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,radius:4,"custom-content-width":32,"text-align":"center"}},{data:{id:"ci0noboo3ew0",created:1645338089732,html:"<p>Ellipse</p>",expanded:!1,text:"Ellipse"},style:{"connect-width":1,"stroke-width":1,shape:"ellipse","text-underline":!1,"text-line-through":!1,"font-size":12,radius:4,"custom-content-width":43,"text-align":"center"}},{data:{id:"ci0noewty8g0",created:1645338096756,text:"Diamond",html:"<p>Diamond</p>",expanded:!1},style:{shape:"diamond","connect-width":1,"stroke-width":1,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,radius:4,"custom-content-width":50}},{data:{id:"ci0nohbcro80",created:1645338101988,text:"Rhomboid",html:"<p>Rhomboid</p>",expanded:!1},style:{shape:"y-slant-rhomboid","connect-width":1,"stroke-width":1,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,radius:4}},{data:{id:"ci0s7qho2x40",created:1645350895319,text:"",html:"<p></p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0nsb6edps0",created:1645338402084,text:"Content",html:"<p>Content</p>",expanded:!1},style:{"connect-width":1,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,layout:"file-tree-down-right"},children:[{data:{id:"ci0nug6reeg0",created:1645338569718,text:"Icons",icons:["emoji_1","emoji_10"],html:"<p>Icons</p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"text-align":"left","custom-content-width":91,"stroke-width":1}},{data:{id:"ci0nut0lugg0",created:1645338597644,text:"Progress",progress:2,html:"<p>Progress</p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"text-align":"left","custom-content-width":91,"stroke-width":1}},{data:{id:"ci0nutanm6g0",created:1645338598252,text:"Priority",priority:1,html:"<p>Priority</p>",expanded:!1,layoutOffset:{x:0,y:1.7320508075688776}},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"text-align":"left","custom-content-width":91,"stroke-width":1}},{data:{id:"ci0nvdvzh740",created:1645338643077,text:"Image Alignment & Resizing",html:"<p>Image Alignment &amp; Resizing</p>",image:"/resources/girl.jpg",imageNaturalSize:{width:708,height:1002},imageSize:{x:-299,y:446,width:92,height:130},expanded:!1,layoutOffset:{x:2.6666666666666665,y:-6.666666666666666}},style:{"text-underline":!1,"text-line-through":!1,"image-alignment":"top","fill-color":"#cfe7f7","line-height":1.3,"text-vertical-align":"top","custom-content-width":91,"stroke-width":1}}],summaries:[{data:{id:"0d5b9c480d",created:1648609764854,text:"Summary",startIndex:0,endIndex:4,html:"<p>Summary</p>",expanded:!0},style:{"font-family":"Barlow","font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"arc","connect-width":1},children:[]}],boundaries:[]}]},{data:{id:"chz8o2alwdk0",created:1645194192685,text:"Layout & Connection",html:"<p>Layout &amp; Connection</p>",expanded:!0},style:{"stroke-width":2,"connect-width":2,"font-family":"Barlow","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"connect-tapared":!0,shape:"rect"},children:[{data:{id:"ci0p1ma6r0w0",created:1645341952645,text:"Layout",html:"<p>Layout</p>",expanded:!1},style:{"font-size":12,"connect-width":1,"stroke-width":1,"text-underline":!1,"text-line-through":!1,layout:"file-tree-down-balanced",connect:"arc",shape:"rect"},children:[{data:{id:"ci0p56kbkv40",created:1645342231886,text:"Right",html:"<p>Right</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"arc","stroke-width":1,"font-size":12},children:[{data:{id:"ci0p5db7tj40",created:1645342246573,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}},{data:{id:"ci0p5f7hxh40",created:1645342250701,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0p2e4xppk0",created:1645342013277,text:"Left",expanded:!0,html:"<p>Left</p>"},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"arc","stroke-width":1,"font-size":12},children:[{data:{id:"ci0p30czv0w0",created:1645342061654,text:"",html:"",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}},{data:{id:"ci0p30vdkg00",created:1645342062765,text:"",html:"",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0p2feud6g0",created:1645342016053,text:"Top",expanded:!0,html:"<p>Top</p>"},style:{layout:"top","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"arc","stroke-width":1,"font-size":12},children:[{data:{id:"ci0p3ngjbmw0",created:1645342111934,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}},{data:{id:"ci0p3o8fu8o0",created:1645342113621,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0p42wh0bc0",created:1645342145550,text:"Bottom",html:"<p>Bottom</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,layout:"bottom",connect:"arc","stroke-width":1,"font-size":12},children:[{data:{id:"ci0p45d47ew0",created:1645342150909,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}},{data:{id:"ci0p45mwm0g0",created:1645342151501,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0p5va21xk0",created:1645342285685,text:"File Tree Down Right",expanded:!0,html:"<p>File Tree Down Right</p>"},style:{layout:"file-tree-down-right","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,connect:"arc"},children:[{data:{id:"ci0p5zhk5uw0",created:1645342294846,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}},{data:{id:"ci0p5zsixao0",created:1645342295509,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0p6k739nc0",created:1645342339925,html:"<p>File Tree Up Left</p>",expanded:!0,text:"File Tree Up Left"},style:{"text-underline":!1,"text-line-through":!1,layout:"file-tree-up-right","stroke-width":1,"font-size":12,connect:"arc"},children:[{data:{id:"ci0p6o1lzxs0",created:1645342348301,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0p6oez95k0",created:1645342349109,text:"",html:"<p><br></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"2432260252",expanded:!0,html:"<p>Vine Right Down</p>",text:"Vine Right Down"},style:{"font-size":12,"stroke-width":1,connect:"arc","text-underline":!1,"text-line-through":!1,layout:"vine-right-down"},children:[{data:{id:"5ad675c214",html:"",text:""},style:{"font-size":12,"stroke-width":1,connect:"arc","text-underline":!1,"text-line-through":!1}},{data:{id:"f857b05665",html:"",text:""},style:{"font-size":12,"stroke-width":1,connect:"arc","text-underline":!1,"text-line-through":!1}}]},{data:{id:"17c2559dae",expanded:!0,html:"<p>Vine Left Up</p>",text:"Vine Left Up"},style:{"font-size":12,"stroke-width":1,connect:"arc","text-underline":!1,"text-line-through":!1,layout:"vine-left-up"},children:[{data:{id:"e18b724e2e",expanded:!0,html:"",text:""},style:{"font-size":12,"stroke-width":1,connect:"arc","text-underline":!1,"text-line-through":!1},children:[]},{data:{id:"b5b36b398e",expanded:!0,html:"",text:""},style:{"font-size":12,"stroke-width":1,connect:"arc","text-underline":!1,"text-line-through":!1},children:[]}]},{data:{id:"ci0papauvl40",created:1645342664493,text:"Fishbone Right",expanded:!0,html:"<p>Fishbone Right</p>"},style:{layout:"fishbone-right","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12},children:[{data:{id:"ci0ph65i7co0",created:1645343171360,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0ph6ifwwg0",created:1645343172142,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0ph6roqn40",created:1645343172701,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0ph71vkvs0",created:1645343173317,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pap87ecg0",created:1645342664333,text:"Fishbone Left",expanded:!0,html:"<p>Fishbone Left</p>"},style:{layout:"fishbone-left","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12},children:[{data:{id:"ci0phgi5ubk0",created:1645343193893,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0phgqmpxs0",created:1645343194405,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0phhw23i00",created:1645343196910,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0phi5kxk80",created:1645343197486,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pap48auo0",created:1645342664093,text:"Timeline Right",expanded:!0,html:"<p>Timeline Right</p>"},style:{layout:"timeline-right","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12},children:[{data:{id:"ci0pi6sfcio0",created:1645343251110,text:"",html:"<p><br></p>",expanded:!0},style:{layout:"file-tree-down-right","stroke-width":1,"font-size":12},children:[]},{data:{id:"ci0pi70lyi80",created:1645343251605,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0paon0ofc0",created:1645342663052,text:"Timeline Left",html:"<p>Timeline Left</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,layout:"timeline-left","stroke-width":1,"font-size":12},children:[{data:{id:"ci0piftvn1s0",created:1645343270789,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0pk59mqd40",created:1645343404525,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pu8xnkyo0",created:1645344196150,text:"",html:"<p></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"custom-content-width":98.10859307656743,"stroke-width":1,"font-size":12},children:[{data:{id:"ci0putu7ra80",created:1645344241654,expanded:!0,html:"<p>Expand it</p>",text:"Expand it"},style:{layout:"vine-right-balanced","stroke-width":1,"font-size":12,connect:"arc","text-underline":!1,"text-line-through":!1},children:[{data:{id:"ci0pvm4obg80",created:1645344303237,text:"",html:"<p><br></p>",expanded:!0},style:{layout:"file-tree-down-right","stroke-width":1,"font-size":12},children:[{data:{id:"ci0pxoq92n40",created:1645344465623,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0py3tct5k0",created:1645344498462,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pxd78r000",created:1645344440529,text:"",html:"<p><br></p>",expanded:!0},style:{layout:"file-tree-up-left","stroke-width":1,"font-size":12},children:[{data:{id:"ci0py1xvjkg0",created:1645344494382,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0py2br2sg0",created:1645344495222,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pxmmfepc0",created:1645344461038,text:"",html:"<p><br></p>",expanded:!0},style:{layout:"fishbone-right","stroke-width":1,"font-size":12},children:[{data:{id:"ci0pycakm8o0",created:1645344516918,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0ugy3ashs0",created:1645357259362,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0ugzogje80",created:1645357262818,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0pycwsvrs0",created:1645344518262,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pxmwm1ko0",created:1645344461654,text:"",html:"<p><br></p>",expanded:!0},style:{layout:"timeline-right","stroke-width":1,"font-size":12},children:[{data:{id:"ci0pyl4wri80",created:1645344536166,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12,layout:"top"},children:[{data:{id:"2a7e31fd2c",html:"",text:"",expanded:!0},style:{"font-size":12,"stroke-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"cec211ad8c",html:"",text:""},style:{"font-size":12,"stroke-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"652288a0c2",html:"",text:""},style:{"font-size":12,"stroke-width":1,"text-underline":!1,"text-line-through":!1}}]}]},{data:{id:"ci0pylgxr5k0",created:1645344536894,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]}]}]},{data:{id:"ci1kawmbkr40",created:1645430134831,text:",.",html:"<p>,&nbsp;.&nbsp;</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"custom-content-width":166.3801243753274,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0p2i9wt9c0",created:1645342022285,text:"Connection",html:"<p>Connection</p>",expanded:!1},style:{"stroke-width":1,"connect-width":1,"font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,layout:"file-tree-down-balanced",connect:"arc",shape:"rect"},children:[{data:{id:"ci0plhytw9s0",created:1645343510534,text:"Arc",html:"<p>Arc</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"arc","stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0plthlsgw0",created:1645343535614,text:"",html:"",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0plu04fog0",created:1645343536734,text:"",html:"",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"custom-content-width":-18,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0plob6kmw0",created:1645343524342,text:"Bezier",expanded:!0,html:"<p>Bezier</p>"},style:{connect:"bezier","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0plykyzw00",created:1645343546702,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0plywct7k0",created:1645343547390,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pm4aknco0",created:1645343559134,text:"T",html:"<p>T</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"t","stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pm7rh4ow0",created:1645343566686,text:"",html:"",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"custom-content-width":1,"stroke-width":1,"font-size":12}},{data:{id:"ci0pm84fpfc0",created:1645343567470,text:"",html:"",expanded:!0},style:{"custom-content-width":-5,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pm92q5wg0",created:1645343569543,text:"Bracket",expanded:!0,html:"<p>Bracket</p>"},style:{connect:"bracket","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pmesfjlk0",created:1645343581981,text:"",html:"",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci45hi5157k0",created:1645693015081,text:"",html:"",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pmke6pr40",created:1645343594181,text:"Hayfork",html:"<p>Hayfork</p>",expanded:!0},style:{connect:"hayfork","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pmnaz3kw0",created:1645343600517,text:"",html:"",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}},{data:{id:"ci0pmnkidfs0",created:1645343601093,text:"",html:"",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pmsjn0m00",created:1645343611925,text:"Hayfork Rounded",html:"<p>Hayfork Rounded</p>",expanded:!0},style:{connect:"hayfork-rounded","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pmxgp9g00",created:1645343622631,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0pmxsunlc0",created:1645343623365,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pn06v3q80",created:1645343628566,text:"Fork",expanded:!0,html:"<p>Fork</p>"},style:{connect:"fork","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pn2xego00",created:1645343634525,text:"",html:"",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0pn3bfpbc0",created:1645343635373,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pn6z32tk0",created:1645343643333,text:"Fork Rounded",html:"<p>Fork Rounded</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"fork-rounded","stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pnaafp3c0",created:1645343650550,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0pnaicqu00",created:1645343651029,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pnen7ze00",created:1645343660030,text:"Y",html:"<p>Y</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"y","stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ci0pni0eix40",created:1645343667358,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ci0pniazybs0",created:1645343667998,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ciwv9y1250g0",created:1648609450400,text:"Parabola",html:"<p>Parabola</p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,connect:"parabola","stroke-width":1,"font-size":12,"custom-content-width":49,"text-align":"center"},children:[{data:{id:"ciwv9y123xk0",created:1648609450400,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}},{data:{id:"ciwv9y11ss00",created:1648609450400,text:"",html:"<p><br></p>",expanded:!0},style:{"stroke-width":1,"font-size":12}}]},{data:{id:"ci0pzjvbc800",created:1645344611774,text:"",html:"<p></p>",expanded:!0},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"custom-content-width":87.5,"stroke-width":1,"font-size":12}},{data:{id:"ci0qgkeee5c0",created:1645345945118,html:"<p></p>",expanded:!0,text:""},style:{"text-underline":!1,"text-line-through":!1,"custom-content-width":72,"stroke-width":1,"font-size":12}}]}]},{data:{id:"ci0ppwkhd0g0",created:1645343855775,text:"",html:"<p></p>",expanded:!1},style:{"stroke-width":2,"connect-width":2,"font-size":16,"font-family":"Barlow","font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,layout:"file-tree-down-right"},children:[{data:{id:"ci0pqg6yfb40",created:1645343898493,text:"",html:"<p></p>",expanded:!1},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-size":12,"connect-width":1,"stroke-width":1}},{data:{id:"ci0prydsml40",created:1645344016453,text:",",html:"<p>,&nbsp;</p>",expanded:!1},style:{"stroke-width":1,"connect-width":1,"font-size":12,"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,color:"#ffffff","fill-color":"#ffffff","custom-content-width":132}},{data:{id:"4b22a6067c",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"8cf3bb56cc",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"e9febe4535",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"8a6ca888a4",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"7c72a1a47e",html:"<p></p>",expanded:!1,text:""},style:{"font-family":"Barlow","font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"d9c49e6664",html:"<p>,  SVG </p>",text:",  SVG "},style:{"font-family":"Barlow","font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":207}},{data:{id:"6c71bec59c",html:'<p> 100 ,  Re-Layout ,  Shape , ,  <span style="font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);">&nbsp;Re-Layout &nbsp;</span> </p>',text:" 100 ,  Re-Layout ,  Shape , ,  Re-Layout  "},style:{"font-family":"Barlow","font-size":12,"stroke-width":1,"custom-content-width":207,"connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"cb15220935",html:"<p>, .  SVG </p>",text:", .  SVG "},style:{"font-family":"Barlow","font-size":12,"stroke-width":1,"custom-content-width":207,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]}]}]},{data:{id:"ci0q8e6fpug0",created:1645345304663,html:"<p>Rethink</p>",expanded:!0,text:"Rethink"},style:{"connect-width":4,"stroke-width":4,"font-family":'"Alegreya Sans SC"',"font-weight":"bold","text-underline":!1,"text-line-through":!1,"connect-color":"#8d7ac7"},children:[{data:{id:"ci0rlwy1ywo0",created:1645349185359,html:"<p></p>",expanded:!1,text:""},style:{"text-underline":!1,"text-line-through":!1,layout:"file-tree-down-right","stroke-width":2,"connect-width":2,"font-family":"Barlow"},children:[{data:{id:"cipj4bp3a800",created:1647864236951,html:"<p></p>",expanded:!1,text:""},style:{"text-underline":!1,"text-line-through":!1,"connect-width":1,"stroke-width":1,"text-align":"left","font-size":12,connect:"bracket",layout:"file-tree-down-right"},children:[{data:{id:"923017df92",html:"<p>, , .</p>",text:", , ."},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":141}},{data:{id:"3c7e4375b5",html:'<p><span style="font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);">.  - , </span></p>',text:".  - , "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"font-family":"Roboto, sans-serif","custom-content-width":141}},{data:{id:"2fb2096da3",html:"<p>, :</p>",expanded:!0,text:", :"},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":141,layout:"file-tree-down-right"},children:[{data:{id:"669f8000d1",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":132}},{data:{id:"8a61972051",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":132}}]}],expanded:!1},{data:{id:"ae09364df1",html:"<p></p>",expanded:!1,text:""},children:[{data:{id:"bb31754b13",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":236}},{data:{id:"30fe8282a7",html:"<p>, . , </p>",text:", . , "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":236,"line-height":1.3}}],style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,layout:"file-tree-down-right"}},{data:{id:"ff771aa4f6",html:"<p>Margin </p>",text:"Margin ",expanded:!1},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"0608d4f494",html:"<p> CSS ,  Margin , </p>",text:" CSS ,  Margin , "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":228}},{data:{id:"b9e5ba70fe",html:"<p>,  Margin,  Margin </p>",text:",  Margin,  Margin "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":228}}]},{data:{id:"283ea4aa28",html:"<p>Margin </p>",expanded:!1,text:"Margin "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"901c8a99f2",html:'<p>, , . <span style="font-family:Roboto, sans-serif;font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);"> Margin </span></p>',text:", , .  Margin "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":227}},{data:{id:"9a5dfee753",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,"custom-content-width":227,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1}}]},{data:{id:"1216c7af06",html:"<p></p>",text:"",expanded:!1},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"f96b3b2a3a",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":234}},{data:{id:"ae3f96319a",html:"<p>, , </p>",text:", , "},style:{"font-size":12,"stroke-width":1,"custom-content-width":234,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"b8712a5b94",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,"custom-content-width":234,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1}}]},{data:{id:"2188dc497b",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"3b1d3b376a",html:"<p>, , , . </p>",text:", , , . "},style:{"font-size":12,"stroke-width":1,connect:"bracket","connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":236}}]}],expanded:!1,summaries:[]},{data:{id:"ci0r286694o0",created:1645347642511,html:"<p></p>",expanded:!1,text:""},style:{"stroke-width":2,"connect-width":2,"font-family":"Barlow","text-underline":!1,"text-line-through":!1,layout:"file-tree-down-right",connect:"bezier"},children:[{data:{id:"9daa404b4f",html:"<p></p>",expanded:!0,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"0cce2166ec",html:"<p>lupos.paint</p>",hyperlink:"https://github.com/pucelle/lupos.paint",text:"lupos.paint"},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}},{data:{id:"7206058ae0",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"dbd3eb4e4c",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":206}},{data:{id:"34f15dfa83",html:"<p>, , . , </p>",text:", , . , "},style:{"font-size":12,"stroke-width":1,"custom-content-width":206,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]},{data:{id:"9bdbdaba38",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"83a5577877",html:"<p> Canvas , , </p>",text:" Canvas , , "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":205}}]},{data:{id:"fcf39ad796",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"ca240384c2",html:"<p> Canvas , , , </p>",text:" Canvas , , , "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":204}},{data:{id:"047630b542",html:"<p>C2 , , , , </p>",text:"C2 , , , , "},style:{"font-size":12,"stroke-width":1,"custom-content-width":204,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]},{data:{id:"042b367a1e",html:"",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"dd167f1eb2",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":204}},{data:{id:"a906011933",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,"custom-content-width":204,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]},{data:{id:"f2c2dca2bc",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"7759d51ef5",html:"<p> Canvas  API ,  Re-Layout</p>",text:" Canvas  API ,  Re-Layout"},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":204}},{data:{id:"b5ab2dd1a8",html:"<p>: </p>",text:": "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":204}}]}]},{data:{id:"4aad753b86",html:"<p></p>",expanded:!0,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"a497110927",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"a9ccee6fab",html:"<p>, . </p>",text:", . "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":227}}]},{data:{id:"eac95a8996",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"fdd89c9640",html:"<p>, </p>",text:", "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":227}},{data:{id:"12951e4200",html:"<p>, , ,  1/3  2/3 </p>",text:", , ,  1/3  2/3 "},style:{"font-size":12,"stroke-width":1,"custom-content-width":227,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]},{data:{id:"a7b8e07ad5",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"22e8d69544",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":228}},{data:{id:"2f51c01147",html:"<p> 0.5 , </p>",text:" 0.5 , "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"custom-content-width":228,"text-underline":!1,"text-line-through":!1}},{data:{id:"e84b6fbfbf",html:"<p></p>",text:"",expanded:!0},style:{"font-size":12,"stroke-width":1,"custom-content-width":84,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"8e8f0b8199",html:"<p>&lt; 1</p>",text:"< 1",expanded:!0},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"47d707bf0b",html:"<p> x.5 </p>",text:" x.5 ",expanded:!0},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,layout:"right"},children:[{data:{id:"ab989f819d",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]}]},{data:{id:"50a1aac57d",html:"<p>1 ~ 1.5</p>",expanded:!0,text:"1 ~ 1.5"},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"6d5800c507",html:'<p> <span style="font-family:Roboto, sans-serif;font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);"> x.5 </span> </p>',text:"  x.5  ",expanded:!0},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":84,layout:"right"},children:[{data:{id:"997797c940",html:"<p></p>",text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":110}}]}]},{data:{id:"9f7c4ea6cc",html:"<p>1.5 ~ 2</p>",expanded:!0,text:"1.5 ~ 2"},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"6372719097",html:"<p></p>",text:"",expanded:!0},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":84,layout:"right"},children:[{data:{id:"693f678f1d",html:"<p> 1px </p>",text:" 1px "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1}}]}]}]}]}]},{data:{id:"2712f94c09",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"civim80p6ds0",created:1648472178131,html:"<p> Latex&nbsp;,&nbsp;,&nbsp;</p>",expanded:!1,text:" Latex,,"},style:{"text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"connect-width":1,"custom-content-width":197},children:[],expanded:!1}]},{data:{id:"3510415984",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"ci38495axlk0",created:1645598880145,html:"<p> A4&nbsp;. </p>",expanded:!1,text:" A4. "},style:{"text-underline":!1,"text-line-through":!1,"stroke-width":1,"font-size":12,"connect-width":1,"custom-content-width":207},children:[],expanded:!1}]},{data:{id:"58bb687df1",html:"<p></p>",expanded:!1,text:""},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1},children:[{data:{id:"d5f3910f3a",html:'<p><span style="font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);">, . , , </span></p>',text:", . , , "},style:{"font-size":12,"stroke-width":1,"connect-width":1,"text-underline":!1,"text-line-through":!1,"custom-content-width":206,color:"rgb(31, 35, 40)","font-family":'-apple-system, BlinkMacSystemFont, "font-style:normal'}},{data:{id:"c5dfb4071e",html:'<p> <span style="font-family:-apple-system, BlinkMacSystemFont, &quot;font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);font-style:normal;font-weight:400;background-color:rgb(255, 255, 255);">&nbsp;,  WebGL  WebGPU </span></p>',text:" ,  WebGL  WebGPU "},style:{"font-family":'-apple-system, BlinkMacSystemFont, "font-style:normal',"font-size":12,color:"rgb(31, 35, 40)","stroke-width":1,"connect-width":1,"custom-content-width":206,"text-underline":!1,"text-line-through":!1}}]}],expanded:!1,summaries:[]}],expanded:!1}]},floatRoots:[],relLines:[{data:{id:"ciwved5d52o0",created:1648609796769,fromId:"ci0nvdvzh740",fromAngle:62.278782851512034,toId:"ci0nvdvzh740",toAngle:117.36217410298501,relativeControl2:{x:-17.661834813531634,y:67.36200307176654},relativeControl1:{x:19.39388562110051,y:66.20730253338729},html:"RelLine",text:"RelLine"},style:{"font-weight":"normal","font-style":"normal","text-underline":!1,"text-line-through":!1,"font-family":"Barlow","marker-end":"triangle","marker-start":"dot"}}],created:1645152007550,modified:1755222275601,watermark:{id:"chytpqpkhnk0",show:!1,config:{text:"Watermark Text",lineSpacing:100,textSpacing:80,angle:-30,textStyle:{color:"#999999",opacity:.2,fontSize:14}}},autoIncrementId:1655}};od.Customization.setExternalResourceOptions({iconURLs:dd}),(0,o.define)("mindmap-core-preview",class extends o.Component{constructor(){var t;super(...arguments),this.dataId=(null===(t=location.search.match(/\bid=([\w-]+)/))||void 0===t?void 0:t[1])||"mine"}async onCreated(){let t="localhost"===location.hostname||"127.0.0.1"===location.hostname;this.minderExported=new od({paperPadding:[10,260,10,10],alwaysKeepsTextEditorAlive:!0,willCacheData:!0,viewControlAfterPassiveSelected:"visible",expandedStateMode:t?"sync":"local"},{content:{"can-line-wrap":!1}}),this.minderExported.appendTo(this.el),this.minderExported.import(await this.getData()),window.minderExported=this.minderExported,this.shouldCacheAndRestore()?window.onbeforeunload=()=>{this.minderExported.dataCacher.save(),cd.storage.set("mindmap_data_id",this.minderExported.getId())}:t||(this.minderExported.status.setReadonly(),r.notification.info('This document is working on "readonly mode"!')),this.minderExported.on(["import","data-change","selection-change"],(()=>{(0,o.updateAllComponents)()}))}shouldCacheAndRestore(){return"mine"===this.dataId}async getData(){let t=cd.storage.get("mindmap_data_id");return this.shouldCacheAndRestore()&&await this.minderExported.dataCacher.hasCache(t)?await this.minderExported.dataCacher.getCache(t):ud[this.dataId]?ud[this.dataId]:{id:"962ced41-9828-4ab9-937f-dd84f369dfe9",created:1667528473117,modified:1667528473117,version:"2.1.0",style:{theme:{colorTheme:"anniversary-1"},root:{},floatRoot:{}},root:{data:{id:"1385b49a-e57b-416e-a586-7a0d659930d1",expanded:!0,text:"Hello, MindMap"}},floatRoots:[],relLines:[]}}render(){return o.html`
			<mm-configuration .minderExported=${this.minderExported} />
			<mm-exporter .minderExported=${this.minderExported} />
			<mm-zoom-show .minderExported=${this.minderExported} />
			<mm-birdeye-previewer .minderExported=${this.minderExported} />
			<mm-toolbar .minderExported=${this.minderExported} />
		`}}),(0,o.define)("mm-configuration",class extends o.Component{render(){return o.html`
		<template class="mm-configuration">
			${this.renderMapPart()}
			${this.renderNodePart()}
		</template>
		`}renderMapPart(){let t=this.minderExported.commands.canExec("NodeTextBold");return o.html`
			<mm-configuration-map
				.minderExported=${this.minderExported}
				:hide=${t||this.minderExported.status.isReadonly()}
			/>
		`}renderNodePart(){return o.html`
			<mm-configuration-node-shape
				.minderExported=${this.minderExported}
				:show=${this.minderExported.commands.canExec("NodeShape")}
			/>
			<mm-configuration-node-content
				.minderExported=${this.minderExported}
				:show=${this.minderExported.commands.canExec("Image")}
			/>
			<mm-configuration-node-text
				.minderExported=${this.minderExported}
				:show=${this.minderExported.commands.canExec("NodeTextAlign")}
			/>
			<mm-configuration-node-connect
				.minderExported=${this.minderExported}
				:show=${this.minderExported.commands.canExec("NodeConnect")}
			/>
			<mm-configuration-node-relline
				.minderExported=${this.minderExported}
				:show=${this.minderExported.commands.canExec("RelLineColor")}
			/>
		`}})})();
//# sourceMappingURL=bundle.js.map